<html>
<meta charset="utf-8"/>

<!-- ----------------------------------------------------- -->
<head>
<title>Clink v1.7.5</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Rambla:wght@400;700&family=Roboto&family=Fira+Mono&display=swap');
html {
    font: 12pt Roboto,Calibri,Arial,Helvetica,sans-serif;
    -ms-text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
}

body {
    padding-top: 3rem;
    width: 90%;
    margin: 0 auto;
}

code a {
    text-decoration: none;
}

code a:hover {
    text-decoration: underline;
}

a code:hover {
    text-decoration: underline;
}

.promo_box {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: 1rem 2rem;
    width: 100%;
}

.promo_block {
    flex:1 1 480px;
    background-color: #f8f8f8;
    border: 1px solid #ddd;
    border-radius: 0.2rem;
    padding-left: 1rem;
    padding-right: 1rem;
}

.wlink {
    opacity: 0%;
    width: 24px;
    position: absolute;
    margin-left: -24px;
    -webkit-user-select: none;
    user-select: none;
    text-decoration: none;
}

.uplinks {
    opacity: 0%;
    font-size: 0.80rem;
    font-weight: normal;
    -webkit-user-select: none;
    user-select: none;
    margin-left: 0.15rem;
    margin-right: 0.15rem;
}

.uplinks a {
    margin-right: 0.15rem;
}

.wfix {
    visibility: hidden;
    display: inline-block;
    width: 0px;
    -webkit-user-select: none;
    user-select: none;
}

h1:hover .wlink, h2:hover .wlink, h3:hover .wlink, h4:hover .wlink, h5:hover .wlink, h6:hover .wlink, td:hover .wlink { opacity: 100%; }
h1:focus-within .wlink, h2:focus-within .wlink, h3:focus-within .wlink, h4:focus-within .wlink, h5:focus-within .wlink, h6:focus-within .wlink, td:focus-within .wlink { opacity: 100%; }
h1:hover .uplinks, h2:hover .uplinks, h3:hover .uplinks, h4:hover .uplinks, h5:hover .uplinks, h6:hover .uplinks { opacity: 100%; }
h1:focus-within .uplinks, h2:focus-within .uplinks, h3:focus-within .uplinks, h4:focus-within .uplinks, h5:focus-within .uplinks, h6:focus-within .uplinks { opacity: 100%; }

.wlink:hover { opacity: 100%; text-decoration: underline; }
.wlink:focus-within { opacity: 100%; text-decoration: underline; }
.uplinks:hover { opacity: 100% }
.uplinks:focus-within { opacity: 100% }

h1, h2, h3, h4, h5, h6, dt { font-family: Rambla,Roboto,Calibri,Arial,Helvetica,sans-serif }

h1 {
    padding: 2rem 0 0 0;
    border-bottom: 0.15rem #3377cc solid;
    font-size: 2.30rem;
}

h2 {
    border-bottom: 0.075rem #3377cc dashed;
    font-size: 1.95rem;
}

h3 { font-size: 1.60rem; }
h4 { font-size: 1.35rem; }
h5 { font-size: 1.10rem; }
h6 { font-size: 1.00rem; }

h1, h2, h3, h4, h5, h6 {
    position: relative;
}

dt {
    font-family: Rambla,Roboto,Calibri,Arial,Helvetica,sans-serif;
    font-weight: 700;
    padding: 0 0 0.4rem 0;
}

.toppadding {
    padding: 0.6rem 0 0 0;
}

blockquote {
    display: block;
    padding: 0.1rem 1rem 0.1rem 1rem;
    margin: 0 0 1rem 0.4rem;
    box-shadow: 0.1rem 0.1rem 0.4rem #ccc;
    border-left-width: 0.4rem;
    border-left-style: solid;
    border-color: #3377cc;
}

fieldset {
    display: block;
    padding: 0.5rem 0.5rem 1rem 1rem;
    margin: 0 0 1rem;
    box-shadow: 0.1rem 0.1rem 0.4rem #ccc;
    border-radius: 0.4rem;
    border-style: solid;
    border-width: 0.15rem;
    border-color: #990000;
    background: #ffffee;
}

legend {
    font-weight: 600;
    padding: 0 0.3rem;
}

code {
    vertical-align: text-top;
    display: inline-block;
    font-family: "Fira Mono",monospace;
    font-size: 0.9rem;
    padding: 0px 0.2rem;
    margin: auto 0px;
    background-color: #eee;
    border: 1px solid #ddd;
    border-radius: 0.2rem;
}

pre {
    margin: 0.15rem 0.5rem;
    padding: 0;
}

pre code {
    border: none;
    padding: 8px;
    border-radius: inherit;
}

kbd {
    padding:1px 0.3rem;
    border-collapse:separate;
    border:0.05rem solid #ccc;
    font:0.8rem SFMono-Regular,Consolas,Liberation Mono,Menlo,monospace;
    background-color:#f8f8f8;
    color:#333;
    -moz-box-shadow:0 0.05rem 0px rgba(0, 0, 0, 0.2),0 0 0 0px #ffffff inset;
    -webkit-box-shadow:0 0.05rem 0px rgba(0, 0, 0, 0.2),0 0 0 0px #ffffff inset;
    box-shadow:0 0.05rem 0px rgba(0, 0, 0, 0.2),0 0 0 0px #ffffff inset;
    -moz-border-radius:0.3rem;
    -webkit-border-radius:0.3rem;
    border-radius:0.3rem;
    display:inline-block;
    margin:0 0.1rem;
    vertical-align:middle;
    transform:translateY(-5%);
    white-space:nowrap;
}

#content table:not(.linkmenu,.console) td:nth-child(1) {
    white-space: nowrap;
}

#content table:not(.linkmenu,.console) td:nth-child(1) code {
    border: none;
    padding: 0 0 0 0;
    border-radius: 0;
    background-color: transparent;
}

.linkmenu {
    border: none;
    background-color: transparent;
    margin-left: 2rem;
}

.console {
    border: none;
    color: #c0c0c0;
    background-color: transparent;
    font-size: 0.9rem;
    margin-left: 0;
    width: 100%;
}

.color_default { color: #c0c0c0 }

.color_arg { color: #ffffff }
.color_arginfo { color: #d78700 }
.color_argmatcher { color: #00d700 }
.color_cmd { color: #ffffff }
.color_cmdredir { color: #d78700 }
.color_cmdsep { color: #af5fff }
.color_description { color: #00afff }
.color_doskey { color: #5fafff }
.color_executable { color: #0087ff }
.color_flag { color: #87d7ff }
.color_input { color: #ffaf00 }
.color_suggestion { color: #808080 }
.color_unexpected { color: #c0c0c0 }
.color_unrecognized { color: #ff5f5f }
.color_comment_row { color: #00ffff; background-color: #000080; }

.right_gray {
    color: #d7d7d7;
    text-align:right;
    font-style:italic;
}

.cursor {
    animation: blinker 1s steps(1, end) infinite;
    color: #ffffff;
}
@keyframes blinker {
    0% { opacity: 1; }
    50% { opacity: 0; }
}

.section {
}

.deprecated {
    opacity: 0.5;
}

.comment-web-link {
    font-style: italic;
}

.colorsample {
    display:inline-block;
    border:1px solid lightgray;
    width:0.8rem;
    height:0.8rem;
    vertical-align:middle;
}

#header {
    float: right;
    text-align: right;
}

#header #title {
    font: 2.5rem Rambla,Roboto,Calibri,Arial,Helvetica,sans-serif;
    font-weight: bold;
}

#header #branch {
    font: 1.5rem Rambla,Roboto,Calibri,Arial,Helvetica,sans-serif;
    font-style: italic;
}

#header #url {
    margin-top: 0.5rem;
}

#content {
    clear: both;
}

#content table:not(.linkmenu,.console) {
    font-size: 1rem;
    margin: auto 5%;
    border-collapse: collapse;
}

#content pre, #api .show {
    border: 1px solid #ddd;
    border-radius: 0.4rem;
    background-color: #eee;
}

#content table:not(.linkmenu,.console) td, #content th {
    vertical-align: text-top;
    padding: 0.2rem 0.5rem;
}

#content th {
    background-color: #fff;
}

#content table:not(.linkmenu,.console,.grouplist) td {
    border: 1px solid #ddd;
}

#content table:not(.linkmenu,.console,.grouplist) tr:nth-child(odd) {
    background-color: #fbfbfb;
}

#content table:not(.linkmenu,.console,.grouplist) tr:nth-child(even) {
    background-color: #fff;
}

#content table.linkmenu td {
    padding-right: 1rem;
}

#content hr {
    border: 0;
    height: 1px;
    background-image: linear-gradient(to right, rgba(0,0,0,0), rgba(0,0,0,0.3), rgba(0,0,0,0.3), rgba(0,0,0,0.3), rgba(0,0,0,0));
    width: 80%;
    margin-top: 1.5rem;
    margin-bottom: 1.5rem;
}

#content .arg {
    white-space: nowrap;
    font-family: "Fira Mono",monospace;
    font-style: italic;
    font-size: 95%;
    opacity: 75%;
    padding-left: 0.125rem;
    padding-right: 0.125rem;
}

#content .arg_name {
    font-weight: bold;
}

#content .tablescheme {
    white-space: nowrap;
    font-family: "Fira Mono",monospace;
    font-style: italic;
    font-size: 95%;
    opacity: 75%;
    padding-left: 0.125rem;
    padding-right: 0.125rem;
}

#content ol li {
    padding-left: 0.5rem;
}

#content #api .group {
    margin-bottom: 1rem;
}

#content #api .grouplist {
    margin-left: 5rem;
    margin-bottom: 2rem;
}

#content #api .grouplist td {
    border: none;
    border-spacing: 0px;
    padding: 0px;
    padding-right: 2rem;
}

#content #api .body {
    margin-left: 3rem;
    margin-top: -0.5rem;
}

#content #api .header {
    display: flex;
    justify-content: space-between;
}

#content #api .header .name {
    font-weight: bold;
    position: relative;
    vertical-align: top;
    padding-right: 1rem;
}

#content #api .header:hover .wlink {
    opacity: 100%;
}

#content #api .header:hover .uplinks {
    opacity: 100%;
}

#content #api .header .signature {
    text-align: right;
    vertical-align: top;
}

#content #api .group_name {
    font-size: 1.1rem;
    font-weight: bold;
}

#content #api .function {
    margin-left: 2rem;
    margin-bottom: 1.0rem;
}

#content #api .version {
    font-size: 80%;
    color: #888;
    margin-top: 0.25rem;
}

#content #api .toc {
    margin-left: 2rem;
}

#content #api .show {
    white-space: pre;
    font-family: "Fira Mono",monospace;
}

.h2 {
    font-size: 80%;
    margin-left: 1rem;
}

[class^="hljs"] {
    font-family: "Fira Mono",monospace;
}
/*

Atom One Light by Daniel Gamage
Original One Light Syntax theme from https://github.com/atom/one-light-syntax

base:    #fafafa
mono-1:  #383a42
mono-2:  #686b77
mono-3:  #a0a1a7
hue-1:   #0184bb
hue-2:   #4078f2
hue-3:   #a626a4
hue-4:   #50a14f
hue-5:   #e45649
hue-5-2: #c91243
hue-6:   #986801
hue-6-2: #c18401

*/

.hljs {
  display: block;
  overflow-x: auto;
  padding: 0.5em;
  color: #383a42;
  background: #fafafa;
}

.hljs-comment,
.hljs-quote {
  color: #a0a1a7;
  font-style: italic;
}

.hljs-doctag,
.hljs-keyword,
.hljs-formula {
  color: #a626a4;
}

.hljs-section,
.hljs-name,
.hljs-selector-tag,
.hljs-deletion,
.hljs-subst {
  color: #e45649;
}

.hljs-literal {
  color: #0184bb;
}

.hljs-string,
.hljs-regexp,
.hljs-addition,
.hljs-attribute,
.hljs-meta-string {
  color: #50a14f;
}

.hljs-built_in,
.hljs-class .hljs-title {
  color: #c18401;
}

.hljs-attr,
.hljs-variable,
.hljs-template-variable,
.hljs-type,
.hljs-selector-class,
.hljs-selector-attr,
.hljs-selector-pseudo,
.hljs-number {
  color: #986801;
}

.hljs-symbol,
.hljs-bullet,
.hljs-link,
.hljs-meta,
.hljs-selector-id,
.hljs-title {
  color: #4078f2;
}

.hljs-emphasis {
  font-style: italic;
}

.hljs-strong {
  font-weight: bold;
}

.hljs-link {
  text-decoration: underline;
}
</style>
<script type="text/javascript">
/*
  Highlight.js 10.7.2 (00233d63)
  License: BSD-3-Clause
  Copyright (c) 2006-2021, Ivan Sagalaev
*/
var hljs=function(){"use strict";function e(t){
return t instanceof Map?t.clear=t.delete=t.set=()=>{
throw Error("map is read-only")}:t instanceof Set&&(t.add=t.clear=t.delete=()=>{
throw Error("set is read-only")
}),Object.freeze(t),Object.getOwnPropertyNames(t).forEach((n=>{var i=t[n]
;"object"!=typeof i||Object.isFrozen(i)||e(i)})),t}var t=e,n=e;t.default=n
;class i{constructor(e){
void 0===e.data&&(e.data={}),this.data=e.data,this.isMatchIgnored=!1}
ignoreMatch(){this.isMatchIgnored=!0}}function s(e){
return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")
}function a(e,...t){const n=Object.create(null);for(const t in e)n[t]=e[t]
;return t.forEach((e=>{for(const t in e)n[t]=e[t]})),n}const r=e=>!!e.kind
;class l{constructor(e,t){
this.buffer="",this.classPrefix=t.classPrefix,e.walk(this)}addText(e){
this.buffer+=s(e)}openNode(e){if(!r(e))return;let t=e.kind
;e.sublanguage||(t=`${this.classPrefix}${t}`),this.span(t)}closeNode(e){
r(e)&&(this.buffer+="</span>")}value(){return this.buffer}span(e){
this.buffer+=`<span class="${e}">`}}class o{constructor(){this.rootNode={
children:[]},this.stack=[this.rootNode]}get top(){
return this.stack[this.stack.length-1]}get root(){return this.rootNode}add(e){
this.top.children.push(e)}openNode(e){const t={kind:e,children:[]}
;this.add(t),this.stack.push(t)}closeNode(){
if(this.stack.length>1)return this.stack.pop()}closeAllNodes(){
for(;this.closeNode(););}toJSON(){return JSON.stringify(this.rootNode,null,4)}
walk(e){return this.constructor._walk(e,this.rootNode)}static _walk(e,t){
return"string"==typeof t?e.addText(t):t.children&&(e.openNode(t),
t.children.forEach((t=>this._walk(e,t))),e.closeNode(t)),e}static _collapse(e){
"string"!=typeof e&&e.children&&(e.children.every((e=>"string"==typeof e))?e.children=[e.children.join("")]:e.children.forEach((e=>{
o._collapse(e)})))}}class c extends o{constructor(e){super(),this.options=e}
addKeyword(e,t){""!==e&&(this.openNode(t),this.addText(e),this.closeNode())}
addText(e){""!==e&&this.add(e)}addSublanguage(e,t){const n=e.root
;n.kind=t,n.sublanguage=!0,this.add(n)}toHTML(){
return new l(this,this.options).value()}finalize(){return!0}}function g(e){
return e?"string"==typeof e?e:e.source:null}
const u=/\[(?:[^\\\]]|\\.)*\]|\(\??|\\([1-9][0-9]*)|\\./,h="[a-zA-Z]\\w*",d="[a-zA-Z_]\\w*",f="\\b\\d+(\\.\\d+)?",p="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",m="\\b(0b[01]+)",b={
begin:"\\\\[\\s\\S]",relevance:0},E={className:"string",begin:"'",end:"'",
illegal:"\\n",contains:[b]},x={className:"string",begin:'"',end:'"',
illegal:"\\n",contains:[b]},v={
begin:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|they|like|more)\b/
},w=(e,t,n={})=>{const i=a({className:"comment",begin:e,end:t,contains:[]},n)
;return i.contains.push(v),i.contains.push({className:"doctag",
begin:"(?:TODO|FIXME|NOTE|BUG|OPTIMIZE|HACK|XXX):",relevance:0}),i
},y=w("//","$"),N=w("/\\*","\\*/"),R=w("#","$");var _=Object.freeze({
__proto__:null,MATCH_NOTHING_RE:/\b\B/,IDENT_RE:h,UNDERSCORE_IDENT_RE:d,
NUMBER_RE:f,C_NUMBER_RE:p,BINARY_NUMBER_RE:m,
RE_STARTERS_RE:"!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",
SHEBANG:(e={})=>{const t=/^#![ ]*\//
;return e.binary&&(e.begin=((...e)=>e.map((e=>g(e))).join(""))(t,/.*\b/,e.binary,/\b.*/)),
a({className:"meta",begin:t,end:/$/,relevance:0,"on:begin":(e,t)=>{
0!==e.index&&t.ignoreMatch()}},e)},BACKSLASH_ESCAPE:b,APOS_STRING_MODE:E,
QUOTE_STRING_MODE:x,PHRASAL_WORDS_MODE:v,COMMENT:w,C_LINE_COMMENT_MODE:y,
C_BLOCK_COMMENT_MODE:N,HASH_COMMENT_MODE:R,NUMBER_MODE:{className:"number",
begin:f,relevance:0},C_NUMBER_MODE:{className:"number",begin:p,relevance:0},
BINARY_NUMBER_MODE:{className:"number",begin:m,relevance:0},CSS_NUMBER_MODE:{
className:"number",
begin:f+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",
relevance:0},REGEXP_MODE:{begin:/(?=\/[^/\n]*\/)/,contains:[{className:"regexp",
begin:/\//,end:/\/[gimuy]*/,illegal:/\n/,contains:[b,{begin:/\[/,end:/\]/,
relevance:0,contains:[b]}]}]},TITLE_MODE:{className:"title",begin:h,relevance:0
},UNDERSCORE_TITLE_MODE:{className:"title",begin:d,relevance:0},METHOD_GUARD:{
begin:"\\.\\s*[a-zA-Z_]\\w*",relevance:0},END_SAME_AS_BEGIN:e=>Object.assign(e,{
"on:begin":(e,t)=>{t.data._beginMatch=e[1]},"on:end":(e,t)=>{
t.data._beginMatch!==e[1]&&t.ignoreMatch()}})});function k(e,t){
"."===e.input[e.index-1]&&t.ignoreMatch()}function M(e,t){
t&&e.beginKeywords&&(e.begin="\\b("+e.beginKeywords.split(" ").join("|")+")(?!\\.)(?=\\b|\\s)",
e.__beforeBegin=k,e.keywords=e.keywords||e.beginKeywords,delete e.beginKeywords,
void 0===e.relevance&&(e.relevance=0))}function O(e,t){
Array.isArray(e.illegal)&&(e.illegal=((...e)=>"("+e.map((e=>g(e))).join("|")+")")(...e.illegal))
}function A(e,t){if(e.match){
if(e.begin||e.end)throw Error("begin & end are not supported with match")
;e.begin=e.match,delete e.match}}function L(e,t){
void 0===e.relevance&&(e.relevance=1)}
const I=["of","and","for","in","not","or","if","then","parent","list","value"]
;function j(e,t,n="keyword"){const i={}
;return"string"==typeof e?s(n,e.split(" ")):Array.isArray(e)?s(n,e):Object.keys(e).forEach((n=>{
Object.assign(i,j(e[n],t,n))})),i;function s(e,n){
t&&(n=n.map((e=>e.toLowerCase()))),n.forEach((t=>{const n=t.split("|")
;i[n[0]]=[e,B(n[0],n[1])]}))}}function B(e,t){
return t?Number(t):(e=>I.includes(e.toLowerCase()))(e)?0:1}
function T(e,{plugins:t}){function n(t,n){
return RegExp(g(t),"m"+(e.case_insensitive?"i":"")+(n?"g":""))}class i{
constructor(){
this.matchIndexes={},this.regexes=[],this.matchAt=1,this.position=0}
addRule(e,t){
t.position=this.position++,this.matchIndexes[this.matchAt]=t,this.regexes.push([t,e]),
this.matchAt+=(e=>RegExp(e.toString()+"|").exec("").length-1)(e)+1}compile(){
0===this.regexes.length&&(this.exec=()=>null)
;const e=this.regexes.map((e=>e[1]));this.matcherRe=n(((e,t="|")=>{let n=0
;return e.map((e=>{n+=1;const t=n;let i=g(e),s="";for(;i.length>0;){
const e=u.exec(i);if(!e){s+=i;break}
s+=i.substring(0,e.index),i=i.substring(e.index+e[0].length),
"\\"===e[0][0]&&e[1]?s+="\\"+(Number(e[1])+t):(s+=e[0],"("===e[0]&&n++)}return s
})).map((e=>`(${e})`)).join(t)})(e),!0),this.lastIndex=0}exec(e){
this.matcherRe.lastIndex=this.lastIndex;const t=this.matcherRe.exec(e)
;if(!t)return null
;const n=t.findIndex(((e,t)=>t>0&&void 0!==e)),i=this.matchIndexes[n]
;return t.splice(0,n),Object.assign(t,i)}}class s{constructor(){
this.rules=[],this.multiRegexes=[],
this.count=0,this.lastIndex=0,this.regexIndex=0}getMatcher(e){
if(this.multiRegexes[e])return this.multiRegexes[e];const t=new i
;return this.rules.slice(e).forEach((([e,n])=>t.addRule(e,n))),
t.compile(),this.multiRegexes[e]=t,t}resumingScanAtSamePosition(){
return 0!==this.regexIndex}considerAll(){this.regexIndex=0}addRule(e,t){
this.rules.push([e,t]),"begin"===t.type&&this.count++}exec(e){
const t=this.getMatcher(this.regexIndex);t.lastIndex=this.lastIndex
;let n=t.exec(e)
;if(this.resumingScanAtSamePosition())if(n&&n.index===this.lastIndex);else{
const t=this.getMatcher(0);t.lastIndex=this.lastIndex+1,n=t.exec(e)}
return n&&(this.regexIndex+=n.position+1,
this.regexIndex===this.count&&this.considerAll()),n}}
if(e.compilerExtensions||(e.compilerExtensions=[]),
e.contains&&e.contains.includes("self"))throw Error("ERR: contains `self` is not supported at the top-level of a language.  See documentation.")
;return e.classNameAliases=a(e.classNameAliases||{}),function t(i,r){const l=i
;if(i.isCompiled)return l
;[A].forEach((e=>e(i,r))),e.compilerExtensions.forEach((e=>e(i,r))),
i.__beforeBegin=null,[M,O,L].forEach((e=>e(i,r))),i.isCompiled=!0;let o=null
;if("object"==typeof i.keywords&&(o=i.keywords.$pattern,
delete i.keywords.$pattern),
i.keywords&&(i.keywords=j(i.keywords,e.case_insensitive)),
i.lexemes&&o)throw Error("ERR: Prefer `keywords.$pattern` to `mode.lexemes`, BOTH are not allowed. (see mode reference) ")
;return o=o||i.lexemes||/\w+/,
l.keywordPatternRe=n(o,!0),r&&(i.begin||(i.begin=/\B|\b/),
l.beginRe=n(i.begin),i.endSameAsBegin&&(i.end=i.begin),
i.end||i.endsWithParent||(i.end=/\B|\b/),
i.end&&(l.endRe=n(i.end)),l.terminatorEnd=g(i.end)||"",
i.endsWithParent&&r.terminatorEnd&&(l.terminatorEnd+=(i.end?"|":"")+r.terminatorEnd)),
i.illegal&&(l.illegalRe=n(i.illegal)),
i.contains||(i.contains=[]),i.contains=[].concat(...i.contains.map((e=>(e=>(e.variants&&!e.cachedVariants&&(e.cachedVariants=e.variants.map((t=>a(e,{
variants:null},t)))),e.cachedVariants?e.cachedVariants:S(e)?a(e,{
starts:e.starts?a(e.starts):null
}):Object.isFrozen(e)?a(e):e))("self"===e?i:e)))),i.contains.forEach((e=>{t(e,l)
})),i.starts&&t(i.starts,r),l.matcher=(e=>{const t=new s
;return e.contains.forEach((e=>t.addRule(e.begin,{rule:e,type:"begin"
}))),e.terminatorEnd&&t.addRule(e.terminatorEnd,{type:"end"
}),e.illegal&&t.addRule(e.illegal,{type:"illegal"}),t})(l),l}(e)}function S(e){
return!!e&&(e.endsWithParent||S(e.starts))}function P(e){const t={
props:["language","code","autodetect"],data:()=>({detectedLanguage:"",
unknownLanguage:!1}),computed:{className(){
return this.unknownLanguage?"":"hljs "+this.detectedLanguage},highlighted(){
if(!this.autoDetect&&!e.getLanguage(this.language))return console.warn(`The language "${this.language}" you specified could not be found.`),
this.unknownLanguage=!0,s(this.code);let t={}
;return this.autoDetect?(t=e.highlightAuto(this.code),
this.detectedLanguage=t.language):(t=e.highlight(this.language,this.code,this.ignoreIllegals),
this.detectedLanguage=this.language),t.value},autoDetect(){
return!(this.language&&(e=this.autodetect,!e&&""!==e));var e},
ignoreIllegals:()=>!0},render(e){return e("pre",{},[e("code",{
class:this.className,domProps:{innerHTML:this.highlighted}})])}};return{
Component:t,VuePlugin:{install(e){e.component("highlightjs",t)}}}}const D={
"after:highlightElement":({el:e,result:t,text:n})=>{const i=H(e)
;if(!i.length)return;const a=document.createElement("div")
;a.innerHTML=t.value,t.value=((e,t,n)=>{let i=0,a="";const r=[];function l(){
return e.length&&t.length?e[0].offset!==t[0].offset?e[0].offset<t[0].offset?e:t:"start"===t[0].event?e:t:e.length?e:t
}function o(e){a+="<"+C(e)+[].map.call(e.attributes,(function(e){
return" "+e.nodeName+'="'+s(e.value)+'"'})).join("")+">"}function c(e){
a+="</"+C(e)+">"}function g(e){("start"===e.event?o:c)(e.node)}
for(;e.length||t.length;){let t=l()
;if(a+=s(n.substring(i,t[0].offset)),i=t[0].offset,t===e){r.reverse().forEach(c)
;do{g(t.splice(0,1)[0]),t=l()}while(t===e&&t.length&&t[0].offset===i)
;r.reverse().forEach(o)
}else"start"===t[0].event?r.push(t[0].node):r.pop(),g(t.splice(0,1)[0])}
return a+s(n.substr(i))})(i,H(a),n)}};function C(e){
return e.nodeName.toLowerCase()}function H(e){const t=[];return function e(n,i){
for(let s=n.firstChild;s;s=s.nextSibling)3===s.nodeType?i+=s.nodeValue.length:1===s.nodeType&&(t.push({
event:"start",offset:i,node:s}),i=e(s,i),C(s).match(/br|hr|img|input/)||t.push({
event:"stop",offset:i,node:s}));return i}(e,0),t}const $={},U=e=>{
console.error(e)},z=(e,...t)=>{console.log("WARN: "+e,...t)},K=(e,t)=>{
$[`${e}/${t}`]||(console.log(`Deprecated as of ${e}. ${t}`),$[`${e}/${t}`]=!0)
},G=s,V=a,W=Symbol("nomatch");return(e=>{
const n=Object.create(null),s=Object.create(null),a=[];let r=!0
;const l=/(^(<[^>]+>|\t|)+|\n)/gm,o="Could not find the language '{}', did you forget to load/include a language module?",g={
disableAutodetect:!0,name:"Plain text",contains:[]};let u={
noHighlightRe:/^(no-?highlight)$/i,
languageDetectRe:/\blang(?:uage)?-([\w-]+)\b/i,classPrefix:"hljs-",
tabReplace:null,useBR:!1,languages:null,__emitter:c};function h(e){
return u.noHighlightRe.test(e)}function d(e,t,n,i){let s="",a=""
;"object"==typeof t?(s=e,
n=t.ignoreIllegals,a=t.language,i=void 0):(K("10.7.0","highlight(lang, code, ...args) has been deprecated."),
K("10.7.0","Please use highlight(code, options) instead.\nhttps://github.com/highlightjs/highlight.js/issues/2277"),
a=e,s=t);const r={code:s,language:a};M("before:highlight",r)
;const l=r.result?r.result:f(r.language,r.code,n,i)
;return l.code=r.code,M("after:highlight",l),l}function f(e,t,s,l){
function c(e,t){const n=v.case_insensitive?t[0].toLowerCase():t[0]
;return Object.prototype.hasOwnProperty.call(e.keywords,n)&&e.keywords[n]}
function g(){null!=R.subLanguage?(()=>{if(""===M)return;let e=null
;if("string"==typeof R.subLanguage){
if(!n[R.subLanguage])return void k.addText(M)
;e=f(R.subLanguage,M,!0,_[R.subLanguage]),_[R.subLanguage]=e.top
}else e=p(M,R.subLanguage.length?R.subLanguage:null)
;R.relevance>0&&(O+=e.relevance),k.addSublanguage(e.emitter,e.language)
})():(()=>{if(!R.keywords)return void k.addText(M);let e=0
;R.keywordPatternRe.lastIndex=0;let t=R.keywordPatternRe.exec(M),n="";for(;t;){
n+=M.substring(e,t.index);const i=c(R,t);if(i){const[e,s]=i
;if(k.addText(n),n="",O+=s,e.startsWith("_"))n+=t[0];else{
const n=v.classNameAliases[e]||e;k.addKeyword(t[0],n)}}else n+=t[0]
;e=R.keywordPatternRe.lastIndex,t=R.keywordPatternRe.exec(M)}
n+=M.substr(e),k.addText(n)})(),M=""}function h(e){
return e.className&&k.openNode(v.classNameAliases[e.className]||e.className),
R=Object.create(e,{parent:{value:R}}),R}function d(e,t,n){let s=((e,t)=>{
const n=e&&e.exec(t);return n&&0===n.index})(e.endRe,n);if(s){if(e["on:end"]){
const n=new i(e);e["on:end"](t,n),n.isMatchIgnored&&(s=!1)}if(s){
for(;e.endsParent&&e.parent;)e=e.parent;return e}}
if(e.endsWithParent)return d(e.parent,t,n)}function m(e){
return 0===R.matcher.regexIndex?(M+=e[0],1):(I=!0,0)}function b(e){
const n=e[0],i=t.substr(e.index),s=d(R,e,i);if(!s)return W;const a=R
;a.skip?M+=n:(a.returnEnd||a.excludeEnd||(M+=n),g(),a.excludeEnd&&(M=n));do{
R.className&&k.closeNode(),R.skip||R.subLanguage||(O+=R.relevance),R=R.parent
}while(R!==s.parent)
;return s.starts&&(s.endSameAsBegin&&(s.starts.endRe=s.endRe),
h(s.starts)),a.returnEnd?0:n.length}let E={};function x(n,a){const l=a&&a[0]
;if(M+=n,null==l)return g(),0
;if("begin"===E.type&&"end"===a.type&&E.index===a.index&&""===l){
if(M+=t.slice(a.index,a.index+1),!r){const t=Error("0 width match regex")
;throw t.languageName=e,t.badRule=E.rule,t}return 1}
if(E=a,"begin"===a.type)return function(e){
const t=e[0],n=e.rule,s=new i(n),a=[n.__beforeBegin,n["on:begin"]]
;for(const n of a)if(n&&(n(e,s),s.isMatchIgnored))return m(t)
;return n&&n.endSameAsBegin&&(n.endRe=RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"m")),
n.skip?M+=t:(n.excludeBegin&&(M+=t),
g(),n.returnBegin||n.excludeBegin||(M=t)),h(n),n.returnBegin?0:t.length}(a)
;if("illegal"===a.type&&!s){
const e=Error('Illegal lexeme "'+l+'" for mode "'+(R.className||"<unnamed>")+'"')
;throw e.mode=R,e}if("end"===a.type){const e=b(a);if(e!==W)return e}
if("illegal"===a.type&&""===l)return 1
;if(L>1e5&&L>3*a.index)throw Error("potential infinite loop, way more iterations than matches")
;return M+=l,l.length}const v=N(e)
;if(!v)throw U(o.replace("{}",e)),Error('Unknown language: "'+e+'"')
;const w=T(v,{plugins:a});let y="",R=l||w;const _={},k=new u.__emitter(u);(()=>{
const e=[];for(let t=R;t!==v;t=t.parent)t.className&&e.unshift(t.className)
;e.forEach((e=>k.openNode(e)))})();let M="",O=0,A=0,L=0,I=!1;try{
for(R.matcher.considerAll();;){
L++,I?I=!1:R.matcher.considerAll(),R.matcher.lastIndex=A
;const e=R.matcher.exec(t);if(!e)break;const n=x(t.substring(A,e.index),e)
;A=e.index+n}return x(t.substr(A)),k.closeAllNodes(),k.finalize(),y=k.toHTML(),{
relevance:Math.floor(O),value:y,language:e,illegal:!1,emitter:k,top:R}}catch(n){
if(n.message&&n.message.includes("Illegal"))return{illegal:!0,illegalBy:{
msg:n.message,context:t.slice(A-100,A+100),mode:n.mode},sofar:y,relevance:0,
value:G(t),emitter:k};if(r)return{illegal:!1,relevance:0,value:G(t),emitter:k,
language:e,top:R,errorRaised:n};throw n}}function p(e,t){
t=t||u.languages||Object.keys(n);const i=(e=>{const t={relevance:0,
emitter:new u.__emitter(u),value:G(e),illegal:!1,top:g}
;return t.emitter.addText(e),t})(e),s=t.filter(N).filter(k).map((t=>f(t,e,!1)))
;s.unshift(i);const a=s.sort(((e,t)=>{
if(e.relevance!==t.relevance)return t.relevance-e.relevance
;if(e.language&&t.language){if(N(e.language).supersetOf===t.language)return 1
;if(N(t.language).supersetOf===e.language)return-1}return 0})),[r,l]=a,o=r
;return o.second_best=l,o}const m={"before:highlightElement":({el:e})=>{
u.useBR&&(e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ /]*>/g,"\n"))
},"after:highlightElement":({result:e})=>{
u.useBR&&(e.value=e.value.replace(/\n/g,"&lt;br&gt;"))}},b=/^(<[^>]+>|\t)+/gm,E={
"after:highlightElement":({result:e})=>{
u.tabReplace&&(e.value=e.value.replace(b,(e=>e.replace(/\t/g,u.tabReplace))))}}
;function x(e){let t=null;const n=(e=>{let t=e.className+" "
;t+=e.parentNode?e.parentNode.className:"";const n=u.languageDetectRe.exec(t)
;if(n){const t=N(n[1])
;return t||(z(o.replace("{}",n[1])),z("Falling back to no-highlight mode for this block.",e)),
t?n[1]:"no-highlight"}return t.split(/\s+/).find((e=>h(e)||N(e)))})(e)
;if(h(n))return;M("before:highlightElement",{el:e,language:n}),t=e
;const i=t.textContent,a=n?d(i,{language:n,ignoreIllegals:!0}):p(i)
;M("after:highlightElement",{el:e,result:a,text:i
}),e.innerHTML=a.value,((e,t,n)=>{const i=t?s[t]:n
;e.classList.add("hljs"),i&&e.classList.add(i)})(e,n,a.language),e.result={
language:a.language,re:a.relevance,relavance:a.relevance
},a.second_best&&(e.second_best={language:a.second_best.language,
re:a.second_best.relevance,relavance:a.second_best.relevance})}const v=()=>{
v.called||(v.called=!0,
K("10.6.0","initHighlighting() is deprecated.  Use highlightAll() instead."),
document.querySelectorAll("pre code").forEach(x))};let w=!1;function y(){
"loading"!==document.readyState?document.querySelectorAll("pre code").forEach(x):w=!0
}function N(e){return e=(e||"").toLowerCase(),n[e]||n[s[e]]}
function R(e,{languageName:t}){"string"==typeof e&&(e=[e]),e.forEach((e=>{
s[e.toLowerCase()]=t}))}function k(e){const t=N(e)
;return t&&!t.disableAutodetect}function M(e,t){const n=e;a.forEach((e=>{
e[n]&&e[n](t)}))}
"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("DOMContentLoaded",(()=>{
w&&y()}),!1),Object.assign(e,{highlight:d,highlightAuto:p,highlightAll:y,
fixMarkup:e=>{
return K("10.2.0","fixMarkup will be removed entirely in v11.0"),K("10.2.0","Please see https://github.com/highlightjs/highlight.js/issues/2534"),
t=e,
u.tabReplace||u.useBR?t.replace(l,(e=>"\n"===e?u.useBR?"&lt;br&gt;":e:u.tabReplace?e.replace(/\t/g,u.tabReplace):e)):t
;var t},highlightElement:x,
highlightBlock:e=>(K("10.7.0","highlightBlock will be removed entirely in v12.0"),
K("10.7.0","Please use highlightElement now."),x(e)),configure:e=>{
e.useBR&&(K("10.3.0","'useBR' will be removed entirely in v11.0"),
K("10.3.0","Please see https://github.com/highlightjs/highlight.js/issues/2559")),
u=V(u,e)},initHighlighting:v,initHighlightingOnLoad:()=>{
K("10.6.0","initHighlightingOnLoad() is deprecated.  Use highlightAll() instead."),
w=!0},registerLanguage:(t,i)=>{let s=null;try{s=i(e)}catch(e){
if(U("Language definition for '{}' could not be registered.".replace("{}",t)),
!r)throw e;U(e),s=g}
s.name||(s.name=t),n[t]=s,s.rawDefinition=i.bind(null,e),s.aliases&&R(s.aliases,{
languageName:t})},unregisterLanguage:e=>{delete n[e]
;for(const t of Object.keys(s))s[t]===e&&delete s[t]},
listLanguages:()=>Object.keys(n),getLanguage:N,registerAliases:R,
requireLanguage:e=>{
K("10.4.0","requireLanguage will be removed entirely in v11."),
K("10.4.0","Please see https://github.com/highlightjs/highlight.js/pull/2844")
;const t=N(e);if(t)return t
;throw Error("The '{}' language is required, but not loaded.".replace("{}",e))},
autoDetection:k,inherit:V,addPlugin:e=>{(e=>{
e["before:highlightBlock"]&&!e["before:highlightElement"]&&(e["before:highlightElement"]=t=>{
e["before:highlightBlock"](Object.assign({block:t.el},t))
}),e["after:highlightBlock"]&&!e["after:highlightElement"]&&(e["after:highlightElement"]=t=>{
e["after:highlightBlock"](Object.assign({block:t.el},t))})})(e),a.push(e)},
vuePlugin:P(e).VuePlugin}),e.debugMode=()=>{r=!1},e.safeMode=()=>{r=!0
},e.versionString="10.7.2";for(const e in _)"object"==typeof _[e]&&t(_[e])
;return Object.assign(e,_),e.addPlugin(m),e.addPlugin(D),e.addPlugin(E),e})({})
}();"object"==typeof exports&&"undefined"!=typeof module&&(module.exports=hljs);hljs.registerLanguage("lua",(()=>{"use strict";return e=>{
const t="\\[=*\\[",a="\\]=*\\]",n={begin:t,end:a,contains:["self"]
},o=[e.COMMENT("--(?!\\[=*\\[)","$"),e.COMMENT("--\\[=*\\[",a,{contains:[n],
relevance:10})];return{name:"Lua",keywords:{$pattern:e.UNDERSCORE_IDENT_RE,
literal:"true false nil",
keyword:"and break do else elseif end for goto if in local not or repeat return then until while",
built_in:"_G _ENV _VERSION __index __newindex __mode __call __metatable __tostring __len __gc __add __sub __mul __div __mod __pow __concat __unm __eq __lt __le assert collectgarbage dofile error getfenv getmetatable ipairs load loadfile loadstring module next pairs pcall print rawequal rawget rawset require select setfenv setmetatable tonumber tostring type unpack xpcall arg self coroutine resume yield status wrap create running debug getupvalue debug sethook getmetatable gethook setmetatable setlocal traceback setfenv getinfo setupvalue getlocal getregistry getfenv io lines write close flush open output type read stderr stdin input stdout popen tmpfile math log max acos huge ldexp pi cos tanh pow deg tan cosh sinh random randomseed frexp ceil floor rad abs sqrt modf asin min mod fmod log10 atan2 exp sin atan os exit setlocale date getenv difftime remove time clock tmpname rename execute package preload loadlib loaded loaders cpath config path seeall string sub upper len gfind rep find match char dump gmatch reverse byte format gsub lower table setn insert getn foreachi maxn foreach concat sort remove"
},contains:o.concat([{className:"function",beginKeywords:"function",end:"\\)",
contains:[e.inherit(e.TITLE_MODE,{
begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),{className:"params",
begin:"\\(",endsWithParent:!0,contains:o}].concat(o)
},e.C_NUMBER_MODE,e.APOS_STRING_MODE,e.QUOTE_STRING_MODE,{className:"string",
begin:t,end:a,contains:[n],relevance:5}])}}})());hljs.registerLanguage("dos",(()=>{"use strict";return e=>{
const t=e.COMMENT(/^\s*@?rem\b/,/$/,{relevance:10});return{
name:"Batch file (DOS)",aliases:["bat","cmd"],case_insensitive:!0,
illegal:/\/\*/,keywords:{
keyword:"if else goto for in do call exit not exist errorlevel defined equ neq lss leq gtr geq",
built_in:"prn nul lpt3 lpt2 lpt1 con com4 com3 com2 com1 aux shift cd dir echo setlocal endlocal set pause copy append assoc at attrib break cacls cd chcp chdir chkdsk chkntfs cls cmd color comp compact convert date dir diskcomp diskcopy doskey erase fs find findstr format ftype graftabl help keyb label md mkdir mode more move path pause print popd pushd promt rd recover rem rename replace restore rmdir shift sort start subst time title tree type ver verify vol ping net ipconfig taskkill xcopy ren del"
},contains:[{className:"variable",begin:/%%[^ ]|%[^ ]+?%|![^ ]+?!/},{
className:"function",begin:"^\\s*[A-Za-z._?][A-Za-z0-9_$#@~.?]*(:|\\s+label)",
end:"goto:eof",contains:[e.inherit(e.TITLE_MODE,{
begin:"([_a-zA-Z]\\w*\\.)*([_a-zA-Z]\\w*:)?[_a-zA-Z]\\w*"}),t]},{
className:"number",begin:"\\b\\d+",relevance:0},t]}}})());hljs.registerLanguage("plaintext",(()=>{"use strict";return t=>({
name:"Plain text",aliases:["text","txt"],disableAutodetect:!0})})());

    function go()
    {
        // Apply syntax highlighting.
        const COMMENT=hljs.COMMENT("#", "$");
        const STRING={className:'string',begin:'"',end:'"',contains:[hljs.BACKSLASH_ESCAPE]};
        const OPERATOR={className:'name',begin:/\:/};
        const PREPROCESSOR={className:'meta',begin:/\$[a-z]+\b/,end:/$/,keywords:{keyword:'$if $else $endif $include'},contains:[{begin:/\\\n/,relevance:0},COMMENT]};
        const INPUTRC={name:"inputrc",case_insensitive:true,keywords:{keyword:"set",literal:"on off true false"},contains:[COMMENT,STRING,OPERATOR,PREPROCESSOR]};
        hljs.registerLanguage("inputrc",function(){"use strict";return function(e){return INPUTRC}}());
        hljs.initHighlighting();

        // Fix hyperlink styling inside highlighted comments.
        var source_links = document.querySelectorAll("a > span");
        for (var i = 0; i < source_links.length; ++i)
        {
            var e = source_links[i];
            e.classList.replace("hljs-comment", "comment-web-link");
        }
    }
</script>
</head>

<!-- ----------------------------------------------------- -->
<body onload="go();">
    <table width="100%" style="border:none"><tr>
        <td style="text-align:left">
            <div id="toc">
<div><a class="h1" href="#what-is-clink">What is Clink?</a></div>
<div><a class="h1" href="#usage">Usage</a></div>
<div><a class="h1" href="#getting-started">Getting Started</a></div>
<div><a class="h2" href="#how-completion-works">How Completion Works</a></div>
<div><a class="h2" href="#common-configuration">Common Configuration</a></div>
<div><a class="h2" href="#upgrading-from-clink-v049">Upgrading from Clink v0.4.9</a></div>
<div><a class="h1" href="#configuring-clink">Configuring Clink</a></div>
<div><a class="h2" href="#clink-settings">Clink Settings</a></div>
<div><a class="h2" href="#color-settings">Color Settings</a></div>
<div><a class="h2" href="#custom-prompts">Custom Prompts</a></div>
<div><a class="h2" href="#file-locations">File Locations</a></div>
<div><a class="h2" href="#command-line-options">Command Line Options</a></div>
<div><a class="h2" href="#automatic-updates">Automatic Updates</a></div>
<div><a class="h2" href="#portable-configuration">Portable Configuration</a></div>
<div><a class="h1" href="#configuring-readline">Configuring Readline</a></div>
<div><a class="h2" href="#the-basics">The Basics</a></div>
<div><a class="h2" href="#init-file">Init File</a></div>
<div><a class="h2" href="#bindable-commands">Bindable Commands</a></div>
<div><a class="h2" href="#completion-colors">Completion Colors</a></div>
<div><a class="h2" href="#popup-windows">Popup Windows</a></div>
<div><a class="h1" href="#extending-clink-with-lua">Extending Clink With Lua</a></div>
<div><a class="h2" href="#location-of-lua-scripts">Location of Lua Scripts</a></div>
<div><a class="h2" href="#writing-lua-scripts">Writing Lua Scripts</a></div>
<div><a class="h2" href="#argument-completion">Argument Completion</a></div>
<div><a class="h2" href="#match-generators">Match Generators</a></div>
<div><a class="h2" href="#coloring-the-input-text">Coloring the Input Text</a></div>
<div><a class="h2" href="#customizing-the-prompt">Customizing the Prompt</a></div>
<div><a class="h2" href="#customizing-suggestions">Customizing Suggestions</a></div>
<div><a class="h2" href="#showing-input-hints">Showing Input Hints</a></div>
<div><a class="h1" href="#miscellaneous">Miscellaneous</a></div>
<div><a class="h2" href="#customizing-key-bindings">Customizing Key Bindings</a></div>
<div><a class="h2" href="#saved-command-history">Saved Command History</a></div>
<div><a class="h2" href="#using-history-expansion">Using History Expansion</a></div>
<div><a class="h2" href="#directory-shortcuts">Directory Shortcuts</a></div>
<div><a class="h2" href="#enhanced-doskey-expansion">Enhanced Doskey Expansion</a></div>
<div><a class="h2" href="#popular-scripts">Popular Scripts</a></div>
<div><a class="h2" href="#terminal-support">Terminal Support</a></div>
<div><a class="h2" href="#how-clink-works">How Clink Works</a></div>
<div><a class="h2" href="#troubleshooting-tips">Troubleshooting Tips</a></div>
<div><a class="h2" href="#privacy">Privacy</a></div>
<div><a class="h1" href="#lua-api">Lua API Reference</a></div>
<div><a class="h1" href="#changes">Changes</a></div>
<div><a class="h1" href="#license">License</a></div>
<div><a class="h1" href="#credits">Credits</a></div>
            </div>
        </td>
        <td style="text-align:right">
            <div id="header">
                <div id="title">Clink v1.7.5</div>
                <div id="branch"></div>
                <div id="url">
                    <a href="https://github.com/chrisant996/clink">
                        https://github.com/chrisant996/clink
                    </a>
                </div>
                <div id="author">
                    <a href="mailto:sparrowhawk996@gmail.com">Christopher Antos</a> (renovater)
                </div>
                <div id="author">
                    <a href="https://twitter.com/choddlander">Martin Ridgers</a> (creator)
                </div>
            </div>
        </td>
    </tr></table>
    <div id="content">
        <div class="section" id="documentation">
<h1 id="what-is-clink"><a class="wlink" href="#what-is-clink"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>What is Clink? <span class="uplinks"><a href="#toc">top</a></span></h1>
<p>Clink combines the native Windows shell cmd.exe with the powerful command line editing features of the GNU Readline library, which provides rich completion, history, and line-editing capabilities. Readline is best known for its use in the Unix shell Bash, the standard shell for many Linux distributions.</p>
<p><a name="features"></a></p>
<h3 id="feature-highlights"><a class="wlink" href="#features"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Feature Highlights <span class="uplinks"><a href="#what-is-clink">up</a> <a href="#toc">top</a></span></h3>
<div class="promo_box">
<div class="promo_box">
<div class="promo_block">

<p><strong>Auto-Suggestions</strong></p>
<p>Clink offers suggestions as you type based on history, files, and completions.</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default">C:\dir><span class="color_executable">findstr</span><span class="cursor">_</span><span class="color_suggestion">/s needle haystack\*</span></span>
</code></pre>

<p>Press <kbd>Right</kbd> or <kbd>End</kbd> to insert a suggestion (shown in a muted color).</p>
<p>See <a href="#gettingstarted_autosuggest">Auto-Suggest</a> to learn more.</p>
</div>
<div class="promo_block">

<p><strong>Completions</strong></p>
<p>Clink can complete words when you press <kbd>Tab</kbd> or <kbd>Ctrl</kbd>-<kbd>Space</kbd>.</p>
<p>Built-in completions are available for executables, aliases, command names, directory commands, and environment variables.  You can use Lua scripts to add <a href="#extending-clink">custom completions</a>.</p>
<p>See <a href="#how-completion-works">How Completion Works</a> to learn more.</p>
</div>
</div>
<div class="promo_box">
<div class="promo_block">

<p><strong>Persistent History</strong></p>
<p>Clink stores persistent history between sessions.</p>
<ul>
<li><kbd>Up</kbd> and <kbd>Down</kbd> cycle through history entries.</li>
<li><kbd>PgUp</kbd> and <kbd>PgDn</kbd> cycle through history entries matching the typed prefix.</li>
<li><kbd>F7</kbd> or <kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>Up</kbd> show a popup list of selectable history entries.</li>
<li><kbd>Ctrl</kbd>-<kbd>R</kbd> and <kbd>Ctrl</kbd>-<kbd>S</kbd> search history incrementally.</li>
</ul>
<p>See <a href="#saved-command-history">Saved Command History</a> to learn more.</p>
</div>
<div class="promo_block">

<p><strong>Scriptable Prompt and Colored Input</strong></p>
<p>You can customize the prompt dynamically with Lua scripts -- like in other shells -- but never before possible in cmd.exe!</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default"><span style="color:#0087ff">C:\repos\clink</span> <span style="color:#888">git</span> <span style="color:#ff0">main</span><span style="color:#888">-></span><span style="color:#ff0">origin *3</span> <span style="color:#f33">!1</span>
<span style="color:#0f0">></span> <span class="color_argmatcher">git</span> <span class="color_arg">merge</span> <span class="color_flag">--help</span><span class="cursor">_</span></span>
</code></pre>

<p>Your input is colored by context sensitive completion scripts.</p>
<p>See <a href="#popular-scripts">Popular Scripts</a> and <a href="#gettingstarted_colors">Colors</a> and <a href="#customizing-the-prompt">Customizing the Prompt</a> to learn more.</p>
</div>
</div>
<div class="promo_box">
<div class="promo_block">

<p><strong>Command Line Editing Improvements</strong></p>
<p>Clink supercharges the command line with new input editing commands and configurable key bindings.  For example,</p>
<ul>
<li><kbd>Alt</kbd>-<kbd>H</kbd> to display all key bindings.</li>
<li><kbd>Tab</kbd> for completion.</li>
<li><kbd>Ctrl</kbd>-<kbd>Space</kbd> for an interactive completion list.</li>
<li><kbd>Ctrl</kbd>-<kbd>Z</kbd> to undo input.</li>
<li><kbd>Shift</kbd>-<kbd>Arrows</kbd> to select text, and type to replace selected text.</li>
</ul>
<p>See <a href="#gettingstarted_keybindings">Key Bindings</a> to learn more.</p>
</div>
<div class="promo_block">

<p><strong>Convenience</strong></p>
<p>Optional auto-answering of the &quot;<a href="#cmd_auto_answer">Terminate batch job?</a>&quot; prompt.</p>
<p><a href="#enhanced-doskey-expansion">Enhanced doskey expansion</a> even after <code>&amp;</code> and <code>|</code>.</p>
<p><a href="#directory-shortcuts">Directory shortcuts</a>:</p>
<ul>
<li><code>dirname\</code> is a shortcut for <code>cd /d</code> to that directory.</li>
<li><code>..</code> or <code>...</code> are shortcuts for <code>cd ..</code> or <code>cd ..\..</code> (etc).</li>
<li><code>-</code> or <code>cd -</code> changes to the previous current working directory.</li>
</ul>
</div>
</div>
</div>

<h1 id="usage"><a class="wlink" href="#usage"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Usage <span class="uplinks"><a href="#toc">top</a></span></h1>
<h3 id="installation"><a class="wlink" href="#installation"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Installation <span class="uplinks"><a href="#usage">up</a> <a href="#toc">top</a></span></h3>
<p>You can install Clink by running the setup EXE file from the <a href="https://github.com/chrisant996/clink/releases">releases page</a>.</p>
<p>Or by using <a href="https://learn.microsoft.com/en-us/windows/package-manager/winget/">winget</a> and running <code>winget install clink</code>.</p>
<p>Or by using <a href="https://scoop.sh/">scoop</a> and running <code>scoop install clink</code>.</p>
<p>Or by downloading the ZIP file from <a href="https://github.com/chrisant996/clink/releases">releases page</a>, and extracting the files to a directory of your choosing.</p>
<h3 id="using-clink"><a class="wlink" href="#using-clink"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Using Clink <span class="uplinks"><a href="#usage">up</a> <a href="#toc">top</a></span></h3>
<p>Once installed, there are several ways to start Clink.</p>
<ol>
<li>If Clink is configured for autorun, just start <code>cmd.exe</code> and Clink is automatically injected and ready to use.</li>
</ol>
<blockquote>
<p>The setup EXE has an option &quot;Autorun when cmd.exe starts&quot;.  If you didn&#39;t use the setup EXE, or if you want to enable or disable autorun later, you can run <code>clink autorun install</code> or <code>clink autorun uninstall</code> to change the autorun configuration.  Run <code>clink autorun --help</code> for more info.</p>
</blockquote>
<ol start="2">
<li>To manually start, run the Clink shortcut from the Start menu (or the clink.bat located in the install directory).</li>
<li>To establish Clink to an existing <code>cmd.exe</code> process, use <code>clink inject</code>.</li>
</ol>
<blockquote>
<p>If the Clink install directory isn&#39;t in the PATH, then use <code><span class="arg">install_dir</span>\clink</code> in place of <code>clink</code> to run Clink commands.  Once Clink is injected into a <code>cmd.exe</code> process, then it automatically sets an alias so that you can simply use <code>clink</code>.</p>
</blockquote>
<p>Starting Clink injects it into a <code>cmd.exe</code> process, where it intercepts a handful of Windows API functions so that it can replace the prompt and input line editing with its own Readline-powered enhancements.</p>
<h1 id="getting-started"><a class="wlink" href="#getting-started"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Getting Started <span class="uplinks"><a href="#toc">top</a></span></h1>
<p>You can use Clink right away without configuring anything:</p>
<ul>
<li>Searchable <a href="#saved-command-history">command history</a> will be saved between sessions.</li>
<li><a href="#gettingstarted_autosuggest">Suggestions</a> are automatically offered as you type; press <kbd>Right</kbd> or <kbd>End</kbd> to insert a suggestion.</li>
<li><kbd>Tab</kbd> and <kbd>Ctrl</kbd>-<kbd>Space</kbd> provide match <a href="#how-completion-works">completion</a> two different ways.</li>
<li>Press <kbd>Alt</kbd>-<kbd>H</kbd> to see a list of the current key bindings.</li>
<li>Press <kbd>Alt</kbd>-<kbd>Shift</kbd>-<kbd>/</kbd> followed by another key to see what command is bound to the key.</li>
</ul>
<p>There are three main ways of customizing Clink to your preferences:  the <a href="#init-file">Readline init file</a> (the <code>.inputrc</code> file), the <a href="#clink-settings">Clink settings</a> (the <code>clink set</code> command), and <a href="#extending-clink-with-lua">Lua</a> scripts.</p>
<p><a name="how-completion-works"></a></p>
<h2 id="how-completion-works"><a class="wlink" href="#how-completion-works"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>How Completion Works <span class="uplinks"><a href="#getting-started">up</a> <a href="#toc">top</a></span></h2>
<p>&quot;Completion&quot; is for the word at the cursor; when you press <kbd>Tab</kbd> Clink tries to complete the word from a list of possible completions.  Press <kbd>Alt</kbd>-<kbd>=</kbd> to see the list of possible completions.</p>
<p>&quot;Suggestions&quot; are for the whole command line; Clink offers an <a href="#gettingstarted_autosuggest">automatic suggestion</a> for the whole input line, which you can insert by pressing <kbd>Right</kbd> or <kbd>End</kbd>.  There is never more than one automatic suggestion at a time.</p>
<p>Some examples of what completions can offer:</p>
<ul>
<li>File names,</li>
<li>Directories,</li>
<li>Environment variables,</li>
<li>Commands,</li>
<li>Command <a href="#argument-completion">arguments and flags</a>,</li>
<li>You can provide custom completion generators using Lua scripts that execute inside Clink (see <a href="#extending-clink-with-lua">Extending Clink With Lua</a> and <a href="#popular-scripts">Popular Scripts</a>).</li>
</ul>
<h3 id="completion-keys"><a class="wlink" href="#completion-keys"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Completion Keys <span class="uplinks"><a href="#how-completion-works">up</a> <a href="#toc">top</a></span></h3>
<p><kbd>Tab</kbd> completes the word at the cursor:</p>
<ul>
<li>If you installed Clink with &quot;Use enhanced defaults&quot; or if you set <a href="#clink_default_bindings"><code>clink.default_bindings</code></a> to use &quot;windows&quot; defaults, then <kbd>Tab</kbd> cycles through the possible completions, replacing the word with the next possible completion each time.</li>
<li>Otherwise, <kbd>Tab</kbd> performs completion the same way that bash does on Unix and Linux:  When you press <kbd>Tab</kbd>, Clink finds matches for how to complete the word at the cursor.  It automatically inserts the longest common prefix shared by the possible completions.  If you press <kbd>Tab</kbd> again, it also lists the possible completions.</li>
</ul>
<p><kbd>Ctrl</kbd>-<kbd>Space</kbd> shows an interactive list of possible completions:</p>
<ul>
<li>You can use the arrow keys to choose which completion to insert, and you can type to filter the list.</li>
<li>Pressing <kbd>Enter</kbd> in the list inserts the selected completion.</li>
<li>Pressing <kbd>Space</kbd> in the list inserts the selected completion and makes sure a space follows it to allow typing a next argument.</li>
</ul>
<p>See <a href="#completion-commands">Completion Commands</a> and <a href="#clink-commands">Clink Commands</a> for more available completion commands.</p>
<h3 id="executable-completion"><a class="wlink" href="#executable-completion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Executable Completion <span class="uplinks"><a href="#how-completion-works">up</a> <a href="#toc">top</a></span></h3>
<p>By default, Clink completes the first word of each command based on all executable programs on the system PATH and the current directory, but not non-executable files.</p>
<p>You can turn off the &quot;executable completion&quot; behavior by running <code>clink set <a href="#exec_enable">exec.enable</a> false</code>, or you can adjust its behavior by changing the various <a href="#exec_aliases"><code>exec.*</code></a> settings.</p>
<h2 id="common-configuration"><a class="wlink" href="#common-configuration"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Common Configuration <span class="uplinks"><a href="#getting-started">up</a> <a href="#toc">top</a></span></h2>
<p>The following sections describe some ways to begin customizing Clink to your taste.</p>
<table class="linkmenu">
<tr><td><a href="#gettingstarted_enhanceddefaults">Enhanced default settings</a></td><td>Optionally use enhanced default settings.</td></tr>
<tr><td><a href="#gettingstarted_inputrc">Create a .inputrc file</a></td><td>Create a .inputrc file where config variables and key bindings can be set.</td></tr>
<tr><td><a href="#gettingstarted_defaultbindings">Bash vs Windows</a></td><td>Make <kbd>Ctrl</kbd>-<kbd>F</kbd> and <kbd>Ctrl</kbd>-<kbd>M</kbd> work like usual on Windows.</td></tr>
<tr><td><a href="#gettingstarted_autosuggest">Auto-suggest</a></td><td>How to enable and use automatic suggestions.</td></tr>
<tr><td><a href="#gettingstarted_colors">Colors</a></td><td>Configure the colors.</td></tr>
<tr><td><a href="#gettingstarted_keybindings">Key Bindings</a></td><td>Customize your key bindings.</td></tr>
<tr><td><a href="#gettingstarted_mouseinput">Mouse Input</a></td><td>Optionally enable mouse clicks in the input line, etc.</td></tr>
<tr><td><a href="#gettingstarted_logo">Startup Message</a></td><td>Control whether the startup message is shown (copyright notice and version info).</td></tr>
<tr><td><a href="#gettingstarted_startupcmdscript">Startup Cmd Script</a></td><td>Optional automatic <code>clink_start.cmd</code> script.</td></tr>
<tr><td><a href="#gettingstarted_customprompt">Custom Prompt</a></td><td>Customizing the command line prompt.</td></tr>
<tr><td><a href="#upgradefrom049">Upgrading from Clink v0.4.9</a></td><td>Notes on upgrading from a very old version of Clink.</td></tr>
</table>

<p><a name="gettingstarted_enhanceddefaults"></a></p>
<h3 id="enhanced-default-settings"><a class="wlink" href="#gettingstarted_enhanceddefaults"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Enhanced default settings <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>Clink can be installed with plain defaults, or it can be installed with enhanced default settings that enable more of Clink&#39;s enhancements by default.</p>
<p>If you install Clink with the setup program and &quot;Use enhanced default settings&quot; is checked, then the enhanced defaults are activated, and then in some places where this documentation refers to default settings the stated default may have been overridden.</p>
<p>If you install Clink from the .zip file then enhanced default settings are activated when the <code>default_settings</code> and <code>default_inputrc</code> files are present in the binaries directory or in the profile directory.  The .zip file comes with the files, but their names have a <code>_</code> prefix so that enhanced defaults won&#39;t automatically take effect.  You can activate the enhanced default settings by renaming the files to remove the <code>_</code> prefix.</p>
<p>Here are some of the enhanced defaults.  Review the <code>default_settings</code> and <code>default_inputrc</code> files for the full list.</p>
<ul>
<li>Many <a href="#gettingstarted_colors">color settings</a> have colorful defaults.</li>
<li>Uses <a href="#gettingstarted_defaultbindings">Windows key bindings</a> by default.</li>
<li>The <a href="#saved-command-history">command history</a>&#39;s default <a href="#history_max_lines">limit</a> is increased to 25,000 entries.</li>
<li>Completion expands environment variables (the <code><a href="#match_expand_envvars">match.expand_envvars</a></code> setting).</li>
<li>If no completions are found with a prefix search, then a substring search is used (the <code><a href="#match_substring">match.substring</a></code> setting).</li>
<li><kbd>Ctrl</kbd>-<kbd>D</kbd> does not exit CMD (the <code><a href="#ctrld_exits">cmd.ctrld_exits</a></code> setting).</li>
<li>History saves and shows time stamps.</li>
</ul>
<p><a name="gettingstarted_inputrc"></a></p>
<h3 id="create-a-inputrc-file"><a class="wlink" href="#gettingstarted_inputrc"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Create a .inputrc file <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>First you&#39;ll want to create a <code>.inputrc</code> file, and a good place is in your Windows user profile directory.</p>
<p>This file is used for some configuration, such as key bindings and colored completions.</p>
<p>Create the file by running this command at a CMD prompt:</p>
<pre><code class="language-cmd">notepad %userprofile%\.inputrc
</code></pre>
<p>You may want to copy/paste the following sample text into the file as a starting point, and then press <kbd>Ctrl</kbd>-<kbd>S</kbd> to save the file.</p>
<pre><code class="language-inputrc"># Some common Readline config settings.

set colored-stats                 on   # Turn on completion colors.
set colored-completion-prefix     on   # Color the typed completion prefix.

# Some config settings that only work in Clink.

$if clink
set search-ignore-case            on   # Case insensitive history searches.
set completion-auto-query-items   on   # Prompt before showing completions if they&#39;ll exceed half the screen.
$endif

# Add your keybindings here...
</code></pre>
<p>See <a href="#init-file">Init File</a> for more information on Readline init files.</p>
<p><a name="gettingstarted_defaultbindings"></a></p>
<h3 id="bash-vs-windows"><a class="wlink" href="#gettingstarted_defaultbindings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Bash vs Windows <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>The default Clink key bindings are the same as in the &quot;bash&quot; shell for Unix/Linux.  That makes some keys like <kbd>Ctrl</kbd>-<kbd>A</kbd>, <kbd>Ctrl</kbd>-<kbd>F</kbd>, and <kbd>Ctrl</kbd>-<kbd>M</kbd> behave differently than you might be used to in CMD.</p>
<p>To instead use the familiar <a href="#default_bindings">Windows default key bindings</a> you can run <code>clink set <a href="#clink_default_bindings">clink.default_bindings</a> windows</code>.</p>
<p>Or, if you use the setup program with &quot;Use enhanced default settings&quot; checked then &quot;windows&quot; key bindings are the default, and you can run <code>clink set <a href="#clink_default_bindings">clink.default_bindings</a> bash</code> to use the bash default key bindings.</p>
<p>Clink comes with many default key bindings.  Use <kbd>Alt</kbd>-<kbd>H</kbd> to see all of the active key bindings, or use <kbd>Alt</kbd>-<kbd>Shift</kbd>-<kbd>?</kbd> to check what is bound to a specific key.  See <a href="#gettingstarted_keybindings">Key Bindings</a> to get started configuring your own key bindings.</p>
<p>Here are the differences between the Windows defaults and the bash defaults:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Windows</th>
<th>Bash</th>
</tr>
</thead>
<tbody><tr>
<td><kbd>Ctrl</kbd>-<kbd>A</kbd></td>
<td>Select All.</td>
<td>Go to beginning of line.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>B</kbd></td>
<td>(not bound)</td>
<td>Move backward one character.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>E</kbd></td>
<td>Expands doskey aliases, environment variables, and <a href="#using-history-expansion">history expansions</a> in the current line.</td>
<td>Go to end of line.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>F</kbd></td>
<td>Find text (in plain Conhost console windows).</td>
<td>Move forward one character.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>M</kbd></td>
<td>Mark text (in plain Conhost console windows).</td>
<td>Same as <kbd>Enter</kbd>.</td>
</tr>
<tr>
<td><kbd>Tab</kbd></td>
<td>Cycle forward through available completions.</td>
<td>Bash style completion.</td>
</tr>
<tr>
<td><kbd>Shift</kbd>-<kbd>Tab</kbd></td>
<td>Cycle backward through available completions.</td>
<td>(not bound)</td>
</tr>
<tr>
<td><kbd>Right</kbd></td>
<td>Move forward one character, or at the end of the line insert the next character from the previous input line.</td>
<td>Move forward one character.</td>
</tr>
</tbody></table>
<p><a name="gettingstarted_autosuggest"></a></p>
<h3 id="auto-suggest"><a class="wlink" href="#gettingstarted_autosuggest"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Auto-suggest <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>Clink can suggest command lines as you type, based on command history and completions.</p>
<p>You can turn off automatic suggestions with <code>clink set <a href="#autosuggest_enable">autosuggest.enable</a> false</code>, or turn them on with <code>clink set autosuggest.enable true</code>.</p>
<p>When automatic suggestions are enabled and the cursor is at the end of the input line, a suggestion may appear in a muted color.  If the suggestion isn&#39;t what you want, just ignore it.  Or you can insert the whole suggestion with the <kbd>Right</kbd> arrow or <kbd>End</kbd> key, insert the next word of the suggestion with <kbd>Ctrl</kbd>-<kbd>Right</kbd>, or insert the next full word of the suggestion up to a space with <kbd>Shift</kbd>-<kbd>Right</kbd>.</p>
<p>Here&#39;s an example of how auto-suggestion works.  Suppose you ran a command, so now it&#39;s in your command history:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default">C:\dir&gt;<span class="color_executable">findstr</span>&nbsp; <span class="color_input">/s needle haystack\*</span></span>
</code></pre>

<p>Later, you start to type a new command, and it matches the earlier command from the history:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default">C:\dir&gt;<span class="color_executable">findstr</span>&nbsp;<span class="cursor">_</span><span class="color_suggestion">/s needle haystack\*</span></span>
</code></pre>

<p>The muted text shows a suggestion that might be what you intend to type.  You can insert the muted text into the input line by pressing the <kbd>Right</kbd> key.</p>
<p>If you press <kbd>Tab</kbd> then that invokes <a href="#how-completion-works">completion</a> instead.  Completion is something you manually invoke to offer possible completions for a word or argument position.  Auto-suggestion automatically offers a suggestion for a whole input line, and the suggestion can come from the saved command history or from the list of possible completions.  There can be many possible completions available, but there is never more than one auto-suggestion available.</p>
<p>The <a href="#autosuggest_hint"><code>autosuggest.hint</code></a> setting controls whether to show the <code>[Right]=Insert Suggestion</code> usage hint when a suggestion is available.</p>
<p>The <a href="#autosuggest_strategy"><code>autosuggest.strategy</code></a> setting determines how suggestions are chosen.</p>
<p><a name="gettingstarted_colors"></a></p>
<h3 id="colors"><a class="wlink" href="#gettingstarted_colors"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Colors <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>Clink has many configurable colors for match completions, input line coloring, popup lists, and more.</p>
<p>If you use the setup program with &quot;Use enhanced default settings&quot; checked then many of the color settings have more colorful default values.</p>
<p>See below for information on customizing colors yourself, or see <a href="#color-themes">Color Themes</a> for information on applying color theme files (whose names end with &quot;.clinktheme&quot;).  Clink comes with a few color theme files, and users can also share color themes online (or convert color themes from other shells).</p>
<h4 id="for-completion"><a class="wlink" href="#for-completion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>For completion <span class="uplinks"><a href="#gettingstarted_colors">up</a> <a href="#toc">top</a></span></h4>
<p>When performing completion (e.g. <kbd>Tab</kbd> or <kbd>Ctrl</kbd>-<kbd>Space</kbd>) Clink can add color to the possible completions.</p>
<p>To turn on colored completions, put a line <code>set <a href="configcoloredstats">colored-stats</a> on</code> in the <a href="#gettingstarted_inputrc">.inputrc file</a> (if you copy/pasted the sample text, it&#39;s already there).</p>
<p>See the <a href="#completion-colors">Completion Colors</a> section for how to configure the colors for match completions.</p>
<h4 id="other-colors"><a class="wlink" href="#other-colors"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Other colors <span class="uplinks"><a href="#gettingstarted_colors">up</a> <a href="#toc">top</a></span></h4>
<p>Clink adds color to the input line by highlighting arguments, flags, doskey macros, and more.  If you don&#39;t want input line colors, you can turn it off by running <code>clink set <a href="#clink_colorize_input">clink.colorize_input</a> false</code>.</p>
<p>Here are examples, using the colors from the <a href="#gettingstarted_enhanceddefaults">Use enhanced defaults</a> installation option:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><table class="console" cellpadding=0 cellspacing=0>
<tr><td class="color_default">c:\dir><span class="color_argmatcher">clink</span> <span class="color_arg">set</span> <span class="color_flag">--help</span></td><td class="right_gray">'clink' has an argmatcher</td></tr>
<tr><td class="color_default">c:\dir><span class="color_cmd">attrib</span></td><td class="right_gray">'attrib' is a CMD command</td></tr>
<tr><td class="color_default">c:\dir><span class="color_doskey">myalias</span></td><td class="right_gray">if 'myalias' is a doskey alias</td></tr>
<tr><td class="color_default">c:\dir><span class="color_executable">control</span></td><td class="right_gray">'control' is an executable</td></tr>
<tr><td class="color_default">c:\dir><span class="color_unrecognized">xyzabc123</span></td><td class="right_gray">unrecognized</td></tr>
<tr><td class="color_default">c:\dir><span class="color_input">whatever</span></td><td class="right_gray">if executable and unrecognized colors are not set</td></tr>
</table></code></pre>

<p>To configure a color, run <code>clink set <span class="arg">colorname</span> <span class="arg">colorvalue</span></code>.  Match completions make it easy to change Clink settings:  type <code>clink set color.</code> and then use completion (e.g. <kbd>Tab</kbd> or <kbd>Ctrl</kbd>-<kbd>Space</kbd>) to see the available color settings, and to fill in a color value.</p>
<p>See the <a href="#classifywords">Coloring the Input Text</a> and <a href="#color-settings">Color Settings</a> sections for more information on Clink color settings.</p>
<p><a name="gettingstarted_keybindings"></a></p>
<h3 id="key-bindings"><a class="wlink" href="#gettingstarted_keybindings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Key Bindings <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>You can customize your key bindings (keyboard shortcuts) by assigning key bindings in the <a href="#gettingstarted_inputrc">.inputrc file</a>.  See <a href="#keybindings">Customizing Key Bindings</a> for more information.</p>
<p>Clink comes with many pre-configured key bindings that invoke named commands.  Here are a few that you might find especially handy:</p>
<table>
<tr><td><kbd>Alt</kbd>-<kbd>H</kbd></td><td>This is <code><a href="#rlcmd-clink-show-help">clink-show-help</a></code>, which lists the key bindings and commands.</td></tr>
<tr><td><kbd>Tab</kbd></td><td>This is <code><a href="#rlcmd-complete">complete</a></code> or <code><a href="#rlcmd-old-menu-complete">old-menu-complete</a></code>, depending on the <code><a href="#clink_default_bindings">clink.default_bindings</a></code> Clink setting.<br/><code>complete</code> performs completion by selecting from an interactive list of possible completions; if there is only one match, the match is inserted immediately.<br/><code>old-menu-complete</code> cycles through inserting the possible completions.</td></tr>
<tr><td><kbd>Ctrl</kbd>-<kbd>Space</kbd></td><td>This is <code><a href="#rlcmd-clink-select-complete">clink-select-complete</a></code>, which performs completion by selecting from an interactive list of possible completions; if there is only one match, the match is inserted immediately.</td></tr>
<tr><td><kbd>Alt</kbd>-<kbd>=</kbd></td><td>This is <code><a href="#rlcmd-possible-completions">possible-completions</a></code>, which lists the available completions for the current word in the input line.</td></tr>
<tr><td><kbd>Alt</kbd>-<kbd>.</kbd></td><td>This is <code><a href="#rlcmd-yank-last-arg">yank-last-arg</a></code>, which inserts the last argument from the previous line.  You can use it repeatedly to cycle backwards through the history, inserting the last argument from each line.  Learn more by reading about <a href="#killing-and-yanking">Killing and Yanking</a>.
<tr><td><kbd>Ctrl</kbd>-<kbd>R</kbd></td><td>This is <code><a href="#rlcmd-reverse-search-history">reverse-search-history</a></code>, which incrementally searches the history.  Press it, then type, and it does a reverse incremental search while you type.  Press <kbd>Ctrl</kbd>-<kbd>R</kbd> again (and again, etc) to search for other matches of the search text.  Learn more by reading about <a href="#searching-for-commands-in-the-history">Searching for Commands in the History</a>.</td></tr>
<tr><td><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>D</kbd></td><td>This is <code><a href="#rlcmd-remove-history">remove-history</a></code>, which deletes the currently selected history line after using any of the history search or navigation commands.</td></tr>
<tr><td><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>K</kbd></td><td>This is <code><a href="#rlcmd-add-history">add-history</a></code>, which adds the current line to the history without executing it, and then clears the input line.</td></tr>
<tr><td><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>N</kbd></td><td>This is <code><a href="#rlcmd-clink-menu-complete-numbers">clink-menu-complete-numbers</a></code>, which grabs numbers with 3 or more digits from the current console screen and cycles through inserting them as completions (binary, octal, decimal, hexadecimal).  Super handy for quickly inserting a commit hash that was printed as output from a preceding command.</td></tr>
<tr><td><kbd>Alt</kbd>-<kbd>0</kbd> to <kbd>Alt</kbd>-<kbd>9</kbd></td><td>These are <code><a href="#rlcmd-digit-argument">digit-argument</a></code>, which let you enter a numeric value used by many commands.  For example <kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>W</kbd> copies the current word to the clipboard, but if you first type <kbd>Alt</kbd>-<kbd>2</kbd> followed by <kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>W</kbd> then it copies the 3rd word to the clipboard (the first word is 0, the second is 1, etc).  Learn more by reading about <a href="#readline-arguments">Readline Arguments</a>.</td></tr>
</table>

<p>For a full list of commands available for key bindings, see <a href="#bindable-commands">Bindable Commands</a>.</p>
<p><a name="gettingstarted_mouseinput"></a></p>
<h3 id="mouse-input"><a class="wlink" href="#gettingstarted_mouseinput"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Mouse Input <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>Clink can optionally respond to mouse input, instead of letting the terminal respond to mouse input (e.g. to select text on the screen).  When mouse input is enabled in Clink, you can click in the input line or in popup lists, and the mouse wheel scrolls popup lists.</p>
<p>Use <code>clink set <a href="#terminal_mouse_input">terminal.mouse_input</a> <span class="arg">mode</span></code> with one of the following modes to control whether Clink responds to mouse input:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>off</code></td>
<td>Lets the terminal host handle mouse input.</td>
</tr>
<tr>
<td><code>on</code></td>
<td>Lets Clink handle mouse input.</td>
</tr>
<tr>
<td><code>auto</code></td>
<td>Lets Clink handle mouse input in ConEmu and in the default Conhost terminal when Quick Edit mode is unchecked in the console Properties dialog.</td>
</tr>
</tbody></table>
<p>Use <code>clink set <a href="#terminal.mouse_modifier">terminal.mouse_modifier</a> <span class="arg">modifiers</span></code> or <code>set CLINK_MOUSE_MODIFIER=<span class="arg">modifiers</span></code> to control which modifier keys must be held for Clink to respond to mouse input.</p>
<p>These select which modifier keys (<kbd>Alt</kbd>, <kbd>Ctrl</kbd>, <kbd>Shift</kbd>) must be held in order for Clink to respond to mouse input when mouse input is enabled by the <a href="#terminal_mouse_input"><code>terminal.mouse_input</code></a> setting.  <span class="arg">modifiers</span> is a text string that can list one or more modifier keys:  &quot;alt&quot;, &quot;ctrl&quot;, and &quot;shift&quot;.  For example, setting it to &quot;alt shift&quot; causes Clink to only respond to mouse input when both <kbd>Alt</kbd> and <kbd>Shift</kbd> are held (and not <kbd>Ctrl</kbd>).  If the <code>%CLINK_MOUSE_MODIFIER%</code> environment variable is set then its value supersedes the <a href="#terminal_mouse_modifier"><code>terminal.mouse_modifier</code></a> setting.  In Windows Terminal many modifier keys do special things with mouse clicks, so the modifier key combination that interferes least with built in Windows Terminal behaviors is <kbd>Ctrl</kbd>-<kbd>Alt</kbd>.</p>
<p>When mouse input is enabled in Clink, then mouse input works a little differently:</p>
<ul>
<li>You can bypass Clink mouse input and use the normal terminal mouse input by holding a different combination of modifier keys than listed in <a href="#terminal_mouse_modifier"><code>terminal.mouse_modifier</code></a> or <code>%CLINK_MOUSE_MODIFIER%</code>.</li>
<li>Windows Terminal treats <kbd>Shift</kbd>-<kbd>RightClick</kbd> specially and turns off line ending detection when copying the selected text to the clipboard.  Hold <kbd>Ctrl</kbd> or <kbd>Alt</kbd> when right clicking to do the normal copy with line ending detection.</li>
<li>In ConEmu, the mouse wheel always scrolls the terminal; Clink cannot use it to scroll popup lists.</li>
<li>In the default Conhost terminal when Quick Edit mode is turned off then Clink will also respond to mouse input when no modifier keys are held.</li>
</ul>
<p><a name="gettingstarted_logo"></a></p>
<h3 id="startup-message"><a class="wlink" href="#gettingstarted_logo"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Startup Message <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>By default, Clink prints a startup message containing a copyright notice and the program version.  This is shown so it&#39;s easy to tell whether Clink is active and what version is being used.</p>
<p>You can make the startup message shorter by running <code>clink set clink.logo short</code>.</p>
<p>You can remove the startup message by running <code>clink set clink.logo none</code>.</p>
<p><a name="gettingstarted_startupcmdscript"></a></p>
<h3 id="startup-cmd-script"><a class="wlink" href="#gettingstarted_startupcmdscript"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Startup Cmd Script <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>When Clink is injected, it looks for a <code>clink_start.cmd</code> script in the binaries directory and <a href="#filelocations">profile directory</a>.  Clink automatically runs the script(s), if present, when the first CMD prompt is shown after Clink is injected and before any Lua scripts run.  You can set the <code><a href="#clink_autostart">clink.autostart</a></code> setting to run a different command, or set it to &quot;nul&quot; to run no command at all.</p>
<p><a name="gettingstarted_customprompt"></a></p>
<h3 id="custom-prompt"><a class="wlink" href="#gettingstarted_customprompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Custom Prompt <span class="uplinks"><a href="#common-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>If you want a customizable prompt with a bunch of styles and an easy-to-use configuration wizard, check out <a href="https://github.com/chrisant996/clink-flex-prompt">clink-flex-prompt</a>.  Also, if you&#39;ve been disappointed by git making the prompt slow in other shells, try this prompt -- it makes the prompt appear instantly by running git commands in the background and refreshing the prompt once the background commands complete.</p>
<p>Other popular configurable prompts are <a href="#oh-my-posh">oh-my-posh</a> and <a href="#starship">starship</a>.</p>
<p>See <a href="#customisingtheprompt">Customizing the Prompt</a> for information on how to use Lua to customize the prompt.</p>
<p><a name="upgradefrom049"></a></p>
<h2 id="upgrading-from-clink-v049"><a class="wlink" href="#upgradefrom049"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Upgrading from Clink v0.4.9 <span class="uplinks"><a href="#getting-started">up</a> <a href="#toc">top</a></span></h2>
<p>The new Clink tries to be as backward compatible with Clink v0.4.9 as possible. However, in some cases upgrading may require a little bit of configuration work.</p>
<ul>
<li>Some key binding sequences have changed; see <a href="#keybindings">Customizing Key Bindings</a> for more information.</li>
<li>Match coloring works differently now and can do much more; see <a href="#completioncolors">Completion Colors</a> for more information.</li>
<li>Old settings and history migrate automatically if you use the same profile directory when upgrading.  If you use a different profile directory, then you can still migrate the old settings and history by copying certain files.  See below for details.</li>
<li>Script compatibility should be very good, but some scripts may still encounter problems.  If you do encounter a compatibility problem you can look for an updated version of the script, update the script yourself, or visit the <a href="https://github.com/chrisant996/clink/issues">clink repo</a> and open an issue describing details about the compatibility problem.</li>
<li>Some match generator scripts might need adjustments to become fully compatible with the <a href="#autosuggest_enable"><code>autosuggest.enable</code></a> setting.</li>
<li>Some settings have changed slightly, and there are many new settings.  See <a href="#configclink">Configuring Clink</a> for more information.</li>
</ul>
<h3 id="migrating-between-different-profile-directories"><a class="wlink" href="#migrating-between-different-profile-directories"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Migrating between different profile directories <span class="uplinks"><a href="#upgradefrom049">up</a> <a href="#toc">top</a></span></h3>
<p>All versions of Clink use the same default profile directory location.  If you haven&#39;t overridden the profile directory, then your settings and history will automatically migrate when upgrading to newer versions of Clink.</p>
<p>If you choose to use a different profile directory, then you can still make migration happen by copying certain files:</p>
<ol>
<li>When using Clink v0.4.9 you can use <code>clink set</code> to find the settings file path.</li>
<li>When using newer versions of Clink you can use <code>clink info</code> to find the profile directory.</li>
<li>Copy the <code>settings</code> and <code>.history</code> files from the old directory into the new directory.</li>
<li>If you already have a <code>clink_settings</code> or <code>clink_history</code> file in your new profile directory, then you&#39;ll need to rename them in order for migration to happen (e.g. add <code>.txt</code> to the names).</li>
<li>Close the Clink session(s) and open new ones.</li>
</ol>
<p><a name="configclink"></a></p>
<h1 id="configuring-clink"><a class="wlink" href="#configclink"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Configuring Clink <span class="uplinks"><a href="#toc">top</a></span></h1>
<p>Clink has two configuration systems, which is a result of using the Readline library to provide command history and key bindings.</p>
<p>The following sections describe how to configure Clink itself.  To learn about the Readline configuration and key bindings, instead see <a href="#configreadline">Configuring Readline</a>.</p>
<table class="linkmenu">
<tr><td><a href="#clinksettings">Clink Settings</a></td><td>How to customize Clink's settings.</td></tr>
<tr><td><a href="#colorsettings">Color Settings</a></td><td>Describes the syntax used by color settings.</td></tr>
<tr><td><a href="#filelocations">File Locations</a></td><td>Where Clink stores its history and settings files.</td></tr>
<tr><td><a href="#command-line-options">Command Line Options</a></td><td>Describes the command line options for the Clink program.</td></tr>
<tr><td><a href="#portable-configuration">Portable Configuration</a></td><td>How to set up a "portable" installation of Clink, e.g. on a USB drive or network location.</td></tr>
</table>

<p><a name="clinksettings"></a></p>
<h2 id="clink-settings"><a class="wlink" href="#clinksettings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Clink Settings <span class="uplinks"><a href="#configclink">up</a> <a href="#toc">top</a></span></h2>
<p>The easiest way to configure Clink is to use the <code>clink set</code> command to list, query, and set Clink&#39;s settings.</p>
<p>Run <code>clink set --help</code> from a Clink-installed cmd.exe process to learn more.</p>
<p>The following table describes the available Clink settings:</p>
<table>
<thead>
<tr>
<th align="center">Name</th>
<th align="center">Default <a href="#alternatedefault">*</a></th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a class="wlink" href="#argmatcher_show_hints"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="argmatcher_show_hints"></a><code>argmatcher.show_hints</code></td>
<td align="center">True</td>
<td>When both the <a href="#comment_row_show_hints"><code>comment_row.show_hints</code></a> and <code>argmatcher.show_hints</code> settings are enabled, <a href="#argumentcompletion">argmatchers</a> can show usage hints in the comment row (below the input line).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#autosuggest_async"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="autosuggest_async"></a><code>autosuggest.async</code></td>
<td align="center">True</td>
<td>When this is <code>true</code> matches are generated asynchronously for suggestions.  This helps to keep typing responsive.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#autosuggest_enable"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="autosuggest_enable"></a><code>autosuggest.enable</code></td>
<td align="center">True</td>
<td>When this is <code>true</code> a suggested command may appear in <a href="#color_suggestion"><code>color.suggestion</code></a> color after the cursor.  If the suggestion isn&#39;t what you want, just ignore it.  Or insert the whole suggestion with the <kbd>Right</kbd> arrow or <kbd>End</kbd> key, insert the next word of the suggestion with <kbd>Ctrl</kbd>-<kbd>Right</kbd>, or insert the next full word of the suggestion up to a space with <kbd>Shift</kbd>-<kbd>Right</kbd>.  The <a href="#autosuggest_strategy"><code>autosuggest.strategy</code></a> setting determines how a suggestion is chosen.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#autosuggest_hint"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="autosuggest_hint"></a><code>autosuggest.hint</code></td>
<td align="center">True</td>
<td>The default is <code>true</code>.  When this and <a href="#autosuggest_enable"><code>autosuggest.enable</code></a> are both <code>true</code> and a suggestion is available, show a usage hint <code>[Right]=Insert Suggestion</code> to help make the feature more discoverable and easy to use.  Set this to <code>false</code> to hide the usage hint.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#autosuggest_original_case"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="autosuggest_original_case"></a><code>autosuggest.original_case</code></td>
<td align="center">True</td>
<td>When this is enabled (the default), inserting a suggestion uses the original capitalization from the suggestion.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#autosuggest_strategy"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="autosuggest_strategy"></a><code>autosuggest.strategy</code></td>
<td align="center"><code>match_prev_cmd history completion</code></td>
<td>This determines how suggestions are chosen.  The suggestion generators are tried in the order listed, until one provides a suggestion.  There are three built-in suggestion generators, and scripts can provide new ones.  <code>history</code> chooses the most recent matching command from the history.  <code>completion</code> chooses the first of the matching completions.  <code>match_prev_cmd</code> chooses the most recent matching command whose preceding history entry matches the most recently invoked command, but only when the <a href="#history_dupe_mode"><code>history.dupe_mode</code></a> setting is <code>add</code>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_autostart"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_autostart"></a><code>clink.autostart</code></td>
<td align="center"></td>
<td>This command is automatically run when the first CMD prompt is shown after Clink is injected.  If this is blank (the default), then Clink instead looks for <code>clink_start.cmd</code> in the binaries directory and profile directory and runs them.  Set it to &quot;nul&quot; to not run any autostart command.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_autoupdate"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_autoupdate"></a><code>clink.autoupdate</code></td>
<td align="center"><code>check</code></td>
<td>Clink can periodically check for updates for the Clink program files (see <a href="#automatic-updates">Automatic Updates</a>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_colorize_input"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_colorize_input"></a><code>clink.colorize_input</code></td>
<td align="center">True</td>
<td>Enables context sensitive coloring for the input text (see <a href="#classifywords">Coloring the Input Text</a>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_customprompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_customprompt"></a><code>clink.customprompt</code></td>
<td align="center"></td>
<td>*.clinkprompt files contain customizations for the prompt.  Setting this to the name of a .clinkprompt file causes it to be loaded and used for displaying the prompt (see <a href="#customisingtheprompt">Customizing the Prompt</a>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#default_bindings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="default_bindings"><a name="clink_default_bindings"></a></a><code>clink.default_bindings</code></td>
<td align="center"><code>bash</code> <a href="#alternatedefault">*</a></td>
<td>Clink uses bash key bindings when this is set to <code>bash</code> (the default).  When this is set to <code>windows</code> Clink overrides some of the bash defaults with familiar Windows key bindings for <kbd>Tab</kbd>, <kbd>Ctrl</kbd>-<kbd>A</kbd>, <kbd>Ctrl</kbd>-<kbd>F</kbd>, <kbd>Ctrl</kbd>-<kbd>M</kbd>, and <kbd>Right</kbd>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_logo"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_logo"></a><code>clink.logo</code></td>
<td align="center"><code>full</code></td>
<td>Controls what startup logo to show when Clink is injected.  <code>full</code> = show full copyright logo, <code>short</code> = show abbreviated version info, <code>none</code> = omit the logo.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_max_input_rows"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_max_input_rows"></a><code>clink.max_input_rows</code></td>
<td align="center"><code>0</code></td>
<td>Limits how many rows the input line can use, up to the terminal height.  When this is <code>0</code> (the default), the terminal height is the limit.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_paste_crlf"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_paste_crlf"></a><code>clink.paste_crlf</code></td>
<td align="center"><code>crlf</code></td>
<td>What to do with CR and LF characters on paste. Setting this to <code>delete</code> deletes them, <code>space</code> replaces them with spaces, <code>ampersand</code> replaces them with ampersands, and <code>crlf</code> pastes them as-is (executing commands that end with a newline).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_dot_path"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_dot_path"></a><code>clink.path</code></td>
<td align="center"></td>
<td>A list of paths from which to load Lua scripts. Multiple paths can be delimited semicolons.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_popup_search_mode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_popup_search_mode"></a><code>clink.popup_search_mode</code></td>
<td align="center"><code>find</code></td>
<td>When this is <code>find</code>, typing in popup lists moves to the next matching item.  When this is <code>filter</code>, typing in popup lists filters the list.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_promptfilter"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_promptfilter"></a><code>clink.promptfilter</code></td>
<td align="center">True</td>
<td>Enable <a href="#customising-the-prompt">prompt filtering</a> by Lua scripts.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#clink_update_interval"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="clink_update_interval"></a><code>clink.update_interval</code></td>
<td align="center"><code>5</code></td>
<td>The Clink autoupdater will wait this many days between update checks (see <a href="#automatic-updates">Automatic Updates</a>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#cmd_admin_title_prefix"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="cmd_admin_title_prefix"></a><code>cmd.admin_title_prefix</code></td>
<td align="center"></td>
<td>When set, this replaces the &quot;Administrator: &quot; console title prefix.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#cmd_altf4_exits"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="cmd_altf4_exits"></a><code>cmd.altf4_exits</code></td>
<td align="center">True</td>
<td>When set, pressing <kbd>Alt</kbd>-<kbd>F4</kbd> exits the cmd.exe process.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#cmd_auto_answer"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="cmd_auto_answer"></a><code>cmd.auto_answer</code></td>
<td align="center"><code>off</code></td>
<td>Automatically answers cmd.exe&#39;s &quot;Terminate batch job (Y/N)?&quot; prompts. <code>off</code> = disabled, <code>answer_yes</code> = answer Y, <code>answer_no</code> = answer N.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#ctrld_exits"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="ctrld_exits"></a><code>cmd.ctrld_exits</code></td>
<td align="center">True <a href="#alternatedefault">*</a></td>
<td><kbd>Ctrl</kbd>-<kbd>D</kbd> exits the cmd.exe process when it is pressed on an empty line.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#cmd_get_errorlevel"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="cmd_get_errorlevel"></a><code>cmd.get_errorlevel</code></td>
<td align="center">True</td>
<td>When this is enabled, Clink runs a hidden <code>echo %errorlevel%</code> command before each interactive input prompt to retrieve the last exit code for use by Lua scripts.  If you experience problems, try turning this off.  This is on by default.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_arg"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_arg"></a><code>color.arg</code></td>
<td align="center"></td>
<td>The color for arguments in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_arginfo"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_arginfo"></a><code>color.arginfo</code></td>
<td align="center"><code>yellow</code> <a href="#alternatedefault">*</a></td>
<td>Argument info color.  Some argmatchers may show that some flags or arguments accept additional arguments, when listing possible completions.  This color is used for those additional arguments.  (E.g. the &quot;dir&quot; in a &quot;-x dir&quot; listed completion.)</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_argmatcher"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_argmatcher"></a><code>color.argmatcher</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>The color for the command name in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled, if the command name has an argmatcher available.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_cmd"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_cmd"></a><code>color.cmd</code></td>
<td align="center"><code>bold</code> <a href="#alternatedefault">*</a></td>
<td>Used when displaying shell (CMD.EXE) command completions, and in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_cmdredir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_cmdredir"></a><code>color.cmdredir</code></td>
<td align="center"><code>bold</code> <a href="#alternatedefault">*</a></td>
<td>The color for redirection symbols (<code>&lt;</code>, <code>&gt;</code>, <code>&gt;&amp;</code>) in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_cmdsep"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_cmdsep"><a/><code>color.cmdsep</code></td>
<td align="center"><code>bold</code> <a href="#alternatedefault">*</a></td>
<td>The color for command separators (<code>&amp;</code>, <code>|</code>) in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_comment_row"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_comment_row"></a><code>color.comment_row</code></td>
<td align="center"><code>bright white on cyan</code> <a href="#alternatedefault">*</a></td>
<td>The color for the comment row.  During <a href="#rlcmd-clink-select-complete"><code>clink-select-complete</code></a> the comment row shows the &quot;and <em>N</em> more matches&quot; or &quot;rows <em>X</em> to <em>Y</em> of <em>Z</em>&quot; messages.  It can also show how history expansion will be applied at the cursor.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_common_match_prefix"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_common_match_prefix"></a><code>color.common_match_prefix</code></td>
<td align="center"></td>
<td>Used when displaying a prefix that all match completions have in common.  This can be superseded by <a href="#completioncolors">Completion Colors</a>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_description"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_description"></a><code>color.description</code></td>
<td align="center"><code>bright cyan</code> <a href="#alternatedefault">*</a></td>
<td>Used when displaying descriptions for match completions.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_doskey"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_doskey"></a><code>color.doskey</code></td>
<td align="center"><code>bright cyan</code> <a href="#alternatedefault">*</a></td>
<td>Used when displaying doskey alias completions, and in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_executable"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_executable"></a><code>color.executable</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>When set, this is the color in the input line for a command word that is recognized as an executable file when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_filtered"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_filtered"></a><code>color.filtered</code></td>
<td align="center"><code>bold</code> <a href="#alternatedefault">*</a></td>
<td>The default color for filtered completions (see <a href="#filteringthematchdisplay">Filtering the Match Display</a>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_flag"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_flag"></a><code>color.flag</code></td>
<td align="center"><code>default</code> <a href="#alternatedefault">*</a></td>
<td>The color for flags in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_hidden"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_hidden"></a><code>color.hidden</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>Used when displaying file completions with the &quot;hidden&quot; attribute.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_histexpand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_histexpand"></a><code>color.histexpand</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>The color for history expansions in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.  If this color is not set or <a href="#history_auto_expand"><code>history.auto_expand</code></a> is disabled or <a href="#history_expand_mode"><code>history.expand_mode</code></a> is off, then history expansions are not colored.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_horizscroll"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_horizscroll"></a><code>color.horizscroll</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>The color for the <code>&lt;</code> or <code>&gt;</code> horizontal scroll indicators when Readline&#39;s <a href="#confighorizontalscrollmode"><code>horizontal-scroll-mode</code></a> variable is set.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_input"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_input"></a><code>color.input</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>The color for input line text. Note that when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is disabled, the entire input line is displayed using <code>color.input</code>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_interact"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_interact"></a><code>color.interact</code></td>
<td align="center"><code>bold</code></td>
<td>The color for prompts such as a pager&#39;s <code>--More?--</code> prompt.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_message"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_message"></a><code>color.message</code></td>
<td align="center"><code>default</code></td>
<td>The color for the message area (e.g. the search prompt message, digit argument prompt message, etc).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_popup"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_popup"></a><code>color.popup</code></td>
<td align="center"></td>
<td>When set, this is used as the color for popup lists and messages.  If no color is set, then the console&#39;s popup colors are used (see the Properties dialog box for the console window).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_popup_border"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_popup_border"></a><code>color.popup_border</code></td>
<td align="center"></td>
<td>When set, this is used as the color popup list borders.  If no color is set, then the color from <code>color.popup</code> is used.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_popup_desc"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_popup_desc"></a><code>color.popup_desc</code></td>
<td align="center"></td>
<td>When set, this is used as the color for description column(s) in popup lists.  If no color is set, then a color is chosen to complement the console&#39;s popup colors (see the Properties dialog box for the console window).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_popup_footer"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_popup_footer"></a><code>color.popup_footer</code></td>
<td align="center"></td>
<td>When set, this is used as the color for popup list footer message text.  If no color is set, then the color from <code>color.popup_border</code> is used.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_popup_header"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_popup_header"></a><code>color.popup_header</code></td>
<td align="center"></td>
<td>When set, this is used as the color for popup list title text.  If no color is set, then the color from <code>color.popup_border</code> is used.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_popup_select"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_popup_select"></a><code>color.popup_select</code></td>
<td align="center"></td>
<td>When set, this is used as the color for the selected popup list item.  If no color is set, a color is chosen by swapping the foreground and background colors from <code>color.popup</code>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_popup_selectdesc"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_popup_selectdesc"></a><code>color.popup_selectdesc</code></td>
<td align="center"></td>
<td>When set, this is used as the color for the selected popup list item&#39;s description text.  If no color is set, a color is chosen by swapping the foreground and background colors from <code>color.popup</code>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_prompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_prompt"></a><code>color.prompt</code></td>
<td align="center"></td>
<td>When set, this is used as the default color for the prompt.  But it&#39;s overridden by any colors set by <a href="#customisingtheprompt">Customizing The Prompt</a>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_readonly"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_readonly"></a><code>color.readonly</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>Used when displaying file completions with the &quot;readonly&quot; attribute.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_selected_completion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_selected_completion"></a><code>color.selected_completion</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>The color for the selected completion with the <a href="#rlcmd-clink-select-complete"><code>clink-select-complete</code></a> command.  If no color is set, then bright reverse video is used.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_selection"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_selection"></a><code>color.selection</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>The color for selected text in the input line (for example, when using <kbd>Shift</kbd>-Arrow keys).  If no color is set, then reverse video is used.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_suggestion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_suggestion"></a><code>color.suggestion</code></td>
<td align="center"><code>bright black</code> <a href="#alternatedefault">*</a></td>
<td>The color for automatic suggestions when <a href="#autosuggest_enable"><code>autosuggest.enable</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_unexpected"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_unexpected"></a><code>color.unexpected</code></td>
<td align="center"><code>default</code></td>
<td>The color for unexpected arguments in the input line when <a href="#clink_colorize_input"><code>clink.colorize_input</code></a> is enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#color_unrecognized"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="color_unrecognized"></a><code>color.unrecognized</code></td>
<td align="center"><a href="#alternatedefault">*</a></td>
<td>When set, this is the color in the input line for a command word that is not recognized as a command, doskey macro, directory, argmatcher, or executable file.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#comment_row_hint_delay"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="comment_row_hint_delay"></a><code>comment_row.hint_delay</code></td>
<td align="center"><code>500</code></td>
<td>Specifies a delay in milliseconds before showing input hints (see <a href="#showinginputhints">Showing Input Hints</a>).  The delay can be up to 3000 milliseconds, or 0 for no delay.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#comment_row_show_hints"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="comment_row_show_hints"></a><code>comment_row.show_hints</code></td>
<td align="center">False</td>
<td>Allow showing input hints in the comment row (see <a href="#showinginputhints">Showing Input Hints</a>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#debug_log_output_callstacks"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="debug_log_output_callstacks"></a><code>debug.log_output_callstacks</code></td>
<td align="center">False</td>
<td>Include callstack when logging output.  This has no effect unless <code>debug.log_terminal</code> is enabled.  This is intended for diagnostic purposes only, and can make the log file grow significantly.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#debug_log_terminal"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="debug_log_terminal"></a><code>debug.log_terminal</code></td>
<td align="center">False</td>
<td>Logs all terminal input and output to the clink.log file.  This is intended for diagnostic purposes only, and can make the log file grow significantly.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#directories_dupe_mode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="directories_dupe_mode"></a><code>directories.dupe_mode</code></td>
<td align="center"><code>add</code></td>
<td>Controls how the current directory history is updated.  A value of <code>add</code> (the default) always adds the current directory to the directory history.  A value of <code>erase_prev</code> will erase any previous entries for the current directory and then add it to the directory history.  Note that directory history is not saved between sessions.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#doskey_enhanced"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="doskey_enhanced"></a><code>doskey.enhanced</code></td>
<td align="center">True</td>
<td>Enhanced Doskey adds the expansion of macros that follow <code>|</code> and <code>&amp;</code> command separators and respects quotes around words when parsing <code>$1</code>...<code>$9</code> tags. To suppress macro expansion for an individual command, prefix the command with a space or semicolon (<code>&nbsp;foo</code> or <code>;foo</code>). Or following <code>|</code> or <code>&amp;</code>, prefix with two spaces or a semicolon (<code>foo|&nbsp; bar</code> or <code>foo|;bar</code>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_aliases"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_aliases"></a><code>exec.aliases</code></td>
<td align="center">True</td>
<td>When matching executables as the first word (<a href="#exec_enable"><code>exec.enable</code></a>), include doskey aliases.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_associations"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_associations"></a><code>exec.associations</code></td>
<td align="center">False</td>
<td>When matching executables as the first word (<a href="#exec_enable"><code>exec.enable</code></a>), include files with a registered file association (e.g. launchable documents such as &quot;.pdf&quot; files).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_commands"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_commands"></a><code>exec.commands</code></td>
<td align="center">True</td>
<td>When matching executables as the first word (<a href="#exec_enable"><code>exec.enable</code></a>), include CMD commands (such as <code>cd</code>, <code>copy</code>, <code>exit</code>, <code>for</code>, <code>if</code>, etc).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_cwd"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_cwd"></a><code>exec.cwd</code></td>
<td align="center">True</td>
<td>When matching executables as the first word (<a href="#exec_enable"><code>exec.enable</code></a>), include executables in the current directory. (This is implicit if the word being completed is a relative path, or if <a href="#exec_files"><code>exec.files</code></a> is true.)</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_dirs"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_dirs"></a><code>exec.dirs</code></td>
<td align="center">True</td>
<td>When matching executables as the first word (<a href="#exec_enable"><code>exec.enable</code></a>), also include directories relative to the current working directory as matches.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_enable"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_enable"></a><code>exec.enable</code></td>
<td align="center">True</td>
<td>Match executables when completing the first word of a line.  Executables are determined by the extensions listed in the <code>%PATHEXT%</code> environment variable.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_files"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_files"></a><code>exec.files</code></td>
<td align="center">False</td>
<td>When matching executables as the first word (<a href="#exec_enable"><code>exec.enable</code></a>), include files in the current directory.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_path"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_path"></a><code>exec.path</code></td>
<td align="center">True</td>
<td>When matching executables as the first word (<a href="#exec_enable"><code>exec.enable</code></a>), include executables found in the directories specified in the <code>%PATH%</code> environment variable.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#exec_space_prefix"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="exec_space_prefix"></a><code>exec.space_prefix</code></td>
<td align="center">True</td>
<td>If the line begins with whitespace then Clink bypasses executable matching (<a href="#exec_path"><code>exec.path</code></a>) and will do normal files matching instead.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#files_hidden"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="files_hidden"></a><code>files.hidden</code></td>
<td align="center">True</td>
<td>Includes or excludes files with the &quot;hidden&quot; attribute set when generating file lists.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#files_system"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="files_system"></a><code>files.system</code></td>
<td align="center">False</td>
<td>Includes or excludes files with the &quot;system&quot; attribute set when generating file lists.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_auto_expand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_auto_expand"></a><code>history.auto_expand</code></td>
<td align="center">True</td>
<td>When enabled, history expansion is automatically performed when a command line is accepted (by pressing <kbd>Enter</kbd>).  When disabled, history expansion is performed only when a corresponding expansion command is used (such as <a href="#rlcmd-clink-expand-history"><code>clink-expand-history</code></a> <kbd>Alt</kbd>-<kbd>^</kbd>, or <a href="#rlcmd-clink-expand-line"><code>clink-expand-line</code></a> <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>E</kbd>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_dont_add_to_history_cmds"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_dont_add_to_history_cmds"></a><code>history.dont_add_to_history_cmds</code></td>
<td align="center"><code>exit history</code></td>
<td>List of commands that aren&#39;t automatically added to the history. Commands are separated by spaces, commas, or semicolons. Default is <code>exit history</code>, to exclude both of those commands.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_dupe_mode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_dupe_mode"></a><code>history.dupe_mode</code></td>
<td align="center"><code>erase_prev</code></td>
<td>If a line is a duplicate of an existing history entry Clink will erase the duplicate when this is set to <code>erase_prev</code>. Setting it to <code>ignore</code> will not add duplicates to the history, and setting it to <code>add</code> will always add lines (except when overridden by <a href="#history_sticky_search"><code>history.sticky_search</code></a>).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_expand_mode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_expand_mode"></a><code>history.expand_mode</code></td>
<td align="center"><code>not_quoted</code></td>
<td>The <code>!</code> character in an entered line can be interpreted to introduce words from the history. This can be enabled and disable by setting this value to <code>on</code> or <code>off</code>. Values of <code>not_squoted</code>, <code>not_dquoted</code>, or <code>not_quoted</code> will skip any <code>!</code> character quoted in single, double, or both quotes respectively.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_ignore_space"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_ignore_space"></a><code>history.ignore_space</code></td>
<td align="center">True</td>
<td>Ignore lines that begin with whitespace when adding lines in to the history.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_max_lines"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_max_lines"></a><code>history.max_lines</code></td>
<td align="center">10000 <a href="#alternatedefault">*</a></td>
<td>The number of history lines to save if <a href="#history_save"><code>history.save</code></a> is enabled (or 0 for unlimited).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_save"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_save"></a><code>history.save</code></td>
<td align="center">True</td>
<td>Saves history between sessions. When disabled, history is neither read from nor written to a master history list; history for each session is written to a temporary file during the session, but is not added to the master history list.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_shared"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_shared"></a><code>history.shared</code></td>
<td align="center">False</td>
<td>When history is shared, all instances of Clink update the master history list after each command and reload the master history list on each prompt.  When history is not shared, each instance updates the master history list on exit.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_show_preview"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_show_preview"></a><code>history.show_preview</code></td>
<td align="center">True</td>
<td>When enabled, if the text at the cursor is subject to history expansion, then this shows a preview of the expanded result below the input line using the <a href="#color_comment_row"><code>color.comment_row</code></a> setting.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_sticky_search"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_sticky_search"></a><code>history.sticky_search</code></td>
<td align="center">False</td>
<td>When enabled, reusing a history line does not add the reused line to the end of the history, and it leaves the history search position on the reused line so next/prev history can continue from there (e.g. replaying commands via <kbd>Up</kbd> several times then <kbd>Enter</kbd>, <kbd>Down</kbd>, <kbd>Enter</kbd>, etc).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_time_format"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_time_format"></a><code>history.time_format</code></td>
<td align="center"><code>%F %T &nbsp</code></td>
<td>This specifies a time format string for showing timestamps for history items.  For a list of format specifiers see <code>clink set history.time_format</code> or <a href="#history-timestamps">History Timestamps</a>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#history_time_stamp"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="history_time_stamp"></a><code>history.time_stamp</code></td>
<td align="center"><code>off</code></td>
<td>The default is <code>off</code>.  When this is <code>save</code>, timestamps are saved for each history item but are only shown when the <code>--show-time</code> flag is used with the <code>history</code> command.  When this is <code>show</code>, timestamps are saved for each history item, and timestamps are shown in the <code>history</code> command unless the <code>--bare</code> or <code>--no-show-time</code> flag is used.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#lua_break_on_error"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="lua_break_on_error"></a><code>lua.break_on_error</code></td>
<td align="center">False</td>
<td>Breaks into Lua debugger on Lua errors.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#lua_break_on_traceback"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="lua_break_on_traceback"></a><code>lua.break_on_traceback</code></td>
<td align="center">False</td>
<td>Breaks into Lua debugger on <code>traceback()</code>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#lua_debug"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="lua_debug"></a><code>lua.debug</code></td>
<td align="center">False</td>
<td>Loads a simple embedded command line debugger when enabled. Breakpoints can be added by calling <a href="#pause">pause()</a>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#lua_path"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="lua_path"></a><code>lua.path</code></td>
<td align="center"></td>
<td>Value to append to the <a href="https://www.lua.org/manual/5.2/manual.html#pdf-package.path"><code>package.path</code></a> Lua variable. Used to search for Lua scripts specified in <code>require()</code> statements.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#lua_strict"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="lua_strict"></a><code>lua.strict</code></td>
<td align="center">True</td>
<td>When enabled, argument errors cause Lua scripts to fail.  This may expose bugs in some older scripts, causing them to fail where they used to succeed. In that case you can try turning this off, but please alert the script owner about the issue so they can fix the script.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#lua_traceback_on_error"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="lua_traceback_on_error"></a><code>lua.traceback_on_error</code></td>
<td align="center">False</td>
<td>Prints stack trace on Lua errors.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_coloring_rules"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_coloring_rules"></a><code>match.coloring_rules</code></td>
<td align="center"></td>
<td>Provides a series of color definitions used when displaying match completions.  See <a href="#completioncolors">Completion Colors</a> for details.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_expand_abbrev"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_expand_abbrev"></a><code>match.expand_abbrev</code></td>
<td align="center">True</td>
<td>Expands an abbreviated path before performing completion.  In an abbreviated path, directory names may be shortened to the minimum number of characters to unambiguously refer to a directory.  For example, &quot;c:\Users\chris\Documents&quot; could be abbreviated as &quot;c:\U\c\Do&quot;, depending on what directories exist in the file system.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_expand_envvars"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_expand_envvars"></a><code>match.expand_envvars</code></td>
<td align="center">False <a href="#alternatedefault">*</a></td>
<td>Expands environment variables in a word before performing completion.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_fit_columns"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_fit_columns"></a><code>match.fit_columns</code></td>
<td align="center">True</td>
<td>When displaying match completions, this calculates column widths to fit as many as possible on the screen.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_ignore_accent"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_ignore_accent"></a><code>match.ignore_accent</code></td>
<td align="center">True</td>
<td>Controls accent sensitivity when completing matches. For example, <code>ä</code> and <code>a</code> are considered equivalent with this enabled.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_ignore_case"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_ignore_case"></a><code>match.ignore_case</code></td>
<td align="center"><code>relaxed</code></td>
<td>Controls case sensitivity when completing matches. <code>off</code> = case sensitive, <code>on</code> = case insensitive, <code>relaxed</code> = case insensitive plus <code>-</code> and <code>_</code> are considered equal.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_limit_fitted_columns"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_limit_fitted_columns"></a><code>match.limit_fitted_columns</code></td>
<td align="center"><code>0</code></td>
<td>When the <a href="#match_fit_columns"><code>match.fit_columns</code></a> setting is enabled, this disables calculating column widths when the number of matches exceeds this value.  The default is 0 (unlimited).  Depending on the screen width and CPU speed, setting a limit may avoid delays.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_max_rows"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_max_rows"></a><code>match.max_rows</code></td>
<td align="center"><code>0</code></td>
<td>The maximum number of rows of items <a href="#rlcmd-clink-select-complete"><code>clink-select-complete</code></a> can show.  When this is 0, the limit is the terminal height.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_preview_rows"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_preview_rows"></a><code>match.preview_rows</code></td>
<td align="center"><code>0</code></td>
<td>The number of rows to show as a preview when using the <a href="#rlcmd-clink-select-complete"><code>clink-select-complete</code></a> command (bound by default to <kbd>Ctrl</kbd>-<kbd>Space</kbd>).  When this is 0, all rows are shown and if there are too many matches it instead prompts first like the <a href="#rlcmd-complete"><code>complete</code></a> command does.  Otherwise it shows the specified number of rows as a preview without prompting, and it expands to show the full set of matches when the selection is moved past the preview rows.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_sort_dirs"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_sort_dirs"></a><code>match.sort_dirs</code></td>
<td align="center"><code>with</code></td>
<td>How to sort matching directory names. <code>before</code> = before files, <code>with</code> = with files, <code>after</code> = after files.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_substring"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_substring"></a><code>match.substring</code></td>
<td align="center">False <a href="#alternatedefault">*</a></td>
<td>When set, if no completions are found with a prefix search, then a substring search is used.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_translate_slashes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_translate_slashes"></a><code>match.translate_slashes</code></td>
<td align="center"><code>auto</code></td>
<td>File and directory completions can be translated to use consistent slashes.  The default is <code>auto</code> which translates all slashes in the completed word to match the first kind of slash in the word (or the system path separator if the word didn&#39;t have any slashes before being completed).  Use <code>slash</code> for forward slashes, <code>backslash</code> for backslashes, or <code>system</code> for the appropriate path separator for the OS host (backslashes on Windows).  Use <code>off</code> to turn off translating slashes.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#match_wild"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="match_wild"></a><code>match.wild</code></td>
<td align="center">True</td>
<td>Matches <code>?</code> and <code>*</code> wildcards and leading <code>.</code> when using any of the completion commands.  Turn this off to behave how bash does, and not match wildcards or leading dots (but <a href="#rlcmd-glob-complete-word"><code>glob-complete-word</code></a> always matches wildcards).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#prompt_async"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="prompt_async"></a><code>prompt.async</code></td>
<td align="center">True</td>
<td>Enables <a href="#asyncpromptfiltering">asynchronous prompt refresh</a>.  Turn this off if prompt filter refreshes are annoying or cause problems.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#prompt_spacing"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="prompt_spacing"></a><code>prompt.spacing</code></td>
<td align="center"><code>normal</code></td>
<td>The default is <code>normal</code> which never removes or adds blank lines.  Set to <code>compact</code> to remove blank lines before the prompt, or set to <code>sparse</code> to remove blank lines and then add one blank line.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#prompt-transient"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="prompt-transient"></a><code>prompt.transient</code></td>
<td align="center"><code>off</code></td>
<td>Controls when past prompts are collapsed (<a href="#transientprompts">transient prompts</a>).  <code>off</code> = never collapse past prompts, <code>always</code> = always collapse past prompts, <code>same_dir</code> = only collapse past prompts when the current working directory hasn&#39;t changed since the last prompt.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#readline_hide_stderr"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="readline_hide_stderr"></a><code>readline.hide_stderr</code></td>
<td align="center">False</td>
<td>Suppresses stderr from the Readline library.  Enable this if Readline error messages are getting in the way.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_adjust_cursor_style"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_adjust_cursor_style"></a><code>terminal.adjust_cursor_style</code></td>
<td align="center">True</td>
<td>When enabled, Clink adjusts the cursor shape and visibility to show Insert Mode, produce the visible bell effect, avoid disorienting cursor flicker, and to support ANSI escape codes that adjust the cursor shape and visibility. But it interferes with the Windows 10 Cursor Shape console setting. You can make the Cursor Shape setting work by disabling this Clink setting (and the features this provides).</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_color_emoji"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_color_emoji"></a><code>terminal.color_emoji</code></td>
<td align="center"><code>auto</code></td>
<td>Set this to indicate whether the terminal program draws emojis using colored double width characters.  This needs to be set accurately in order for Clink to display the input line properly when it contains emoji characters.  When set to <code>off</code> Clink assumes emojis are rendered using 1 character cell.  When set to <code>on</code> Clink assumes emojis are rendered using 2 character cells.  When set to <code>auto</code> (the default) Clink tries to predict how emojis will be rendered based on OS version and terminal program.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_differentiate_keys"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_differentiate_keys"></a><code>terminal.differentiate_keys</code></td>
<td align="center">False</td>
<td>When enabled, pressing <kbd>Ctrl</kbd>-<kbd>H</kbd> or <kbd>I</kbd> or <kbd>M</kbd> or <kbd>[</kbd> generate special key sequences to enable binding them separately from <kbd>Backspace</kbd> or <kbd>Tab</kbd> or <kbd>Enter</kbd> or <kbd>Esc</kbd>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_east_asian_ambiguous"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_east_asian_ambiguous"></a><code>terminal.east_asian_ambiguous</code></td>
<td align="center"><code>auto</code></td>
<td>There is a group of East Asian characters whose widths are ambiguous in the Unicode standard.  This setting controls how to resolve the ambiguous widths.  By default this is set to <code>auto</code>, but some terminal hosts may require setting this to a different value to work around limitations in the terminal hosts.  Setting this to <code>font</code> measures the East Asian Ambiguous character widths using the current font.  Setting it to <code>one</code> uses 1 as the width, or <code>two</code> uses 2 as the width.  When this is &#39;auto&#39; (the default) and the current code page is 932, 936, 949, or 950 then it tries to automatically measure the width based on which terminal host and font are used, or for any other code pages (including UTF8) it uses 1 as the width.  The <code>%CLINK_EAST_ASIAN_AMBIGUOUS%</code> environment variable overrides this setting.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_emulation"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_emulation"></a><code>terminal.emulation</code></td>
<td align="center"><code>auto</code></td>
<td>Clink can either emulate a virtual terminal and handle ANSI escape codes itself, or let the console host natively handle ANSI escape codes. <code>native</code> = pass output directly to the console host process, <code>emulate</code> = clink handles ANSI escape codes itself, <code>auto</code> = emulate except when running in ConEmu, Windows Terminal, WezTerm, or Windows 10 new console.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_mouse_input"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_mouse_input"></a><code>terminal.mouse_input</code></td>
<td align="center"><code>auto</code></td>
<td>Clink can optionally respond to mouse input, instead of letting the terminal respond to mouse input (e.g. to select text on the screen).  When mouse input is enabled in Clink, clicking in the input line sets the cursor position, and clicking in popup lists selects an item, etc.  Setting this to <code>off</code> lets the terminal host handle mouse input, <code>on</code> lets Clink handle mouse input, and <code>auto</code> lets Clink handle mouse input in ConEmu and in the default Conhost terminal when Quick Edit mode is unchecked in the console Properties dialog.  For more information see <a href="#gettingstarted_mouseinput">Mouse Input</a>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_mouse_modifier"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_mouse_modifier"></a><code>terminal.mouse_modifier</code></td>
<td align="center"></td>
<td>This selects which modifier keys (<kbd>Alt</kbd>, <kbd>Ctrl</kbd>, <kbd>Shift</kbd>) must be held in order for Clink to respond to mouse input when mouse input is enabled by the <a href="#terminal_mouse_input"><code>terminal.mouse_input</code></a> setting.  This is a text string that can list one or more modifier keys:  &#39;alt&#39;, &#39;ctrl&#39;, and &#39;shift&#39;.  For example, setting it to &quot;alt shift&quot; causes Clink to only respond to mouse input when both <kbd>Alt</kbd> and <kbd>Shift</kbd> are held (and not <kbd>Ctrl</kbd>).  If the <code>%CLINK_MOUSE_MODIFIER%</code> environment variable is set then its value supersedes this setting.  For more information see <a href="#gettingstarted_mouseinput">Mouse Input</a>.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_raw_esc"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_raw_esc"></a><code>terminal.raw_esc</code></td>
<td align="center">False</td>
<td>When enabled, pressing <kbd>Esc</kbd> sends a literal escape character like in Unix or Linux terminals.  This setting is disabled by default to provide a more predictable, reliable, and configurable input experience on Windows.  Changing this only affects future Clink sessions, not the current session.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_scrollbars"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_scrollbars"></a><code>terminal.scrollbars</code></td>
<td align="center">True</td>
<td>When enabled, lists show scrollbars using extended Unicode box drawing characters.  Some terminals or fonts may be incompatible with this.</td>
</tr>
<tr>
<td align="center"><a class="wlink" href="#terminal_use_altgr_substitute"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="terminal_use_altgr_substitute"></a><code>terminal.use_altgr_substitute</code></td>
<td align="center">False</td>
<td>Support Windows&#39; <kbd>Ctrl</kbd>-<kbd>Alt</kbd> substitute for <kbd>AltGr</kbd>. Turning this off may resolve collisions with Readline&#39;s key bindings.</td>
</tr>
</tbody></table>
<p/>

<p><a name="alternatedefault"></a></p>
<blockquote>
<p><strong>Note:</strong></p>
<p>Some settings have alternative default values when Clink is installed with &quot;Use enhanced default settings&quot; checked in the setup program.  This enables more of Clink&#39;s enhancements by default.</p>
</blockquote>
<blockquote>
<p><strong>Compatibility Notes:</strong></p>
<ul>
<li>The <code>esc_clears_line</code> setting has been replaced by a <a href="#rlcmd-clink-reset-line"><code>clink-reset-line</code></a> command that is by default bound to the <kbd>Escape</kbd> key.  See <a href="#keybindings">Customizing Key Bindings</a> for more information.</li>
<li>The <code>match_colour</code> setting has been removed, and Clink now supports Readline&#39;s completion coloring.  See <a href="#completioncolors">Completion Colors</a> for more information.</li>
</ul>
</blockquote>
<p><a name="colorsettings"></a></p>
<h2 id="color-settings"><a class="wlink" href="#colorsettings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Color Settings <span class="uplinks"><a href="#configclink">up</a> <a href="#toc">top</a></span></h2>
<p>This section describes how to set a color.</p>
<p>For information on what color settings are available and how they&#39;re used, see the <a href="#classifywords">Coloring the Input Text</a> section and the <a href="#color_arg">color.*</a> settings.</p>
<h3 id="friendly-color-names"><a class="wlink" href="#friendly-color-names"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Friendly Color Names <span class="uplinks"><a href="#colorsettings">up</a> <a href="#toc">top</a></span></h3>
<p>The Clink color <a href="#clinksettings">settings</a> are the ones whose names begin with <code>color.</code>.  Color settings use the following syntax:</p>
<p><code>[<span class="arg">attributes</span>] [<span class="arg">foreground_color</span>] [on [<span class="arg">background_color</span>]]</code></p>
<p>Optional attributes (can be abbreviated to 3 letters):</p>
<ul>
<li><code>bold</code> or <code>nobold</code> adds or removes boldface (usually represented by forcing the color to use high intensity if it doesn&#39;t already; some terminal programs may also/instead use a bolder font weight).</li>
<li><code>underline</code> adds an underline (some terminal programs cannot display underlines).</li>
<li><code>italic</code> adds italics (some terminal programs cannot display italics).  This keyword requires Clink v1.7.0 or newer; in older versions you can use the <code>sgr</code> keyword with the corresponding escape code sequence such as <code>sgr 3</code>.</li>
<li><code>reverse</code> swaps the foreground and background colors.  This keyword requires Clink v1.7.0 or newer; in older versions you can use the <code>sgr</code> keyword with the corresponding escape code sequence such as <code>sgr 7</code>.</li>
</ul>
<p>Optional colors for <span class="arg">foreground_color</span> and <span class="arg">background_color</span> (can be abbreviated to 3 letters):</p>
<ul>
<li><code>default</code> or <code>normal</code> uses the default color as defined by the current color theme in the console window.</li>
<li><code>black</code>, <code>red</code>, <code>green</code>, <code>yellow</code>, <code>blue</code>, <code>cyan</code>, <code>magenta</code>, <code>white</code> are the basic colors names.</li>
<li><code>bright</code> can be combined with any of the other color names to make them bright (high intensity).</li>
<li><code>#XXXXXX</code> specifies a color using 24-bit RGB hex format; the first two digits are the red value, the next two digits are the green value, and the last two digits are the blue value (some terminal programs cannot display 24-bit colors, and will try to instead use the closest supported color).  Requires Clink v1.7.0 or newer; in older versions you can use the <code>sgr</code> keyword with the corresponding escape code sequence such as <code>sgr 38;2;255;80;160</code>.</li>
<li><code>#XXX</code> specifies a color using a short RGB hex format; each digit is doubled so <code>#3fc</code> means <code>#33ffcc</code>.  Requires Clink v1.7.0 or newer; in older versions you can use the <code>sgr</code> keyword with the corresponding escape code sequence such as <code>sgr 38;2;255;80;160</code>.</li>
</ul>
<p>Examples (specific results may depend on the console host program):</p>
<ul>
<li><code>bri yel</code> for bright yellow foreground on default background color.</li>
<li><code>bold</code> for bright default foreground on default background color.</li>
<li><code>underline bright black on white</code> for dark gray (bright black) foreground with underline on light gray (white) background.</li>
<li><code>default on blue</code> for default foreground color on blue background.</li>
<li><code>bold underline green on #222</code> for bright green with underline on a dark gray background.</li>
</ul>
<h3 id="alternative-sgr-syntax"><a class="wlink" href="#alternative-sgr-syntax"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Alternative SGR Syntax <span class="uplinks"><a href="#colorsettings">up</a> <a href="#toc">top</a></span></h3>
<p>It&#39;s also possible to set any ANSI <a href="https://wikipedia.org/wiki/ANSI_escape_code#SGR">SGR escape code</a> using <code>sgr <span class="arg">SGR_parameters</span></code> (for example <code>sgr 7</code> is the code for reverse video, which swaps the foreground and background colors).</p>
<p>Be careful, since some escape code sequences might behave strangely.</p>
<h3 id="color-themes"><a class="wlink" href="#color-themes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Color Themes <span class="uplinks"><a href="#colorsettings">up</a> <a href="#toc">top</a></span></h3>
<p>Clink has many <a href="#color_arg">color settings</a> which can be set with <code>clink set color.<span class="arg">setting_name</span> <span class="arg"><a href="#friendly-color-names">color_value</a></span></code>.</p>
<p>Predefined color setting values can be grouped into a .clinktheme file to make it easy to save, apply, and share different color themes for Clink.  These color theme files require Clink v1.7.0 or newer.</p>
<p>Clink looks for color theme files in these directories:</p>
<ol>
<li>Any directories listed in the <code>%CLINK_THEMES_DIR%</code> environment variable (multiple directories may be separated by semicolons).</li>
<li>A <code>themes\</code> subdirectory under each scripts directory listed by <code>clink info</code> (see <a href="#lua-scripts-location">Location of Lua Scripts</a>).</li>
<li>A <code>themes\</code> subdirectory under the Clink program directory and the Clink profile directory.</li>
<li>Or you can provide a full path name to a file, such as <code>c:\mythemes\Colorful.clinktheme</code>.</li>
</ol>
<p>To apply a color theme, run <code>clink config theme use <span class="arg">theme_name</span></code> which will apply the named theme and use it to replace color settings in the current Clink profile.  Or set the <code>CLINK_COLORTHEME</code> environment variable to the name or full path and filename of a .clinktheme file.  The environment variable causes the named theme to override color settings from the profile&#39;s settings file, which allows multiple concurrent Clink sessions to use different color themes.</p>
<blockquote>
<p><strong>Note:</strong> The <code>clink config theme use</code> command first saves the current color theme as &quot;Previous Theme&quot; to help avoid accidentally losing color settings.</p>
</blockquote>
<p>To list available color themes, run <code>clink config theme list</code>.  Clink includes a few theme files, and you can find more shared online by Clink users.  One place to find more color themes for Clink is the <a href="https://github.com/chrisant996/clink-themes">clink-themes</a> repo.</p>
<p>To show a demo of a what a color theme will look like, run <code>clink config theme show <span class="arg">theme_name</span></code>.</p>
<p>To save the current profile&#39;s color settings into a .clinktheme file, run <code>clink config theme save <span class="arg">theme_name</span></code>.  The color settings are saved into a file named <code>themes\<span class="arg">theme_name</span>.clinktheme</code> under the current Clink profile directory.</p>
<p>See <a href="#coloring-the-input-text">Coloring the Input Text</a> for information on specific color settings.</p>
<blockquote>
<p><strong>Note:</strong>  The .clinktheme files are Clink color themes for Clink-specific color settings.  They are not terminal color themes and don&#39;t affect other programs or the terminal in general.  Consult your terminal program&#39;s documentation for how to set terminal color themes for it.</p>
</blockquote>
<fieldset><legend>Warning</legend>
If you want to change a .clinktheme file that came with Clink, make a copy of the file and edit the copy.  Don't edit the original .clinktheme file directly, because any changes in a file that came with Clink will be reverted the next time a Clink update is installed.
</fieldset>

<h2 id="custom-prompts"><a class="wlink" href="#custom-prompts"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Custom Prompts <span class="uplinks"><a href="#configclink">up</a> <a href="#toc">top</a></span></h2>
<p>You can choose a custom prompt to use, or you can <a href="#customizing-the-prompt">make your own prompt</a>.</p>
<p>A custom prompt can be packaged into a .clinkprompt file to make it easy to choose which prompt to use, and easy to share custom prompts with other users.</p>
<p>Clink looks for custom prompt files in these directories:</p>
<ol>
<li>Any directories listed in the <code>%CLINK_THEMES_DIR%</code> environment variable (multiple directories may be separated by semicolons).</li>
<li>A <code>themes\</code> subdirectory under each scripts directory listed by <code>clink info</code> (see <a href="#lua-scripts-location">Location of Lua Scripts</a>).</li>
<li>Or you can provide a full path name to a file, such as <code>c:\mythemes\Fancy Prompt.clinkprompt</code>.</li>
</ol>
<p>To activate a custom prompt, run <code>clink config prompt use <span class="arg">prompt_name</span></code> which will load and use the named prompt, as well as update the settings accordingly in the current Clink profile.  Or set the <code>CLINK_CUSTOMPROMPT</code> environment variable to the name or full path and filename of a .clinkprompt file.  The environment variable causes the named prompt to override the profile&#39;s settings file, and allows multiple concurrent Clink sessions to use different custom prompts.</p>
<p>To list available custom prompts, run <code>clink config prompt list</code>.  Clink includes a few custom prompt files, and you can find more shared online by Clink users.  Some places you can find more custom prompts for Clink are <a href="https://github.com/chrisant996/clink-flex-prompt">clink-flex-prompt</a>, <a href="https://github.com/chrisant996/clink-themes">clink-themes</a>, and <a href="https://ohmyposh.dev">oh-my-posh</a>.  Check <a href="#oh-my-posh">here</a> for quick info on using oh-my-posh prompt themes with Clink.</p>
<p>To show a demo of what a custom prompt will look like, run <code>clink config prompt show <span class="arg">prompt_name</span></code>.</p>
<p>See <a href="#customisingtheprompt">Customizing the Prompt</a> for information on writing your own custom prompts, and see <a href="#sharing-custom-prompts">Sharing Custom Prompts</a> for information on optionally packaging them as &quot;*.clinkprompt&quot; files.</p>
<fieldset><legend>Warning</legend>
If you want to change a .clinkprompt file that came with Clink, make a copy of the file and edit the copy.  Don't edit the original .clinkprompt theme file directly, because any changes in a file that came with Clink will be reverted the next time a Clink update is installed.
</fieldset>

<h3 id="compatibility-between-clinkprompt-versus-lua-files"><a class="wlink" href="#compatibility-between-clinkprompt-versus-lua-files"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Compatibility Between .clinkprompt Versus .lua Files <span class="uplinks"><a href="#custom-prompts">up</a> <a href="#toc">top</a></span></h3>
<p>When you activate a .clinkprompt file via <code>clink config prompt use</code> you might see a garbled prompt, or still see your old prompt.</p>
<p>That can happen because activating a .clinkprompt file deactivates other .clinkprompt files, but it doesn&#39;t deactivate prompt filters registered from .lua files (it could break other things if it did).</p>
<p>So, if you have a custom prompt in a .lua file then you may need to update the .lua file to disable itself while a .clinkprompt file is active.</p>
<p>For most .lua custom prompts, you can simply rename its file to change the file extension from &quot;.lua&quot; to &quot;.clinkprompt&quot;, and then it won&#39;t interfere with other .clinkprompt files.</p>
<p>Or, you can modify any prompt filter to automatically disable itself like this:</p>
<pre><code class="language-lua">local your_prompt_filter = clink.promptfilter()

function your_prompt_filter:filter()
    -- Insert the following if..end line at the beginning of any .lua prompt filter to automatically
    -- disable it while a .clinkprompt file is active (but don&#39;t insert it in a .clinkprompt file).
    if clink.getclinkprompt and clink.getclinkprompt() then return end

    -- The rest of your prompt filter goes here...
end
</code></pre>
<p><a name="filelocations"></a></p>
<h2 id="file-locations"><a class="wlink" href="#filelocations"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>File Locations <span class="uplinks"><a href="#configclink">up</a> <a href="#toc">top</a></span></h2>
<p>Settings and history are persisted to disk from session to session. By default Clink uses the current user&#39;s non-roaming application data directory. This user directory is usually found in one of the following locations;</p>
<ul>
<li>Windows XP: <code>c:\Documents and Settings\<span class="arg">username</span>\Local Settings\Application Data\clink</code></li>
<li>Windows Vista onwards: <code>c:\Users\<span class="arg">username</span>\AppData\Local\clink</code></li>
</ul>
<p>All of the above locations can be overridden using the <code>--profile <span class="arg">path</span></code> command line option which is specified when injecting Clink into cmd.exe using <code>clink inject</code>.  Or with the <code>%CLINK_PROFILE%</code> environment variable if it is already present when Clink is injected (this envvar takes precedence over any other mechanism of specifying a profile directory, if more than one was used).</p>
<p>You can use <code>clink info</code> to find the directories and configuration files for the current Clink session.</p>
<p>Also see <a href="#lua-scripts-location">Location of Lua Scripts</a> for details on where Clink looks for Lua scripts, and <a href="#themes-directories">Themes Directories</a> for details on where Clink looks for color theme files (*.clinktheme) and custom prompt files (*.clinkprompt).</p>
<blockquote>
<p><strong>Notes:</strong></p>
<ul>
<li>Clink performs tilde expansion on the <code>%CLINK_PROFILE%</code> environment variable value.  If the path begins with <code>~\</code> then it is replaced with the current user&#39;s home directory (<code>%HOME%</code> or <code>%HOMEDRIVE%%HOMEPATH%</code> or <code>%USERPROFILE%</code>).</li>
<li>The <code>--profile</code> flag has a quirk for backward compatibility with older versions of Clink: <code>~\</code> in <code>--profile</code> is expanded to <code>%LOCALAPPDATA%</code> instead.</li>
</ul>
</blockquote>
<h4 id="overriding-the-profile-directory-when-installed-for-autorun"><a class="wlink" href="#overriding-the-profile-directory-when-installed-for-autorun"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Overriding the profile directory when installed for Autorun <span class="uplinks"><a href="#filelocations">up</a> <a href="#toc">top</a></span></h4>
<p>If you&#39;ve installed Clink using the setup program with the &quot;Autorun when cmd.exe starts&quot; box checked, then the profile directory has been explicitly set to <code>%LOCALAPPDATA%\clink</code>.  That will take precedence over any other stored configuration.</p>
<p>You can override it via <code>set CLINK_PROFILE=<span class="arg">path</span></code> after starting cmd.exe.</p>
<p>Or you can use <code>clink autorun install -- --profile <span class="arg">path</span></code> to change which profile directory is specified (see <code>clink autorun --help</code> and <code>clink autorun show</code>).</p>
<p>Or if you want to use Autorun but also override the profile directory any of the usual ways, then run <code>clink autorun uninstall</code> and then <code>clink autorun install</code>.  That will remove the explicit profile directory specification that was applied by the setup program.</p>
<h3 id="files"><a class="wlink" href="#files"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Files <span class="uplinks"><a href="#filelocations">up</a> <a href="#toc">top</a></span></h3>
<p>
<dt>.inputrc</dt>
<dd>
This configures the Readline library used by Clink; it can contain key bindings and various settings.  See <a href="#init-file">Readline Init File</a> for details, or see <a href="#gettingstarted_inputrc">Create a .inputrc file</a> for help getting started.
</p>

<p>
<dt>clink_settings</dt>
<dd>
This is where Clink stores its settings.  See <a href="#clink-settings">Clink Settings</a> for more information.

<p>The location of the <code>clink_settings</code> file may also be overridden with the <code>%CLINK_SETTINGS%</code> environment variable.  This is not recommended because it can be confusing; if the environment variable gets cleared or isn&#39;t always set then a different settings file may get used sometimes.  But, one reason to use it is to make your settings sync with other computers.</p>
<ul>
<li><code>set CLINK_SETTINGS=%USERPROFILE%\OneDrive\clink</code> can let settings sync between computers through your OneDrive account.</li>
<li><code>set CLINK_SETTINGS=%USERPROFILE%\AppData\Roaming</code> can let settings sync between computers in a work environment.</dd></p></li>
</ul>
<p>
<dt>clink_history</dt>
<dd>
This is where Clink stores command history.  See <a href="#saved-command-history">Saved Command History</a> for more information.
</dd></p>

<p>
<dt>clink.log</dt>
<dd>
The log file is written in the profile directory.  Clink writes diagnostic information to the log file while Clink is running.  Use <code>clink info</code> to find where it is located.
</dd></p>

<p>
<dt>default_settings</dt>
<dd>
This is an optional file.  When Clink loads its settings, it first tries to load default values for settings from a <code>default_settings</code> file in either the profile directory or the binaries directory.  Then it loads the <code>clink_settings</code> file from the profile directory.

<p>The <code>default_settings</code> file can be useful for portable installations or when sharing your favorite Clink configuration with friends.</p>
</dd></p>

<p>
<dt>default_inputrc</dt>
<dd>
This is an optional file.  When Clink loads the <a href="#init-file">Readline Init File</a>, it first tries to load default values from a <code>default_inputrc</code> file in either the profile directory or the binaries directory.  Then it loads the <code>.inputrc</code> file.

<p>The <code>default_inputrc</code> file can be useful for portable installations or when sharing your favorite Clink configuration with friends.</p>
</dd></p>

<h2 id="command-line-options"><a class="wlink" href="#command-line-options"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Command Line Options <span class="uplinks"><a href="#configclink">up</a> <a href="#toc">top</a></span></h2>
<p>
<dt>clink</dt>
<dd>
Shows command line usage help.</dd>
</p>

<p>
<dt>clink inject</dt>
<dd>
Injects Clink into a CMD.EXE process.<br/>
See <code>clink inject --help</code> for more information.</dd>
</p>

<blockquote>
<p><strong>Note:</strong> If the <code>--profile</code> path begins with <code>~\</code> then it is replaced with the current user&#39;s home directory (<code>%HOME%</code> or <code>%HOMEDRIVE%%HOMEPATH%</code> or <code>%USERPROFILE%</code>).</p>
</blockquote>
<p>
<dt>clink autorun</dt>
<dd>
Manages Clink's entry in CMD.EXE's autorun section, which can automatically inject Clink when starting CMD.EXE.<br/>
When Clink is installed for autorun, the automatic inject can be overridden by setting the <code>CLINK_NOAUTORUN</code> environment variable (to any value).<br/>
See <code>clink autorun --help</code> for more information.</dd>
</p>

<p>
<a name="clinksetcommand"></a>
<dt>clink set</dt>
<dd>
<code>clink set</code> by itself lists all settings and their values.<br/>
<code>clink set --describe</code> by itself lists all settings and their descriptions (instead of their values).<br/>
<code>clink set <span class="arg">setting_name</span></code> describes the setting and shows its current value.<br/>
<code>clink set <span class="arg">setting_name</span> clear</code> resets the setting to its default value.<br/>
<code>clink set <span class="arg">setting_name</span> <span class="arg">value</span></code> sets the setting to the specified value.</dd>
</p>

<p>
<dt>clink config prompt</dt>
<dd>
Configures Clink to use a custom prompt module.<br/>
See <code>clink config prompt --help</code> or <a href="#custom-prompts">Custom Prompts</a> for more information.</dd>
</p>

<p>
<dt>clink config theme</dt>
<dd>
Configures Clink to use a color theme.<br/>
See <code>clink config theme --help</code> or <a href="#color-themes">Color Themes</a> for more information.</dd>
</p>

<p>
<dt>clink installscripts</dt>
<dd>
Adds a path to search for Lua scripts.<br/>
The path is stored in the registry and applies to all installations of Clink, regardless where their config paths are, etc.  This is intended to make it easy for package managers like Scoop to be able to install (and uninstall) scripts for use with Clink.</br>
See <code>clink installscripts --help</code> for more information.</dd>
</p>

<p>
<dt>clink uninstallscripts</dt>
<dd>
Removes a path added by <code>clink installscripts</code>.</br>
See <code>clink uninstallscripts --help</code> for more information.</dd>
</p>

<p>
<dt>clink history</dt>
<dd>
Lists the command history.<br/>
See <code>clink history --help</code> for more information.<br/>
Also, Clink automatically defines <code>history</code> as an alias for <code>clink history</code>.</dd>
</p>

<p>
<dt>clink info</dt>
<dd>
Prints information about Clink, including the version and various configuration directories and files.<br/>
Or <code>clink --version</code> shows just the version number.</dd>
</p>

<p>
<dt>clink echo</dt>
<dd>
Echos key sequences to use in the .inputrc files for binding keys to Clink commands.  Each key pressed prints the associated key sequence on a separate line, until <kbd>Ctrl</kbd>-<kbd>C</kbd> is pressed.</dd>
</p>

<p>
<dt>clink update</dt>
<dd>
Checks for an updated version of Clink.  If one is available, it is downloaded and will be installed the next time Clink is injected.</dd>
</p>

<h2 id="automatic-updates"><a class="wlink" href="#automatic-updates"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Automatic Updates <span class="uplinks"><a href="#configclink">up</a> <a href="#toc">top</a></span></h2>
<p>By default, Clink periodically and automatically checks for new versions.  When an update is available, Clink prints a message on startup.  To apply an update, run <code>clink update</code> when convenient to do so.</p>
<p>The default interval between checks is 5 days, which means after Clink checks for an update it waits at least 5 days before checking again.  You can control the frequency of update checks with <code>clink set <a href="#clink_update_interval">clink.update_interval</a> <span class="arg">days</span></code>, where <span class="arg">days</span> is the minimum number of days between checking for updates.</p>
<p>You can control what happens when an update is available by using <code>clink set <a href="#clink_autoupdate">clink.autoupdate</a> <span class="arg">mode</span></code>, where <span class="arg">mode</span> is one of these:</p>
<table>
<thead>
<tr>
<th>Mode</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>off</code></td>
<td>Clink does not automatically check for updates, but you can use <code>clink update</code> or <code>clink update --check</code> to check for updates.</td>
</tr>
<tr>
<td><code>check</code></td>
<td>This is the default; Clink periodically checks for updates and prints a message when an update is available.</td>
</tr>
<tr>
<td><code>prompt</code></td>
<td>Clink periodically checks for updates and if one is available then it shows a window to prompt whether to install the update.</td>
</tr>
<tr>
<td><code>auto</code></td>
<td>Clink periodically checks for updates and also attempts to automatically install an update.  If elevation is needed then it pops up a prompt window, otherwise it automatically installs the update.</td>
</tr>
</tbody></table>
<br/>

<blockquote>
<p><strong>Notes:</strong></p>
<ul>
<li>The auto-updater settings are stored in the profile, so different profiles can be configured differently for automatic updates.</li>
<li>The updater does nothing if the Clink program files are readonly.</li>
<li>The updater requires PowerShell, which is present by default in Windows 7 and higher.</li>
<li>Clink v1.5.5 added <code>check</code>, <code>prompt</code>, and <code>auto</code>.  Before that, only <code>false</code> and <code>true</code> were available (and <code>true</code> behaved the same as <code>check</code>).</li>
</ul>
</blockquote>
<h2 id="portable-configuration"><a class="wlink" href="#portable-configuration"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Portable Configuration <span class="uplinks"><a href="#configclink">up</a> <a href="#toc">top</a></span></h2>
<p>Sometimes it&#39;s useful to run Clink from a flash drive or from a network share, especially if you want to use Clink on someone else&#39;s computer.</p>
<p>Here&#39;s how you can set up a portable configuration for Clink:</p>
<ol>
<li>Put your Lua scripts and other tools in the same directory as the Clink executable files.  For example fzf.exe, z.cmd, oh-my-posh.exe, starship.exe etc can all go in the same directory on a flash drive or network share.</li>
<li>Make a batch file such as <code>portable.bat</code> that injects Clink using a specific profile directory.<ul>
<li>On a flash drive, you can have a portable profile in a subdirectory under the Clink directory.</li>
<li>On a network share, you&#39;ll want to copy some initial settings into a local profile directory (a profile directory on a network share will be slow).</li>
</ul>
</li>
<li>In any cmd.exe window on any computer, you can then run the <code>portable.bat</code> script to inject Clink and have all your favorite settings and key bindings work.</li>
</ol>
<p>Here are some sample scripts:</p>
<h3 id="portablebat-on-a-flash-drive"><a class="wlink" href="#portablebat-on-a-flash-drive"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>portable.bat (on a flash drive) <span class="uplinks"><a href="#portable-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>This sample script assumes the portable.bat script is in the Clink directory, and it uses a <code>clink_portable</code> profile directory under the Clink directory.</p>
<pre><code class="language-cmd">@echo off
rem -- Do any other desired configuration here, such as loading a doskey macro file.
call &quot;%~dp0clink.bat&quot; inject --profile &quot;%~dp0clink_portable&quot; %1 %2 %3 %4 %5 %6 %7 %8 %9
</code></pre>
<h3 id="portablebat-on-a-network-share"><a class="wlink" href="#portablebat-on-a-network-share"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>portable.bat (on a network share) <span class="uplinks"><a href="#portable-configuration">up</a> <a href="#toc">top</a></span></h3>
<p>This sample script assumes the portable.bat script is in the Clink directory, and that there is a file <code>portable_clink_settings</code> with the settings you want to copy to the local profile directory.</p>
<pre><code class="language-cmd">@echo off
if not exist &quot;%TEMP%\clink_portable&quot; md &quot;%TEMP%\clink_portable&quot; &gt;nul
if not exist &quot;%TEMP%\clink_portable\clink_settings&quot; copy &quot;%~dp0portable_clink_settings&quot; &quot;%TEMP%\clink_portable\clink_settings&quot; &gt;nul
rem -- Do any other desired configuration here, such as loading a doskey macro file.
call &quot;%~dp0clink.bat&quot; inject --profile &quot;%TEMP%\clink_portable&quot; %1 %2 %3 %4 %5 %6 %7 %8 %9
</code></pre>
<p><a name="configreadline"></a></p>
<h1 id="configuring-readline"><a class="wlink" href="#configreadline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Configuring Readline <span class="uplinks"><a href="#toc">top</a></span></h1>
<p>Clink uses the <a href="https://tiswww.case.edu/php/chet/readline/rltop.html">GNU Readline library</a> to provide line editing functionality, which can be configured to add custom keybindings and macros by creating a Readline init file. The Clink documentation includes an updated and tailored copy of the Readline documentation, below.</p>
<table class="linkmenu">
<tr><td><a href="#the-basics">The Basics</a></td><td>The basics of using the Readline input editor in Clink.</td></tr>
<tr><td><a href="#init-file">Init File</a></td><td>About the .inputrc init file, configuration variables, and key bindings.</td></tr>
<tr><td><a href="#bindable-commands">Bindable Commands</a></td><td>The commands available for key bindings.</td></tr>
<tr><td><a href="#completion-colors">Completion Colors</a></td><td>How to customize the completion colors.</td></tr>
<tr><td><a href="#popupwindow">Popup Windows</a></td><td>Using the popup windows.</td></tr>
</table>

<h2 id="the-basics"><a class="wlink" href="#the-basics"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The Basics <span class="uplinks"><a href="#configreadline">up</a> <a href="#toc">top</a></span></h2>
<h3 id="bare-essentials"><a class="wlink" href="#bare-essentials"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Bare Essentials <span class="uplinks"><a href="#the-basics">up</a> <a href="#toc">top</a></span></h3>
<p>To enter characters into the line, simply type them. The typed character appears where the cursor was, and then the cursor moves one space to the right. If you mistype a character, you can use <kbd>Backspace</kbd> to back up and delete the mistyped character.</p>
<p>Sometimes you may mistype a character, and not notice the error until you have typed several other characters. In that case, you can type <kbd>Left</kbd> (the left arrow key) to move the cursor to the left, and then correct your mistake. Afterwards, you can move the cursor to the right with <kbd>Right</kbd> (the right arrow key).</p>
<p>When you add text in the middle of a line, you will notice that characters to the right of the cursor are &quot;pushed over&quot; to make room for the text that you have inserted. Likewise, when you delete text behind the cursor, characters to the right of the cursor are &quot;pulled back&quot; to fill in the blank space created by the removal of the text. A list of the bare essentials for editing the text of an input line follows.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><kbd>Left</kbd></td>
<td>Move back one character.</td>
</tr>
<tr>
<td><kbd>Right</kbd></td>
<td>Move forward one character.</td>
</tr>
<tr>
<td><kbd>Backspace</kbd></td>
<td>Delete the character to the left of the cursor.</td>
</tr>
<tr>
<td><kbd>Del</kbd></td>
<td>Delete the character underneath the cursor.</td>
</tr>
<tr>
<td><kbd>A</kbd>, <kbd>a</kbd>, <kbd>1</kbd>, <kbd>!</kbd>, <kbd>"</kbd>, <kbd>/</kbd>, etc</td>
<td>Insert the typed character into the line at the cursor.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>z</kbd> or<br/><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>Ctrl</kbd>-<kbd>u</kbd></td>
<td>Undo the last editing command. You can undo all the way back to an empty line.</td>
</tr>
<tr>
<td><kbd>Home</kbd></td>
<td>Move to the start of the line.</td>
</tr>
<tr>
<td><kbd>End</kbd></td>
<td>Move to the end of the line.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>Left</kbd></td>
<td>Move backward a word, where a word is composed of letters and digits.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>Right</kbd></td>
<td>Move forward a word.</td>
</tr>
</tbody></table>
<h3 id="killing-and-yanking"><a class="wlink" href="#killing-and-yanking"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Killing and Yanking <span class="uplinks"><a href="#the-basics">up</a> <a href="#toc">top</a></span></h3>
<p><em>Killing</em> text means to delete the text from the line, but to save it away for later use, usually by <em>yanking</em> (re-inserting) it back into the line. (&quot;Cut&quot; and &quot;paste&quot; are more recent jargon for &quot;kill&quot; and &quot;yank&quot;, but killing and yanking do not affect the system&#39;s clipboard.)</p>
<p>If the description for a command says that it &quot;kills&quot; text, then you can be sure that you can get the text back in a different (or the same) place later.</p>
<p>When you use a kill command, the text is saved in a <em>kill-ring</em>. Any number of consecutive kills save all of the killed text together, so that when you yank it back, you get it all. The kill ring is not line specific; the text that you killed on a previously typed line is available to be yanked back later, when you are typing another line.</p>
<p>Here are some basic commands for killing text.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><kbd>Ctrl</kbd>-<kbd>End</kbd></td>
<td>Kill the text from the current cursor position to the end of the line.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>Del</kbd></td>
<td>Kill from the cursor to the end of the current word, or, if between words, to the end of the next word. Word boundaries are the same as those used by <kbd>Ctrl</kbd>-<kbd>Right</kbd>.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>Backspace</kbd></td>
<td>Kill from the cursor the start of the current word, or, if between words, to the start of the previous word. Word boundaries are the same as those used by <kbd>Ctrl</kbd>-<kbd>Left</kbd>.</td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>w</kbd></td>
<td>Kill from the cursor to the previous whitespace. This is different than <kbd>Ctrl</kbd>-<kbd>Backspace</kbd> because the word boundaries differ.</td>
</tr>
</tbody></table>
<p>Here is how to <em>yank</em> the text back into the line. Yanking means to copy the most-recently-killed text from the kill buffer.</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><kbd>Ctrl</kbd>-<kbd>y</kbd></td>
<td>Yank the most recently killed text back into the buffer at the cursor.</td>
</tr>
<tr>
<td><kbd>Alt</kbd>-<kbd>y</kbd></td>
<td>Rotate the kill-ring, and yank the new top. You can only do this if the prior command is <kbd>Ctrl</kbd>-<kbd>y</kbd> or <kbd>Alt</kbd>-<kbd>y</kbd>.</td>
</tr>
</tbody></table>
<h3 id="readline-arguments"><a class="wlink" href="#readline-arguments"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Readline Arguments <span class="uplinks"><a href="#the-basics">up</a> <a href="#toc">top</a></span></h3>
<p>You can pass numeric arguments to Readline commands. Sometimes the argument acts as a repeat count, other times it is the <em>sign</em> of the argument that is significant. If you pass a negative argument to a command which normally acts in a forward direction, that command will act in a backward direction. For example, to kill text back to the start of the line, you might type <kbd>Alt</kbd>-<kbd>-</kbd> <kbd>Ctrl</kbd>-<kbd>k</kbd>.</p>
<p>The general way to pass numeric arguments to a command is to type meta digits before the command. If the first &quot;digit&quot; typed is a minus sign (<code>-</code>), then the sign of the argument will be negative. Once you have typed one meta digit to get the argument started, you can type the remainder of the digits, and then the command. For example, to give the <kbd>Del</kbd> command an argument of 10, you could type <kbd>Alt</kbd>-<kbd>1</kbd> <kbd>0</kbd> <kbd>Del</kbd>, which will delete the next ten characters on the input line.</p>
<p><a name="rlsearchinhistory"></a></p>
<h3 id="searching-for-commands-in-the-history"><a class="wlink" href="#rlsearchinhistory"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Searching for Commands in the History <span class="uplinks"><a href="#the-basics">up</a> <a href="#toc">top</a></span></h3>
<p>Readline provides commands for searching through the command history for lines containing a specified string. There are two search modes: <em>incremental</em> and <em>non-incremental</em>.</p>
<p>Incremental searches begin before the user has finished typing the search string. As each character of the search string is typed, Readline displays the next entry from the history matching the string typed so far. An incremental search requires only as many characters as needed to find the desired history entry. To search backward in the history for a particular string, type <kbd>Ctrl</kbd>-<kbd>r</kbd>. Typing <kbd>Ctrl</kbd>-<kbd>s</kbd> searches forward through the history. The characters present in the value of the <a href="#configisearchterminators"><code>isearch-terminators</code></a> variable are used to terminate an incremental search. If that variable has not been assigned a value, then <kbd>Esc</kbd> or <kbd>Ctrl</kbd>-<kbd>j</kbd> will terminate an incremental search. <kbd>Ctrl</kbd>-<kbd>g</kbd> will abort an incremental search and restore the original line. When the search is terminated, the history entry containing the search string becomes the current line.</p>
<p>To find other matching entries in the history list, type <kbd>Ctrl</kbd>-<kbd>r</kbd> or <kbd>Ctrl</kbd>-<kbd>s</kbd> as appropriate. This will search backward or forward in the history for the next entry matching the search string typed so far. Any other key sequence bound to a Readline command will terminate the search and execute that command. For instance, <kbd>Enter</kbd> will terminate the search and accept the line, thereby executing the command from the history list. A movement command will terminate the search, make the last line found the current line, and begin editing.</p>
<p>Readline remembers the last incremental search string. If two <kbd>Ctrl</kbd>-<kbd>r</kbd>&#39;s are typed without any intervening characters defining a new search string, any remembered search string is used.</p>
<p>Non-incremental searches read the entire search string before starting to search for matching history lines. The search string may be typed by the user or be part of the contents of the current line. Type <kbd>Alt</kbd>-<kbd>p</kbd> or <kbd>Alt</kbd>-<kbd>n</kbd> to start a non-incremental search backwards or forwards.</p>
<p>To search backward in the history for a line starting with the text before the cursor, type <kbd>PgUp</kbd>. Or search forward by typing <kbd>PgDn</kbd>.</p>
<p>See <a href="#saved-command-history">Saved Command History</a> for more information on how history works.</p>
<h2 id="init-file"><a class="wlink" href="#init-file"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Init File <span class="uplinks"><a href="#configreadline">up</a> <a href="#toc">top</a></span></h2>
<p>You can customize key bindings and configuration variables by using an init file.</p>
<p>&quot;<a href="#readline-configuration-variables">Configuration variables</a>&quot; are customized in the init file, but &quot;<a href="#clink-settings">Clink settings</a>&quot; are customized with the <code>clink set</code> command.</p>
<h3 id="init-file-location"><a class="wlink" href="#init-file-location"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Init File Location <span class="uplinks"><a href="#init-file">up</a> <a href="#toc">top</a></span></h3>
<p>The Readline init file is named <code>.inputrc</code> or <code>_inputrc</code>.  Clink searches the directories referenced by the following environment variables in the order listed here, and loads the first <code>.inputrc</code> or <code>_inputrc</code> file it finds:</p>
<ul>
<li><code>%CLINK_INPUTRC%</code></li>
<li>The Clink profile directory (see the &quot;state&quot; line from <code>clink info</code>; by default this is the same as <code>%USERPROFILE%</code> but it can be overridden by the <code>clink inject</code> command).</li>
<li><code>%USERPROFILE%</code></li>
<li><code>%LOCALAPPDATA%</code></li>
<li><code>%APPDATA%</code></li>
<li><code>%HOME%</code> or <code>%HOMEDRIVE%%HOMEPATH%</code></li>
</ul>
<p>Other software that also uses the Readline library will also look for the <code>.inputrc</code> file (and possibly the <code>_inputrc</code> file too). To set macros and keybindings intended only for Clink, one can use the Readline init file conditional construct like this; <code>$if clink [...] $endif</code>.</p>
<p>You can use <code>clink info</code> to find the directories and configuration file for the current Clink session.</p>
<blockquote>
<p><strong>Compatibility Notes:</strong></p>
<ul>
<li>The <code>clink_inputrc_base</code> file from v0.4.8 is no longer used.</li>
<li>For backward compatibility, <code>clink_inputrc</code> is also loaded from the above locations, but it has been deprecated and may be removed in the future.</li>
<li>Clink v1.0.0a0 through Clink v1.2.27 accidentally loaded up to one Readline init file from each of the searched directories. That was incorrect behavior for loading Readline init files and has been fixed. If similar behavior is still desired, consider using the <code>$include</code> directive in the Readline init file, to load additional files.</li>
</ul>
</blockquote>
<h3 id="init-file-syntax"><a class="wlink" href="#init-file-syntax"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Init File Syntax <span class="uplinks"><a href="#init-file">up</a> <a href="#toc">top</a></span></h3>
<p>There are only a few basic constructs allowed in the Readline init file:</p>
<ul>
<li>Blank lines are ignored.</li>
<li>Lines beginning with a <code>#</code> are comments.</li>
<li>Lines beginning with a <code>$</code> indicate <a href="#conditional-init-constructs">conditional init constructs</a>.</li>
<li>Other lines denote <a href="#readline-configuration-variables">Readline configuration variables</a> and <a href="#readline-key-bindings">Readline key bindings</a>.</li>
</ul>
<h4 id="readline-configuration-variables"><a class="wlink" href="#readline-configuration-variables"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Readline configuration variables <span class="uplinks"><a href="#init-file-syntax">up</a> <a href="#toc">top</a></span></h4>
<p>You can modify the behavior of Readline by altering the values of configuration variables in Readline using the <code>set</code> command within the init file. The syntax is simple:</p>
<pre><code class="plaintext">set <span class="arg">variable</span> <span class="arg">value</span></code></pre>

<p>Here, for example, is how to change from the default Emacs-like key binding to use <code>vi</code> line editing commands:</p>
<pre><code class="plaintext">set editing-mode vi</code></pre>

<p>Variable names and values, where appropriate, are recognized without regard to case. Unrecognized variable names are ignored.</p>
<p>Boolean variables (those that can be set to on or off) are set to on if the value is null or empty, <code>on</code> (case-insensitive), or <code>1</code>. Any other value results in the variable being set to off.</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#configactiveregionendcolor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configactiveregionendcolor"></a><code>active-region-end-color</code></td>
<td>Not used or needed in Clink; exists only for compatibility when parsing the configuration file.</td>
</tr>
<tr>
<td><a class="wlink" href="#configactiveregionstartcolor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configactiveregionstartcolor"></a><code>active-region-start-color</code></td>
<td>A string variable that controls the text color and background when displaying the text in the active region (see <a href="#configenableactiveregion">enable-active-region</a> below).  This string must not take up any physical character positions on the display, so it should consist only of terminal escape sequences.  It is output to the terminal before displaying the text in the active region.  The default value is &quot;\e[0;7m&quot; (reverse video).</td>
</tr>
<tr>
<td><a class="wlink" href="#configbellstyle"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configbellstyle"></a><code>bell-style</code></td>
<td>Controls what happens when Readline wants to ring the terminal bell. If set to &quot;none&quot;, Readline never rings the bell. If set to &quot;visible&quot; (the default in Clink), Readline uses a visible bell if one is available. If set to &quot;audible&quot;, Readline attempts to ring the terminal&#39;s bell.</td>
</tr>
<tr>
<td><a class="wlink" href="#configlinkmatchingparen"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configlinkmatchingparen"></a><code>blink-matching-paren</code></td>
<td>If set to &quot;on&quot;, Readline attempts to briefly move the cursor to an opening parenthesis when a closing parenthesis is inserted. The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configcoloredcompletionprefix"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcoloredcompletionprefix"></a><code>colored-completion-prefix</code></td>
<td>If set to &quot;on&quot;, when listing completions, Readline displays the common prefix of the set of possible completions using a different color. The color definitions are taken from the value of the <a href="#completioncolors"><code>%LS_COLORS%</code></a> environment variable. The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configcoloredstats"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcoloredstats"></a><code>colored-stats</code></td>
<td>If set to &quot;on&quot;, Readline displays possible completions using different colors to indicate their file type. The color definitions are determined as described in <a href="#completioncolors">Completion Colors</a>. The default is &quot;off&quot;, but is automatically overridden by the <a href="#match_coloring_rules"><code>match.coloring_rules</code></a> setting or the <code>%CLINK_MATCH_COLORS</code> environment variable.</td>
</tr>
<tr>
<td><a class="wlink" href="#configcommentbegin"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcommentbegin"></a><code>comment-begin</code></td>
<td>The string to insert at the beginning of the line when the <a href="#rlcmd-insert-comment"><code>insert-comment</code></a> command is executed. The default value is &quot;::&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configcompletiondisplaywidth"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcompletiondisplaywidth"></a><code>completion-display-width</code></td>
<td>The number of screen columns used to display possible matches when performing completion. The value is ignored if it is less than 0 or greater than the terminal screen width. A value of 0 will cause matches to be displayed one per line. The default value is -1.</td>
</tr>
<tr>
<td><a class="wlink" href="#configcompletionignorecase"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcompletionignorecase"></a><code>completion-ignore-case</code></td>
<td>If set to &quot;on&quot;, Readline performs filename matching and completion in a case-insensitive fashion. The default value is &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configcompletionprefixdisplaylength"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcompletionprefixdisplaylength"></a><code>completion-prefix-display-length</code></td>
<td>The length in characters of the common prefix of a list of possible completions that is displayed without modification. When set to a value greater than zero, common prefixes longer than this value are replaced with an ellipsis when displaying possible completions.</td>
</tr>
<tr>
<td><a class="wlink" href="#configcompletionqueryitems"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcompletionqueryitems"></a><code>completion-query-items</code></td>
<td>The number of possible completions that determines when the user is asked whether the list of possibilities should be displayed. If the number of possible completions is greater than or equal to this value, Readline will ask whether or not the user wishes to view them; otherwise, they are simply listed. This variable must be set to an integer value greater than or equal to 0. A negative value means Readline should never ask. The default limit is 100.</td>
</tr>
<tr>
<td><a class="wlink" href="#configechocontrolcharacters"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configechocontrolcharacters"></a><code>echo-control-characters</code></td>
<td>When set to &quot;on&quot;, on operating systems that indicate they support it, readline echoes a character corresponding to a signal generated from the keyboard. The default is &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configeditingmode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configeditingmode"></a><code>editing-mode</code></td>
<td>This controls which Readline input mode is used by default. When set to &quot;emacs&quot; (the default), Readline starts up in Emacs editing mode, where keystrokes are most similar to Emacs. When set to &quot;vi&quot;, then <code>vi</code> input mode is used.</td>
</tr>
<tr>
<td><a class="wlink" href="#configemacsmodestring"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configemacsmodestring"></a><code>emacs-mode-string</code></td>
<td>If the <a href="#configshowmodeinprompt"><code>show-mode-in-prompt</code></a> variable is enabled, this string is displayed immediately before the last line of the primary prompt when emacs editing mode is active. The value is expanded like a key binding, so the standard set of meta- and control prefixes and backslash escape sequences is available. Use the &quot;\1&quot; and &quot;\2&quot; escapes to begin and end sequences of non-printing characters, which can be used to embed a terminal control sequence into the mode string. The default is &quot;@&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configenableactiveregion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configenableactiveregion"></a><code>enable-active-region</code></td>
<td>The <em>point</em> is the current cursor position, and <em>mark</em> refers to a saved cursor position (see <a href="#commands-for-moving">Commands For Moving</a> and <a href="#some-miscellaneous-commands">Some Miscellaneous Commands</a>).  The text between the point and mark is referred to as the <em>region</em>.  When this variable is set to &quot;on&quot;, Readline allows certain commands to designate the region as <em>active</em>.  When the region is active, Readline highlights the text in the region using the value of the <code>active-region-start-color</code>, which defaults to reverse video (&quot;\e[0;7m&quot;).  The active region shows the text inserted by bracketed-paste and any matching text found by incremental and non-incremental history searches.  The default is &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configexpandtilde"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configexpandtilde"></a><code>expand-tilde</code></td>
<td>If set to &quot;on&quot;, tilde expansion is performed when Readline attempts word completion. The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#confighistorypreservepoint"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="confighistorypreservepoint"></a><code>history-preserve-point</code></td>
<td>If set to &quot;on&quot;, the history code attempts to place the point (the current cursor position) at the same location on each history line retrieved with <a href="#rlcmd-previous-history"><code>previous-history</code></a> or <a href="#rlcmd-next-history"><code>next-history</code></a>. The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#confighorizontalscrollmode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="confighorizontalscrollmode"></a><code>horizontal-scroll-mode</code></td>
<td>This variable can be set to either &quot;on&quot; or &quot;off&quot;. Setting it to &quot;on&quot; means that the text of the lines being edited will scroll horizontally on a single screen line when they are longer than the width of the screen, instead of wrapping onto a new screen line. This variable is automatically set to &quot;on&quot; for terminals of height 1. By default, this variable is set to &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configisearchterminators"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configisearchterminators"></a><code>isearch-terminators</code></td>
<td>The string of characters that should terminate an incremental search without subsequently executing the character as a command (see <a href="#rlsearchinhistory">Searching for Commands in the History</a>). If this variable has not been given a value, the characters <kbd>Esc</kbd> and <kbd>Ctrl</kbd>-<kbd>j</kbd> will terminate an incremental search.</td>
</tr>
<tr>
<td><a class="wlink" href="#configkeymap"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configkeymap"></a><code>keymap</code></td>
<td>Sets Readline&#39;s idea of the current keymap for key binding commands. Built-in keymap names are <code>emacs</code>, <code>emacs-standard</code>, <code>emacs-meta</code>, <code>emacs-ctlx</code>, <code>vi</code>, <code>vi-move</code>, <code>vi-command</code>, and <code>vi-insert</code>. <code>vi</code> is equivalent to <code>vi-command</code> (<code>vi-move</code> is also a synonym); <code>emacs</code> is equivalent to <code>emacs-standard</code>. The default value is <code>emacs</code>. The value of the <a href="#configeditingmode"><code>editing-mode</code></a> variable also affects the default keymap.</td>
</tr>
<tr>
<td><a class="wlink" href="#configmarkdirectories"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configmarkdirectories"></a><code>mark-directories</code></td>
<td>If set to &quot;on&quot;, completed directory names have a slash appended. The default is &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configmarkmodifiedlines"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configmarkmodifiedlines"></a><code>mark-modified-lines</code></td>
<td>This variable, when set to &quot;on&quot;, causes Readline to display an asterisk (<code>*</code>) at the start of history lines which have been modified. This variable is &quot;off&quot; by default.</td>
</tr>
<tr>
<td><a class="wlink" href="#configmarksymlinkeddirectories"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configmarksymlinkeddirectories"></a><code>mark-symlinked-directories</code></td>
<td>If set to &quot;on&quot;, completed names which are symbolic links to directories have a slash appended (subject to the value of <a href="#configmarkdirectories"><code>mark-directories</code></a>). The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configmatchhiddenfiles"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configmatchhiddenfiles"></a><code>match-hidden-files</code></td>
<td>This variable, when set to &quot;on&quot;, causes Readline to match files whose names begin with a <code>.</code> (hidden files on Unix and Linux) when performing filename completion. If set to &quot;off&quot;, the leading <code>.</code> must be supplied by the user in the filename to be completed. This variable is &quot;on&quot; by default.</td>
</tr>
<tr>
<td><a class="wlink" href="#configmenucompletedisplayprefix"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configmenucompletedisplayprefix"></a><code>menu-complete-display-prefix</code></td>
<td>If set to &quot;on&quot;, menu completion displays the common prefix of the list of possible completions (which may be empty) before cycling through the list. The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configpagecompletions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configpagecompletions"></a><code>page-completions</code></td>
<td>If set to &quot;on&quot;, Readline uses an internal <code>more</code>-like pager to display a screenful of possible completions at a time. This variable is &quot;on&quot; by default.</td>
</tr>
<tr>
<td><a class="wlink" href="#configprintcompletionshorizontally"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configprintcompletionshorizontally"></a><code>print-completions-horizontally</code></td>
<td>If set to &quot;on&quot;, Readline will display completions with matches sorted horizontally in alphabetical order, rather than down the screen. The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configshowallifambiguous"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configshowallifambiguous"></a><code>show-all-if-ambiguous</code></td>
<td>This alters the default behavior of the completion functions. If set to &quot;on&quot;, words which have more than one possible completion cause the matches to be listed immediately instead of ringing the bell. The default value is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configshowallifunmodified"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configshowallifunmodified"></a><code>show-all-if-unmodified</code></td>
<td>This alters the default behavior of the completion functions in a fashion similar to <a href="#configshowallifambiguous"><code>show-all-if-ambiguous</code></a>. If set to &quot;on&quot;, words which have more than one possible completion without any possible partial completion (the possible completions don&#39;t share a common prefix) cause the matches to be listed immediately instead of ringing the bell. The default value is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configshowmodeinprompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configshowmodeinprompt"></a><code>show-mode-in-prompt</code></td>
<td>If set to &quot;on&quot;, add a string to the beginning of the prompt indicating the editing mode: emacs, vi command, or vi insertion. The mode strings are user-settable (e.g., <a href="#configemacsmodestring"><code>emacs-mode-string</code></a>). The default value is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configskipcompletedtext"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configskipcompletedtext"></a><code>skip-completed-text</code></td>
<td>If set to &quot;on&quot;, this alters the default completion behavior when inserting a single match into the line. It&#39;s only active when performing completion in the middle of a word. If enabled, Readline does not insert characters from the completion that match characters after point (the cursor position) in the word being completed, so portions of the word following the cursor are not duplicated. For instance, if this is enabled, attempting completion when the cursor is after the <code>e</code> in &quot;Makefile&quot; will result in &quot;Makefile&quot; rather than &quot;Makefilefile&quot;, assuming there is a single possible completion. The default value is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configvicmdmodestring"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configvicmdmodestring"></a><code>vi-cmd-mode-string</code></td>
<td>If the <a href="#configshowmodeinprompt"><code>show-mode-in-prompt</code></a> variable is enabled, this string is displayed immediately before the last line of the primary prompt when vi editing mode is active and in command mode. The value is expanded like a key binding, so the standard set of meta- and control prefixes and backslash escape sequences is available. Use the &quot;\1&quot; and &quot;\2&quot; escapes to begin and end sequences of non-printing characters, which can be used to embed a terminal control sequence into the mode string. The default is &quot;(cmd)&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configviinsmodestring"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configviinsmodestring"></a><code>vi-ins-mode-string</code></td>
<td>If the <a href="#configshowmodeinprompt"><code>show-mode-in-prompt</code></a> variable is enabled, this string is displayed immediately before the last line of the primary prompt when vi editing mode is active and in insertion mode. The value is expanded like a key binding, so the standard set of meta- and control prefixes and backslash escape sequences is available. Use the &quot;\1&quot; and &quot;\2&quot; escapes to begin and end sequences of non-printing characters, which can be used to embed a terminal control sequence into the mode string. The default is &quot;(ins)&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configvisiblestats"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configvisiblestats"></a><code>visible-stats</code></td>
<td>If set to &quot;on&quot;, a character denoting a file&#39;s type is appended to the filename when listing possible completions. The default is &quot;off&quot;.</td>
</tr>
</tbody></table>
<p>Clink adds some new configuration variables for Readline:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#configcompletionautoqueryitems"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcompletionautoqueryitems"></a><code>completion-auto-query-items</code></td>
<td>If set to &quot;on&quot;, automatically prompts before displaying completions if they won&#39;t fit without scrolling (this overrules the <a href="#configcompletionqueryitems"><code>completion-query-items</code></a> variable). The default is &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#confighistorypointatendofanchoredsearch"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="confighistorypointatendofanchoredsearch"></a><code>history-point-at-end-of-anchored-search</code></td>
<td>If set to &quot;on&quot;, this puts the cursor at the end of the line when using <a href="#rlcmd-history-search-forward"><code>history-search-forward</code></a> or <a href="#rlcmd-history-search-backward"><code>history-search-backward</code></a>. The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configmenucompletewraparound"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configmenucompletewraparound"></a><code>menu-complete-wraparound</code></td>
<td>If this is &quot;on&quot;, the <a href="#rlcmd-menu-complete"><code>menu-complete</code></a> family of commands wraps around when reaching the end of the possible completions. The default is &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configsearchignorecase"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configsearchignorecase"></a><code>search-ignore-case</code></td>
<td>Controls whether the history search commands ignore case. The default is &quot;on&quot;.</td>
</tr>
</tbody></table>
<p>Some configuration variables are deprecated in Clink:</p>
<table>
<thead>
<tr>
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#configbindttyspecialchars"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configbindttyspecialchars"></a><code>bind-tty-special-chars</code></td>
<td>Clink doesn&#39;t need or use this.</td>
</tr>
<tr>
<td><a class="wlink" href="#configcompletionmapcase"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configcompletionmapcase"></a><code>completion-map-case</code></td>
<td>Instead, use the <code><a href="#match_ignore_case">match.ignore_case</a></code> Clink setting (see the <code>relaxed</code> mode).</td>
</tr>
<tr>
<td><a class="wlink" href="#configconvertmeta"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configconvertmeta"></a><code>convert-meta</code></td>
<td>Clink requires this to be &quot;on&quot;, and sets it to &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configdisablecompletion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configdisablecompletion"></a><code>disable-completion</code></td>
<td>If set to &quot;on&quot;, Readline will inhibit word completion. Completion characters will be inserted into the line as if they had been mapped to <a href="#rlcmd-self-insert"><code>self-insert</code></a>. The default is &quot;off&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configenablebracketedpaste"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configenablebracketedpaste"></a><code>enable-bracketed-paste</code></td>
<td>Clink doesn&#39;t support this. Instead use the [`clink-paste``](#rlcmd-clink-paste) command to perform the equivalent of a bracketed paste.</td>
</tr>
<tr>
<td><a class="wlink" href="#configenablemetakey"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configenablemetakey"></a><code>enable-meta-key</code></td>
<td>Clink requires this to be &quot;on&quot;, and sets it to &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#confighistorysize"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="confighistorysize"></a><code>history-size</code></td>
<td>Instead, use the <code><a href="#history_max_lines">history.max_lines</a></code> Clink setting.</td>
</tr>
<tr>
<td><a class="wlink" href="#configinputmeta"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configinputmeta"></a><code>input-meta</code></td>
<td>Clink requires this to be &quot;on&quot;, and sets it to &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configkeyseqtimeout"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configkeyseqtimeout"></a><code>keyseq-timeout</code></td>
<td>Clink does not support this.</td>
</tr>
<tr>
<td><a class="wlink" href="#configoutputmeta"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configoutputmeta"></a><code>output-meta</code></td>
<td>Clink requires this to be &quot;on&quot;, and sets it to &quot;on&quot;.</td>
</tr>
<tr>
<td><a class="wlink" href="#configrevertallatnewline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="configrevertallatnewline"></a><code>revert-all-at-newline</code></td>
<td>Clink always reverts all in-memory changes to history lines each time a new input prompt starts.</td>
</tr>
</tbody></table>
<h4 id="readline-key-bindings"><a class="wlink" href="#readline-key-bindings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Readline key bindings <span class="uplinks"><a href="#init-file-syntax">up</a> <a href="#toc">top</a></span></h4>
<p>The syntax for controlling key bindings in the init file is simple. First you need to find the name of the command that you want to change. The following sections contain tables of the command name, the default keybinding, if any, and a short description of what the command does (see <a href="#bindable-commands">Bindable Commands</a>).</p>
<p>Once you know the name of the command, simply place on a line in the init file the name of the key you wish to bind the command to, a colon, and then the name of the command. There can be no space between the key name and the colon (any space will be interpreted as part of the key name). The name of the key can be expressed in different ways, depending on what you find most comfortable.</p>
<p>In addition to command names, Readline allows keys to be bound to a string that is inserted when the key is pressed (a <em>macro</em>).</p>
<table>
<tr><th>Line</th><th>Description</th></tr>
<tr><td><code><span class="arg">keyname</span>: <span class="arg">command</span></code></td><td>Binds a named command to a key.</td></tr>
<tr><td><code><span class="arg">keyname</span>: "<span class="arg">literal text</span>"</code></td><td>Binds a macro to a key.  A macro inserts the literal text into the input line.</td></tr>
<tr><td><code><span class="arg">keyname</span>: "luafunc:<span class="arg">lua_function_name</span>"</code></td><td>Binds a named Lua function to a key.  See <a href="#luakeybindings">Lua key bindings</a> for more information.</td></tr>
</table>

<p>
<dt>Key names</dt>
Key names can be a <em>name</em> or a <em>sequence</em>.  Names are not quoted, and sequences are quoted.
</p>

<p><em>Names</em> can be used to refer to simple keys like <code>Space</code>, <code>Return</code>, <code>Tab</code>, letters and digits (<code>A</code>, <code>b</code>, <code>1</code>, ...), and most punctuation (<code>!</code>, <code>@</code>, <code>.</code>, <code>_</code>, ...).  Names can also include modifier prefixes <code>C-</code> or <code>Control-</code> for the <kbd>Ctrl</kbd> key, or <code>M-</code> or <code>Meta-</code> for the Meta or <kbd>Alt</kbd> key.  However, modifier prefixes don&#39;t work with simple key names; you can&#39;t use <code>C-Space</code>, instead a <em>sequence</em> is needed for special keys like that.</p>
<p><em>Sequences</em> are surrounded by double quotes, and specify an entire sequence of input characters.  Some special escape codes can be used:</p>
<table>
<thead>
<tr>
<th>Code</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>\C-</code></td>
<td>Prefix meaning <kbd>Ctrl</kbd>.</td>
</tr>
<tr>
<td><code>\M-</code></td>
<td>Prefix meaning Meta or <kbd>Alt</kbd>.</td>
</tr>
<tr>
<td><code>\e</code></td>
<td>The literal ESC (escape) character code, which is the first character code in most special key sequences.<br/>Note: the ESC code isn&#39;t necessarily the same as the <kbd>Esc</kbd> key; see <code><a href="#terminal_raw_esc">terminal.raw_esc</a></code>.</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>Backslash.</td>
</tr>
<tr>
<td><code>\&quot;</code></td>
<td><code>&quot;</code>, a double quotation mark.</td>
</tr>
<tr>
<td><code>\&#39;</code></td>
<td><code>&#39;</code>, a single quote or apostrophe.</td>
</tr>
<tr>
<td><code>\a</code></td>
<td>Alert (bell).</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>Backspace.</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>Delete. (Note: this is not very useful for Clink; it is not the <kbd>Del</kbd> key.)</td>
</tr>
<tr>
<td><code>\f</code></td>
<td>Form feed.</td>
</tr>
<tr>
<td><code>\n</code></td>
<td>Newline.</td>
</tr>
<tr>
<td><code>\r</code></td>
<td>Carriage return.</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>Horizontal tab.</td>
</tr>
<tr>
<td><code>\v</code></td>
<td>Vertical tab.</td>
</tr>
<tr>
<td><code>\<span class="arg">nnn</span></code></td>
<td>The eight-bit character whose value is the octal value <em>nnn</em> (one to three digits)</td>
</tr>
<tr>
<td><code>\x<span class="arg">HH</span></code></td>
<td>The eight-bit character whose value is the hexadecimal value <em>HH</em> (one or two hex digits)</td>
</tr>
</tbody></table>
<p>Here are some examples to illustrate the differences between <em>names</em> and <em>sequences</em>:</p>
<table>
<thead>
<tr>
<th>Name</th>
<th>Sequence</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>C-a</code></td>
<td><code>&quot;\C-a&quot;</code></td>
<td>Both refer to <kbd>Ctrl</kbd>-<kbd>a</kbd>.</td>
</tr>
<tr>
<td><code>M-a</code></td>
<td><code>&quot;\M-a&quot;</code></td>
<td>Both refer to <kbd>Alt</kbd>-<kbd>a</kbd>.</td>
</tr>
<tr>
<td><code>M-C-a</code></td>
<td><code>&quot;\M-\C-a&quot;</code></td>
<td>Both refer to <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>a</kbd>.</td>
</tr>
<tr>
<td><code>hello</code></td>
<td></td>
<td>It&#39;s just <kbd>h</kbd>.  It is not quoted, so it is a <em>name</em>.  The <code>ello</code> part is a syntax error and is silently discarded by Readline.</td>
</tr>
<tr>
<td></td>
<td><code>&quot;hello&quot;</code></td>
<td>The series of five keys <kbd>h</kbd> <kbd>e</kbd> <kbd>l</kbd> <kbd>l</kbd> <kbd>o</kbd>.</td>
</tr>
<tr>
<td><code>Space</code></td>
<td></td>
<td>The <kbd>Space</kbd> key.</td>
</tr>
<tr>
<td></td>
<td><code>&quot;Space&quot;</code></td>
<td>The series of five keys <kbd>S</kbd> <kbd>p</kbd> <kbd>a</kbd> <kbd>c</kbd> <kbd>e</kbd>.</td>
</tr>
</tbody></table>
<p>Special keys like <kbd>Up</kbd> are represented by VT220 escape codes such as <code>&quot;\e[A&quot;</code>.  See <a href="#discovering-clink-key-sequences">Discovering Clink key sequences</a> and <a href="#specialkeys">Binding special keys</a> for how to find the <span class="arg">keyname</span> for the key you want to bind.</p>
<p>
<dt>Key bindings</dt>
Key bindings can be either functions or macros (literal text).  Functions are not quoted, and macros are quoted.
</p>

<ul>
<li><code>blah-blah</code> binds to a function named &quot;blah-blah&quot;.</li>
<li><code>&quot;blah-blah&quot;</code> is a macro that inserts the literal text &quot;blah-blah&quot; into the line.</li>
</ul>
<p>When entering the text of a macro, single or double quotes must be used to indicate a macro definition. Unquoted text is assumed to be a function name. In the macro body, the backslash escapes described above are expanded. Backslash will quote any other character in the macro text, including <code>&quot;</code> and <code>&#39;</code>. For example, the following binding will make pressing <kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>\</kbd> insert a single <code>\</code> into the line:</p>
<pre><code class="language-inputrc">&quot;\C-x\\&quot;: &quot;\\&quot;
</code></pre>
<p>
<dt>Examples</dt>

<pre><code class="language-inputrc"># Using key names.
C-u: universal-argument         # Bind Ctrl-u to invoke the universal-argument command.
C-o: &quot;&gt; output&quot;                 # Bind Ctrl-o to insert the text &quot;&gt; output&quot; into the line.

# Using key sequences.
&quot;\C-u&quot;: universal-argument      # Bind Ctrl-u to invoke the universal-argument command.
&quot;\C-x\C-r&quot;: clink-reload        # Bind Ctrl-x,Ctrl-r to reload the configuration and Lua scripts for Clink.
&quot;\eOP&quot;: clink-popup-show-help   # Bind F1 to invoke the clink-popup-show-help command.
</code></pre>
</p>

<p>See <a href="#keybindings">Customizing Key Bindings</a> for more information about binding keys in Clink.</p>
<h4 id="conditional-init-constructs"><a class="wlink" href="#conditional-init-constructs"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Conditional init constructs <span class="uplinks"><a href="#init-file-syntax">up</a> <a href="#toc">top</a></span></h4>
<p>Readline implements a facility similar in spirit to the conditional compilation features of the C preprocessor which allows key bindings and variable settings to be performed as the result of tests. There are four parser directives used.</p>
<p><dt class="toppadding">$if</dt></p><dd>
<dd>

<p>The <code>$if</code> construct allows bindings to be made based on the editing mode, the terminal being used, or the application using Readline. The text of the test, after any comparison operator, extends to the end of the line; unless otherwise noted, no characters are required to isolate it.</p>
<p>The <code>$if mode=</code> form of the <code>$if</code> directive is used to test whether Readline is in <code>emacs</code> or <code>vi</code> mode. This may be used in conjunction with the &quot;set keymap&quot; command, for instance, to set bindings in the <code>emacs-standard</code> and <code>emacs-ctlx</code> keymaps only if Readline is starting out in <code>emacs</code> mode. (The directive is only tested during startup.)</p>
<pre><code class="language-inputrc">$if mode == emacs
set show-mode-in-prompt on
$endif
</code></pre>
<p>The <code>$if term=</code> form may be used to include terminal-specific key bindings, perhaps to bind the key sequences output by the terminal&#39;s function keys. The word on the right side of the &quot;=&quot; is tested against both the full name of the terminal and the portion of the terminal name before the first &quot;-&quot;. This allows <code>sun</code> to match both <code>sun</code> and <code>sun-cmd</code>, for instance. This is not useful with Clink, because Clink has its own terminal driver.</p>
<p>The <code>$if version</code> test may be used to perform comparisons against specific Readline versions. The <code>version</code> expands to the current Readline version. The set of comparison operators includes <code>=</code> (and <code>==</code>), <code>!=</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&lt;</code>, and <code>&gt;</code>. The version number supplied on the right side of the operator consists of a major version number, an optional decimal point, and an optional minor version (e.g., &quot;7.1&quot;). If the minor version is omitted, it is assumed to be &quot;0&quot;. The operator may be separated from the string <code>version</code> and from the version number argument by whitespace. The following example sets a variable if the Readline version being used is 7.0 or newer:</p>
<pre><code class="language-inputrc">$if version &gt;= 7.0
set show-mode-in-prompt on
$endif
</code></pre>
<p>The <code>$if clink</code> construct is used to include Clink-specific settings. For instance, the following command adds a key sequence that quotes the current or previous word, but only in Clink:</p>
<pre><code class="language-inputrc">$if clink
# Quote the current or previous word
&quot;\C-xq&quot;: &quot;\eb\&quot;\ef\&quot;&quot;
$endif
</code></pre>
<p><a name="if_clink_version"></a>
The <code>$if clink_version</code> test may be used to perform comparisons against specific Clink versions. The <code>clink_version</code> expands to the current Clink version. The set of comparison operators includes <code>=</code> (and <code>==</code>), <code>!=</code>, <code>&lt;=</code>, <code>&gt;=</code>, <code>&lt;</code>, and <code>&gt;</code>. The version number supplied on the right side of the operator consists of a major version number, an optional decimal point and minor version, and an optional decimal point and patch version (e.g., &quot;1.6&quot; or &quot;1.6.2&quot;). If the minor or patch versions are omitted, they are assumed to be &quot;0&quot;. The operator may be separated from the string <code>clink_version</code> and from the version number argument by whitespace. In other applications that use Readline (such as <code>bash</code>) or in versions of Clink before v1.6.1, the test is always false.  The following example sets a key binding if the Clink version being used is 1.6.1 or newer:</p>
<pre><code class="language-inputrc">$if clink_version &gt;= 1.6.1
&quot;\C-x\C-f&quot;: clink-dump-functions    # This function doesn&#39;t exist before Clink 1.6.1,
                                    # and would print an error in older versions.
$endif
</code></pre>
<p>The <code>$if variable</code> construct provides simple equality tests for Readline variables and values. The permitted comparison operators are <code>=</code>, <code>==</code>, and <code>!=</code>. The variable name must be separated from the comparison operator by whitespace; the operator may be separated from the value on the right hand side by whitespace. Both string and boolean variables may be tested. Boolean variables must be tested against the values <em>on</em> and <em>off</em>. The following example is equivalent to the <code>mode=emacs</code> test described above:</p>
<pre><code class="language-inputrc">$if editing-mode == emacs
set show-mode-in-prompt on
$endif
</code></pre>
</dd>

<p><dt class="toppadding">$endif</dt></p><dd>

<p>This command, as seen in the previous example, terminates an <code>$if</code> command.</p>
</dd>

<p><dt class="toppadding">$else</dt></p><dd>

<p>Commands in this branch of the <code>$if</code> directive are executed if the test fails.</p>
</dd>

<p><dt class="toppadding">$include</dt></p><dd>

<p>This directive takes a single filename as an argument and reads commands and bindings from that file. For example, the following directive reads from &quot;c:\dir\inputrc&quot;:</p>
<pre><code class="language-inputrc">$include c:\dir\inputrc
</code></pre>
</dd>

<h4 id="sample-inputrc-file"><a class="wlink" href="#if_clink_version"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Sample .inputrc file <span class="uplinks"><a href="#init-file-syntax">up</a> <a href="#toc">top</a></span></h4>
<p>Here is a sample <code>.inputrc</code> file with some of the variables and key bindings that I use:</p>
<pre><code class="language-inputrc">$if clink           # begin clink-only section

set colored-completion-prefix                       on
set colored-stats                                   on
set mark-symlinked-directories                      on
set visible-stats                                   off
set completion-auto-query-items                     on
set history-point-at-end-of-anchored-search         on
set menu-complete-wraparound                        off
set search-ignore-case                              on

# The following key bindings are for emacs mode.
set keymap emacs

&quot;\e[27;8;72~&quot;:      clink-popup-show-help           # Alt-Ctrl-Shift-H

# Completion key bindings.
&quot;\t&quot;:               old-menu-complete               # Tab
&quot;\e[Z&quot;:             old-menu-complete-backward      # Shift-Tab
&quot;\e[27;5;32~&quot;:      clink-select-complete           # Ctrl-Space

# Some key bindings I got used to from 4Dos/4NT/Take Command.
C-b:                                                # Ctrl-B (cleared because I redefined Ctrl-F)
C-d:                remove-history                  # Ctrl-D (replaces `delete-char`)
C-f:                clink-expand-doskey-alias       # Ctrl-F (replaces `forward-char`)
C-k:                add-history                     # Ctrl-K (replaces `kill-line`)
&quot;\e[A&quot;:             history-search-backward         # Up (replaces `previous-history`)
&quot;\e[B&quot;:             history-search-forward          # Down (replaces `next-history`)
&quot;\e[5~&quot;:            clink-popup-history             # PgUp (replaces `history-search-backward`)
&quot;\e[6~&quot;:                                            # PgDn (cleared because I redefined PgUp)
&quot;\e[1;5F&quot;:          end-of-line                     # Ctrl-End (replaces `kill-line`)
&quot;\e[1;5H&quot;:          beginning-of-line               # Ctrl-Home (replaces `backward-kill-line`)

# Some key bindings handy in default (conhost) console windows.
M-b:                                                # Alt-B (cleared because I redefined Alt-F)
M-f:                clink-find-conhost              # Alt-F for &quot;Find...&quot; from the console&#39;s system menu
M-m:                clink-mark-conhost              # Alt-M for &quot;Mark&quot; from the console&#39;s system menu

# Some key bindings for interrogating the Readline configuration.
&quot;\C-x\C-f&quot;:         dump-functions                  # Ctrl-X, Ctrl-F
&quot;\C-x\C-m&quot;:         dump-macros                     # Ctrl-X, Ctrl-M
&quot;\C-x\C-v&quot;:         dump-variables                  # Ctrl-X, Ctrl-V

# Misc other key bindings.
&quot;\e[27;2;32~&quot;:      clink-magic-suggest-space       # Shift-Space
&quot;\e[5;6~&quot;:          clink-popup-directories         # Ctrl-Shift-PgUp
C-_:                kill-line                       # Ctrl-- (replaces `undo`)

$endif              # end clink-only section
</code></pre>
<h2 id="bindable-commands"><a class="wlink" href="#bindable-commands"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Bindable Commands <span class="uplinks"><a href="#configreadline">up</a> <a href="#toc">top</a></span></h2>
<table class="linkmenu">
<tr><td><a href="#commands-for-moving">Commands For Moving</a></td><td>Common commands for moving the cursor in the command line.</td></tr>
<tr><td><a href="#commands-for-manipulating-the-history">Commands For Manipulating The History</a></td><td>Common commands for using the command history list.</td></tr>
<tr><td><a href="#commands-for-changing-text">Commands For Changing Text</a></td><td>Common commands for deleting and inserting text.</td></tr>
<tr><td><a href="#killing-and-yanking-1">Killing And Yanking</a></td><td>Commands for using the "<a href="#killing-and-yanking">kill ring</a>" (Readline's version of a clipboard).</td></tr>
<tr><td><a href="#specifying-numeric-arguments">Specifying Numeric Arguments</a></td><td>Commands for inputing numeric arguments to other Readline commands.</td></tr>
<tr><td><a href="#completion-commands">Completion Commands</a></td><td>Common completion commands.</td></tr>
<tr><td><a href="#keyboard-macros">Keyboard Macros</a></td><td>Commands for using keyboard macros.</td></tr>
<tr><td><a href="#some-miscellaneous-commands">Some Miscellaneous Commands</a></td><td>Some commands that aren't commonly used.</td></tr>
<tr><td><a href="#readline-vi-mode">Readline vi Mode</a></td><td>Commands for toggling vi mode.</td></tr>
<tr><td><a href="#other-readline-commands">Other Readline Commands</a></td><td>Commands that exist only for .inputrc compatibility with the bash shell.</td></tr>
<tr><td><a href="#clink-commands"><strong>Clink Commands</strong></a></td><td><strong>Clink adds many new and enhanced commands beyond the basic Readline commands.</strong></td></tr>
</table>

<h3 id="commands-for-moving"><a class="wlink" href="#commands-for-moving"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Commands For Moving <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-beginning-of-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-beginning-of-line"></a><code>beginning-of-line</code></td>
<td align="center"><kbd>Home</kbd></td>
<td>Move to the start of the current line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-end-of-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-end-of-line"></a><code>end-of-line</code></td>
<td align="center"><kbd>End</kbd></td>
<td>Move to the end of the line, or insert suggestion.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-forward-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-forward-char"></a><code>forward-char</code></td>
<td align="center"><kbd>Right</kbd> <a href="#alternatedefaultcommand">*</a></td>
<td>Move forward a character, or insert suggestion.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-backward-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-backward-char"></a><code>backward-char</code></td>
<td align="center"><kbd>Left</kbd></td>
<td>Move back a character.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-forward-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-forward-word"></a><code>forward-word</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Right</kbd></td>
<td>Move forward to the end of the next word, or insert next suggested word.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-backward-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-backward-word"></a><code>backward-word</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Left</kbd></td>
<td>Move back to the start of the current or previous word.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-previous-screen-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-previous-screen-line"></a><code>previous-screen-line</code></td>
<td align="center"></td>
<td>Attempt to move point to the same physical screen column on the previous physical screen line. This will not have the desired effect if the current Readline line does not take up more than one physical line or if point is not greater than the length of the prompt plus the screen width.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-next-screen-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-next-screen-line"></a><code>next-screen-line</code></td>
<td align="center"></td>
<td>Attempt to move point to the same physical screen column on the next physical screen line. This will not have the desired effect if the current Readline line does not take up more than one physical line or if the length of the current Readline line is not greater than the length of the prompt plus the screen width.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clear-display"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clear-display"></a><code>clear-display</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>l</kbd></td>
<td>Clear the terminal screen and the terminal&#39;s scrollback buffer (if possible), then redraw the current line, leaving the current line at the top of the screen.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clear-screen"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clear-screen"></a><code>clear-screen</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>l</kbd></td>
<td>Clear the terminal screen, then redraw the current line, leaving the current line at the top of the screen.</td>
</tr>
</tbody></table>
<h3 id="commands-for-manipulating-the-history"><a class="wlink" href="#commands-for-manipulating-the-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Commands For Manipulating The History <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-accept-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-accept-line"></a><code>accept-line</code></td>
<td align="center"><kbd>Enter</kbd></td>
<td>Accept the input line regardless of where the cursor is. The line may be added to the history list for future recall.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-previous-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-previous-history"></a><code>previous-history</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>p</kbd></td>
<td>Move &quot;back&quot; through the history list, fetching the previous command.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-next-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-next-history"></a><code>next-history</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>n</kbd></td>
<td>Move &quot;forward&quot; through the history list, fetching the next command.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-beginning-of-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-beginning-of-history"></a><code>beginning-of-history</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd><</kbd></td>
<td>Move to the first line in the history.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-end-of-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-end-of-history"></a><code>end-of-history</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>></kbd></td>
<td>Move to the end of the input history, i.e. the line currently being entered.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-reverse-search-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-reverse-search-history"></a><code>reverse-search-history</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>r</kbd></td>
<td>Search backward starting at the current line and moving &quot;up&quot; through the history as necessary. This is an incremental search. This command sets the region to the matched text and activates the mark.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-forward-search-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-forward-search-history"></a><code>forward-search-history</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>s</kbd></td>
<td>Search forward starting at the current line and moving &quot;down&quot; through the history as necessary. This is an incremental search. This command sets the region to the matched text and activates the mark.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-non-incremental-reverse-search-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-non-incremental-reverse-search-history"></a><code>non-incremental-reverse-search-history</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>p</kbd></td>
<td>Search backward starting at the current line and moving &quot;up&quot; through the history as necessary using a non-incremental search for a string supplied by the user. The search string may match anywhere in a history line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-non-incremental-forward-search-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-non-incremental-forward-search-history"></a><code>non-incremental-forward-search-history</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>n</kbd></td>
<td>Search forward starting at the current line and moving &quot;down&quot; through the history as necessary using a non-incremental search for a string supplied by the user. The search string may match anywhere in a history line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-history-search-forward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-history-search-forward"></a><code>history-search-forward</code></td>
<td align="center"><kbd>PgDn</kbd></td>
<td>Search forward through the history for the string of characters between the start of the current line and the point. The search string must match at the beginning of a history line. This is a non-incremental search.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-history-search-backward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-history-search-backward"></a><code>history-search-backward</code></td>
<td align="center"><kbd>PgUp</kbd></td>
<td>Search backward through the history for the string of characters between the start of the current line and the point. The search string must match at the beginning of a history line. This is a non-incremental search.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-history-substring-search-forward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-history-substring-search-forward"></a><code>history-substring-search-forward</code></td>
<td align="center"></td>
<td>Search forward through the history for the string of characters between the start of the current line and the point. The search string may match anywhere in a history line. This is a non-incremental search. By default, this command is unbound.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-history-substring-search-backward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-history-substring-search-backward"></a><code>history-substring-search-backward</code></td>
<td align="center"></td>
<td>Search backward through the history for the string of characters between the start of the current line and the point. The search string may match anywhere in a history line. This is a non-incremental search. By default, this command is unbound.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-yank-nth-arg"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-yank-nth-arg"></a><code>yank-nth-arg</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>y</kbd></td>
<td>Insert the first argument to the previous command (usually the second word on the previous line) at point. With an argument <em>n</em>, insert the <em>n</em>-th word from the previous command (the words in the previous command begin with word 0). A negative argument inserts the <em>n</em>-th word from the end of the previous command. Once the argument <em>n</em> is computed, the argument is extracted as if the &quot;!n&quot; history expansion had been specified.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-yank-last-arg"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-yank-last-arg"></a><code>yank-last-arg</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>.</kbd> or <kbd>Alt</kbd>-<kbd>_</kbd></td>
<td>Insert last argument to the previous command (the last word of the previous history entry). With a numeric argument, behave exactly like <a href="#rlcmd-yank-nth-arg"><code>yank-nth-arg</code></a>. Successive calls to <code>yank-last-arg</code> move back through the history list, inserting the last word (or the word specified by the argument to the first call) of each line in turn. Any numeric argument supplied to these successive calls determines the direction to move through the history. A negative argument switches the direction through the history (back or forward). The history expansion facilities are used to extract the last argument, as if the &quot;!$&quot; history expansion had been specified.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-operate-and-get-next"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-operate-and-get-next"></a><code>operate-and-get-next</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>o</kbd></td>
<td>Accept the current line for return to the calling application as if a newline had been entered, and fetch the next line relative to the current line from the history for editing. A numeric argument, if supplied, specifies the history entry to use instead of the current line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-fetch-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-fetch-history"></a><code>fetch-history</code></td>
<td align="center"></td>
<td>With a numeric argument, fetch that entry from the history list and make it the current line.  Without an argument, move back to the first entry in the history list.</td>
</tr>
</tbody></table>
<h3 id="commands-for-changing-text"><a class="wlink" href="#commands-for-changing-text"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Commands For Changing Text <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-delete-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-delete-char"></a><code>delete-char</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>d</kbd></td>
<td>Delete the character at point.<br/>Note: also see the <code><a href="#ctrld_exits">cmd.ctrld_exits</a></code> Clink setting.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-backward-delete-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-backward-delete-char"></a><code>backward-delete-char</code></td>
<td align="center"><kbd>Backspace</kbd></td>
<td>Delete the character behind the cursor. A numeric argument means to kill the characters instead of deleting them.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-forward-backward-delete-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-forward-backward-delete-char"></a><code>forward-backward-delete-char</code></td>
<td align="center"></td>
<td>Delete the character under the cursor, unless the cursor is at the end of the line, in which case the character behind the cursor is deleted.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-quoted-insert"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-quoted-insert"></a><code>quoted-insert</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>q</kbd></td>
<td>Add the next character typed to the line verbatim. This is how to insert key sequences like <kbd>Ctrl</kbd>-<kbd>h</kbd> or <kbd>Esc</kbd>, for example.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-self-insert"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-self-insert"></a><code>self-insert</code></td>
<td align="center"><kbd>a</kbd>, <kbd>b</kbd>, <kbd>A</kbd>, <kbd>1</kbd>, <kbd>!</kbd>, etc</td>
<td>Insert the key itself.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-transpose-chars"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-transpose-chars"></a><code>transpose-chars</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>t</kbd></td>
<td>Drag the character before the cursor forward over the character at the cursor, moving the cursor forward as well. If the insertion point is at the end of the line, then this transposes the last two characters of the line. Negative arguments have no effect.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-transpose-words"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-transpose-words"></a><code>transpose-words</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>t</kbd></td>
<td>Drag the word before point past the word after point, moving point past that word as well. If the insertion point is at the end of the line, this transposes the last two words on the line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-upcase-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-upcase-word"></a><code>upcase-word</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>u</kbd></td>
<td>Uppercase the current (or following) word. With a negative argument, uppercase the previous word, but do not move the cursor.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-downcase-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-downcase-word"></a><code>downcase-word</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>l</kbd></td>
<td>Lowercase the current (or following) word. With a negative argument, lowercase the previous word, but do not move the cursor.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-capitalize-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-capitalize-word"></a><code>capitalize-word</code></td>
<td align="center"></td>
<td>Capitalize the current (or following) word. With a negative argument, capitalize the previous word, but do not move the cursor.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-overwrite-mode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-overwrite-mode"></a><code>overwrite-mode</code></td>
<td align="center"><kbd>Ins</kbd></td>
<td>Toggle overwrite mode. With an explicit positive numeric argument, switches to overwrite mode. With an explicit non-positive numeric argument, switches to insert mode. This command affects only emacs mode; vi mode does overwrite differently. Each new command line prompt starts in insert mode.<br/>In overwrite mode, characters bound to <a href="#rlcmd-self-insert"><code>self-insert</code></a> replace the text at point rather than pushing the text to the right. Characters bound to <a href="#rlcmd-backward-delete-char"><code>backward-delete-char</code></a> replace the character before point with a space.</td>
</tr>
</tbody></table>
<h3 id="killing-and-yanking-1"><a class="wlink" href="#killing-and-yanking-1"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Killing And Yanking <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-kill-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-kill-line"></a><code>kill-line</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>End</kbd></td>
<td>Kill the text from point to the end of the line. With a negative numeric argument, kill backward from the cursor to the beginning of the current line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-backward-kill-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-backward-kill-line"></a><code>backward-kill-line</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Home</kbd></td>
<td>Kill backward from the cursor to the beginning of the current line. With a negative numeric argument, kill forward from the cursor to the end of the current line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-unix-line-discard"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-unix-line-discard"></a><code>unix-line-discard</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>u</kbd></td>
<td>Kill backward from the cursor to the beginning of the current line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-kill-whole-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-kill-whole-line"></a><code>kill-whole-line</code></td>
<td align="center"></td>
<td>Kill all characters on the current line, no matter where point is.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-kill-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-kill-word"></a><code>kill-word</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Del</kbd></td>
<td>Kill from point to the end of the current word, or if between words, to the end of the next word. Word boundaries are the same as <a href="#rlcmd-forward-word"><code>forward-word</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-backward-kill-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-backward-kill-word"></a><code>backward-kill-word</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Backspace</kbd></td>
<td>Kill the word behind point. Word boundaries are the same as <a href="#rlcmd-backward-word"><code>backward-word</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-unix-word-rubout"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-unix-word-rubout"></a><code>unix-word-rubout</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>w</kbd></td>
<td>Kill the word behind the cursor point, using white space as a word boundary. The killed text is saved on the kill-ring.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-unix-filename-rubout"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-unix-filename-rubout"></a><code>unix-filename-rubout</code></td>
<td align="center"></td>
<td>Kill the word behind point, using white space and the slash character as the word boundaries. The killed text is saved on the kill-ring.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-delete-horizontal-space"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-delete-horizontal-space"></a><code>delete-horizontal-space</code></td>
<td align="center"></td>
<td>Delete all spaces and tabs around point.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-kill-region"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-kill-region"></a><code>kill-region</code></td>
<td align="center"></td>
<td>Kill the text in the current region.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-copy-region-as-kill"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-copy-region-as-kill"></a><code>copy-region-as-kill</code></td>
<td align="center"></td>
<td>Copy the text in the region to the kill buffer, so it can be yanked right away.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-copy-backward-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-copy-backward-word"></a><code>copy-backward-word</code></td>
<td align="center"></td>
<td>Copy the word before point to the kill buffer. The word boundaries are the same as <a href="#rlcmd-backward-word"><code>backward-word</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-copy-forward-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-copy-forward-word"></a><code>copy-forward-word</code></td>
<td align="center"></td>
<td>Copy the word following point to the kill buffer. The word boundaries are the same as <a href="#rlcmd-forward-word"><code>forward-word</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-yank"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-yank"></a><code>yank</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>y</kbd></td>
<td>Yank the top of the kill ring into the buffer at the cursor point.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-yank-pop"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-yank-pop"></a><code>yank-pop</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>y</kbd></td>
<td>Rotate the kill-ring and yank the new top; but only if the prior command is <a href="#rlcmd-yank"><code>yank</code></a> or <code>yank-pop</code>.</td>
</tr>
</tbody></table>
<h3 id="specifying-numeric-arguments"><a class="wlink" href="#specifying-numeric-arguments"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Specifying Numeric Arguments <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-digit-argument"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-digit-argument"></a><code>digit-argument</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd><em>digit</em></kbd> or <kbd>Alt</kbd>-<kbd>-</kbd></td>
<td>Add this <em>digit</em> to the argument already accumulating, or start a new argument. <kbd>Alt</kbd>-<kbd>-</kbd> starts a negative argument.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-universal-argument"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-universal-argument"></a><code>universal-argument</code></td>
<td align="center"></td>
<td>This is another way to specify an argument. If this command is followed by one or more digits, optionally with a leading minus sign, those digits define the argument. If the command is followed by digits, executing <code>universal-argument</code> again ends the numeric argument, but is otherwise ignored. As a special case, if this command is immediately followed by a character that is neither a digit nor minus sign, the argument count for the next command is multiplied by four. The argument count is initially one, so executing this function the first time makes the argument count four, a second time makes the argument count sixteen, and so on. By default, this is not bound to a key.</td>
</tr>
</tbody></table>
<h3 id="completion-commands"><a class="wlink" href="#completion-commands"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Completion Commands <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-complete"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-complete"></a><code>complete</code></td>
<td align="center"><kbd>Tab</kbd>  <a href="#alternatedefaultcommand">*</a></td>
<td>Attempt to perform completion on the text before point.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-possible-completions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-possible-completions"></a><code>possible-completions</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>=</kbd></td>
<td>List the possible completions of the text before point. When displaying completions, Readline sets the number of columns used for display to the value of <code><a href="#configcompletiondisplaywidth">completion-display-width</a></code>, the value of the environment variable <code>%COLUMNS%</code>, or the screen width, in that order.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-insert-completions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-insert-completions"></a><code>insert-completions</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>*</kbd></td>
<td>Insert all completions of the text before point that would have been generated by <a href="#rlcmd-possible-completions"><code>possible-completions</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-menu-complete"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-menu-complete"></a><code>menu-complete</code></td>
<td align="center"></td>
<td>Similar to <a href="#rlcmd-complete"><code>complete</code></a>, but replaces the word to be completed with a single match from the list of possible completions. Repeated execution of <code>menu-complete</code> steps through the list of possible completions, inserting each match in turn. At the end of the list of completions, the bell is rung (subject to the setting of <code><a href="#configbellstyle">bell-style</a></code>) and the original text is restored. An argument of <em>n</em> moves <em>n</em> positions forward in the list of matches; a negative argument may be used to move backward through the list. This command is intended to be bound to <kbd>Tab</kbd>, but is unbound by default.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-menu-complete-backward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-menu-complete-backward"></a><code>menu-complete-backward</code></td>
<td align="center"></td>
<td>Identical to <a href="#rlcmd-menu-complete"><code>menu-complete</code></a>, but moves backward through the list of possible completions, as if <code>menu-complete</code> had been given a negative argument.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-old-menu-complete"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-old-menu-complete"></a><code>old-menu-complete</code></td>
<td align="center"><a href="#alternatedefaultcommand">*</a></td>
<td>Similar to <a href="#rlcmd-menu-complete"><code>menu-complete</code></a> but isn&#39;t limited by <code><a href="#configcompletionqueryitems">completion-query-items</a></code> and doesn&#39;t include the common prefix of the possible completions. This behaves like the default completion in cmd.exe on Windows. When Clink is installed using the setup program with the &quot;Autorun when cmd.exe starts&quot; box checked or when <a href="#clink_default_bindings"><code>clink.default_bindings</code></a> is set to <code>windows</code>, then this is bound by default to <kbd>Tab</kbd>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-delete-char-or-list"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-delete-char-or-list"></a><code>delete-char-or-list</code></td>
<td align="center"></td>
<td>Deletes the character under the cursor if not at the beginning or end of the line (like <a href="#rlcmd-delete-char"><code>delete-char</code></a>). If at the end of the line, behaves identically to <a href="#rlcmd-possible-completions"><code>possible-completions</code></a>.</td>
</tr>
</tbody></table>
<h3 id="keyboard-macros"><a class="wlink" href="#keyboard-macros"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Keyboard Macros <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-start-kbd-macro"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-start-kbd-macro"></a><code>start-kbd-macro</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>(</kbd></td>
<td>Begin saving the characters typed into the current keyboard macro.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-end-kbd-macro"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-end-kbd-macro"></a><code>end-kbd-macro</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>)</kbd></td>
<td>Stop saving the characters typed into the current keyboard macro and save the definition.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-call-last-kbd-macro"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-call-last-kbd-macro"></a><code>call-last-kbd-macro</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>e</kbd></td>
<td>Re-execute the last keyboard macro defined, by making the characters in the macro appear as if typed at the keyboard.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-print-last-kbd-macro"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-print-last-kbd-macro"></a><code>print-last-kbd-macro</code></td>
<td align="center"></td>
<td>Print the last keboard macro defined in a format suitable for the inputrc file.</td>
</tr>
</tbody></table>
<h3 id="some-miscellaneous-commands"><a class="wlink" href="#some-miscellaneous-commands"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Some Miscellaneous Commands <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-re-read-init-file"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-re-read-init-file"></a><code>re-read-init-file</code></td>
<td align="center"></td>
<td>Read in the contents of the inputrc file, and incorporate any bindings or variable assignments found there.<br/>In Clink <a href="#rlcmd-clink-reload"><code>clink-reload</code></a> is preferred since it also reloads Lua scripts.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-abort"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-abort"></a><code>abort</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>g</kbd></td>
<td>Abort the current editing command and ring the terminal&#39;s bell (subject to the setting of <a href="#configbellstyle"><code>bell-style</code></a>).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-do-lowercase-version"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-do-lowercase-version"></a><code>do-lowercase-version</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd><em>X</em></kbd>, etc</td>
<td>If the key <kbd><em>X</em></kbd> is an upper case letter, run the command that is bound to the corresponding <kbd>Alt</kbd>-<kbd><em>x</em></kbd> lower case letter. The behavior is undefined if <em>x</em> is already lower case.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-undo"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-undo"></a><code>undo</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>z</kbd> or <kbd>Ctrl</kbd>-<kbd>_</kbd></td>
<td>Incremental undo, separately remembered for each line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-revert-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-revert-line"></a><code>revert-line</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>r</kbd></td>
<td>Undo all changes made to this line. This is like executing the <a href="#rlcmd-undo"><code>undo</code></a> command enough times to get back to the beginning.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-tilde-expand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-tilde-expand"></a><code>tilde-expand</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>~</kbd></td>
<td>Perform tilde expansion on the current word.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-set-mark"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-set-mark"></a><code>set-mark</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>@</kbd></td>
<td>Set the mark to the point. If a numeric argument is supplied, the mark is set to that position.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-exchange-point-and-mark"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-exchange-point-and-mark"></a><code>exchange-point-and-mark</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>Ctrl</kbd>-<kbd>x</kbd></td>
<td>Swap the point with the mark. The current cursor position is set to the saved position, and the old cursor position is saved as the mark.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-character-search"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-character-search"></a><code>character-search</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>]</kbd></td>
<td>A character is read and point is moved to the next occurrence of that character. A negative count searches for previous occurrences.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-character-search-backward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-character-search-backward"></a><code>character-search-backward</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>]</kbd></td>
<td>A character is read and point is moved to the previous occurrence of that character. A negative count searches for subsequent occurrences.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-insert-comment"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-insert-comment"></a><code>insert-comment</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>#</kbd></td>
<td>Without a numeric argument, the value of the <a href="#configcommentbegin"><code>comment-begin</code></a> variable is inserted at the beginning of the current line. If a numeric argument is supplied, this command acts as a toggle: if the characters at the beginning of the line do not match the value of <code>comment-begin</code>, the value is inserted, otherwise the characters in <code>comment-begin</code> are deleted from the beginning of the line. In either case, the line is accepted as if a newline had been typed.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-redraw-current-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-redraw-current-line"></a><code>redraw-current-line</code></td>
<td align="center"></td>
<td>Refresh the current line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-dump-functions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-dump-functions"></a><code>dump-functions</code></td>
<td align="center"></td>
<td>Print all of the functions and their key bindings to the Readline output stream. If a numeric argument is supplied, the output is formatted in such a way that it can be made part of an inputrc file.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-dump-variables"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-dump-variables"></a><code>dump-variables</code></td>
<td align="center"></td>
<td>Print all of the settable variables and their values to the Readline output stream. If a numeric argument is supplied, the output is formatted in such a way that it can be made part of an inputrc file.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-dump-macros"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-dump-macros"></a><code>dump-macros</code></td>
<td align="center"></td>
<td>Print all of the Readline key sequences bound to macros and the strings they output. If a numeric argument is supplied, the output is formatted in such a way that it can be made part of an inputrc file.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-execute-named-command"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-execute-named-command"></a><code>execute-named-command</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>x</kbd></td>
<td>Read a bindable readline command name from the input and execute the function to which it&#39;s bound, as if the key sequence to which it was bound appeared in the input.  If this function is supplied with a numeric argument, it passes that argument to the function it executes.</td>
</tr>
</tbody></table>
<h3 id="readline-vi-mode"><a class="wlink" href="#readline-vi-mode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Readline vi Mode <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<p>While the Readline library does not have a full set of vi editing functions, it does contain enough to allow simple editing of the line. The Readline vi mode behaves as specified in the POSIX standard.</p>
<p>In order to switch interactively between emacs and vi editing modes, use the command <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>j</kbd> (bound to <a href="#rlcmd-emacs-editing-mode"><code>emacs-editing-mode</code></a> when in vi mode and to <a href="#rlcmd-vi-editing-mode"><code>vi-editing-mode</code></a> in emacs mode). The Readline default is emacs mode.</p>
<p>When you enter a line in vi mode, you are already placed in &quot;insertion&quot; mode, as if you had typed an &quot;i&quot;. Pressing <kbd>Esc</kbd> switches you into &quot;command&quot; mode, where you can edit the text of the line with the standard vi movement keys, move to previous history lines with &quot;k&quot; and subsequent lines with &quot;j&quot;, and so forth.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-emacs-editing-mode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-emacs-editing-mode"></a><code>emacs-editing-mode</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>e</kbd></td>
<td>When in vi command mode, this causes a switch to emacs editing mode.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-vi-editing-mode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-vi-editing-mode"></a><code>vi-editing-mode</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>j</kbd></td>
<td>When in emacs editing mode, this causes a switch to vi editing mode.</td>
</tr>
</tbody></table>
<h3 id="other-readline-commands"><a class="wlink" href="#other-readline-commands"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Other Readline Commands <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<p>These other commands are not very useful in Clink, but exist nevertheless.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-tab-insert"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-tab-insert"></a><code>tab-insert</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>i</kbd></td>
<td>Insert a tab character.<br/><strong>Note:</strong> this command exists for compatibility with bash, but it isn&#39;t useful in Clink because CMD doesn&#39;t support entering a tab character in the input line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-prefix-meta"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-prefix-meta"></a><code>prefix-meta</code></td>
<td align="center"></td>
<td>&quot;Metafy&quot; the next character typed. This is for keyboards without an <kbd>Alt</kbd> meta key. Typing a key bound to <code>prefix-meta</code> and then <kbd>f</kbd> is equivalent to typing <kbd>Alt</kbd>-<kbd>f</kbd>. By default this is bound to <kbd>Esc</kbd>, but only when the <a href="#terminal_raw_esc"><code>terminal.raw_esc</code></a> Clink setting is enabled.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-skip-csi-sequence"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-skip-csi-sequence"></a><code>skip-csi-sequence</code></td>
<td align="center"></td>
<td>This has no effect unless the <a href="#terminal_raw_esc"><code>terminal.raw_esc</code></a> Clink setting is enabled. Reads enough characters to consume a multi-key sequence such as those defined for keys like <kbd>Home</kbd> and <kbd>End</kbd>. Such sequences begin with a Control Sequence Indicator (CSI), which is <code>ESC</code> <code>[</code>. If this sequence is bound to &quot;\e[&quot;, keys producing such sequences will have no effect unless explicitly bound to a readline command, instead of inserting stray characters into the editing buffer.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-bracketed-paste-begin"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-bracketed-paste-begin"></a><code>bracketed-paste-begin</code></td>
<td align="center"></td>
<td>This function is intended to be bound to the &quot;bracketed paste&quot; escape sequence sent by some terminals, and such a binding is assigned by default. It allows Readline to insert the pasted text as a single unit without treating each character as if it had been read from the keyboard. The characters are inserted as if each one was bound to <a href="#rlcmd-self-insert"><code>self-insert</code></a> instead of executing any editing commands.<br/>Bracketed paste sets the region (the characters between point and the mark) to the inserted text. It uses the concept of an active mark: when the mark is active, Readline redisplay uses the terminal&#39;s standout mode to denote the region.<br/><strong>Note:</strong> this command exists for compatibility with bash, but Clink doesn&#39;t support bracketed paste. Instead use the <a href="#rlcmd-clink-paste"><code>clink-paste</code></a> command to perform the equivalent of a bracketed paste.</td>
</tr>
</tbody></table>
<h3 id="clink-commands"><a class="wlink" href="#clink-commands"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Clink Commands <span class="uplinks"><a href="#bindable-commands">up</a> <a href="#toc">top</a></span></h3>
<p>Clink also adds some new commands, beyond what&#39;s normally provided by Readline.</p>
<table>
<thead>
<tr>
<th>Command</th>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><a class="wlink" href="#rlcmd-add-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-add-history"></a><code>add-history</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>k</kbd></td>
<td>Add the current line to the history without executing it, and clear the editing line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-alias-expand-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-alias-expand-line"></a><code>alias-expand-line</code></td>
<td align="center"></td>
<td>A synonym for <a href="#rlcmd-clink-expand-doskey-alias"><code>clink-expand-doskey-alias</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-accept-suggested-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-accept-suggested-line"></a><code>clink-accept-suggested-line</code></td>
<td align="center"></td>
<td>If there is a suggestion, insert the suggestion and accept the input line (like <a href="#rlcmd-accept-line"><code>accept-line</code></a>).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-backward-bigword"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-backward-bigword"></a><code>clink-backward-bigword</code></td>
<td align="center"></td>
<td>Move back to the start of the current or previous space delimited word.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-complete-numbers"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-complete-numbers"></a><code>clink-complete-numbers</code></td>
<td align="center"></td>
<td>Like <a href="#rlcmd-complete"><code>complete</code></a>, but for numbers from the console screen (3 digits or more, up to hexadecimal).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-copy-cwd"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-copy-cwd"></a><code>clink-copy-cwd</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>c</kbd></td>
<td>Copies the current working directory to the clipboard.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-copy-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-copy-line"></a><code>clink-copy-line</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>c</kbd></td>
<td>Copies the input line to the clipboard.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-copy-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-copy-word"></a><code>clink-copy-word</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>w</kbd></td>
<td>Copies the word at the cursor point to the clipboard, or copies the <em>n</em>-th word if a numeric argument is provided via the <a href="#rlcmd-digit-argument"><code>digit-argument</code></a> keys.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-ctrl-c"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-ctrl-c"></a><code>clink-ctrl-c</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>c</kbd></td>
<td>Copies any selected text to the clipboard, otherwise cancels the input line and starts a new one.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-diagnostics"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-diagnostics"></a><code>clink-diagnostics</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>Ctrl</kbd>-<kbd>z</kbd></td>
<td>Show internal diagnostic information.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-dump-functions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-dump-functions"></a><code>clink-dump-functions</code></td>
<td align="center"></td>
<td>Print all of the functions and their key bindings.  If a numeric argument is supplied, formats the output so that it can be made part of an INPUTRC file.  Unlike <a href="#rlcmd-dump-functions"><code>dump-functions</code></a>, this uses friendly key names and includes <code>luafunc:</code> macros.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-dump-macros"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-dump-macros"></a><code>clink-dump-macros</code></td>
<td align="center"></td>
<td>Print all of the key names bound to macros and the strings they output.  If a numeric argument is supplied, formats the output so that it can be made part of an INPUTRC file.  Unlike <a href="#rlcmd-dump-macros"><code>dump-macros</code></a>, this uses friendly key names and omits <code>luafunc:</code> macros.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-exit"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-exit"></a><code>clink-exit</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>F4</kbd></td>
<td>Replaces the input line with <code>exit</code> and executes it (exits the CMD instance).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-expand-doskey-alias"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-expand-doskey-alias"></a><code>clink-expand-doskey-alias</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>f</kbd></td>
<td>Expands doskey aliases in the input line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-expand-env-var"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-expand-env-var"></a><code>clink-expand-env-var</code></td>
<td align="center"></td>
<td>Expands environment variables in the word at the cursor point.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-expand-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-expand-history"></a><code>clink-expand-history</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>^</kbd></td>
<td>Performs <a href="#using-history-expansion">history expansion</a> in the input line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-expand-history-and-alias"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-expand-history-and-alias"></a><code>clink-expand-history-and-alias</code></td>
<td align="center"></td>
<td>Performs <a href="#using-history-expansion">history</a> and doskey alias expansion in the input line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-expand-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-expand-line"></a><code>clink-expand-line</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>e</kbd></td>
<td>Performs <a href="#using-history-expansion">history</a>, doskey alias, and environment variable expansion in the input line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-find-conhost"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-find-conhost"></a><code>clink-find-conhost</code></td>
<td align="center"></td>
<td>Activates the &quot;Find&quot; dialog when running in a standard console window (hosted by the OS conhost).  This is equivalent to picking &quot;Find...&quot; from the console window&#39;s system menu. When <a href="#clink_default_bindings"><code>clink.default_bindings</code></a> is enabled, this is bound to <kbd>Ctrl</kbd>-<kbd>f</kbd>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-forward-bigword"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-forward-bigword"></a><code>clink-forward-bigword</code></td>
<td align="center"></td>
<td>Move forward to the beginning of the next space delimited word, or insert the next full suggested word up to a space.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-insert-dot-dot"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-insert-dot-dot"></a><code>clink-insert-dot-dot</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>a</kbd></td>
<td>Inserts <code>..\</code> at the cursor point.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-insert-suggested-full-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-insert-suggested-full-word"></a><code>clink-insert-suggested-full-word</code></td>
<td align="center"></td>
<td>If there is a suggestion, insert the next full word from the suggested line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-insert-suggested-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-insert-suggested-line"></a><code>clink-insert-suggested-line</code></td>
<td align="center"></td>
<td>If there is a suggestion, insert the suggested line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-insert-suggested-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-insert-suggested-word"></a><code>clink-insert-suggested-word</code></td>
<td align="center"></td>
<td>If there is a suggestion, insert the next word from the suggested line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-magic-suggest-space"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-magic-suggest-space"></a><code>clink-magic-suggest-space</code></td>
<td align="center"></td>
<td>Insert the next full suggested word (if any) up to a space, and insert a space.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-mark-conhost"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-mark-conhost"></a><code>clink-mark-conhost</code></td>
<td align="center"></td>
<td>Activates the &quot;Mark&quot; mode when running in a standard console window (hosted by the OS conhost).  This is equivalent to picking &quot;Mark&quot; from the console window&#39;s system menu. When <a href="#clink_default_bindings"><code>clink.default_bindings</code></a> is enabled, this is bound to <kbd>Ctrl</kbd>-<kbd>m</kbd>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-menu-complete-numbers"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-menu-complete-numbers"></a><code>clink-menu-complete-numbers</code></td>
<td align="center"></td>
<td>Like <a href="#rlcmd-menu-complete"><code>menu-complete</code></a>, but for numbers from the console screen (3 digits or more, up to hexadecimal).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-menu-complete-numbers-backward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-menu-complete-numbers-backward"></a><code>clink-menu-complete-numbers-backward</code></td>
<td align="center"></td>
<td>Like <a href="#rlcmd-menu-complete-backward"><code>menu-complete-backward</code></a>, but for numbers from the console screen (3 digits or more, up to hexadecimal).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-old-menu-complete-numbers"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-old-menu-complete-numbers"></a><code>clink-old-menu-complete-numbers</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>n</kbd></td>
<td>Like <a href="#rlcmd-old-menu-complete"><code>old-menu-complete</code></a>, but for numbers from the console screen (3 digits or more, up to hexadecimal).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-old-menu-complete-numbers-backward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-old-menu-complete-numbers-backward"></a><code>clink-old-menu-complete-numbers-backward</code></td>
<td align="center"></td>
<td>Like <a href="#rlcmd-old-menu-complete-backward"><code>old-menu-complete-backward</code></a>, but for numbers from the console screen (3 digits or more, up to hexadecimal).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-paste"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-paste"></a><code>clink-paste</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>v</kbd></td>
<td>Paste text from the clipboard at the cursor point.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-popup-complete"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-popup-complete"></a><code>clink-popup-complete</code></td>
<td align="center"></td>
<td>A synonym for <a href="#rlcmd-clink-select-complete"><code>clink-select-complete</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-popup-complete-numbers"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-popup-complete-numbers"></a><code>clink-popup-complete-numbers</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>Shift</kbd>-<kbd>N</kbd></td>
<td>Like <a href="#rlcmd-clink-select-complete"><code>clink-select-complete</code></a>, but for numbers from the console screen (3 digits or more, up to hexadecimal).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-popup-directories"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-popup-directories"></a><code>clink-popup-directories</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>PgUp</kbd></td>
<td>Show recent directories in a <a href="#popupwindow">popup list</a>.  In the popup, use <kbd>Enter</kbd> to <code>cd /d</code> to the selected directory.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-popup-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-popup-history"></a><code>clink-popup-history</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>Up</kbd></td>
<td>Show history entries in a <a href="#popupwindow">popup list</a>.  Filters using any text before the cursor point.  In the popup, use <kbd>Enter</kbd> to execute the selected history entry.  If <a href="#history_time_stamp"><code>history.time_stamp</code></a> is <code>show</code> then timestamps are shown unless a numeric argument of 0 is provided.  If <code>history.time_stamp</code> is <code>save</code> then timestamps are only shown if a non-zero numeric argument is provided.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-popup-show-help"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-popup-show-help"></a><code>clink-popup-show-help</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>H</kbd></td>
<td>Show all key bindings in a searchable <a href="#popupwindow">popup list</a>.  In the popup, use <kbd>Enter</kbd> to invoke the selected key binding.  If a numeric argument of 4 is supplied, it includes unbound commands.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-reload"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-reload"></a><code>clink-reload</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>Ctrl</kbd>-<kbd>r</kbd></td>
<td>Reload Lua scripts and the .inputrc file.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-reset-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-reset-line"></a><code>clink-reset-line</code></td>
<td align="center"><kbd>Esc</kbd></td>
<td>Clear the input line.  Can be undone, unlike <a href="#rlcmd-revert-line"><code>revert-line</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-scroll-bottom"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-scroll-bottom"></a><code>clink-scroll-bottom</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>End</kbd></td>
<td>Scroll the console window to the bottom (the current input line).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-scroll-line-down"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-scroll-line-down"></a><code>clink-scroll-line-down</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Down</kbd></td>
<td>Scroll the console window down one line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-scroll-line-up"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-scroll-line-up"></a><code>clink-scroll-line-up</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Up</kbd></td>
<td>Scroll the console window up one line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-scroll-page-down"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-scroll-page-down"></a><code>clink-scroll-page-down</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>PgDn</kbd></td>
<td>Scroll the console window down one page.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-scroll-page-up"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-scroll-page-up"></a><code>clink-scroll-page-up</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>PgUp</kbd></td>
<td>Scroll the console window up one page.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-scroll-top"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-scroll-top"></a><code>clink-scroll-top</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Home</kbd></td>
<td>Scroll the console window to the top.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-select-complete"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-select-complete"></a><code>clink-select-complete</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Space</kbd></td>
<td>Like <a href="#rlcmd-complete"><code>complete</code></a>, but shows an interactive menu of matches and responds to arrow keys and typing to filter the matches.  If there is only one match, it is inserted.  While completing, <kbd>F1</kbd> toggles showing match descriptions at the bottom vs next to each match.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-selectall-conhost"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-selectall-conhost"></a><code>clink-selectall-conhost</code></td>
<td align="center"></td>
<td>Mimics the &quot;Select All&quot; command when running in a standard console window (hosted by the OS conhots).  Selects the input line text.  If already selected, then it invokes the &quot;Select All&quot; command from the console window&#39;s system menu and selects the entire screen buffer&#39;s contents. When <a href="#clink_default_bindings"><code>clink.default_bindings</code></a> is enabled, this is bound to <kbd>Ctrl</kbd>-<kbd>a</kbd>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-shift-space"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-shift-space"></a><code>clink-shift-space</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>Space</kbd></td>
<td>Invoke the normal <kbd>Space</kbd> key binding, so that <kbd>Shift</kbd>-<kbd>Space</kbd> behaves the same as <kbd>Space</kbd>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-show-help"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-show-help"></a><code>clink-show-help</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>h</kbd></td>
<td>Show all key bindings.  A numeric argument affects showing categories and descriptions:  0 for neither, 1 for categories, 2 for descriptions, 3 for categories and descriptions (the default).  Add 4 to include unbound commands.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-show-help-raw"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-show-help-raw"></a><code>clink-show-help-raw</code></td>
<td align="center"></td>
<td>Show raw key sequence strings for all key bindings.  A numeric argument affects showing categories and descriptions:  0 for neither, 1 for categories, 2 for descriptions, 3 for categories and descriptions (the default).  Add 4 to include unbound commands.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-toggle-slashes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-toggle-slashes"></a><code>clink-toggle-slashes</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>/</kbd></td>
<td>Toggle between forward and backslashes in the word at the cursor point, or toggle in the <em>n</em>-th word if a numeric argument is provided via the <a href="#rlcmd-digit-argument"><code>digit-argument</code></a> keys.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-up-directory"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-up-directory"></a><code>clink-up-directory</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>PgUp</kbd></td>
<td>Execute <code>cd ..</code> to move up one directory.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-clink-what-is"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-clink-what-is"></a><code>clink-what-is</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Shift</kbd>-<kbd>/</kbd></td>
<td>Show the key binding for the next key sequence input.  If a numeric argument is supplied, the raw key sequence string is shown instead of the friendly key name.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-backward-bigword"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-backward-bigword"></a><code>cua-backward-bigword</code></td>
<td align="center"></td>
<td>Extend the selection backward one space delimited word.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-backward-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-backward-char"></a><code>cua-backward-char</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>Left</kbd></td>
<td>Extend the selection backward one character.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-backward-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-backward-word"></a><code>cua-backward-word</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Shift</kbd>-<kbd>Left</kbd></td>
<td>Extend the selection backward one word.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-beg-of-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-beg-of-line"></a><code>cua-beg-of-line</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>Home</kbd></td>
<td>Extend the selection to the beginning of the line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-copy"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-copy"></a><code>cua-copy</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>Ins</kbd></td>
<td>Copy the selected text to the clipboard.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-cut"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-cut"></a><code>cua-cut</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>Del</kbd></td>
<td>Cut the selected text to the clipboard.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-end-of-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-end-of-line"></a><code>cua-end-of-line</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>End</kbd></td>
<td>Extend the selection to the end of the line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-forward-bigword"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-forward-bigword"></a><code>cua-forward-bigword</code></td>
<td align="center"></td>
<td>Extend the selection forward one space delimited word, or insert the next full suggested word up to a space.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-forward-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-forward-char"></a><code>cua-forward-char</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>Right</kbd></td>
<td>Extend the selection forward one character, or insert the next full suggested word up to a space.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-forward-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-forward-word"></a><code>cua-forward-word</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Shift</kbd>-<kbd>Right</kbd></td>
<td>Extend the selection forward one word.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-next-screen-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-next-screen-line"></a><code>cua-next-screen-line</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>Down</kbd></td>
<td>Extend the selection down one screen line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-previous-screen-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-previous-screen-line"></a><code>cua-previous-screen-line</code></td>
<td align="center"><kbd>Shift</kbd>-<kbd>Up</kbd></td>
<td>Extend the selection up one screen line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-select-all"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-select-all"></a><code>cua-select-all</code></td>
<td align="center"></td>
<td>Extend the selection to the entire input line.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-cua-select-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-cua-select-word"></a><code>cua-select-word</code></td>
<td align="center"></td>
<td>Select the word at the cursor point.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-edit-and-execute-command"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-edit-and-execute-command"></a><code>edit-and-execute-command</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>Ctrl</kbd>-<kbd>e</kbd></td>
<td>Invoke an editor on the current input line, and execute the result as commands.  This attempts to invoke <code>%VISUAL%</code>, <code>%EDITOR%</code>, or <code>notepad.exe</code> as the editor, in that order.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-glob-complete-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-glob-complete-word"></a><code>glob-complete-word</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>g</kbd></td>
<td>Perform wildcard completion on the text before the cursor point, with a <code>*</code> implicitly appended.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-glob-expand-word"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-glob-expand-word"></a><code>glob-expand-word</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>*</kbd></td>
<td>Insert all the wildcard completions that <a href="#rlcmd-glob-list-expansions"><code>glob-list-expansions</code></a> would list.  If a numeric argument is supplied, a <code>*</code> is implicitly appended before completion.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-glob-list-expansions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-glob-list-expansions"></a><code>glob-list-expansions</code></td>
<td align="center"><kbd>Ctrl</kbd>-<kbd>x</kbd> <kbd>g</kbd></td>
<td>List the possible wildcard completions of the text before the cursor point.  If a numeric argument is supplied, a <code>*</code> is implicitly appended before completion.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-history-and-alias-expand-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-history-and-alias-expand-line"></a><code>history-and-alias-expand-line</code></td>
<td align="center"></td>
<td>A synonym for <a href="#rlcmd-clink-expand-history-and-alias"><code>clink-expand-history-and-alias</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-history-expand-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-history-expand-line"></a><code>history-expand-line</code></td>
<td align="center"></td>
<td>A synonym for <a href="#rlcmd-clink-expand-history"><code>clink-expand-history</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-insert-last-argument"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-insert-last-argument"></a><code>insert-last-argument</code></td>
<td align="center"></td>
<td>A synonym for <a href="#rlcmd-yank-last-arg"><code>yank-last-arg</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-magic-space"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-magic-space"></a><code>magic-space</code></td>
<td align="center"></td>
<td>Perform <a href="#using-history-expansion">history expansion</a> on the text before the cursor position and insert a space.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-old-menu-complete-backward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-old-menu-complete-backward"></a><code>old-menu-complete-backward</code></td>
<td align="center"></td>
<td>Like <a href="#rlcmd-old-menu-complete"><code>old-menu-complete</code></a>, but in reverse. This behaves like the default completion in cmd.exe on Windows. When Clink is installed using the setup program with the &quot;Use enhanced default settings&quot; box checked or when <a href="#clink_default_bindings"><code>clink.default_bindings</code></a> is set to <code>windows</code>, then this is bound by default to <kbd>Shift</kbd>-<kbd>Tab</kbd>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-remove-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-remove-history"></a><code>remove-history</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>d</kbd></td>
<td>While searching history, removes the current line from the history.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-shell-expand-line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-shell-expand-line"></a><code>shell-expand-line</code></td>
<td align="center"><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>e</kbd></td>
<td>A synonym for <a href="#rlcmd-clink-expand-line"><code>clink-expand-line</code></a>.</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-win-copy-history-number"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-win-copy-history-number"></a><code>win-copy-history-number</code></td>
<td align="center"><kbd>F9</kbd></td>
<td>Enter a history number and replace the input line with the history entry (mimics Windows console <kbd>F9</kbd>).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-win-copy-up-to-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-win-copy-up-to-char"></a><code>win-copy-up-to-char</code></td>
<td align="center"><kbd>F2</kbd></td>
<td>Enter a character and copy up to it from the previous command (mimics Windows console <kbd>F2</kbd>).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-win-copy-up-to-end"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-win-copy-up-to-end"></a><code>win-copy-up-to-end</code></td>
<td align="center"><kbd>F3</kbd></td>
<td>Copy the rest of the previous command (mimics Windows console <kbd>F3</kbd>).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-win-cursor-forward"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-win-cursor-forward"></a><code>win-cursor-forward</code></td>
<td align="center"><kbd>F1</kbd></td>
<td>Move cursor forward, or at end of line copy character from previous command, or insert suggestion (mimics Windows console <kbd>F1</kbd> and <kbd>Right</kbd>).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-win-delete-up-to-char"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-win-delete-up-to-char"></a><code>win-delete-up-to-char</code></td>
<td align="center"><kbd>F4</kbd></td>
<td>Enter a character and delete up to it in the input line (mimics Windows console <kbd>F4</kbd>).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-win-history-list"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-win-history-list"></a><code>win-history-list</code></td>
<td align="center"><kbd>F7</kbd></td>
<td>Executes a history entry from a list (mimics Windows console <kbd>F7</kbd>).</td>
</tr>
<tr>
<td><a class="wlink" href="#rlcmd-win-insert-eof"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><a name="rlcmd-win-insert-eof"></a><code>win-insert-eof</code></td>
<td align="center"><kbd>F6</kbd></td>
<td>Insert ^Z (mimics Windows console <kbd>F6</kbd>).</td>
</tr>
</tbody></table>
<p><a name="alternatedefaultcommand"></a></p>
<blockquote>
<p><strong>Note:</strong> Some commands have alternative default key bindings when Clink is installed with &quot;Use enhanced default settings&quot; checked in the setup program or when <a href="#clink_default_bindings"><code>clink.default_bindings</code></a> is set to <code>windows</code>.</p>
</blockquote>
<p><a name="completioncolors"></a></p>
<h2 id="completion-colors"><a class="wlink" href="#completioncolors"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Completion Colors <span class="uplinks"><a href="#configreadline">up</a> <a href="#toc">top</a></span></h2>
<p>The <a href="#match_coloring_rules"><code>match.coloring_rules</code></a> setting provides a string that determines how match completions are displayed.</p>
<p>The string can contain a series of one or more rules separated by colons (<code>:</code>).  If an environment variable <code>%CLINK_MATCH_COLORS%</code> exists, its value supersedes this setting.</p>
<p>Each rule is a series of one or more conditions separated by spaces, followed by an equals sign and then the <a href="https://en.wikipedia.org/wiki/ANSI_escape_code#SGR">SGR parameters</a> for an ANSI escape code.  All of the conditions must be true for the rule to match (in other words, a space is like an AND operator).</p>
<p>Each condition can be any of the following:</p>
<ul>
<li>A pattern, for example <code>*.zip</code> (for zip files).  This is an fnmatch pattern (like .gitignore globbing patterns).  The pattern is compared only to the filename portion after stripping the path.  For example, <code>*.zip</code>.</li>
<li>A type, for example <code>di</code> (for directories).  The available types are listed below.</li>
<li>A <code>not</code> operator, which negates the next condition.  For example, <code>not di</code> applies to anything that isn&#39;t a directory, or <code>not *.zip</code> applies to any name that doesn&#39;t match <code>*.zip</code>.</li>
</ul>
<p>Any quoted string is assumed to be a pattern, so <code>&quot;hi&quot;</code> is a pattern instead of the Hidden type, and etc.</p>
<p>Rules are evaluated in the order listed, with one exception:  Rules with exactly one type and no patterns are evaluated last; this makes it easier to list the rules -- you can put the simple defaults first, followed by specializations.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><code>di</code></td>
<td>Directory.</td>
<td><code>01;34</code> (bright blue)</td>
</tr>
<tr>
<td><code>ex</code></td>
<td>Executable file.</td>
<td><code>01;32</code> (bright green)</td>
</tr>
<tr>
<td><code>fi</code></td>
<td>Normal file.</td>
<td></td>
</tr>
<tr>
<td><code>ro</code></td>
<td>Readonly file or directory.</td>
<td>The <a href="#color_readonly">color.readonly</a> setting.</td>
</tr>
<tr>
<td><code>hi</code></td>
<td>Hidden file or directory.</td>
<td>The <a href="#color_hidden">color.hidden</a> setting.</td>
</tr>
<tr>
<td><code>mi</code></td>
<td>Missing file or directory.</td>
<td></td>
</tr>
<tr>
<td><code>ln</code></td>
<td>Symlinks.  When <code>ln=target</code> then symlinks are colored according to the target of the symlink.</td>
<td><code>target</code></td>
</tr>
<tr>
<td><code>or</code></td>
<td>Orphaned symlink (the target of the symlink is missing).</td>
<td></td>
</tr>
<tr>
<td><code>no</code></td>
<td>Normal color; covers anything not covered by any other types.</td>
<td></td>
</tr>
<tr>
<td><code>any</code></td>
<td>This clears all types in the rule so far, including the implicit default <code>fi</code> type when no type is given.  For example, <code>any history*</code> applies to directories as well as to files (any directory or file whose name begins with &quot;history&quot;).</td>
<td></td>
</tr>
</tbody></table>
<p>For backward compatibility with <a href="#LS_COLORS"><code>%LS_COLORS%</code></a>, either <code>so</code> or <code>*.readline-colored-completion-prefix</code> may be used to override the<a href="#color_common_match_prefix"><code>color.common_match_prefix</code></a> setting.</p>
<p>Here is an example that defines colors for various types.</p>
<pre><code class="language-plaintext">clink set match.coloring_rules  di=93:ro ex=1;32:ex=1:ro=32:di *.tmp=90
</code></pre>
<ul>
<li><code>di=93</code> uses bright yellow for directories.</li>
<li><code>ro ex=1;32</code> uses bright green for readonly executable files.</li>
<li><code>ex=1</code> uses bold for executable files (depending on the terminal&#39;s color theme, bold by itself usually ends up being bright white).</li>
<li><code>ro=32</code> uses dark green for readonly files.</li>
<li><code>di *.tmp=90</code> uses bright magenta for directory names ending in <code>.tmp</code>.</li>
</ul>
<blockquote>
<p><strong>Note:</strong> The <code>match.coloring_rules</code> setting was added in Clink v1.6.1.  It works similar to how the <a href="#LS_COLORS"><code>%LS_COLORS%</code></a> environment variable works, except it adds &quot;hi&quot;, &quot;ro&quot;, &quot;any&quot;, and &quot;not&quot;, and patterns can be fnmatch patterns instead of just &quot;*.ext&quot; patterns.</p>
</blockquote>
<p><a name="LS_COLORS"></a></p>
<h3 id="ls_colors-for-backward-compatibility"><a class="wlink" href="#LS_COLORS"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>LS_COLORS (for backward compatibility) <span class="uplinks"><a href="#completioncolors">up</a> <a href="#toc">top</a></span></h3>
<p>The <code>%LS_COLORS%</code> environment variable is supported for backwards compatibility with Readline.  It can provide color definitions as a series of color definitions separated by colons (<code>:</code>).  Each definition is a either a two character type id or a file extension, followed by an equals sign and then the <a href="https://en.wikipedia.org/wiki/ANSI_escape_code#SGR">SGR parameters</a> for an ANSI escape code.  The two character type ids are listed below.</p>
<p>If either <a href="#match_coloring_rules"><code>match.coloring_rules</code></a> or <code>%CLINK_MATCH_COLORS</code> are set, then they take precedence and <code>%LS_COLORS%</code> is ignored.</p>
<p>When <a href="#configcoloredstats"><code>colored-stats</code></a> is configured to <code>on</code>, then file completions are colored according to their file type or extension from <code>%LS_COLORS%</code>.  Also, since <code>%LS_COLORS%</code> doesn&#39;t cover readonly files, hidden files, doskey aliases, or shell commands the <a href="#color_readonly">color.readonly</a>, <a href="#color_hidden">color.hidden</a>, <a href="#color_doskey">color.doskey</a>, and <a href="#color_cmd">color.cmd</a> Clink settings exist to cover those.</p>
<p>When <a href="#configcoloredcompletionprefix"><code>colored-completion-prefix</code></a> is configured to <code>on</code>, then the &quot;so&quot; color from <code>%LS_COLORS%</code> is used to color the common prefix when displaying possible completions.  The default for &quot;so&quot; is bright magenta, but for example <code>set LS_COLORS=so=90</code> sets the color to bright black (which shows up as a dark gray).</p>
<table>
<thead>
<tr>
<th>Types</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><code>di</code></td>
<td>Directories.</td>
<td><code>01;34</code> (bright blue)</td>
</tr>
<tr>
<td><code>ex</code></td>
<td>Executable files.</td>
<td><code>01;32</code> (bright green)</td>
</tr>
<tr>
<td><code>fi</code></td>
<td>Normal files.</td>
<td></td>
</tr>
<tr>
<td><code>ln</code></td>
<td>Symlinks.  When <code>ln=target</code> then symlinks are colored according to the target of the symlink.</td>
<td><code>target</code></td>
</tr>
<tr>
<td><code>mi</code></td>
<td>Missing file or directory.</td>
<td></td>
</tr>
<tr>
<td><code>no</code></td>
<td>Normal color.  This is used for anything not covered by one of the other types.<br/>It may be overridden by various other Clink color settings as appropriate depending on the completion type.</td>
<td></td>
</tr>
<tr>
<td><code>or</code></td>
<td>Orphaned symlink (the target of the symlink is missing).</td>
<td></td>
</tr>
<tr>
<td><code>so</code></td>
<td>Common prefix for possible completions.</td>
<td><code>01;35</code> (bright magenta)</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>Special extensions</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody><tr>
<td><code>.readline-colored-completion-prefix</code></td>
<td>If there is a color definition in <code>%LS_COLORS%</code> for the custom suffix <code>.readline-colored-completion-prefix</code>, it is used for the common prefix, superseding the <code>so</code> type.</td>
<td></td>
</tr>
</tbody></table>
<p>Here is an example where <code>%LS_COLORS%</code> defines colors for various types.</p>
<pre><code class="language-plaintext">set LS_COLORS=so=90:fi=97:di=93:ex=92:*.pdf=30;105:*.md=4
</code></pre>
<ul>
<li><code>so=90</code> uses bright black (dark gray) for the common prefix for possible completions.</li>
<li><code>fi=97</code> uses bright white for files.</li>
<li><code>di=93</code> uses bright yellow for directories.</li>
<li><code>ex=92</code> uses bright green for executable files.</li>
<li><code>*.pdf=30;105</code> uses black on bright magenta for .pdf files.</li>
<li><code>*.md=4</code> uses underline for .md files.</li>
</ul>
<p><a name="popupwindow"></a></p>
<h2 id="popup-windows"><a class="wlink" href="#popupwindow"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Popup Windows <span class="uplinks"><a href="#configreadline">up</a> <a href="#toc">top</a></span></h2>
<p>Some commands show a searchable popup window that lists the available completions, directory history, or command history.</p>
<p>For example, <a href="#rlcmd-win-history-list"><code>win-history-list</code></a> (<kbd>F7</kbd>) and <a href="#rlcmd-clink-popup-directories"><code>clink-popup-directories</code></a> (<kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>PgUp</kbd>) show popup windows.</p>
<p>Here&#39;s how the popup windows work:</p>
<table>
<thead>
<tr>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><kbd>Escape</kbd></td>
<td>Cancels the popup.</td>
</tr>
<tr>
<td align="center"><kbd>Enter</kbd></td>
<td>Inserts the highlighted completion, changes to the highlighted directory, or executes the highlighted command.</td>
</tr>
<tr>
<td align="center"><kbd>Shift</kbd>-<kbd>Enter</kbd></td>
<td>Inserts the highlighted completion, inserts the highlighted directory, or jumps to the highlighted command history entry without executing it.</td>
</tr>
<tr>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Enter</kbd></td>
<td>Same as <kbd>Shift</kbd>-<kbd>Enter</kbd>.</td>
</tr>
<tr>
<td align="center"><kbd>Del</kbd></td>
<td>In a command history popup, <kbd>Del</kbd> deletes the selected history entry.</td>
</tr>
<tr>
<td align="center"><kbd>Left</kbd>/<kbd>Right</kbd></td>
<td>Scroll horizontally if possible.</td>
</tr>
<tr>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Left</kbd>/<kbd>Right</kbd></td>
<td>Scroll faster horizontally if possible.</td>
</tr>
<tr>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Home</kbd>/<kbd>End</kbd></td>
<td>Scroll horizontally to far left/right if possible.</td>
</tr>
</tbody></table>
<p>Most of the popup windows also have incremental search:</p>
<table>
<thead>
<tr>
<th align="center">Key</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Typing</td>
<td>Typing does an incremental search.</td>
</tr>
<tr>
<td align="center"><kbd>F1</kbd></td>
<td>Open this help topic in the default web browser.</td>
</tr>
<tr>
<td align="center"><kbd>F3</kbd></td>
<td>Go to the next match.</td>
</tr>
<tr>
<td align="center"><kbd>Ctrl</kbd>-<kbd>L</kbd></td>
<td>Go to the next match.</td>
</tr>
<tr>
<td align="center"><kbd>Shift</kbd>-<kbd>F3</kbd></td>
<td>Go to the previous match.</td>
</tr>
<tr>
<td align="center"><kbd>Ctrl</kbd>-<kbd>Shift</kbd>-<kbd>L</kbd></td>
<td>Go to the previous match.</td>
</tr>
<tr>
<td align="center"><kbd>F4</kbd></td>
<td>Toggle the search mode between &quot;find&quot; and &quot;filter&quot;.  When the search mode is filter, typing filters the list instead of doing an incremental search (only in v1.6.13 and higher).  Use the <a href="#clink_popup_search_mode">clink.popup_search_mode</a> setting to set the default search mode.</td>
</tr>
</tbody></table>
<p>The <a href="#rlcmd-win-history-list"><code>win-history-list</code></a> command has a different search feature.  Typing digits <code>0</code>-<code>9</code> jumps to the numbered history entry, or typing a letter jumps to the preceding history entry that begins with the typed letter.  <kbd>Left</kbd>/<kbd>Right</kbd> inserts the highlighted command history entry without executing it.  These are for compatibility with the <kbd>F7</kbd> behavior built into Windows console prompts.</p>
<p>Use the <a href="#rlcmd-clink-popup-history"><code>clink-popup-history</code></a> command instead if you prefer for typing to do an incremental search.</p>
<p><a name="extending-clink"></a></p>
<h1 id="extending-clink-with-lua"><a class="wlink" href="#extending-clink"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Extending Clink With Lua <span class="uplinks"><a href="#toc">top</a></span></h1>
<p>Clink can be extended with <a href="https://www.lua.org/docs.html">Lua</a> scripts to customize startup actions, create completion matches, customize the prompt, and more.  The following sections describe these in more detail and show some examples.</p>
<table class="linkmenu">
<tr><td><a href="#lua-scripts-location">Location of Lua Scripts</a></td><td>Locations from which scripts are loaded.</td></tr>
<tr><td><a href="#writing-lua-scripts">Writing Lua Scripts</a></td><td>Some tips for starting to write Lua scripts.</td></tr>
<tr><td><a href="#argumentcompletion">Argument Completion</a></td><td>How to give commands contextual match generators for their arguments.</td></tr>
<tr><td><a href="#matchgenerators">Match Generators</a></td><td>How to write match generators, or custom completion providers.</td></tr>
<tr><td><a href="#classifywords">Coloring the Input Text</a></td><td>How to make a match generator or argument matcher override the input coloring.</td></tr>
<tr><td><a href="#customisingtheprompt">Customizing the Prompt</a></td><td>How to write custom prompt filters.</td></tr>
<tr><td><a href="#customisingsuggestions">Customizing Suggestions</a></td><td>How to write custom [suggestion](#auto-suggest) generators.</td></tr>
<tr><td><a href="#showinginputhints">Showing Input Hints</a></td><td>How to write custom input hint providers (input hints can be displayed below the input line).</td></tr>
</table>

<p><a name="lua-scripts-location"></a></p>
<h2 id="location-of-lua-scripts"><a class="wlink" href="#lua-scripts-location"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Location of Lua Scripts <span class="uplinks"><a href="#extending-clink">up</a> <a href="#toc">top</a></span></h2>
<p>Clink loads all Lua scripts it finds in these directories:</p>
<ol>
<li>All directories listed in the <a href="#clink_dot_path"><code>clink.path</code></a> setting, separated by semicolons.</li>
<li>If <code>clink.path</code> is not set, then the DLL directory and the profile directory are used (see <a href="#filelocations">File Locations</a> for info about the profile directory).</li>
<li>All directories listed in the <code>%CLINK_PATH%</code> environment variable, separated by semicolons.</li>
<li>All directories registered by the <code>clink installscripts</code> command.</li>
</ol>
<p>Lua scripts are loaded once and are only reloaded if forced because the scripts locations change or the <a href="#rlcmd-clink-reload"><code>clink-reload</code></a> command is invoked (<kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Ctrl</kbd>-<kbd>R</kbd>).</p>
<p>Run <code>clink info</code> to see the script paths for the current session.</p>
<blockquote>
<p><strong>Notes:</strong></p>
<ul>
<li>&quot;completions&quot; is a special reserved directory name:  a &quot;completions&quot; directory under any of the Lua script directories listed in <code>clink info</code> has special meaning, and should not contain scripts unless they are specially written to be put in a &quot;completions&quot; directory.  See <a href="#completion-directories">Completion directories</a> for more information.</li>
<li>Clink performs tilde expansion on the Lua script directory names.  If the path begins with <code>~\</code> then it is replaced with the current user&#39;s home directory (<code>%HOME%</code> or <code>%HOMEDRIVE%%HOMEPATH%</code> or <code>%USERPROFILE%</code>).</li>
</ul>
</blockquote>
<h3 id="completion-directories"><a class="wlink" href="#completion-directories"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Completion directories <span class="uplinks"><a href="#lua-scripts-location">up</a> <a href="#toc">top</a></span></h3>
<p>You may optionally put Lua completion scripts in a <code>completions\</code> directory when using Clink v1.3.23 and higher.  That prevents them from being loaded when Clink starts, and instead they are only loaded when needed.  That can make Clink load faster if you have a large quantity of Lua scripts that define argmatchers.</p>
<p>When a command name is typed, if a corresponding argmatcher is not already loaded then the completions directories are searched for a Lua script by the same name.  If found, then the Lua script is loaded.  This is similar to how completion scripts work in shells like bash, zsh, and fish.</p>
<p>For example, if you type <code>xyz</code> and an argmatcher for <code>xyz</code> is not yet loaded, then if <code>xyz.lua</code> exists in one of the completions directories it will be loaded.</p>
<p>Clink looks for completion scripts in these directories:</p>
<ol>
<li>Any directories listed in the <code>%CLINK_COMPLETIONS_DIR%</code> environment variable (multiple directories may be separated by semicolons).</li>
<li>A <code>completions\</code> subdirectory under each scripts directory listed by <code>clink info</code> (see <a href="#lua-scripts-location">Location of Lua Scripts</a>).</li>
</ol>
<p>In v1.5.3 and higher, when a <code>completions\</code> script is loaded on demand the script receives as an argument the fully qualified path name to the typed program or file.  The script can access the argument by using <code>local fullname = ...</code> (literally three dots).  For example, that can be useful for checking whether it&#39;s a supported program, registering different argmatchers for different copies of the program or file, checking whether it&#39;s a supported program, and so on.</p>
<blockquote>
<p><strong>Note:</strong>  If you download scripts, then don&#39;t put them in a &quot;completions&quot; directory unless they specifically say they can be put there.</p>
<p>If a script defines more than an argmatcher, then putting it in a completions directory may cause its other functionality to not work until a command is typed with the same name as the script.  For example, if a script in a completions directory defines an argmatcher and also a prompt filter, the prompt filter won&#39;t be loaded until the corresponding command name is typed.  Whether that is desirable depends on the script and on your preference.</p>
<p>For example, the scripts from the <a href="https://github.com/vladimir-kotikov/clink-completions">clink-completions</a> project belong in a normal script directory, because they have other functionality besides just completions, and they won&#39;t work correctly in a &quot;completions&quot; directory.</p>
</blockquote>
<p><a name="tips-for-starting-to-write-lua-scripts"></a></p>
<h2 id="writing-lua-scripts"><a class="wlink" href="#tips-for-starting-to-write-lua-scripts"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Writing Lua Scripts <span class="uplinks"><a href="#extending-clink">up</a> <a href="#toc">top</a></span></h2>
<p>Lua is a versatile and lightweight language.  It&#39;s very approachable and easy to learn for beginners, but it also has powerful capabilities available if you need them.</p>
<p>Here are some tips for getting started writing Lua scripts:</p>
<ul>
<li>Clink uses <a href="https://www.lua.org/manual/5.2/">Lua 5.2</a>.</li>
<li>Loading a Lua script executes it; so when Clink loads Lua scripts from the locations above, it executes the scripts.</li>
<li>Code not inside a function is executed immediately when the script is loaded.</li>
<li>Usually scripts will register functions to customize various behaviors:<ul>
<li>Generate completion matches.</li>
<li>Apply color to input text.</li>
<li>Customize the prompt.</li>
<li>Perform actions before or after the user gets to edit each input line.</li>
<li>Provide new custom commands that can be bound to keys via the <a href="#luakeybindings">luafunc: key macro syntax</a>.</li>
</ul>
</li>
<li>Often scripts will also define some functions and variables for use by itself and/or other scripts.</li>
<li>Clink extends the Lua language by adding many new <a href="#lua-api">APIs and features</a> for use within Clink.</li>
</ul>
<p><a name="argumentcompletion"></a></p>
<h2 id="argument-completion"><a class="wlink" href="#argumentcompletion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Argument Completion <span class="uplinks"><a href="#extending-clink">up</a> <a href="#toc">top</a></span></h2>
<p>Clink provides a framework for writing complex argument match generators in Lua.  It works by creating a parser object that describes a command&#39;s arguments and flags and associating the parser with one or more commands.  When Clink detects a parser is associated with the command being edited, it uses the parser to generate matches and apply <a href="#classifywords">input line coloring</a>.</p>
<table class="linkmenu">
<tr><td><a href="#argmatcher_basics">The Basics</a></td><td>A quick example to show the basics.</td></tr>
<tr><td><a href="#argmatcher_autofiles">Automatic Filename Completion</a></td><td>By default, filename completion is used.</td></tr>
<tr><td><a href="#argmatcher_descriptions">Descriptions for Flags and Arguments</a></td><td>How to add descriptive text.</td></tr>
<tr><td style="padding-top: 0.5rem"><em>More Advanced Stuff</em></td><td></td></tr>
<tr><td style="padding-left: 2rem"><a href="#argmatcher_linking">Linking Parsers</a></td><td>How to link a parser to a word or flag.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#argmatcher_functions">Functions As Argument Options</a></td><td>Using a function to provide completions.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#addarg_hint">Show a Usage Hint</a></td><td>How to show a usage hint for the argument under the cursor.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#addarg_fromhistory">Generate Matches From History</a></td><td>Providing completions from the history.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#addarg_nosort">Disable Sorting Matches</a></td><td>How to disable auto-sorted completions.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#argmatcher_fullyqualified">Fully Qualified Pathnames</a></td><td>How to make different argmatchers for programs with the same name.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#addarg_loopchars">Delimited Arguments</a></td><td>How to allow multiple completions in the same argument slot (e.g. <code>file1;file2;file3</code>).</td></tr>
<tr><td style="padding-left: 2rem"><a href="#addarg_nowordbreakchars">Overcoming Word Breaks</a></td><td>How to prevent characters like `,` from breaking words.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#argmatcher_adaptive">Adaptive Argmatchers</a></td><td>How an argmatcher can define or modify itself on the fly.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a></td><td>When argument slots need to influence one another.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#argmatcher_shorthand">Shorthand</a></td><td>Alternative syntax for defining argmatchers.</td></tr>
</table>

<p><a name="argmatcher_basics"></a></p>
<h3 id="the-basics-1"><a class="wlink" href="#argmatcher_basics"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The Basics <span class="uplinks"><a href="#argumentcompletion">up</a> <a href="#toc">top</a></span></h3>
<p>Here is an example of a simple parser for the command <code>foobar</code>;</p>
<pre><code class="language-lua">clink.argmatcher(&quot;foobar&quot;)
:addarg({ &quot;hello&quot;, &quot;hi&quot; })               -- Completions for arg #1.
:addarg({ &quot;world&quot;, &quot;wombles&quot;, &quot;xyzzy&quot; }) -- Completions for arg #2.
:addflags(&quot;-foo&quot;, &quot;-bar&quot;)                -- Flags.
</code></pre>
<p>This parser describes a command that has two arguments, and some flags.</p>
<p>Arguments are positional.  Each <code>:addarg()</code> adds a new argument position and defines the possible completions for that argument position.</p>
<p>Flags are position independent.  Any <code>:addflags()</code> add to the set of possible flag completions.  Any word that begins with the flag prefix character (in this example <code>-</code>) is considered to be a flag, even if it is not listed as a possible completion.  The flags may be input at any position; before arguments, between arguments, and after arguments.</p>
<p>On the command line completion would look something like this, if <kbd>Alt</kbd>-<kbd>=</kbd> were pressed at the end of each input line below:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default">C:\&gt;<span class="color_argmatcher">foobar</span> <span class="color_input">-</span>
-bar  -foo
C:\&gt;<span class="color_argmatcher">foobar</span> <span class="color_flag">-bar</span> <span class="color_arg">hello</span>
wombles  world  xyzzy
C:\&gt;<span class="color_argmatcher">foobar</span> <span class="color_flag">-bar</span> <span class="color_arg">hello</span> <span class="color_input">wo</span>
wombles  world
C:\&gt;<span class="color_argmatcher">foobar</span> <span class="color_flag">-bar</span> <span class="color_arg">hello</span> <span class="color_arg">wombles</span> <span class="color_input">-</span>
-bar  -foo
C:\&gt;<span class="color_argmatcher">foobar</span> <span class="color_flag">-bar</span> <span class="color_arg">hello</span> <span class="color_arg">wombles</span> <span class="color_flag">-foo</span> <span class="cursor">_</span></span>
</code></pre>

<p>When displaying possible completions, flag matches are only shown if the flag character has been input.  So <code>foobar </code> and <kbd>Alt</kbd>-<kbd>=</kbd> would list matches for the first argument position, or <code>foobar some_word </code> and <kbd>Alt</kbd>-<kbd>=</kbd> would list matches for the second argument position, or  <code>foobar -</code> and <kbd>Alt</kbd>-<kbd>=</kbd> would list only flag matches.</p>
<p>If a command doesn&#39;t have an argmatcher but is a doskey macro, Clink automatically expands the doskey macro and looks for an argmatcher for the expanded command.  A macro like <code>gco=git checkout $*</code> automatically reuses a <code>git</code> argmatcher and produces completions for its <code>checkout</code> argument.  However, it only expands the doskey macro up to the first <code>$</code>, so complex aliases like <code>foo=app 2$gnul text $*</code> or <code>foo=$2 $1</code> might behave strangely.</p>
<p>Also see <a href="#clink.argmatcher">clink.argmatcher()</a>, <a href="#_argmatcher:addflags">:addflags()</a> and <a href="#_argmatcher:addarg">:addarg()</a>.</p>
<p><a name="argmatcher_autofiles"></a></p>
<h3 id="automatic-filename-completion"><a class="wlink" href="#argmatcher_autofiles"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Automatic Filename Completion <span class="uplinks"><a href="#argumentcompletion">up</a> <a href="#toc">top</a></span></h3>
<p>A fresh, empty argmatcher provides no completions.</p>
<pre><code class="language-lua">clink.argmatcher(&quot;foobar&quot;)               -- The &quot;foobar&quot; command provides no completions.
</code></pre>
<p>Once any flags or argument positions have been added to an argmatcher, then the argmatcher will provide completions.</p>
<pre><code class="language-lua">clink.argmatcher(&quot;foobar&quot;)
:addarg({ &quot;hello&quot;, &quot;hi&quot; })               -- Completions for arg #1.
:addarg({ &quot;world&quot;, &quot;wombles&quot;, &quot;xyzzy&quot; }) -- Completions for arg #2.
:addflags(&quot;-foo&quot;, &quot;-bar&quot;)                -- Flags.
</code></pre>
<p>When completing a word that doesn&#39;t have a corresponding argument position the argmatcher will automatically use filename completion.  For example, the <code>foobar</code> argmatcher has two argument positions, and completing a third word uses filename completion.</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default">C:\&gt;<span class="color_argmatcher">foobar</span> <span class="color_arg">hello</span> <span class="color_arg">world</span> <span class="color_input">pro</span>
Program Files\  Program Files(x86)\  ProgramData\
C:\&gt;<span class="color_argmatcher">foobar</span> <span class="color_arg">hello</span> <span class="color_arg">world</span> <span class="color_input">pro</span><span class="cursor">_</span></span>
</code></pre>

<p>Use <a href="#_argmatcher:nofiles">_argmatcher:nofiles()</a> if you want to disable the automatic filename completion and &quot;dead end&quot; an argmatcher for extra words.  This stops all further parsing for the command.</p>
<pre><code class="language-lua">clink.argmatcher(&quot;foobar&quot;)
:addarg({ &quot;hello&quot;, &quot;hi&quot; })               -- Completions for arg #1
:addarg({ &quot;world&quot;, &quot;wombles&quot;, &quot;xyzzy&quot; }) -- Completions for arg #2
:addflags(&quot;-foo&quot;, &quot;-bar&quot;)                -- Flags
:nofiles()                               -- Using :nofiles() prevents further completions.
</code></pre>
<p><a name="argmatcher_descriptions"></a></p>
<h3 id="descriptions-for-flags-and-arguments"><a class="wlink" href="#argmatcher_descriptions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Descriptions for Flags and Arguments <span class="uplinks"><a href="#argumentcompletion">up</a> <a href="#toc">top</a></span></h3>
<p>Flags and arguments may optionally have descriptions associated with them.  The descriptions, if any, are displayed when listing possible completions.</p>
<p>Use <a href="#_argmatcher:adddescriptions">_argmatcher:adddescriptions()</a> to add descriptions for flags and/or arguments.  Refer to its documentation for further details about how to use it, including how to also show arguments that a flag accepts.</p>
<p>For example, with the following matcher, typing <code>foo -</code><kbd>Alt</kbd>-<kbd>=</kbd> will list all of the flags, plus descriptions for each.</p>
<pre><code class="language-lua">clink.argmatcher(&quot;foo&quot;)
:addflags(&quot;-?&quot;, &quot;-h&quot;, &quot;-n&quot;, &quot;-v&quot;, &quot;--help&quot;, &quot;--nothing&quot;, &quot;--verbose&quot;)
:addarg(&quot;print&quot;, &quot;delete&quot;)
:addarg(clink.filematches)
:nofiles()
:adddescriptions(
    { &quot;-n&quot;, &quot;--nothing&quot;,    description = &quot;Do nothing; show what would happen without doing it&quot; },
    { &quot;-v&quot;, &quot;--verbose&quot;,    description = &quot;Verbose output&quot; },
    { &quot;-h&quot;, &quot;--help&quot;, &quot;-?&quot;, description = &quot;Show help text&quot; },
    { &quot;print&quot;,              description = &quot;Print the specified file&quot; },
    { &quot;delete&quot;,             description = &quot;Delete the specified file&quot; },
)
</code></pre>
<h3 id="more-advanced-stuff"><a class="wlink" href="#more-advanced-stuff"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>More Advanced Stuff <span class="uplinks"><a href="#argumentcompletion">up</a> <a href="#toc">top</a></span></h3>
<p><a name="argmatcher_linking"></a></p>
<h4 id="linking-parsers"><a class="wlink" href="#argmatcher_linking"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Linking Parsers <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>There are often situations where the parsing of a command&#39;s arguments is dependent on the previous words (<code>git merge ...</code> compared to <code>git log ...</code> for example). For these scenarios Clink allows you to link parsers to arguments&#39; words using Lua&#39;s concatenation operator.</p>
<pre><code class="language-lua">local a_parser = clink.argmatcher():addarg({ &quot;foo&quot;, &quot;bar&quot; })
local b_parser = clink.argmatcher():addarg({ &quot;abc&quot;, &quot;123&quot; })
local c_parser = clink.argmatcher()
c_parser:addarg({ &quot;foobar&quot; .. a_parser })   -- Arg #1 is &quot;foobar&quot;, which has args &quot;foo&quot; or &quot;bar&quot;.
c_parser:addarg({ b_parser })               -- Arg #2 is &quot;abc&quot; or &quot;123&quot;.
</code></pre>
<p>As the example above shows, it is also possible to use a parser without concatenating it to a word.</p>
<p>When Clink follows a link to a parser it will only return to the previous parser when the linked parser runs out of arguments.  Using <code>:nofiles()</code> prevents returning to the previous parser.</p>
<h5 id="flags-with-arguments"><a class="wlink" href="#flags-with-arguments"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Flags With Arguments <span class="uplinks"><a href="#argmatcher_linking">up</a> <a href="#toc">top</a></span></h5>
<p>Parsers can be concatenated with flags, too.</p>
<p>Here&#39;s an example of a flag that takes an argument:</p>
<pre><code class="language-lua">clink.argmatcher(&quot;git&quot;)
:addarg({
    &quot;merge&quot;..clink.argmatcher():addflags({
        &quot;--strategy&quot;..clink.argmatcher():addarg({
            &quot;resolve&quot;,
            &quot;recursive&quot;,
            &quot;ours&quot;,
            &quot;octopus&quot;,
            &quot;subtree&quot;,
        })
    })
})
</code></pre>
<p>A <code>:</code> or <code>=</code> at the end of a flag indicates the flag takes an argument but requires no space between the flag and its argument.  If such a flag is not linked to a parser, then it automatically gets linked to a parser to match files.  Here&#39;s an example with a few flags that take arguments without a space in between:</p>
<pre><code class="language-lua">clink.argmatcher(&quot;findstr&quot;)
:addflags({
    &quot;/b&quot;, &quot;/e&quot;, &quot;/l&quot;, &quot;/r&quot;, &quot;/s&quot;, &quot;/i&quot;, &quot;/x&quot;, &quot;/v&quot;, &quot;/n&quot;, &quot;/m&quot;, &quot;/o&quot;, &quot;/p&quot;, &quot;/offline&quot;,
    &quot;/a:&quot;..clink.argmatcher():addarg( &quot;attr&quot; ),
    &quot;/f:&quot;..clink.argmatcher():addarg( clink.filematches ),
    &quot;/c:&quot;..clink.argmatcher():addarg( &quot;search_string&quot; ),
    &quot;/g:&quot;, -- This is the same as linking with clink.argmatcher():addarg(clink.filematches).
    &quot;/d:&quot;..clink.argmatcher():addarg( clink.dirmatches )
})
</code></pre>
<p><a name="argmatcher_functions"></a></p>
<h4 id="functions-as-argument-options"><a class="wlink" href="#argmatcher_functions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Functions As Argument Options <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>Argument options are not limited solely to strings. Clink also accepts functions too so more context-aware argument options can be used.</p>
<p>The function is called each time matches are generated for the argument position.</p>
<pre><code class="language-lua">local function rainbow_function(word)
    return { &quot;red&quot;, &quot;white&quot;, &quot;blue&quot; }
end

local the_parser = clink.argmatcher()
the_parser:addarg({ &quot;zippy&quot;, &quot;bungle&quot;, &quot;george&quot; })
the_parser:addarg({ rainbow_function, &quot;yellow&quot;, &quot;green&quot; })
</code></pre>
<p>The functions are passed five arguments:</p>
<ul>
<li><code>word</code> is a partial string for the word under the cursor, corresponding to the argument for which matches are being generated:  it is an empty string, or if a filename is being entered then it will be the path portion (e.g. for &quot;dir1\dir2\pre&quot; <code>word</code> will be &quot;dir1\dir2&quot;).</li>
<li><code>word_index</code> is the word index in <code>line_state</code>, corresponding to the argument for which matches are being generated.</li>
<li><code>line_state</code> is a <a href="#line_state">line_state</a> object that contains the words for the associated command line.</li>
<li><code>match_builder</code> is a <a href="#builder">builder</a> object (but for adding matches the function should return them in a table).</li>
<li><code>user_data</code> is a table that the argmatcher can use to help it parse the input line.  See <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for more information about the <code>user_data</code> table.</li>
</ul>
<p>The functions can return any of the following:</p>
<ul>
<li>Return a table of potential matches (strings).  The table may optionally also contain tables that describe the matches; the format is the same as in <a href="#builder:addmatches">builder:addmatches()</a>.</li>
<li>Return <code>true</code> to stop generating matches.</li>
<li>Return <code>false</code> or <code>nil</code> (or don&#39;t return anything) to stop generating matches and use file completions.</li>
</ul>
<blockquote>
<p><strong>Compatibility Note:</strong> When a function argument uses the old v0.4.9 <code>clink.match_display_filter</code> approach, then the <code>word</code> argument will be the full word under the cursor, for compatibility with the v0.4.9 API.</p>
</blockquote>
<p>Some built-in matcher functions are available:</p>
<table>
<thead>
<tr>
<th align="center">Function</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><a href="#clink.dirmatches">clink.dirmatches</a></td>
<td>Generates directory matches.</td>
</tr>
<tr>
<td align="center"><a href="#clink.filematches">clink.filematches</a></td>
<td>Generates file matches.</td>
</tr>
</tbody></table>
<p><a name="addarg_hint"></a></p>
<h4 id="show-a-usage-hint"><a class="wlink" href="#addarg_hint"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Show a Usage Hint <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>A usage hint can be shown in the comment row (below the input line).  Usage hints for argmatchers are only shown if both <a href="#comment_row_show_hints">comment_row.show_hints</a> (off by default) and <a href="#argmatcher_show_hints">argmatcher.show_hints</a> (on by default) are enabled.</p>
<p>To use this, Clink v1.7.0 or higher is required.</p>
<p>Argmatchers can automatically supply input hints based on <code>arginfo</code> fields from match completions.</p>
<p>To supply a custom usage hint, an argmatcher can include either <code>hint=&quot;text&quot;</code> or <code>hint=<em>function_name</em></code> in the argument table.</p>
<pre><code class="language-lua">clink.argmatcher(&quot;foo&quot;)
:addarg({ clink.filematches, hint=&quot;Argument expected:  filename&quot; })
</code></pre>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default">C:\dir><span class="color_argmatcher">foo</span> <span class="cursor">_</span></span>
<span class="color_comment_row">Argument expected:  filename</span>
</code></pre>

<p>If a function name is supplied, then the function is passed five arguments:</p>
<ul>
<li><code>arg_index</code> is the argument index in the argmatcher, corresponding to the argument being parsed.  0 means it is a flag, rather than an argument.</li>
<li><code>word</code> is a string containing the word being parsed.  <strong>Note:</strong> when the cursor is between words or after the last word then <code>word</code> is an empty string.</li>
<li><code>word_index</code> is the word index in <code>line_state</code>, corresponding to the word being parsed.  <strong>Note:</strong> when the cursor is between words then <code>word_index</code> is the index of the <em>next</em> word after the cursor, or when the cursor is after the last word then <code>word_index</code> is greater than <code>line_state:getwordcount()</code>.</li>
<li><code>line_state</code> is a <a href="#line_state">line_state</a> object that contains the words for the associated command line.</li>
<li><code>user_data</code> is a table that the argmatcher can use to help it parse the input line.  See <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for more information about the <code>user_data</code> table.</li>
</ul>
<p>The function returns a hint string, and an optional position in the line text where the hint refers to.  If the position is omitted, then the offset to the beginning of the word is assumed.</p>
<pre><code class="language-lua">local function foo_hint_func(arg_index, word, word_index, line_state, user_data)
    local hint = &quot;Argument expected for &#39;&quot;..line_state:getword(word_index - 1)..&quot;&#39;:  filename&quot;
    local pos = line_state:getwordinfo(word_index).offset   -- Shown for completeness, but this is automatically assumed if omitted.
    return hint, pos
end

clink.argmatcher(&quot;foo&quot;)
:addarg({ &quot;add&quot;, &quot;remove&quot; })
:addarg({ clink.filematches, hint=foo_hint_func })
</code></pre>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default">C:\dir><span class="color_argmatcher">foo</span> <span class="color_arg">add</span> <span class="cursor">_</span></span>
<span class="color_comment_row">Argument expected for 'add':  filename</span>
</code></pre>

<p><a name="addarg_fromhistory"></a></p>
<h4 id="generate-matches-from-history"><a class="wlink" href="#addarg_fromhistory"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Generate Matches From History <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>An argument position can collect matches from the history file.  When an argument table contains <code>fromhistory=true</code> then additional matches are generated by parsing the history file to find values for that argument slot from commands in the history file.</p>
<p>This example generates matches for arguments to a <code>--host</code> flag by parsing the history file for host names used in the past, and also includes the current computer name.</p>
<pre><code class="language-lua">local host_parser = clink.argmatcher():addarg({ fromhistory=true, os.getenv(&quot;COMPUTERNAME&quot;) })
clink.argmatcher(&quot;program&quot;):addflags({ &quot;--host&quot;..host_parser })
</code></pre>
<p><a name="addarg_nosort"></a></p>
<h4 id="disable-sorting-matches"><a class="wlink" href="#addarg_nosort"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Disable Sorting Matches <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>Match completions are normally listed in sorted order.  In some cases it may be desirable to disable sorting and list match completions in a specific order.  To disable sorting, include <code>nosort=true</code> in the argument table.  When sorting is disabled, matches are listed in the order they were added.</p>
<pre><code class="language-lua">local the_parser = clink.argmatcher()
the_parser:addarg({ nosort=true, &quot;red&quot;, &quot;orange&quot;, &quot;yellow&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;indigo&quot;, &quot;violet&quot; })
</code></pre>
<p><a name="argmatcher_fullyqualified"></a></p>
<h4 id="fully-qualified-pathnames"><a class="wlink" href="#argmatcher_fullyqualified"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Fully Qualified Pathnames <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>Sometimes there may be more than one program installed with the same name.  For example, there might be multiple versions of <code>grep</code> installed.</p>
<p>In Clink v1.3.38 and higher, you can define argmatchers using fully qualified pathnames.  For example, this makes it possible to define one argmatcher for <code>c:\EmployerTools\grep.exe</code> and another for <code>d:\PersonalTools\grep.exe</code>, and the corresponding argmatcher will be used when appropriate.</p>
<p>In the example above, you could define an argmatcher for <code>c:\EmployerTools\grep.exe</code>, and also define an argmatcher for <code>grep</code> (or have a <code>grep.lua</code> file in a <code>completions\</code> directory).  The plain <code>grep</code> one would be used whenever the typed <code>grep</code> doesn&#39;t resolve to the EmployerTools copy.</p>
<p><a name="addarg_loopchars"></a></p>
<h4 id="delimited-arguments"><a class="wlink" href="#addarg_loopchars"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Delimited Arguments <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>In some cases an argument for programs may accept a list of values separated by <code>;</code> or <code>+</code> or etc.  Normally <code>;</code> or <code>+</code> are argument separators (like space), and advance the argmatcher to the next argument slot.</p>
<p>In Clink v1.3.37 and higher, you can make them stay on the current argument slot by including <code>loopchars=&quot;;&quot;</code> (or set <code>loopchars=</code> a list of value delimiters).</p>
<pre><code class="language-lua">-- This argmatcher accepts syntax like &quot;foo color filename&quot;.
-- Typing &quot;foo red f&quot; and pressing TAB generates completions for files.
-- Typing &quot;foo red;&quot; and pressing TAB generates completions for files.
clink.argmatcher(&quot;foo&quot;)
:addarg({&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;})
:addarg(clink.filematches)

-- This argmatcher accepts syntax like &quot;foo color[;color...] filename&quot;.
-- Typing &quot;foo red f&quot; and pressing TAB generates completions for files.
-- Typing &quot;foo red;&quot; and pressing TAB generates completions for colors (not files).
clink.argmatcher(&quot;foo&quot;)
:addarg({loopchars=&quot;;&quot;, &quot;red&quot;, &quot;green&quot;, &quot;blue&quot;})
:addarg(clink.filematches)
</code></pre>
<p><a name="addarg_nowordbreakchars"></a></p>
<h4 id="overcoming-word-breaks"><a class="wlink" href="#addarg_nowordbreakchars"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Overcoming Word Breaks <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>Clink and parses the input line into a <a href="#line_state"><code>line_state</code></a> by ending a word whenever one of the following characters is encountered (except when inside quotes).  These are the same word break characters as CMD.exe uses.</p>
<ul>
<li>Whitespace characters SPACE, TAB, and NEWLINE.</li>
<li>Punctuation symbols <code>&#39;</code>, <code>&amp;backprime;</code>, <code>=</code>, <code>+</code>, <code>;</code>, and <code>,</code>.</li>
<li>Grouping symbols <code>(</code>, <code>)</code>, <code>[</code>, <code>]</code>, <code>{</code>, and <code>}</code>.</li>
</ul>
<p>However, many programs parse their command line arguments using different word break characters than CMD does.  </p>
<p>In Clink v1.5.17 and higher, argmatchers can override the word break rules for specific argument positions by including <code>nowordbreakchars=&quot;,&quot;</code> (or set <code>nowordbreakchars=</code> a list of characters that shouldn&#39;t denote word breaks).  This can allow more accurate completions and input line coloring when these characters are present.  But <code>nowordbreakchars</code> is always ignored for builtin CMD commands and Batch scripts (because CMD.exe itself always parses word breaks a specific way).  Flags in argmatchers for anything other than builtin CMD commands and Batch scripts default to assuming <code>nowordbreakchars=&quot;&#39;&amp;backprime;+;,&quot;</code>, but that can be overridden by setting <code>nowordbreakchars=</code> some other string.</p>
<pre><code class="language-lua">-- This argmatcher accepts syntax like &quot;wt --pos x,y --size cols,rows command&quot;.
clink.argmatcher(&quot;wt&quot;)
:addflags({
    &quot;--pos&quot; .. clink.argmatcher():addarg({fromhistory=true, nowordbreakchars=&quot;,&quot;}),
    &quot;--size&quot; .. clink.argmatcher():addarg({fromhistory=true, nowordbreakchars=&quot;,&quot;}),
})
:chaincommand()
</code></pre>
<p>It&#39;s also possible to combine <code>nowordbreakchars</code> and <code>loopchars</code>:</p>
<pre><code class="language-lua">-- This argmatcher accepts syntax like &quot;foo color[,color...] filename&quot;.
-- Typing &quot;foo red &quot; and pressing TAB generates completions for files.
-- Typing &quot;foo red,&quot; and pressing TAB generates completions for colors (not files).
clink.argmatcher(&quot;foo&quot;)
:addarg({loopchars=&quot;,&quot;, nowordbreakchars=&quot;,&quot;, &quot;red&quot;, &quot;green&quot;, &quot;blue&quot;})
:addarg(clink.filematches)
</code></pre>
<p><a name="argmatcher_adaptive"></a></p>
<h4 id="adaptive-argmatchers"><a class="wlink" href="#argmatcher_adaptive"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Adaptive Argmatchers <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>Some argmatchers may need to adapt on the fly.  For example, a program may have different features available depending on the current directory, or may want to define its arguments and flags by parsing the <code>--help</code> text from running a program.</p>
<p>An argmatcher can define a &quot;delayed initialization&quot; callback function that gets calls when the argmatcher gets used, allowing it to defer potentially expensive initialization work until it&#39;s actually needed.  An argmatcher can also define a separate &quot;delayed initialization&quot; function for each argument position.</p>
<p><a name="argmatcher_setdelayinit"></a></p>
<h5 id="delayed-initialization-for-the-argmatcher"><a class="wlink" href="#argmatcher_setdelayinit"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Delayed initialization for the argmatcher <span class="uplinks"><a href="#argmatcher_adaptive">up</a> <a href="#toc">top</a></span></h5>
<p>You can use <a href="#_argmatcher:setdelayinit">_argmatcher:setdelayinit()</a> to set a function that performs delayed initialization for the argmatcher.  The function receives up to two parameters:</p>
<ul>
<li><code>argmatcher</code> is the argmatcher to be initialized.</li>
<li>In Clink v1.3.12 and higher, <code>command_word</code> is the word in the command line that matched this argmatcher.</li>
</ul>
<p>If the definition needs to adapt based on the current directory or other criteria, then the callback function should first test whether the definition needs to change.  If so, first reset the argmatcher and then initialize it.  To reset the argmatcher, use <a href="#_argmatcher:reset">_argmatcher:reset()</a> which resets it back to an empty, freshly created state.</p>
<pre><code class="language-lua">local prev_dir = &quot;&quot;

-- Initialize the argmatcher.
-- v1.3.12 and higher receive a command_word parameter as well, which is the
-- word in the command line that matched this argmatcher.
local function init(argmatcher, command_word)
    local r = io.popen(&quot;some_command --help 2&gt;nul&quot;)
    for line in r:lines() do
        -- PUT PARSING CODE HERE.
        -- Use the Lua string functions to parse the lines.
        -- Use argmatcher:addflags(), argmatcher:addarg(), etc to initialize the argmatcher.
    end
    r:close()
end

-- This function has the opportunity to reset and (re)initialize the argmatcher.
local function ondelayinit(argmatcher, command_word)
    local dir = os.getcwd()
    if prev_dir ~= dir then             -- When current directory has changed,
        prev_dir = dir                  -- Remember the new current directory,
        argmatcher:reset()              -- Reset the argmatcher,
        init(argmatcher, command_word)  -- And re-initialize it.
    end
end

-- Create the argmatcher and set up delayed initialization.
local m = clink.argmatcher(&quot;some_command&quot;)
if m.setdelayinit then        -- Can&#39;t use setdelayinit before Clink v1.3.10.
    m:setdelayinit(ondelayinit)
end
</code></pre>
<p><a name="addarg_delayinit"></a></p>
<h5 id="delayed-initialization-for-an-argument-position"><a class="wlink" href="#addarg_delayinit"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Delayed initialization for an argument position <span class="uplinks"><a href="#argmatcher_adaptive">up</a> <a href="#toc">top</a></span></h5>
<p>If the overall flags and meaning of the argument positions don&#39;t need to be updated, and only the possible values need to be updated within certain argument positions, then you can include <code>delayinit=<span class="arg">function</span></code> in the argument table.</p>
<p>The <span class="arg">function</span> should return a table of matches which will be added to the values for the argument position.  The table of matches supports the same syntax as <a href="#_argmatcher:addarg">_argmatcher:addarg()</a>.  The function receives two parameters:</p>
<ul>
<li><code>argmatcher</code> is the current argmatcher.</li>
<li><code>argindex</code> is the argument position in the argmatcher (0 is flags, 1 is the first argument position, 2 is the second argument position, and so on).</li>
</ul>
<p>The <span class="arg">function</span> is called only once, the first time the argument position is used.  The only way for the function to be called again for that argmatcher is to use <a href="#delayed-initialization-for-the-argmatcher">Delayed initialization for the argmatcher</a> and reset the argmatcher and then re-initialize it.</p>
<p>Delayed initialization for an argument position is different from <a href="#functions-as-argument-options">Functions As Argument Options</a>.  The <code>delayinit</code> function is called the first time the argmatcher is used, and the results are added to the matches for the rest of the Clink session.  But a function as an argument option is called every time matches are generated for the argument position, and it is never called when applying input line coloring.</p>
<pre><code class="language-lua">-- A function to delay-initialize argument values.
-- This function is used to delay-initialize two different argument positions,
-- and so it gets called up to two separate times (once for each position where
-- it is specified).
-- If the function needs to behave slightly differently for different
-- argmatchers or argument positions, it can use the two parameters it receives
-- to identify the specific context in which it is being called.
local function sc_init_dirs(argmatcher, argindex)
    return {
        path.join(os.getenv(&quot;USERPROFILE&quot;), &quot;Documents&quot;),
        path.join(os.getenv(&quot;USERPROFILE&quot;), &quot;Pictures&quot;)
    }
end

-- A function to delay-initialize flag values.
local function sc_init_flags(argmatcher)
    -- This calls sc_init_dirs() when the &#39;--dir=&#39; flag is used.
    return { &quot;--dir=&quot; .. clink.argmatcher():addarg({ delayinit=sc_init_dirs }) }
end

-- Define an argmatcher with two argument positions, and the second one uses
-- delayed initialization.
local m = clink.argmatcher(&quot;some_command&quot;)
m:addarg({ &quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot; })
m:addarg({ delayinit=sc_init_dirs }) -- This sc_init_dirs() when the second arg position is used.

-- You can also use delayinit with flags, but you must set the flag prefix
-- character(s) so that Clink can know when to call the delayinit function.
m:addflags({ delayinit=sc_init_flags })
m:setflagprefix(&quot;-&quot;)
</code></pre>
<p><a name="responsive-argmatchers"></a></p>
<h4 id="responding-to-arguments-in-argmatchers"><a class="wlink" href="#responsive-argmatchers"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Responding to Arguments in Argmatchers <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>Argmatchers can be more involved in parsing the command line, if they wish.</p>
<p>An argmatcher can supply &quot;on advance&quot; or &quot;on arg&quot; functions to be called when the argmatcher parses an argument position.  The functions can influence parsing the rest of the input line.  For example, the presence of a flag <code>--only-dirs</code> might change what match completions should be provided somewhere else in the input line.</p>
<ul>
<li>An &quot;<a href="#the-on-advance-function">on advance</a>&quot; function is called <em>before</em> parsing a word.  It can influence which argument position will parse the word (it can advance to the next position before parsing, or it can repeat the same argument position for parsing both the current word and the next word).</li>
<li>An &quot;<a href="#the-on-alias-function">on alias</a>&quot; function is called <em>before</em> parsing a word.  It can examine the word and return some other text to parse instead.</li>
<li>An &quot;<a href="#the-on-arg-function">on arg</a>&quot; function is called <em>when</em> parsing a word.  It can examine the word and do custom processing.</li>
<li>An &quot;<a href="#the-on-link-function">on link</a>&quot; function is called <em>after</em> parsing a word.  It can examine the word and override what argmatcher it links to (see <a href="#argmatcher_linking">Linking Parsers</a>).</li>
</ul>
<p>All of these callback functions receive a <code>user_data</code> table.  Your &quot;on advance&quot; and &quot;on arg&quot; and &quot;on link&quot; functions can set data into the table, and functions called later during parsing can get the data that was set by earlier functions (for example to keep track of what flags were specified earlier in the command line).  When parsing begins for a command, the <code>user_data</code> is an empty table.  Each time a flag or argument links to another argmatcher, the new argmatcher gets a separate new empty <code>user_data</code> table.  In Clink v1.6.10 and higher, each <code>user_data</code> table contains a <code>shared_user_data</code> field which is a reference to another table.  The <code>user_data.shared_user_data</code> enables linked argmatchers to share data with each other while parsing a command.</p>
<blockquote>
<p><strong>Note:</strong> These callback functions are called very often, so they need to be very fast or they can cause responsiveness problems while typing.</p>
</blockquote>
<h5 id="the-on-advance-function"><a class="wlink" href="#the-on-advance-function"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The &quot;on advance&quot; function <span class="uplinks"><a href="#responsive-argmatchers">up</a> <a href="#toc">top</a></span></h5>
<p>Supply an &quot;on advance&quot; function by including <code>onadvance=<span class="arg">function</span></code> in the argument table with <a href="#_argmatcher:addarg">_argmatcher:addarg()</a>.  The function can return an integer to choose how to advance through the argument positions.</p>
<p>To use this, Clink v1.5.14 or higher is required.</p>
<p>The function receives five arguments:</p>
<ul>
<li><code>arg_index</code> is the argument index in the argmatcher, corresponding to the argument being parsed.  0 means it is a flag, rather than an argument.</li>
<li><code>word</code> is a string containing the word being parsed.  If it&#39;s the word under the cursor, then the string will be empty, or if a filename is being entered then it will be the path portion (e.g. for &quot;dir1\dir2\pre&quot; <code>word</code> will be &quot;dir1\dir2&quot;).</li>
<li><code>word_index</code> is the word index in <code>line_state</code>, corresponding to the argument being parsed.</li>
<li><code>line_state</code> is a <a href="#line_state">line_state</a> object that contains the words for the associated command line.</li>
<li><code>user_data</code> is a table that the argmatcher can use to help it parse the input line (see <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for details).</li>
</ul>
<p>The function may return any of the following values:</p>
<ul>
<li>Return <code>1</code> to advance to the next argument position <em>before</em> parsing the word (normally the parser advances <em>after</em> parsing a word).  Multiple advances are possible for the same word:  if the &quot;on advance&quot; functions for argument positions 2, 3, and 4 all return <code>1</code>, then argument position 5 will parse the word.</li>
<li>Return <code>0</code> to repeat using same argument position to parse both the current word and the next word.  Multiple repetitions are possible for the same argument position:  if the &quot;on advance&quot; function for argument position 3 returns <code>0</code> for three words in a row, then all three of the words are parsed using argument position 3.</li>
<li>Return <code>-1</code> to behave as though <a href="#_argmatcher:chaincommand">:chaincommand()</a> were used, and start parsing a new command line beginning at <code>word_index</code>.  To start at the <em>next</em> word index, see the &quot;<a href="#chainnextexample">chain next</a>&quot; example below.</li>
<li>Return <code>nil</code> (either <code>return nil</code> or just <code>return</code>) to advance to the next argument position <em>after</em> parsing the word (this is the default behavior).</li>
</ul>
<p>In Clink v1.6.2 and higher, when returning <code>-1</code> the function may also return a second value which is a string that lets Clink know how the command will get interpreted.  The string is the same as the <span class="arg">modes</span> argument in <a href="#_argmatcher:chaincommand">:chaincommand()</a>.</p>
<p>This example demonstrates treating arg index 1 as an optional title string only if quoted:</p>
<pre><code class="language-lua">local function maybe_string(arg_index, word, word_index, line_state, user_data)
    local info = line_state:getwordinfo(word_index)
    if not info.quoted then
        return 1    -- Advance; this arg position is optional and only accepts a
                    -- quoted string.  Anything else can&#39;t be parsed by this
                    -- argument position.
    end
end

clink.argmatcher(&quot;start&quot;)
:addarg({
    onadvance = maybe_string,
    fromhistory = true,
})
:addflags({
    &quot;/min&quot;, &quot;/max&quot;,
    &quot;/wait&quot;, &quot;/b&quot;,
    &quot;/d&quot;..clink.argmatcher():addarg(clink.dirmatches),
})
:chaincommand()
</code></pre>
<p><a name="chainnextexample"></a></p>
<p>This example demonstrates how to chain on the next word, or also on the current word:</p>
<ul>
<li><code>foo chain bar</code> chains starting at word 3 (&quot;bar&quot;).</li>
<li><code>foo whatever.exe</code> chains starting at word 2 (&quot;whatever.exe&quot;).</li>
</ul>
<pre><code class="language-lua">local function chain_on_word(arg_index, word, word_index, line_state, user_data)
    if user_data.do_chain then
        return -1                   -- Chain command because the &quot;chain&quot; keyword was seen previously.
    elseif word == &quot;chain&quot; then
        user_data.do_chain = true   -- Remember that the &quot;chain&quot; keyword was seen.
        return 0                    -- Use the same arg_index for the next word index.
    elseif path.getextension(word) ~= &quot;&quot; then
        return -1                   -- Chain command immediately when the word has an extension.
    end
end

clink.argmatcher(&quot;foo&quot;)
:addarg({
    onadvance=chain_on_keyword,
    &quot;abc&quot;, &quot;def&quot;, &quot;ghi&quot;,
})
:nofiles()
</code></pre>
<h5 id="the-on-alias-function"><a class="wlink" href="#chainnextexample"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The &quot;on alias&quot; function <span class="uplinks"><a href="#responsive-argmatchers">up</a> <a href="#toc">top</a></span></h5>
<p>Supply an &quot;on alias&quot; function by including <code>onalias=<span class="arg">function</span></code> in the argument table with <a href="#_argmatcher:addarg">_argmatcher:addarg()</a>.  The function can examine the word and return some other text to parse instead.</p>
<p>To use this, Clink v1.6.18 or higher is required.</p>
<p>The function receives five arguments:</p>
<ul>
<li><code>arg_index</code> is the argument index in the argmatcher, corresponding to the argument being parsed.  0 means it is a flag, rather than an argument.</li>
<li><code>word</code> is a string containing the word being parsed.</li>
<li><code>word_index</code> is the word index in <code>line_state</code>, corresponding to the argument being parsed.</li>
<li><code>line_state</code> is a <a href="#line_state">line_state</a> object that contains the words for the associated command line.</li>
<li><code>user_data</code> is a table that the argmatcher can use to help it parse the input line (see <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for details).</li>
</ul>
<p>If the function returns nothing, then parsing continues as usual.</p>
<p>If the function returns a string, then the words in the string are parsed instead.  When those words are finished being parsed, then parsing continues with the rest of the remaining words from the input line.</p>
<p>If the function returns a string and <code>true</code>, then the words in the string are parsed, but they begin a new command (similar to <a href="#_argmatcher:chaincommand">:chaincommand()</a>).  When those words are finished being parsed, then parsing continues with the rest of the remaining words from the input line.</p>
<p>For example, the <code>init()</code> function in the <a href="https://github.com/vladimir-kotikov/clink-completions/blob/master/git.lua">git.lua</a> script in <a href="https://github.com/vladimir-kotikov/clink-completions">clink-completions</a> repo uses this to enable completion to work with <a href="https://git-scm.com/book/en/v2/Git-Basics-Git-Aliases">custom git aliases</a>.</p>
<h5 id="the-on-arg-function"><a class="wlink" href="#the-on-arg-function"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The &quot;on arg&quot; function <span class="uplinks"><a href="#responsive-argmatchers">up</a> <a href="#toc">top</a></span></h5>
<p>Supply an &quot;on arg&quot; function by including <code>onarg=<span class="arg">function</span></code> in the argument table with <a href="#_argmatcher:addarg">_argmatcher:addarg()</a>.  The function can examine the word and do custom processing.</p>
<p>To use this, Clink v1.3.3 or higher is required.</p>
<p>The function receives five arguments:</p>
<ul>
<li><code>arg_index</code> is the argument index in the argmatcher, corresponding to the argument being parsed.  0 means it is a flag, rather than an argument.</li>
<li><code>word</code> is a string containing the word being parsed.  If it&#39;s the word under the cursor, then the string will be empty, or if a filename is being entered then it will be the path portion (e.g. for &quot;dir1\dir2\pre&quot; <code>word</code> will be &quot;dir1\dir2&quot;).</li>
<li><code>word_index</code> is the word index in <code>line_state</code>, corresponding to the argument being parsed.</li>
<li><code>line_state</code> is a <a href="#line_state">line_state</a> object that contains the words for the associated command line.</li>
<li><code>user_data</code> is a table that the argmatcher can use to help it parse the input line (see <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for details).</li>
</ul>
<p>The function doesn&#39;t return anything.</p>
<p>An &quot;on arg&quot; function can even use <a href="#os.chdir">os.chdir()</a> to set the current directory.  Generating match completions saves and restores the current directory when finished, so argmatcher &quot;on arg&quot; functions can set the current directory and thus cause match completion later in the input line to complete file names relative to the change directory.  For example, the built-in <code>cd</code> and <code>pushd</code> argmatches use an &quot;on arg&quot; function so that <code>pushd \other_dir &amp; program </code><kbd>Tab</kbd> can complete file names from <code>\other_dir</code> instead of the (real) current directory.</p>
<pre><code class="language-lua">local function onarg_pushd(arg_index, word, word_index, line_state, user_data)
    -- Match generation after this is relative to the new directory.
    if word ~= &quot;&quot; then
        os.chdir(word)
    end
end

clink.argmatcher(&quot;pushd&quot;)
:addarg({
    onarg=onarg_pushd,  -- Chdir to the directory argument.
    clink.dirmatches,   -- Generate directory matches.
})
:nofiles()
</code></pre>
<h5 id="the-on-link-function"><a class="wlink" href="#the-on-link-function"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The &quot;on link&quot; function <span class="uplinks"><a href="#responsive-argmatchers">up</a> <a href="#toc">top</a></span></h5>
<p>Supply an &quot;on link&quot; function by including <code>onlink=<span class="arg">function</span></code> in the argument table with <a href="#_argmatcher:addarg">_argmatcher:addarg()</a>.  The function can return an argmatcher to override when to link to another parser, and which parser to link to.</p>
<p>To use this, Clink v1.5.14 or higher is required.</p>
<p>The function receives six arguments:</p>
<ul>
<li><code>link</code> is the linked argmatcher, if any, that will be used if this function returns <code>nil</code>.</li>
<li><code>arg_index</code> is the argument index in the argmatcher, corresponding to the argument being parsed.  0 means it is a flag, rather than an argument.</li>
<li><code>word</code> is a string containing the word being parsed.  If it&#39;s the word under the cursor, then the string will be empty, or if a filename is being entered then it will be the path portion (e.g. for &quot;dir1\dir2\pre&quot; <code>word</code> will be &quot;dir1\dir2&quot;).</li>
<li><code>word_index</code> is the word index in <code>line_state</code>, corresponding to the argument being parsed.</li>
<li><code>line_state</code> is a <a href="#line_state">line_state</a> object that contains the words for the associated command line.</li>
<li><code>user_data</code> is a table that the argmatcher can use to help it parse the input line (see <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for details).</li>
</ul>
<p>The function may return any of the following:</p>
<ul>
<li>Return an argmatcher to override subsequent parsing and use the specified argmatcher.</li>
<li>Return <code>false</code> or <code>nil</code> to allow parsing to continue normally.</li>
</ul>
<blockquote>
<p><strong>Note:</strong> Avoid creating new argmatchers in &quot;on link&quot; functions; instead return cached argmatchers that were previously created.  The &quot;on link&quot; functions may be called frequently, and creating new argmatchers every time can create responsiveness problems while typing.</p>
</blockquote>
<p>This example demonstrates linking to another argmatcher if the first argument is any .txt file.  Any other value for the first argument continues using the same argmatcher to parse the rest of the command.</p>
<ul>
<li><code>foo file.txt open abc</code></li>
<li><code>foo file.doc abc</code></li>
</ul>
<pre><code class="language-lua">local txt_file_actions = clink.argmatcher():addarg({&quot;open&quot;, &quot;print&quot;})

local function maybe_txt_actions(link, arg_index, word, word_index, line_state, user_data)
    -- If a txt file name is specified, link to another argmatcher.
    if path.getextension(word):lower() == &quot;.txt&quot; then
        return txt_file_actions
    end
    -- Otherwise continue normally with the current argmatcher.
end

clink.argmatcher(&quot;foo&quot;)
:addarg({
    onlink=maybe_txt_actions,   -- Link to another argmatcher only when any .txt file is specified.
    clink.filematches,
})
:addarg(&quot;abc&quot;, &quot;xyz&quot;)
:nofiles()
</code></pre>
<p><a name="argmatcher_shorthand"></a></p>
<h4 id="shorthand"><a class="wlink" href="#argmatcher_shorthand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Shorthand <span class="uplinks"><a href="#more-advanced-stuff">up</a> <a href="#toc">top</a></span></h4>
<p>It is also possible to omit the <code>addarg</code> and <code>addflags</code> function calls and use a more declarative shorthand form:</p>
<pre><code class="language-lua">-- Shorthand form; requires tables.
clink.argmatcher()
    { &quot;one&quot;, &quot;won&quot; }                -- Arg #1
    { &quot;two&quot;, &quot;too&quot; }                -- Arg #2
    { &quot;-a&quot;, &quot;-b&quot;, &quot;/?&quot;, &quot;/h&quot; }      -- Flags

-- Normal form:
clink.argmatcher()
:addarg({ &quot;one&quot;, &quot;won&quot; })           -- Arg #1
:addarg({ &quot;two&quot;, &quot;too&quot; })           -- Arg #2
:addflags(&quot;-a&quot;, &quot;-b&quot;, &quot;/?&quot;, &quot;/h&quot;)   -- Flags
</code></pre>
<p>With the shorthand form flags are implied rather than declared.  When a shorthand table&#39;s first value is a string starting with <code>-</code> or <code>/</code> then the table is interpreted as flags.  Note that it&#39;s still possible with shorthand form to mix flag prefixes, and even add additional flag prefixes, such as <code>{ <span class="hljs-string">'-a'</span>, <span class="hljs-string">'/b'</span>, <span class="hljs-string">'=c'</span> }</code>.</p>
<p><a name="matchgenerators"></a></p>
<h2 id="match-generators"><a class="wlink" href="#matchgenerators"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Match Generators <span class="uplinks"><a href="#extending-clink">up</a> <a href="#toc">top</a></span></h2>
<p>These are Lua functions that are called as part of Readline&#39;s completion process (for example when pressing <kbd>Tab</kbd>).</p>
<p>Using a match generator enables lets you do custom parsing for the input line, or provide completions for the first word in the input line.  Otherwise, using an <a href="#argumentcompletion">argmatcher</a> will probably be both easier and more powerful.</p>
<table class="linkmenu">
<tr><td><a href="#generator_basics">The Basics</a></td><td>A quick example to show the basics.</td></tr>
<tr><td style="padding-top: 0.5rem"><em>More Advanced Stuff</em></td><td></td></tr>
<tr><td style="padding-left: 2rem"><a href="#filteringmatchcompletions">Filtering Match Completions</a></td><td>How to modify how completion happens.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#filteringthematchdisplay">Filtering the Match Display</a></td><td>How to modify how possible completions are displayed.</td></tr>
</table>

<p><a name="generator_basics"></a></p>
<h3 id="the-basics-2"><a class="wlink" href="#generator_basics"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The Basics <span class="uplinks"><a href="#matchgenerators">up</a> <a href="#toc">top</a></span></h3>
<p>First create a match generator object:</p>
<pre><code class="language-lua">local my_generator = clink.generator(priority)
</code></pre>
<p>The <span class="arg">priority</span> argument is a number that influences when the generator gets called, with lower numbers going before higher numbers.</p>
<h4 id="the-generate-function"><a class="wlink" href="#the-generate-function"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The :generate() Function <span class="uplinks"><a href="#generator_basics">up</a> <a href="#toc">top</a></span></h4>
<p>Next define a match generator function on the object, taking the following form:</p>
<pre><code class="language-lua">function my_generator:generate(line_state, match_builder)
    -- Use the line_state object to examine the current line and create matches.
    -- Submit matches to Clink using the match_builder object.
    -- Return true or false.
end
</code></pre>
<p><span class="arg">line_state</span> is a <a href="#line_state">line_state</a> object that has information about the current line.</p>
<p><span class="arg">match_builder</span> is a <a href="#builder">builder</a> object to which matches can be added.</p>
<p>If no further match generators need to be called then the function should return true.  Returning false or nil continues letting other match generators get called.</p>
<p>Here is an example script that supplies git branch names as matches for <code>git checkout</code>.  This example doesn&#39;t handle git aliases, but that could be added with additional script code.</p>
<pre><code class="language-lua">local git_branch_autocomplete = clink.generator(1)

local function starts_with(str, start)
    return string.sub(str, 1, string.len(start)) == start
end

local function is_checkout_ac(text)
    if starts_with(text, &quot;git checkout&quot;) then
        return true
    end
    return false
end

local function get_branches()
    -- Run git command to get branches.
    local handle = io.popen(&quot;git branch -a 2&gt;&amp;1&quot;)
    local result = handle:read(&quot;*a&quot;)
    handle:close()
    -- Parse the branches from the output.
    local branches = {}
    if starts_with(result, &quot;fatal&quot;) == false then
        for branch in string.gmatch(result, &quot;  %S+&quot;) do
            branch = string.gsub(branch, &quot;  &quot;, &quot;&quot;)
            if branch ~= &quot;HEAD&quot; then
                table.insert(branches, branch)
            end
        end
    end
    return branches
end

function git_branch_autocomplete:generate(line_state, match_builder)
    -- Check if it&#39;s a checkout command.
    if not is_checkout_ac(line_state:getline()) then
        return false
    end
    -- Get branches and add them (does nothing if not in a git repo).
    local matchCount = 0
    for _, branch in ipairs(get_branches()) do
        match_builder:addmatch(branch)
        matchCount = matchCount + 1
    end
    -- If we found branches, then stop other match generators.
    return matchCount &gt; 0
end
</code></pre>
<h4 id="the-getwordbreakinfo-function"><a class="wlink" href="#the-getwordbreakinfo-function"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The :getwordbreakinfo() Function <span class="uplinks"><a href="#generator_basics">up</a> <a href="#toc">top</a></span></h4>
<p>If needed, a generator can optionally influence word breaking for the end word by defining a <code>:getwordbreakinfo()</code> function.</p>
<p>The function takes a <span class="arg">line_state</span> argument which is a <a href="#line_state">line_state</a> object that has information about the current line.</p>
<p>If it returns nil or 0, the end word is truncated to 0 length.  This is the normal behavior, which allows Clink to collect and cache all matches and then filter them based on typing.  Or it can return two numbers:  word break length and an optional end word length.  The end word is split at the word break length:  one word contains the first word break length characters from the end word (if 0 length then it&#39;s discarded), and the next word contains the rest of the end word truncated to the optional word length (0 if omitted).</p>
<p>A good example to look at is Clink&#39;s own built-in environment variable match generator.  It has a <code>:getwordbreakinfo()</code> function that understands the <code>%</code> syntax of environment variables and produces word break info accordingly.</p>
<p>When the environment variable match generator&#39;s <code>:getwordbreakinfo()</code> function sees the end word is <code>abc%USER</code> it returns <code>3,1</code> so that the last two words become &quot;abc&quot; and &quot;%&quot; so that its generator knows it can do environment variable matching.  But when it sees <code>abc%FOO%def</code> it returns <code>8,0</code> so that the last two words become &quot;abc%FOO%&quot; and &quot;&quot; so that its generator won&#39;t do environment variable matching, and also so other generators can produce matches for what follows, since &quot;%FOO%&quot; is an already-completed environment variable and therefore should behave like a word break.  In other words, it breaks the end word differently depending on whether the number of percent signs is odd or even, to account for environent variable syntax rules.</p>
<p>And when an argmatcher sees the end word begins with a flag character it returns <code>0,1</code> so the end word contains only the flag character in order to switch from argument matching to flag matching.</p>
<blockquote>
<p><strong>Note:</strong> The <code>:getwordbreakinfo()</code> function is called very often, so it needs to be very fast or it can cause responsiveness problems while typing.</p>
</blockquote>
<pre><code class="language-lua">local envvar_generator = clink.generator(10)

function envvar_generator:generate(line_state, match_builder)
    -- Does the word end with a percent sign?
    local word = line_state:getendword()
    if word:sub(-1) ~= &quot;%&quot; then
        return false
    end

    -- Add env vars as matches.
    for _, i in ipairs(os.getenvnames()) do
        match_builder:addmatch(&quot;%&quot;..i..&quot;%&quot;, &quot;word&quot;)
    end

    match_builder:setsuppressappend()   -- Don&#39;t append a space character.
    match_builder:setsuppressquoting()  -- Don&#39;t quote envvars.
    return true
end

function envvar_generator:getwordbreakinfo(line_state)
    local word = line_state:getendword()
    local in_out = false
    local index = nil

    -- Paired percent signs denote already-completed environment variables.
    -- So use envvar completion for abc%foo%def%USER but not for abc%foo%USER.
    for i = 1, #word do
        if word:sub(i, i) == &quot;%&quot; then
            in_out = not in_out
            if in_out then
                index = i - 1
            else
                index = i
            end
        end
    end

    -- If there were any percent signs, return word break info to influence the
    -- match generators.
    if index then
        return index, (in_out and 1) or 0
    end
end
</code></pre>
<h3 id="more-advanced-stuff-1"><a class="wlink" href="#more-advanced-stuff-1"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>More Advanced Stuff <span class="uplinks"><a href="#matchgenerators">up</a> <a href="#toc">top</a></span></h3>
<p><a name="filteringmatchcompletions"></a></p>
<h4 id="filtering-match-completions"><a class="wlink" href="#filteringmatchcompletions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Filtering Match Completions <span class="uplinks"><a href="#more-advanced-stuff-1">up</a> <a href="#toc">top</a></span></h4>
<p>A <a href="#matchgenerators">match generator</a> or <a href="#argumentcompletion">argmatcher</a> or <a href="#luakeybindings">luafunc: key binding</a> can use <a href="#clink.onfiltermatches">clink.onfiltermatches()</a> to register a function that will be called after matches are generated but before they are displayed or inserted (this is reset every time match generation is invoked).</p>
<p>The function receives a table argument containing the matches to be displayed, a string argument indicating the completion type, and a boolean argument indicating whether filename completion is desired. The table argument has a <code>match</code> string field and a <code>type</code> string field; these are the same as in <a href="#builder:addmatch">builder:addmatch()</a>. In Clink v1.6.5 and newer, the table includes the full set of match fields, especially including the <code>display</code> field.</p>
<p>The possible completion types are:</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Description</th>
<th>Example</th>
</tr>
</thead>
<tbody><tr>
<td><code>&quot;?&quot;</code></td>
<td>List the possible completions.</td>
<td><a href="#rlcmd-possible-completions"><code>possible-completions</code></a> or <a href="#rlcmd-popup-complete"><code>popup-complete</code></a></td>
</tr>
<tr>
<td><code>&quot;*&quot;</code></td>
<td>Insert all of the possible completions.</td>
<td><a href="#rlcmd-insert-completions"><code>insert-completions</code></a></td>
</tr>
<tr>
<td><code>&quot;\t&quot;</code></td>
<td>Do standard completion.</td>
<td><a href="#rlcmd-complete"><code>complete</code></a></td>
</tr>
<tr>
<td><code>&quot;!&quot;</code></td>
<td>Do standard completion, and list all possible completions if there is more than one.</td>
<td><a href="#rlcmd-complete"><code>complete</code></a> (when the <a href="#configshowallifambiguous"><code>show-all-if-ambiguous</code></a> config variable is set)</td>
</tr>
<tr>
<td><code>&quot;@&quot;</code></td>
<td>Do standard completion, and list all possible completions if there is more than one and partial completion is not possible.</td>
<td><a href="#rlcmd-complete"><code>complete</code></a> (when the <a href="#configshowallifunmodified"><code>show-all-if-unmodified</code></a> config variable is set)</td>
</tr>
<tr>
<td><code>&quot;%&quot;</code></td>
<td>Do menu completion (cycle through possible completions).</td>
<td><a href="#rlcmd-menu-complete"><code>menu-complete</code></a> or <a href="#rlcmd-old-menu-complete"><code>old-menu-complete</code></a></td>
</tr>
</tbody></table>
<p>The return value is a table with the input matches filtered as desired. The match filter function can remove matches, but cannot add matches (use a match generator instead).  If only one match remains after filtering, then many commands will insert the match without displaying it.  This makes it possible to spawn a process (such as <a href="https://github.com/junegunn/fzf">fzf</a>) to perform enhanced completion by interactively filtering the matches and keeping only one selected match.</p>
<pre><code class="language-lua">settings.add(&quot;fzf.height&quot;, &quot;40%&quot;, &quot;Height to use for the --height flag&quot;)
settings.add(&quot;fzf.exe_location&quot;, &quot;&quot;, &quot;Location of fzf.exe if not on the PATH&quot;)

-- Build a command line to launch fzf.
local function get_fzf()
    local height = settings.get(&quot;fzf.height&quot;)
    local command = settings.get(&quot;fzf.exe_location&quot;)
    if not command or command == &quot;&quot; then
        command = &quot;fzf.exe&quot;
    else
        command = os.getshortname(command)
    end
    if height and height ~= &quot;&quot; then
        command = command..&#39; --height &#39;..height
    end
    return command
end

local fzf_complete_intercept = false

-- Sample key binding in .inputrc:
--      M-C-x: &quot;luafunc:fzf_complete&quot;
function fzf_complete(rl_buffer)
    fzf_complete_intercept = true
    rl.invokecommand(&quot;complete&quot;)
    if fzf_complete_intercept then
        rl_buffer:ding()
    end
    fzf_complete_intercept = false
    rl_buffer:refreshline()
end

local function filter_matches(matches, completion_type, filename_completion_desired)
    if not fzf_complete_intercept then
        return
    end
    -- Start fzf.
    local r,w = io.popenrw(get_fzf()..&#39; --layout=reverse-list&#39;)
    if not r or not w then
        return
    end
    -- Write matches to the write pipe.
    for _,m in ipairs(matches) do
        w:write(m.match..&quot;\n&quot;)
    end
    w:close()
    -- Read filtered matches.
    local ret = {}
    while (true) do
        local line = r:read(&#39;*line&#39;)
        if not line then
            break
        end
        for _,m in ipairs(matches) do
            if m.match == line then
                table.insert(ret, m)
            end
        end
    end
    r:close()
    -- Yay, successful; clear it to not ding.
    fzf_complete_intercept = false
    return ret
end

local interceptor = clink.generator(0)
function interceptor:generate(line_state, match_builder)
    -- Only intercept when the specific key binding command was used.
    if fzf_complete_intercept then
        clink.onfiltermatches(filter_matches)
    end
    return false
end
</code></pre>
<blockquote>
<p><strong>Note:</strong> A much more complete fzf integration script is available at <a href="https://github.com/chrisant996/clink-gizmos">clink-gizmos</a> or <a href="https://github.com/chrisant996/clink-fzf">clink-fzf</a>.</p>
</blockquote>
<p><a name="filteringthematchdisplay"></a></p>
<h4 id="filtering-the-match-display"><a class="wlink" href="#filteringthematchdisplay"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Filtering the Match Display <span class="uplinks"><a href="#more-advanced-stuff-1">up</a> <a href="#toc">top</a></span></h4>
<p>In some instances it may be preferable to display different text when listing potential matches versus when inserting a match in the input line, or to display a description next to a match.  For example, it might be desirable to display a <code>*</code> next to some matches, or to show additional information about some matches.</p>
<p>The simplest way to do that is just include the <code>display</code> and/or <code>description</code> fields when using <a href="#builder:addmatch">builder:addmatch()</a>.  Refer to that function&#39;s documentation for usage details.</p>
<p>However, older versions of Clink don&#39;t support those fields.  And in some cases it may be desirable to display a list of possible completions that includes extra matches, or omits some matches (but that&#39;s discouraged because it can be confusing to users).</p>
<p>A <a href="#matchgenerators">match generator</a> or <a href="#argumentcompletion">argmatcher</a> or <a href="#luakeybindings">luafunc: key binding</a> can alternatively use <a href="#clink.ondisplaymatches">clink.ondisplaymatches()</a> to register a function that will be called before matches are displayed (this is reset every time match generation is invoked).</p>
<p>The function receives a table argument containing the matches to be displayed, and a boolean argument indicating whether they&#39;ll be displayed in a popup window. The table argument has a <code>match</code> string field and a <code>type</code> string field; these are the same as in <a href="#builder:addmatch">builder:addmatch()</a>.</p>
<p>The return value is a table with the input matches filtered as required by the match generator.  The returned table can also optionally include a <code>display</code> string field and a <code>description</code> string field. When present, <code>display</code> will be displayed instead of the <code>match</code> field, and <code>description</code> will be displayed next to the match. Putting the description in a separate field enables Clink to align the descriptions in a column.</p>
<p>Filtering the match display can affect completing matches: the <code>match</code> field is what gets inserted.  It can also affect displaying matches: the <code>display</code> field is displayed if present, otherwise the <code>match</code> field is displayed.</p>
<p>If a match&#39;s <code>type</code> is &quot;none&quot; or its <code>match</code> field is different from its <code>display</code> field then the match is displayed using the color specified by the <a href="#color_filtered">color.filtered</a> Clink setting, otherwise normal completion coloring is applied.  The <code>display</code> and <code>description</code> fields can include ANSI escape codes to apply other colors if desired.</p>
<pre><code class="language-lua">local function my_filter(matches, popup)
    local new_matches = {}
    local magenta = &quot;\x1b[35m&quot;
    local filtered = settings.get(&quot;color.filtered&quot;)
    for _,m in ipairs(matches) do
        if m.match:find(&quot;[0-9]&quot;) then
            -- Ignore matches with one or more digits.
        else
            -- Keep the match, and also add a magenta * prefix to directory matches.
            if m.type:find(&quot;^dir&quot;) then
                m.display = magenta..&quot;*&quot;..filtered..m.match
            end
            table.insert(new_matches, m)
        end
    end
    return new_matches
end

function my_match_generator:generate(line_state, match_builder)
    ...
    clink.ondisplaymatches(my_filter)
end
</code></pre>
<blockquote>
<p><strong>Compatibility Notes:</strong></p>
<ul>
<li>In v1.3.1 and higher, the table received by the registered ondisplaymatches function includes all the match fields (such as <code>display</code>, <code>description</code>, <code>appendchar</code>, etc), and the function can include any of these fields in the table it returns.  In other words, in v1.3.1 and higher match filtering supports all the same fields as <a href="#builder:addmatch">builder:addmatch()</a>.</li>
<li>In v1.5.4 and higher, the table received by the registered ondisplaymatches function can include an <code>arginfo</code> field, and the function can include <code>arginfo</code> in the table it returns.</li>
</ul>
</blockquote>
<p><a name="classifywords"></a></p>
<h2 id="coloring-the-input-text"><a class="wlink" href="#classifywords"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Coloring the Input Text <span class="uplinks"><a href="#extending-clink">up</a> <a href="#toc">top</a></span></h2>
<p>When the <code><a href="#clink_colorize_input">clink.colorize_input</a></code> setting is enabled, then <a href="#argumentcompletion">argmatchers</a> automatically apply colors to the input text as they parse it.  When the setting is disabled, then the entire input line is colored by the <code><a href="#color_input">color.input</a></code> setting.</p>
<p>See <a href="#color-themes">Color Themes</a> for information on loading and saving color theme files (whose names end with &quot;.clinktheme&quot;).</p>
<table class="linkmenu">
<tr><td><a href="#inputcolor_command">Coloring the Command Word</a></td><td>How the command word is colored.</td></tr>
<tr><td><a href="#inputcolor_redir">Coloring Command Separators and Redirection</a></td><td>How special characters are colored.</td></tr>
<tr><td><a href="#inputcolor_other">Coloring Other Input Text</a></td><td>How other text is colored.</td></tr>
<tr><td style="padding-top: 0.5rem"><em>More Advanced Stuff</em></td><td></td></tr>
<tr><td style="padding-left: 2rem"><a href="#classifier_override_arguments">Setting a classifier function in an argmatcher</a></td><td>How to apply colors for arguments.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#classifier_override_line">Setting a classifier function for the whole input line</a></td><td>How to apply colors anywhere in the line.</td></tr>
</table>

<p><a name="inputcolor_command"></a></p>
<h3 id="coloring-the-command-word"><a class="wlink" href="#inputcolor_command"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Coloring the Command Word <span class="uplinks"><a href="#classifywords">up</a> <a href="#toc">top</a></span></h3>
<p>The command word is colored based on the command type, in priority order:</p>
<ol>
<li>Commands that have an argmatcher defined use <code><a href="#color_argmatcher">color.argmatcher</a></code>.</li>
<li>Built-in CMD commands use <code><a href="#color_cmd">color.cmd</a></code>.</li>
<li>Doskey aliases use <code><a href="#color_doskey">color.doskey</a></code>.</li>
<li>Recognized executable files use <code><a href="#color_executable">color.executable</a></code> if it is set.</li>
<li>Unrecognized command words use <code><a href="#color_unrecognized">color.unrecognized</a></code> if it is set.</li>
<li>If none of the above apply, then <code><a href="#color_input">color.input</a></code> is used.</li>
</ol>
<p>Here are examples, using the colors from the <a href="#gettingstarted_enhanceddefaults">Use enhanced defaults</a> installation option:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><table class="console" cellpadding=0 cellspacing=0>
<tr><td class="color_default">c:\dir><span class="color_argmatcher">clink</span></td><td class="right_gray">'clink' has an argmatcher</td></tr>
<tr><td class="color_default">c:\dir><span class="color_cmd">attrib</span></td><td class="right_gray">'attrib' is a CMD command</td></tr>
<tr><td class="color_default">c:\dir><span class="color_doskey">myalias</span></td><td class="right_gray">if 'myalias' is a doskey alias</td></tr>
<tr><td class="color_default">c:\dir><span class="color_executable">control</span></td><td class="right_gray">'control' is an executable</td></tr>
<tr><td class="color_default">c:\dir><span class="color_unrecognized">xyzabc123</span></td><td class="right_gray">unrecognized</td></tr>
<tr><td class="color_default">c:\dir><span class="color_input">whatever</span></td><td class="right_gray">if executable and unrecognized colors are not set</td></tr>
</table></code></pre>

<p><a name="inputcolor_redir"></a></p>
<h3 id="coloring-command-separators-and-redirection"><a class="wlink" href="#inputcolor_redir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Coloring Command Separators and Redirection <span class="uplinks"><a href="#classifywords">up</a> <a href="#toc">top</a></span></h3>
<p>Command separators and redirection are colored accordingly:</p>
<ul>
<li>Command separators use <code><a href="#color_cmdsep">color.cmdsep</a></code>.</li>
<li>Redirection symbols use <code><a href="#color_cmdredir">color.cmdredir</a></code>.</li>
<li>Redirected files use <code><a href="#color_input">color.input</a></code>.</li>
</ul>
<p>Here are examples, using the colors from the <a href="#gettingstarted_enhanceddefaults">Use enhanced defaults</a> installation option:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><table class="console" cellpadding=0 cellspacing=0>
<tr><td class="color_default">c:\dir><span class="color_cmd">pushd</span> <span class="color_cmdsep">&</span> <span class="color_cmd">popd</span></td><td class="right_gray">'&' is the command separator</td></tr>
<tr><td class="color_default">c:\dir><span class="color_cmd">set</span> <span class="color_cmdredir">&gt;</span><span class="color_input">file</span></td><td class="right_gray">redirecting 'set' to 'file'</td></tr>
</table></code></pre>

<p><a name="inputcolor_other"></a></p>
<h3 id="coloring-other-input-text"><a class="wlink" href="#inputcolor_other"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Coloring Other Input Text <span class="uplinks"><a href="#classifywords">up</a> <a href="#toc">top</a></span></h3>
<p>Other input words are colored based on how argmatchers parse the input text.</p>
<ul>
<li>If an argmatcher isn&#39;t defined for a command, then the input text is colored using <code><a href="#color_input">color.input</a></code>.</li>
<li>Flags defined by the command&#39;s argmatcher use <code><a href="#color_flag">color.flag</a></code>.</li>
<li>Arguments defined by the command&#39;s argmatcher use <code><a href="#color_arg">color.arg</a></code>.</li>
<li>Text that goes past what the command&#39;s argmatcher expects uses <code><a href="#color_unexpected">color.unexpected</a></code>.</li>
<li><a href="#gettingstarted_autosuggest">Auto-suggestion</a> text uses <code><a href="#color_suggestion">color.suggestion</a></code>.</li>
</ul>
<p>Here are examples, using the colors from the <a href="#gettingstarted_enhanceddefaults">Use enhanced defaults</a> installation option:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><table class="console" cellpadding=0 cellspacing=0>
<tr><td class="color_default">c:\dir><span class="color_argmatcher">clink</span> <span class="color_flag">--help</span></td><td class="right_gray">'--help' is defined as a flag for 'clink'</td></tr>
<tr><td class="color_default">c:\dir><span class="color_argmatcher">clink</span> <span class="color_arg">set</span></td><td class="right_gray">'set' is defined as an argument for 'clink'</td></tr>
<tr><td class="color_default">c:\dir><span class="color_argmatcher">clink</span> <span class="color_arg">set</span> <span class="color_arg">color.arg</span></td><td class="right_gray">'color.arg' is defined as an argument for 'clink set'</td></tr>
<tr><td class="color_default">c:\dir><span class="color_argmatcher">clink</span> <span class="color_arg">set</span> <span class="color_unexpected">abc.xyz</span></td><td class="right_gray">'abc.xyz' is not a recognized argument for 'clink set'</td></tr>
<tr><td class="color_default">c:\dir><span class="color_executable">findstr</span> <span class="color_input">/s needle haystack\*</span></td><td class="right_gray">if 'findstr' has no argmatcher, all words use 'color.input'</td></tr>
<tr><td class="color_default">c:\dir><span class="color_executable">findstr</span> <span class="color_input">/s</span><span class="cursor">_</span><span class="color_suggestion">needle haystack\*</span></td><td class="right_gray">press RIGHT to insert an auto-suggestion</td></tr>
</table></code></pre>

<h3 id="more-advanced-stuff-2"><a class="wlink" href="#more-advanced-stuff-2"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>More Advanced Stuff <span class="uplinks"><a href="#classifywords">up</a> <a href="#toc">top</a></span></h3>
<p><a name="classifier_override_arguments"></a></p>
<h4 id="setting-a-classifier-function-in-an-argmatcher"><a class="wlink" href="#classifier_override_arguments"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Setting a classifier function in an argmatcher <span class="uplinks"><a href="#more-advanced-stuff-2">up</a> <a href="#toc">top</a></span></h4>
<p>In cases where an <a href="#argumentcompletion">argmatcher</a> isn&#39;t able to color the input text in the desired manner, it&#39;s possible to supply a classifier function that overrides how the argmatcher colors the input text.  An argmatcher&#39;s classifier function is called once for each word the argmatcher parses, but it can classify any words (not just the word it was called for).  Each argmatcher can have its own classifier function, so when there are linked argmatchers more than one function may be invoked.</p>
<p>The classifier function is passed up to six arguments:</p>
<ul>
<li><code>arg_index</code> is the argument index in the argmatcher, corresponding to the argument being parsed.  0 means it is a flag, rather than an argument.</li>
<li><code>word</code> is a partial string for the word under the cursor, corresponding to the argument for which matches are being generated:  it is an empty string, or if a filename is being entered then it will be the path portion (e.g. for &quot;dir1\dir2\pre&quot; <code>word</code> will be &quot;dir1\dir2&quot;).</li>
<li><code>word_index</code> is the word index in <code>line_state</code>, corresponding to the argument for which matches are being generated.</li>
<li><code>line_state</code> is a <a href="#line_state">line_state</a> object that contains the words for the associated command line.</li>
<li><code>classifications</code> is a <a href="#word_classifications">word_classifications</a> object which can be used to apply colors.</li>
<li>In Clink v1.5.17 and higher, <code>user_data</code> is a table that the argmatcher can use to help it parse the input line (see <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for details).</li>
</ul>
<p>Words are colored by classifying the words, and each classification has an associated color.  See <a href="#word_classifications:classifyword">word_classifications:classifyword()</a> for the available classification codes.</p>
<p>The <code>clink set</code> command has different syntax depending on the setting type, so the argmatcher for <code>clink</code> needs help in order to get everything right.  A custom generator function parses the input text to provide appropriate matches, and a custom classifier function applies appropriate coloring.</p>
<pre><code class="language-lua">-- In this example, the argmatcher matches a directory as the first argument and
-- a file as the second argument.  It uses a word classifier function to classify
-- directories (words that end with a path separator) as &quot;unexpected&quot; in the
-- second argument position.

local function classify_handler(arg_index, word, word_index, line_state, classifications, user_data)
    -- `arg_index` is the argument position in the argmatcher.
    -- In this example only position 2 needs special treatent.
    if arg_index ~= 2 then
        return
    end

    -- `arg_index` is the argument position in the argmatcher.
    -- `word_index` is the word position in the `line_state`.
    -- Ex1: in `samp dir file` for the word `dir` the argument index is 1 and
    -- the word index is 2.
    -- Ex2: in `samp --help dir file` for the word `dir` the argument index is
    -- still 1, but the word index is 3.

    -- `word` is the word the classifier function was called for and `word_index`
    -- is its position in the line.  Because `line_state` is also provided, the
    -- function can examine any words in the input line.
    if word:sub(-1) == &quot;\\&quot; then
        -- The word appears to be a directory, but this example expects only
        -- files in argument position 2.  Here the word gets classified as &quot;n&quot;
        -- (unexpected) so it gets colored differently.
        classifications:classifyword(word_index, &quot;n&quot;)
    end
end

local matcher = clink.argmatcher(&quot;samp&quot;)
:addflags(&quot;--help&quot;)
:addarg({ clink.dirmatches })
:addarg({ clink.filematches })
:setclassifier(classify_handler)
</code></pre>
<p><a name="classifier_override_line"></a></p>
<h4 id="setting-a-classifier-function-for-the-whole-input-line"><a class="wlink" href="#classifier_override_line"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Setting a classifier function for the whole input line <span class="uplinks"><a href="#more-advanced-stuff-2">up</a> <a href="#toc">top</a></span></h4>
<p>In some cases it may be desireable to use a custom classifier to apply coloring in an input line.</p>
<p>First create a classifier object:</p>
<pre><code class="language-lua">local my_classifier = clink.classifier(priority)
</code></pre>
<p>The <span class="arg">priority</span> argument is a number that influences when the classifier gets called, with lower numbers going before higher numbers.</p>
<p>Next define a classify function on the object, taking the following form:</p>
<pre><code class="language-lua">function my_classifier:classify(commands)
    -- See further below for how to use the commands argument.
    -- Returning true stops any further classifiers from being called, or
    -- returning false or nil continues letting other classifiers get called.
end
</code></pre>
<p><span class="arg">commands</span> is a table of tables, with the following scheme:</p>
<pre><code class="language-lua">-- commands[n].line_state           [line_state] Contains the words for the Nth command.
-- commands[n].classifications      [word_classifications] Use this to classify the words.
</code></pre>
<p>The <code>line_state</code> field is a <a href="#line_state">line_state</a> object that contains the words for the associated command line.</p>
<p>The <code>classifications</code> field is a <a href="#word_classifications">word_classifications</a> object to use for classifying the words in the associated command line.</p>
<pre><code class="language-lua">-- In this example, a custom classifier applies colors to environment variables
-- in the input line.
local envvar_classifier = clink.classifier(50)
function envvar_classifier:classify(commands)
    -- This example doesn&#39;t need to parse words within commands, it just wants
    -- to parse the whole line.
    --
    -- So it can simply use the first command&#39;s `classifications` object because
    -- the `classifications:applycolor()` method can apply color anywhere in the
    -- entire input line.
    --
    -- (Note that the `classifications:classifyword()` method can only affect
    -- the words for its corresponding command.)
    if commands[1] then
        local line_state = commands[1].line_state
        local classifications = commands[1].classifications
        local line = line_state:getline()
        local len = #line

        -- Loop through the line looking for environment variables, starting at
        -- the first character of the line.
        local idx = 1
        while (idx &lt;= len) do
            -- Find the next percent sign (idx is walking through the line).
            local pos = line:find(&#39;%&#39;, idx, true--[[plain]])
            if not pos then
                -- No more?  Then all done.
                break
            end

            -- Find the next percent sign (which would close the possible
            -- environment variable).
            local posend = line:find(&#39;%&#39;, pos + 1, true--[[plain]])
            if not posend then
                -- No close?  Then all done.
                break
            end

            -- Extract the text between the percent signs and check if there
            -- is an environment variable by that name.
            local name = line:sub(pos + 1, posend - 1)
            if name == &#39;&#39; then
                -- Skip a double percent.  It&#39;s an escaped percent sign, not an
                -- environment variable.
                idx = posend + 1
            elseif os.getenv(name) then
                -- Apply a color to the environment variable.
                classifications:applycolor(pos, posend - pos + 1, &quot;95&quot;)
                idx = posend + 1
            else
                -- Ignore the percent sign, but continue looking for more.
                idx = idx + 1
            end
        end
    end
end
</code></pre>
<p><a name="customisingtheprompt"></a></p>
<h2 id="customizing-the-prompt"><a class="wlink" href="#customisingtheprompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Customizing the Prompt <span class="uplinks"><a href="#extending-clink">up</a> <a href="#toc">top</a></span></h2>
<p>Before Clink displays the prompt it filters the prompt through <a href="#extending-clink">Lua</a> so that the prompt can be customized. This happens each and every time that the prompt is shown which allows for context sensitive customizations (such as showing the current branch of a git repository).</p>
<p>See <a href="#custom-prompts">Custom Prompts</a> for information on loading custom prompt files (whose names end with &quot;.clinkprompt&quot;).</p>
<table class="linkmenu">
<tr><td><a href="#promptfilter_basics">The Basics</a></td><td>A quick example to show the basics.</td></tr>
<tr><td><a href="#escapecodes">ANSI escape codes in the prompt string</a></td><td>How special characters are colored.</td></tr>
<tr><td><a href="#sharing-custom-prompts">Sharing Custom Prompts</a></td><td>How to share your custom prompt with other people as a *.clinkprompt file.</td></tr>
<tr><td style="padding-top: 0.5rem"><em>More Advanced Stuff</em></td><td></td></tr>
<tr><td style="padding-left: 2rem"><a href="#rightprompt">Right Side Prompt</a></td><td>How to add prompt text at the right edge of the terminal.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#asyncpromptfiltering">Asynchronous Prompt Filtering</a></td><td>How to make the prompt show up instantly.</td></tr>
<tr><td style="padding-left: 2rem"><a href="#transientprompts">Transient Prompt</a></td><td>How to display completed prompts differently than the current prompt.</td></tr>
</table>

<p><a name="promptfilter_basics"></a></p>
<h3 id="the-basics-3"><a class="wlink" href="#promptfilter_basics"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The Basics <span class="uplinks"><a href="#customisingtheprompt">up</a> <a href="#toc">top</a></span></h3>
<p>Writing a prompt filter is straightforward:</p>
<ol>
<li>Create a new prompt filter by calling <a href="#clink.promptfilter">clink.promptfilter()</a> along with a priority id which dictates the order in which filters are called. Lower priority ids are called first.</li>
<li>Define a <code>:filter()</code> function on the returned prompt filter.</li>
</ol>
<p>The filter function takes a string argument that contains the filtered prompt so far.</p>
<p>If the filter function returns nil, it has no effect.  If the filter function returns a string, that string is used as the new filtered prompt (and may be further modified by other prompt filters with higher priority ids).  If the filter function returns a string and a boolean, then if the boolean is false the prompt filtering is done and no further filter functions are called.</p>
<pre><code class="language-lua">local p = clink.promptfilter(30)
function p:filter(prompt)
    return &quot;new prefix &quot;..prompt..&quot; new suffix&quot; -- Add ,false to stop filtering.
end
</code></pre>
<p>The following example illustrates setting the prompt, modifying the prompt, using ANSI escape code for colors, running a git command to find the current branch, and stopping any further processing.</p>
<pre><code class="language-lua">local green  = &quot;\x1b[92m&quot;
local yellow = &quot;\x1b[93m&quot;
local cyan   = &quot;\x1b[36m&quot;
local normal = &quot;\x1b[m&quot;

-- A prompt filter that discards any prompt so far and sets the
-- prompt to the current working directory.  An ANSI escape code
-- colors it yellow.
local cwd_prompt = clink.promptfilter(30)
function cwd_prompt:filter(prompt)
    return yellow..os.getcwd()..normal
end

-- A prompt filter that inserts the date at the beginning of the
-- the prompt.  An ANSI escape code colors the date green.
local date_prompt = clink.promptfilter(40)
function date_prompt:filter(prompt)
    return green..os.date(&quot;%a %H:%M&quot;)..normal..&quot; &quot;..prompt
end

-- A prompt filter that may stop further prompt filtering.
-- This is a silly example, but on Wednesdays, it stops the
-- filtering, which in this example prevents git branch
-- detection and the line feed and angle bracket.
local wednesday_silliness = clink.promptfilter(60)
function wednesday_silliness:filter(prompt)
    if os.date(&quot;%a&quot;) == &quot;Wed&quot; then
        -- The ,false stops any further filtering.
        return prompt..&quot; HAPPY HUMP DAY! &quot;, false
    end
end

-- A prompt filter that appends the current git branch.
local git_branch_prompt = clink.promptfilter(65)
function git_branch_prompt:filter(prompt)
    local line = io.popen(&quot;git branch --show-current 2&gt;nul&quot;):read(&quot;*a&quot;)
    local branch = line:match(&quot;(.+)\n&quot;)
    if branch then
        return prompt..&quot; &quot;..cyan..&quot;[&quot;..branch..&quot;]&quot;..normal
    end
end

-- A prompt filter that adds a line feed and angle bracket.
local bracket_prompt = clink.promptfilter(150)
function bracket_prompt:filter(prompt)
    return prompt..&quot;\n&gt; &quot;
end
</code></pre>
<p>The resulting prompt will look like this:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default"><span style="color:#00ff00">Tue 12:54</span> <span style="color:#ffff00">c:\dir</span> <span style="color:#008080">[master]</span>
&gt;&nbsp;<span class="cursor">_</span></span>
</code></pre>

<p>...except on Wednesdays, when it will look like this:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default"><span style="color:#00ff00">Wed 12:54</span> <span style="color:#ffff00">c:\dir</span> HAPPY HUMP DAY!&nbsp;<span class="cursor">_</span></span>
</code></pre>

<p/>

<p><a name="escapecodes"></a></p>
<h3 id="ansi-escape-codes-in-the-prompt-string"><a class="wlink" href="#escapecodes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>ANSI escape codes in the prompt string <span class="uplinks"><a href="#customisingtheprompt">up</a> <a href="#toc">top</a></span></h3>
<p>Readline needs to be told which characters in the prompt are unprintable or invisible.  To help with that, Clink automatically detects most standard ANSI escape codes (and most of ConEmu&#39;s non-standard escape codes) and the BEL character (^G, audible bell) and surrounds them with <code>\001</code> (^A) and <code>\002</code> (^B) characters.  For any other unprintable characters, the <code>\001</code> and <code>\002</code> characters need to be added manually.  Otherwise Readline misinterprets the length of the prompt and can display the prompt and input line incorrectly in some cases (especially if the input line wraps onto a second line).</p>
<p>Here are a couple of links with more information about ANSI escape codes:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/ANSI_escape_code">Wikipedia - ANSI Escape Code</a></li>
<li><a href="https://docs.microsoft.com/en-us/windows/console/console-virtual-terminal-sequences">Console Virtual Terminal Sequences</a></li>
</ul>
<h3 id="sharing-custom-prompts"><a class="wlink" href="#sharing-custom-prompts"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Sharing Custom Prompts <span class="uplinks"><a href="#customisingtheprompt">up</a> <a href="#toc">top</a></span></h3>
<p>Custom prompts can be shared in Clink v1.7.0 and newer.</p>
<p>To make a custom prompt shareable, put it in a file whose name ends with &quot;.clinkprompt&quot; instead of &quot;.lua&quot;.</p>
<p>For many custom prompts, it&#39;s as simple as that!  Some prompts may want additional capabilities, which are described further below.</p>
<p>A .clinkprompt file can be shared and installed on other computers.  If it&#39;s in a &quot;themes&quot; subdirectory under any of the script directories, then Clink can find it automatically (run <code>clink info</code> and look for the &quot;scripts&quot; line in the output).  If the file in some other directory, then you can use it by telling Clink the full path to the file.</p>
<p>Any <a href="#clink.promptfilter">prompt filters</a> or registered event handlers (such as <a href="#clink.onbeginedit">clink.onbeginedit</a>) in a .clinkprompt file are only called while the prompt is active.  Running <code>clink config prompt use <span class="arg">prompt_file</span></code> select a custom prompt which gets activated in each Clink session using the current profile directory.  Only one .clinkprompt file at a time can be active.</p>
<h4 id="the-exports-table-in-a-clinkprompt-file"><a class="wlink" href="#the-exports-table-in-a-clinkprompt-file"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The &quot;exports table&quot; in a .clinkprompt file <span class="uplinks"><a href="#sharing-custom-prompts">up</a> <a href="#toc">top</a></span></h4>
<p>A .clinkprompt file can return a table with certain fields which gain additional capabilities.  Each field is optional, as is the table itself.</p>
<table>
<thead>
<tr>
<th>Field</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>onactivate = <span class="arg">function_name</span></code></td>
<td>If <span class="arg">function_name</span> is not nil, then it&#39;s called when the prompt is loaded and activated.</td>
</tr>
<tr>
<td><code>ondeactivate = <span class="arg">function_name</span></code></td>
<td>If <span class="arg">function_name</span> is not nil, then it&#39;s called when the prompt is deactivated.</td>
</tr>
<tr>
<td><code>demo = <span class="arg">function_name</span></code></td>
<td>If <span class="arg">function_name</span> is not nil, then it&#39;s called when <code>clink config prompt show</code> is run.</td>
</tr>
<tr>
<td><code>dependson = <span class="arg">string</span></code></td>
<td>If the string is not empty, then it is a list of clinkprompt names upon which this clinkprompt depends.  When this clinkprompt file is loaded and activated, the other files are also loaded, and their prompt filters and event handlers are allowed to run even though they aren&#39;t part of the current active clinkprompt file.</td>
</tr>
</tbody></table>
<p>Here&#39;s a &quot;Sample.clinkprompt&quot; file to illustrate how to write .clinkprompt files, including the <code>onactivate</code> and <code>ondeactivate</code> and <code>demo</code> functions.</p>
<pre><code class="language-lua">--------------------------------------------------------------------------------
-- This is a sample clinkprompt module.  It shows how (easy it is) to write a
-- clinkprompt module.
--
-- While a clinkprompt module is deactivated, it stops receiving calls to any
-- prompt filters or events it may have registered until the clinkprompt module
-- is reactivated later.

local norm = &quot;\x1b[m&quot;
local bold = &quot;\x1b[1m&quot;
local reverse = &quot;\x1b[0;7m&quot;
local red = &quot;\x1b[91m&quot;
local green = &quot;\x1b[92m&quot;
local darkgray = &quot;\x1b[90m&quot;

local symbol = &quot;&gt;&quot;

--------------------------------------------------------------------------------
-- Normal prompt filter stuff...

local function cwdstring()
    local cwd = os.getcwd()
    return rl.collapsetilde(cwd, true)
end

local function errorlevelcolor()
    return (os.geterrorlevel() == 0) and green or red
end

local p = clink.promptfilter(25)

function p:filter()
    return bold..cwdstring()..norm..&quot; &quot;..errorlevelcolor()..symbol..norm..&quot; &quot;
end

function p:rightfilter()
    return os.date(&quot;%a %H:%M&quot;, os.time())
end

function p:transientfilter()
    return errorlevelcolor()..symbol..norm..&quot; &quot;
end

--------------------------------------------------------------------------------
-- Some event handlers...

local function onbeginedit()
    print(darkgray..&quot;-- SAMPLEPROMPT: onbeginedit --&quot;..norm)
end

local function onendedit()
    print(darkgray..&quot;-- SAMPLEPROMPT: onendedit --&quot;..norm)
end

clink.onbeginedit(onbeginedit)
clink.onendedit(onendedit)

--------------------------------------------------------------------------------
-- Special clinkprompt module stuff...

local function onactivate()
    print(darkgray..&quot;-- SAMPLEPROMPT: onactivate --&quot;..norm)
end

local function ondeactivate()
    print(darkgray..&quot;-- SAMPLEPROMPT: ondeactivate --&quot;..norm)
end

local function demo()
    local left = bold..cwdstring()..norm..&quot; &quot;..green..symbol..norm..&quot; &quot;
    local right = os.date(&quot;%a %H:%M&quot;, os.time())
    left = left..reverse..&quot; &quot;..norm

    local left_len = console.cellcount(left)
    local right_len = console.cellcount(right)
    local pad = &quot;&quot;
    if left_len + 4 + right_len &gt;= console.getwidth() then
        right = &quot;&quot;
    else
        pad = string.rep(&quot; &quot;, console.getwidth() - (left_len + right_len))
    end

    print(left..pad..right)
end

local exports =
{
    onactivate = onactivate,
    ondeactivate = ondeactivate,
    -- Uncomment this if you want to supply a custom demo function which will
    -- be invoked by &#39;clink config prompt show Sample&#39;.
    --demo = demo,
}

-- Returning an exports table is optional, but allows the clinkprompt module to
-- print a custom demo from &#39;clink config prompt show Sample&#39;.
return exports
</code></pre>
<h3 id="more-advanced-stuff-3"><a class="wlink" href="#more-advanced-stuff-3"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>More Advanced Stuff <span class="uplinks"><a href="#customisingtheprompt">up</a> <a href="#toc">top</a></span></h3>
<p><a name="rightprompt"></a></p>
<h4 id="right-side-prompt"><a class="wlink" href="#rightprompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Right Side Prompt <span class="uplinks"><a href="#more-advanced-stuff-3">up</a> <a href="#toc">top</a></span></h4>
<p>In addition to the normal prompt filtering, Clink can also show a prompt on the right side of the first line of input.  The right side prompt defaults to the value of the <code>%CLINK_RPROMPT%</code> environment variable, if set, otherwise it is blank.  This right side prompt is automatically hidden if the input line text reaches it.</p>
<p>Clink expands CMD prompt <code>$</code> codes in <code>%CLINK_RPROMPT%</code>, with a few exceptions:  <code>$+</code> is not supported, <code>$_</code> ends the prompt string (it can&#39;t be more than one line), and <code>$V</code> is not supported.  Additionally, if <code>%CLINK_RPROMPT%</code> ends with <code>$M</code> then trailing spaces are trimmed from the expanded string, to maintain right alignment since <code>$M</code> includes a space if the current drive is a network drive (so e.g. <code>$t $d $m</code> is right-aligned regardless whether the current drive has a remote name).</p>
<p>The right side prompt can be filtered through <a href="#extending-clink">Lua</a> just like the normal prompt can be.  Simply define a <code>:rightfilter()</code> function on the prompt filter returned by a call to <a href="#clink.promptfilter">clink.promptfilter()</a>.  A prompt filter can define both <code>:filter()</code> and <code>:rightfilter()</code>, or can define only <code>:filter()</code>.</p>
<p>The <code>:rightfilter()</code> function works the same as the <code>:filter()</code> function, except that it operates on the right side prompt.  It takes a string argument that contains the filtered right side prompt so far.</p>
<p>If the rightfilter function returns nil, it has no effect.  If the rightfilter function returns a string, that string is used as the new filtered right side prompt (and may be further modified by other prompt filters with higher priority ids).  If either the rightfilter function or the normal filter function returns a string and a boolean, then if the boolean is false the prompt filtering is done and no further filter functions are called.</p>
<p>This example modifies the right side prompt by prepending the current date:</p>
<pre><code class="language-lua">local p = clink.promptfilter(30)
function p:filter(prompt)
    -- The :filter() function must be defined.  But if the prompt filter is
    -- only interested in modifying the right side prompt, then the :filter()
    -- function may do nothing.
end
function p:rightfilter(prompt)
    local sep = #prompt &gt; 0 and &quot;  &quot; or &quot;&quot;
    return os.date()..sep..prompt
end
</code></pre>
<br/>

<blockquote>
<p><strong>Notes:</strong></p>
<ul>
<li>If the console font and encoding are mismatched, or if some kinds of emojis are present, then the right side prompt might show up positioned incorrectly.  If that happens, try adjusting the font or encoding (e.g. sometimes running <code>chcp utf-8</code> can resolve positioning issues).</li>
<li>If the <code>:filter()</code> function returns a string and false to stop filtering, then the <code>:rightfilter()</code> is not called (because no further filter functions are called).  If you want to stop filtering but have both a left and right side prompt, then return only a string from <code>:filter()</code> and return a string and false from <code>:rightfilter()</code>.</li>
</ul>
</blockquote>
<p><a name="asyncpromptfiltering"></a></p>
<h4 id="asynchronous-prompt-filtering"><a class="wlink" href="#asyncpromptfiltering"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Asynchronous Prompt Filtering <span class="uplinks"><a href="#more-advanced-stuff-3">up</a> <a href="#toc">top</a></span></h4>
<p>Prompt filtering needs to be fast, or it can interfere with using the shell (e.g. <code>git status</code> can be slow in a large repo).</p>
<p>Clink provides a way for prompt filters to do some initial work and set the prompt, continue doing work in the background, and then refresh the prompt again when the background work is finished.  This is accomplished by using <a href="https://www.lua.org/manual/5.2/manual.html#2.6">Lua coroutines</a>, but Clink simplifies and streamlines the process.</p>
<p>A prompt filter can call <a href="#clink.promptcoroutine">clink.promptcoroutine(my_func)</a> to run <code>my_func()</code> inside a coroutine.  Clink will automatically resume the coroutine repeatedly while input line editing is idle.  When <code>my_func()</code> completes, Clink will automatically refresh the prompt by triggering prompt filtering again.</p>
<p>Typically the motivation to use asynchronous prompt filtering is that one or more <code><span class="hljs-built_in">io</span>.<span class="hljs-built_in">popen</span>(<span class="hljs-string">"some slow command"</span>)</code> calls take too long.  They can be replaced with <a href="#io.popenyield">io.popenyield()</a> calls inside the prompt coroutine to let them run in the background.</p>
<blockquote>
<p><strong>Global data:</strong> If <code>my_func()</code> needs to use any global data, then it&#39;s important to use <a href="#clink.onbeginedit">clink.onbeginedit()</a> to register an event handler that can reset the global data for each new input line session.  Otherwise the data may accidentally &quot;bleed&quot; across different input line sessions.</p>
<p><strong>Backward compatibility:</strong> A prompt filter must handle backward compatibility itself if it needs to run on versions of Clink that don&#39;t support asynchronous prompt filtering (v1.2.9 and lower).  E.g. you can use <code><span class="hljs-keyword">if</span> clink.promptcoroutine <span class="hljs-keyword">then</span></code> to test whether the API exists.</p>
</blockquote>
<p>The following example illustrates running <code>git status</code> in the background.  It also remembers the status from the previous input line, so that it can reduce flicker by using the color from last time until the background status operation completes.</p>
<p><strong>Note:</strong>  This is for illustration purposes and works when no other custom prompt filters are installed.  If another custom prompt filter is present and runs earlier and chooses to halt further prompt filtering, then this example code might not get reached.</p>
<pre><code class="language-lua">local prev_dir      -- Most recent git repo visited.
local prev_info     -- Most recent info retrieved by the coroutine.

local function collect_git_info()
    -- This is run inside the coroutine, which happens while idle while waiting
    -- for keyboard input.
    local info = {}
    info.status = git.getstatus()
    -- Until this returns, the call to clink.promptcoroutine() will keep
    -- returning nil.  After this returns, subsequent calls to
    -- clink.promptcoroutine() will keep returning this return value, until a
    -- new input line begins.
    return info
end

local git_prompt = clink.promptfilter(55)

function git_prompt:filter(prompt)
    -- Do nothing if not a git repo.
    local dir = git.getgitdir()
    if not dir then
        return
    end

    -- Reset the cached status if in a different repo.
    if prev_dir ~= dir then
        prev_info = nil
        prev_dir = dir
    end

    -- Do nothing if git branch not available.  Getting the branch name is fast,
    -- so it can run outside the coroutine.  That way the branch name is visible
    -- even while the coroutine is running.
    local branch = git.getbranch()
    if not branch or branch == &quot;&quot; then
        return
    end

    -- Start a coroutine to collect various git info in the background.  The
    -- clink.promptcoroutine() call returns nil immediately, and the
    -- coroutine runs in the background.  After the coroutine finishes, prompt
    -- filtering is triggered again, and subsequent clink.promptcoroutine()
    -- calls from this prompt filter immediately return whatever the
    -- collect_git_info() function returned when it completed.  When a new input
    -- line begins, the coroutine results are reset to nil to allow new results.
    local info = clink.promptcoroutine(collect_git_info)
    -- If no status yet, use the status from the previous prompt.
    if info == nil then
        info = prev_info or {}
    else
        prev_info = info
    end

    -- Prefer using the branch name from git.getstatus(), once it&#39;s available.
    if info.status and info.status.branch then
        branch = info.status.branch
    end

    -- Choose color for the git branch name.:  green if status is clean, yellow
    -- if status is not clean, red if conflict is present, or default color if
    -- status isn&#39;t known yet.
    local sgr
    if not info.status then
        sgr = &quot;39&quot;          -- Default color when status not available yet.
    elseif info.status.conflict then
        sgr = &quot;31;1&quot;        -- Red when conflict.
    elseif info.status.dirty then
        sgr = &quot;33;1&quot;        -- Yellow when dirty (changes are present).
    else
        sgr = &quot;32;1&quot;        -- Green when status is clean.
    end

    -- Prefix the prompt with &quot;[branch]&quot; using the status color.
    -- NOTE:  This is for illustration purposes and works when no other custom
    -- prompt filters are installed.  If another custom prompt filter is present
    -- and runs earlier and chooses to halt further prompt filtering, then this
    -- example code might not get reached.
    return &quot;\x1b[&quot;..sgr..&quot;m[&quot;..branch..&quot;]\x1b[m  &quot;..prompt
end
</code></pre>
<p><a name="transientprompts"></a></p>
<h4 id="transient-prompt"><a class="wlink" href="#transientprompts"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Transient Prompt <span class="uplinks"><a href="#more-advanced-stuff-3">up</a> <a href="#toc">top</a></span></h4>
<p>Clink can replace a past prompt with a differently formatted &quot;transient&quot; prompt.  For example, if your normal prompt contains many bits of information that don&#39;t need to be seen later, then it may be desirable to replace past prompts with a simpler prompt.  Or it may be useful to update the timestamp in a prompt to indicate when the prompt was completed, rather than when it was first shown.</p>
<p>The <code>%CLINK_TRANSIENT_PROMPT%</code> environment variable provides the initial prompt string for the transient prompt.</p>
<p>Turn on the transient prompt with <code>clink set <a href="#prompt_transient">prompt.transient</a> always</code>.  Or use <code>same_dir</code> instead of <code>always</code> to only use a transient prompt when the current directory is the same as the previous prompt.</p>
<p>The transient prompt can be customized by a prompt filter:</p>
<ol>
<li>Create a new prompt filter by calling <a href="#clink.promptfilter">clink.promptfilter()</a> along with a priority id which dictates the order in which filters are called. Lower priority ids are called first.</li>
<li>Define a <code>:transientfilter()</code> function on the returned prompt filter.</li>
</ol>
<p>The transient filter function takes a string argument that contains the filtered prompt so far.</p>
<p>If the filter function returns nil, it has no effect.  If the filter function returns a string, that string is used as the new filtered prompt (and may be further modified by other prompt filters with higher priority ids).  If the filter function returns a string and a boolean, then if the boolean is false the prompt filtering is done and no further filter functions are called.</p>
<p>A transient right side prompt is also possible (similar to the usual <a href="#rightprompt">right side prompt</a>).  The <code>%CLINK_TRANSIENT_RPROMPT%</code> environment variable (note the <code>R</code> in <code>_RPROMPT</code>) provides the initial prompt string for the transient right side prompt, which can be customized by a <code>:transientrightfilter()</code> function on a prompt filter.</p>
<p>A prompt filter must have a <code>:filter()</code> function defined on it, and may in addition have any combination of <code>:rightfilter()</code>, <code>:transientfilter()</code>, and <code>:transientrightfilter()</code> functions defined on it.</p>
<blockquote>
<p><strong>Related:</strong>  The <a href="#prompt_spacing">prompt.spacing</a> setting can optionally remove blank lines before the prompt, and can optionally insert one blank line before the normal (non-transient) prompt.</p>
</blockquote>
<p>The next example shows how to make a prompt that shows:</p>
<ol>
<li>The current directory and <code>&gt;</code> on the left, and the date and time on the right.</li>
<li>Just <code>&gt; </code> on the left, for past commands.</li>
</ol>
<pre><code class="language-lua">-- Colors for the prompt strings.
local cwd_color  = &quot;\x1b[0;1;37;44m&quot;
local symbol_color = &quot;\x1b[0;1;34m&quot;
local date_color = &quot;\x1b[0;36m&quot;
local transient_date_color = &quot;\x1b[0;1;30m&quot;
local normal = &quot;\x1b[m&quot;

-- Create prompt filter.
local pf = clink.promptfilter(10)

-- Customize the normal prompt.
function pf:filter(prompt)
    -- Don&#39;t return false yet; let rightfilter have a chance.
    return cwd_color..&quot; &quot;..os.getcwd()..&quot; &quot;..symbol_color..&quot; &gt; &quot;..normal
end

-- Customize the normal right side prompt.
function pf:rightfilter(prompt)
    -- If you have want stop further filtering, this is where to add returning false.
    return date_color..os.date()    --, false
end

-- Customize the transient prompt.
function pf:transientfilter(prompt)
    -- Don&#39;t return false yet; let transientrightfilter have a chance.
    return symbol_color..&quot;&gt; &quot;..normal
end

-- Customize the transient right side prompt.
function pf:transientrightfilter(prompt)
    -- Returns false to stop filtering.
    return transient_date_color..os.date(&quot;%c&quot;, os.time()), false
end

-- Show a reminder to turn on the transient prompt, to try out the example.
if settings.get(&quot;prompt.transient&quot;) == &quot;off&quot; then
    print(&quot;Use &#39;clink set prompt.transient same_dir&#39; to enable the transient prompt.&quot;)
end
</code></pre>
<blockquote>
<p><strong>Note:</strong>  In v1.4.25 and higher, the <code>:transientfilter()</code> or <code>:transientrightfilter()</code> functions can suppress the transient prompt on a case by case basis by returning <code>nil, false</code>.</p>
</blockquote>
<p><a name="pfxsfxesccodes"></a></p>
<h4 id="prefix-and-suffix-escape-codes"><a class="wlink" href="#pfxsfxesccodes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Prefix and Suffix Escape Codes <span class="uplinks"><a href="#more-advanced-stuff-3">up</a> <a href="#toc">top</a></span></h4>
<p>In some cases the prompt and/or right side prompt might need to be surrounded with special escape codes.  For example, some file editors with integrated terminals want to receive additional escape codes surrounding the prompt strings.</p>
<p>After all prompt filters have finished, the last line of the final prompt string is automatically surrounded with the values of the <code>%CLINK_PROMPT_PREFIX%</code> and <code>%CLINK_PROMPT_SUFFIX%</code> environment variables, and the final right side prompt is automatically surrounded with the values of the <code>%CLINK_RPROMPT_PREFIX%</code> and <code>%CLINK_RPROMPT_SUFFIX%</code> environment variables.</p>
<p>The prompt prefix and suffix strings expand CMD prompt <code>$</code> codes (run <code>prompt /?</code> for more info).  So, for example, <code>$p</code> could be combined with escape codes to set the terminal window title to the current working directory.  Consult documentation for your terminal program for information about what escape codes may be available.</p>
<p>Additionally, individual prompt filters may want to add escape codes surrounding the prompt strings.  To do that, a prompt filter can define a <code>:surround()</code> function which returns prefix and suffix strings.</p>
<pre><code class="language-lua">local p = clink.promptfilter(-100) -- Negative number so it runs early.
function p:filter(prompt)
    -- The :filter() function must be defined.  But if the prompt filter is
    -- only interested in surrounding the prompt with escape codes, then the
    -- :filter() function may do nothing.
end
function p:surround()
    -- For the normal (left side) prompt.
    local prompt_prefix  = &quot;&quot;   -- Fill this in with escape codes to be printed before the prompt text.
    local prompt_suffix  = &quot;&quot;   -- Fill this in with escape codes to be printed after the prompt text.
    -- For the right side prompt (if any).
    local rprompt_prefix = &quot;&quot;   -- Fill this in with escape codes to be printed before the right side prompt text.
    local rprompt_suffix = &quot;&quot;   -- Fill this in with escape codes to be printed after the right side prompt text.
    return prompt_prefix, prompt_suffix, rprompt_prefix, rprompt_suffix
end
</code></pre>
<blockquote>
<p><strong>Notes:</strong></p>
<ul>
<li>The prefix and suffix strings should only contain escape code strings.  Any printable text in the prefix and suffix strings could have unintended effects on displaying the prompt.</li>
<li>Only the last line of the final prompt string is surrounded with the prefix and suffix.  This is intended to help shell integration escape codes work properly.</li>
</ul>
</blockquote>
<p><a name="customisingsuggestions"></a></p>
<h2 id="customizing-suggestions"><a class="wlink" href="#customisingsuggestions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Customizing Suggestions <span class="uplinks"><a href="#extending-clink">up</a> <a href="#toc">top</a></span></h2>
<p>Clink can offer suggestions how to complete a command as you type, and you can select how it generates suggestions.</p>
<p>Turn on <a href="#autosuggest_enable">automatic suggestions</a> with <code>clink set <a href="#autosuggest_enable">autosuggest.enable</a> true</code>.  Once enabled, Clink will show suggestions in a <a href="#color.suggestion">muted color</a> after the end of the typed command.  Insert the whole suggestion with the <kbd>Right</kbd> arrow or <kbd>End</kbd> key, insert the next word of the suggestion with <kbd>Ctrl</kbd>-<kbd>Right</kbd>, or insert the next full word of the suggestion up to a space with <kbd>Shift</kbd>-<kbd>Right</kbd>.  You can ignore the suggestion if it isn&#39;t what you want; suggestions have no effect unless you insert them.</p>
<p>Scripts can provide custom suggestion generators, in addition to the built-in options:</p>
<ol>
<li>Create a new suggestion generator by calling <a href="#clink.suggester">clink.suggester()</a> along with a name that identifies the suggestion generator, and can be added to the <code><a href="#autosuggest_strategy">autosuggest.strategy</a></code> setting.</li>
<li>Define a <code>:suggest()</code> function on the returned suggestion generator.</li>
</ol>
<p>The function takes a <a href="#line_state">line_state</a> argument that contains the input line, and a <a href="#matches">matches</a> argument that contains the possible matches from the completion engine.</p>
<p>If the function returns nil, the next generator listed in the strategy is called.  If the function returns a string (even an empty string), then the string is used as the suggestion.  The function can optionally return a string and an offset to where the suggestion begins in the input line.  This makes it easier to return suggestions in some cases, and also makes it possible to update the capitalization of the whole inserted suggestion (even the part that&#39;s already been typed).</p>
<p>This example illustrates how to make a suggestion generator that returns the longest common prefix of the possible matches.</p>
<pre><code class="language-lua">local prefix_suggestor = clink.suggester(&quot;completion_prefix&quot;)

function prefix_suggestor:suggest(line_state, matches)
    -- If the input line is empty or only spaces, don&#39;t suggest anything.
    if not line_state:getline():match(&quot;[^ ]&quot;) then
        return
    end

    -- If there is no common prefix, don&#39;t suggest anything.
    local prefix = matches:getprefix()
    if prefix == &quot;&quot; then
        return
    end

    -- Return the common prefix as the suggestion.
    local info = line_state:getwordinfo(line_state:getwordcount())
    return prefix, info.offset
end
</code></pre>
<p><a name="showinginputhints"></a></p>
<h2 id="showing-input-hints"><a class="wlink" href="#showinginputhints"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Showing Input Hints <span class="uplinks"><a href="#extending-clink">up</a> <a href="#toc">top</a></span></h2>
<p>Clink can show contextual input hints while you type.  Lua scripts can provide input hints.  When a hint is available, it&#39;s shown in the comment row (below the input line).  For example:</p>
<pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"><span class="color_default">C:\dir><span class="color_argmatcher">foo</span> <span class="cursor">_</span></span>
<span class="color_comment_row">Argument expected:  filename</span>
</code></pre>

<p>To use this, Clink v1.7.0 or higher is required.</p>
<p>To turn on input hints, run <code>clink set <a href="#comment_row_show_hints">comment_row.show_hints</a> true</code>.  Lua scripts can add hinters to do things like show the value of an environment variable under the cursor, or show the value of a doskey macro, or show a hint about what kind of argument a command expects to be entered next, or other things.  The <a href="https://github.com/chrisant996/clink-gizmos">clink-gizmos</a> repo has some scripts that add hinters.</p>
<p>Scripts can provide custom input hint generators:</p>
<ol>
<li>Create a new hint generator by calling <a href="#clink.hinter">clink.hinter()</a> along with an optional priority id which dictates the order in which hinters are called. Lower priority ids are called first.</li>
<li>Define a <code>:gethint()</code> function on the returned hint generator.</li>
</ol>
<p>The function takes a <a href="#line_state">line_state</a> argument that contains the input line.</p>
<p>If the function returns nil, the next hint generator is called.  If the function returns a string (even an empty string), then the string is used as a hint candidate.  The function can optionally return a string and a position in the line text where the hint refers to (for example, the offset to the beginning of a word).  The hint string with the highest position not exceeding the cursor position is used as the &quot;best hint&quot; (if a hint is returned without a position, then the beginning of the line is assumed).</p>
<blockquote>
<p><strong>Note:</strong> The <code>:gethint</code> callback function is called very often, so it needs to be very fast or it can cause responsiveness problems while typing.</p>
</blockquote>
<p>This example illustrates how to make an input hint generator that shows the offset of the start of the word under the cursor.</p>
<pre><code class="language-lua">local hinter = clink.hinter()

function hinter:gethint(line_state)
    local h, p
    local cursorpos = line_state:getcursor()
    for i = 1, line_state:getwordcount() do
        local info = line_state:getwordinfo(i)
        if info.offset &lt;= cursorpos and cursorpos &lt;= info.offset + info.length then
            h = string.format(&quot;word starts at %d&quot;, info.offset)
            p = info.offset
        end
    end
    return h, p
end
</code></pre>
<h1 id="miscellaneous"><a class="wlink" href="#miscellaneous"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Miscellaneous <span class="uplinks"><a href="#toc">top</a></span></h1>
<p>These sections provide more information about various aspects of Clink:</p>
<table class="linkmenu">
<tr><td><a href="#keybindings">Customizing Key Bindings</a></td><td>How to customize key bindings.</td></tr>
<tr><td><a href="#saved-command-history">Saved Command History</a></td><td>How the saved command history works.</td></tr>
<tr><td><a href="#using-history-expansion">Using History Expansion</a></td><td>How to use history expansion.</td></tr>
<tr><td><a href="#directory-shortcuts">Directory Shortcuts</a></td><td>Convenient shortcuts for changing the current directory.</td></tr>
<tr><td><a href="#enhanced-doskey-expansion">Enhanced Doskey Expansion</a></td><td>How enhanced Doskey expansion works.</td></tr>
<tr><td><a href="#popular-scripts">Popular Scripts</a></td><td>Some popular scripts to enhance Clink.</td></tr>
<tr><td><a href="#terminal-support">Terminal Support</a></td><td>Information about how Clink's terminal support works.</td></tr>
<tr><td><a href="#how-clink-works">How Clink Works</a></td><td>Technical details about how Clink injects into cmd.exe.</td></tr>
<tr><td><a href="#troubleshooting-tips">Troubleshooting Tips</a></td><td>How to troubleshoot and report problems.</td></tr>
<tr><td><a href="#privacy">Privacy</a></td><td>Privacy statement for Clink.</td></tr>
</table>

<p><a name="keybindings"></a></p>
<h2 id="customizing-key-bindings"><a class="wlink" href="#keybindings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Customizing Key Bindings <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>Key bindings are defined in .inputrc files.</p>
<p>The <a href="#rlcmd-clink-show-help"><code>clink-show-help</code></a> command is bound to <kbd>Alt</kbd>-<kbd>H</kbd> and lists all currently active key bindings.  The list displays &quot;friendly&quot; key names, and these names are generally not suitable for use in .inputrc files.  For example &quot;Up&quot; is the friendly name for <code>&quot;\e[A&quot;</code>, and &quot;A-C-F2&quot; is the friendly name for <code>&quot;\e\e[1;5Q&quot;</code>.  To see key sequence strings suitable for use in .inputrc files use <code>clink echo</code> as described below.</p>
<table class="linkmenu">
<tr><td><a href="#the-inputrc-file">The .inputrc file</a></td><td>Where to find the .inputrc file, and more information about it.</td></tr>
<tr><td><a href="#discoverkeysequences">Discovering Clink key sequences</a></td><td>How to find key names to use for key bindings.</td></tr>
<tr><td><a href="#specialkeys">Binding special keys</a></td><td>A table of special key names.</td></tr>
<tr><td><a href="#luakeybindings">Lua key bindings</a></td><td>How to bind keys to Lua functions.</td></tr>
<tr><td><a href="#nometakey">I do not have a Meta or <kbd>Alt</kbd> key</a></td><td>What to do if your keyboard doesn't have any <kbd>Alt</kbd> or Meta keys.</td></tr>
</table>

<h3 id="the-inputrc-file"><a class="wlink" href="#the-inputrc-file"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The .inputrc file <span class="uplinks"><a href="#keybindings">up</a> <a href="#toc">top</a></span></h3>
<p>You can use <code>clink info</code> to find the directories and configuration files for the current Clink session, including where the .inputrc file is located, or can be located.  See the <a href="#init-file">Readline Init File</a> section for detailed information about .inputrc files.</p>
<blockquote>
<p><strong>Note:</strong> Third party console hosts such as ConEmu may have their own key bindings that supersede Clink.  They usually have documentation for how to change or disable their key bindings to allow console programs to handle the keys instead.</p>
</blockquote>
<p><a name="discoverkeysequences"></a></p>
<h3 id="discovering-clink-key-sequences"><a class="wlink" href="#discoverkeysequences"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Discovering Clink key sequences <span class="uplinks"><a href="#keybindings">up</a> <a href="#toc">top</a></span></h3>
<p>Clink provides an easy way to find the key sequence for any key combination that Clink supports. Run <code>clink echo</code> and then press key combinations; the associated key binding sequence is printed to the console output and can be used for a key binding in the inputrc file.</p>
<p>A chord can be formed by concatenating multiple key binding sequences. For example, <code>&quot;\C-X&quot;</code> and <code>&quot;\e[H&quot;</code> can be concatenated to form <code>&quot;\C-X\e[H&quot;</code> representing the chord <kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Home</kbd>.</p>
<p>When finished, press <kbd>Ctrl</kbd>-<kbd>C</kbd> to exit from <code>clink echo</code>.</p>
<blockquote>
<p><strong>Note:</strong> With non-US keyboard layouts, <code>clink echo</code> is not able to ignore dead key input (accent keys, for example).  It prints the key sequence for the dead key itself, which is not useful.  You can ignore that and press the next key, and then it prints the correct key sequence to use in key bindings.</p>
</blockquote>
<p><a name="specialkeys"></a></p>
<h3 id="binding-special-keys"><a class="wlink" href="#specialkeys"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Binding special keys <span class="uplinks"><a href="#keybindings">up</a> <a href="#toc">top</a></span></h3>
<p>Here is a table of the key binding sequences for the special keys.  Clink primarily uses VT220 emulation for keyboard input, but also uses some Xterm extended key sequences.</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">Normal</th>
<th align="center">Shift</th>
<th align="center">Ctrl</th>
<th align="center">Ctrl-Shift</th>
<th align="center">Alt</th>
<th align="center">Alt-Shift</th>
<th align="center">Alt-Ctrl</th>
<th align="center">Alt-Ctrl-Shift</th>
</tr>
</thead>
<tbody><tr>
<td align="center">Up</td>
<td align="center"><code>\e[A</code></td>
<td align="center"><code>\e[1;2A</code></td>
<td align="center"><code>\e[1;5A</code></td>
<td align="center"><code>\e[1;6A</code></td>
<td align="center"><code>\e[1;3A</code></td>
<td align="center"><code>\e[1;4A</code></td>
<td align="center"><code>\e[1;7A</code></td>
<td align="center"><code>\e[1;8A</code></td>
</tr>
<tr>
<td align="center">Down</td>
<td align="center"><code>\e[B</code></td>
<td align="center"><code>\e[1;2B</code></td>
<td align="center"><code>\e[1;5B</code></td>
<td align="center"><code>\e[1;6B</code></td>
<td align="center"><code>\e[1;3B</code></td>
<td align="center"><code>\e[1;4B</code></td>
<td align="center"><code>\e[1;7B</code></td>
<td align="center"><code>\e[1;8B</code></td>
</tr>
<tr>
<td align="center">Left</td>
<td align="center"><code>\e[D</code></td>
<td align="center"><code>\e[1;2D</code></td>
<td align="center"><code>\e[1;5D</code></td>
<td align="center"><code>\e[1;6D</code></td>
<td align="center"><code>\e[1;3D</code></td>
<td align="center"><code>\e[1;4D</code></td>
<td align="center"><code>\e[1;7D</code></td>
<td align="center"><code>\e[1;8D</code></td>
</tr>
<tr>
<td align="center">Right</td>
<td align="center"><code>\e[C</code></td>
<td align="center"><code>\e[1;2C</code></td>
<td align="center"><code>\e[1;5C</code></td>
<td align="center"><code>\e[1;6C</code></td>
<td align="center"><code>\e[1;3C</code></td>
<td align="center"><code>\e[1;4C</code></td>
<td align="center"><code>\e[1;7C</code></td>
<td align="center"><code>\e[1;8C</code></td>
</tr>
<tr>
<td align="center">Insert</td>
<td align="center"><code>\e[2~</code></td>
<td align="center"><code>\e[2;2~</code></td>
<td align="center"><code>\e[2;5~</code></td>
<td align="center"><code>\e[2;6~</code></td>
<td align="center"><code>\e[2;3~</code></td>
<td align="center"><code>\e[2;4~</code></td>
<td align="center"><code>\e[2;7~</code></td>
<td align="center"><code>\e[2;8~</code></td>
</tr>
<tr>
<td align="center">Delete</td>
<td align="center"><code>\e[3~</code></td>
<td align="center"><code>\e[3;2~</code></td>
<td align="center"><code>\e[3;5~</code></td>
<td align="center"><code>\e[3;6~</code></td>
<td align="center"><code>\e[3;3~</code></td>
<td align="center"><code>\e[3;4~</code></td>
<td align="center"><code>\e[3;7~</code></td>
<td align="center"><code>\e[3;8~</code></td>
</tr>
<tr>
<td align="center">Home</td>
<td align="center"><code>\e[H</code></td>
<td align="center"><code>\e[1;2H</code></td>
<td align="center"><code>\e[1;5H</code></td>
<td align="center"><code>\e[1;6H</code></td>
<td align="center"><code>\e[1;3H</code></td>
<td align="center"><code>\e[1;4H</code></td>
<td align="center"><code>\e[1;7H</code></td>
<td align="center"><code>\e[1;8H</code></td>
</tr>
<tr>
<td align="center">End</td>
<td align="center"><code>\e[F</code></td>
<td align="center"><code>\e[1;2F</code></td>
<td align="center"><code>\e[1;5F</code></td>
<td align="center"><code>\e[1;6F</code></td>
<td align="center"><code>\e[1;3F</code></td>
<td align="center"><code>\e[1;4F</code></td>
<td align="center"><code>\e[1;7F</code></td>
<td align="center"><code>\e[1;8F</code></td>
</tr>
<tr>
<td align="center">PgUp</td>
<td align="center"><code>\e[5~</code></td>
<td align="center"><code>\e[5;2~</code></td>
<td align="center"><code>\e[5;5~</code></td>
<td align="center"><code>\e[5;6~</code></td>
<td align="center"><code>\e[5;3~</code></td>
<td align="center"><code>\e[5;4~</code></td>
<td align="center"><code>\e[5;7~</code></td>
<td align="center"><code>\e[5;8~</code></td>
</tr>
<tr>
<td align="center">PgDn</td>
<td align="center"><code>\e[6~</code></td>
<td align="center"><code>\e[6;2~</code></td>
<td align="center"><code>\e[6;5~</code></td>
<td align="center"><code>\e[6;6~</code></td>
<td align="center"><code>\e[6;3~</code></td>
<td align="center"><code>\e[6;4~</code></td>
<td align="center"><code>\e[6;7~</code></td>
<td align="center"><code>\e[6;8~</code></td>
</tr>
<tr>
<td align="center">Tab</td>
<td align="center"><code>\t</code></td>
<td align="center"><code>\e[Z</code></td>
<td align="center"><code>\e[27;5;9~</code></td>
<td align="center"><code>\e[27;6;9~</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center">-</td>
</tr>
<tr>
<td align="center">Space</td>
<td align="center"><code>Space</code></td>
<td align="center"><code>\e[27;2;32~</code></td>
<td align="center"><code>\e[27;5;32~</code></td>
<td align="center"><code>\e[27;6;32~</code></td>
<td align="center">-</td>
<td align="center">-</td>
<td align="center"><code>\e[27;7;32~</code></td>
<td align="center"><code>\e[27;8;32~</code></td>
</tr>
<tr>
<td align="center">Backspace</td>
<td align="center"><code>^h</code></td>
<td align="center"><code>\e[27;2;8~</code></td>
<td align="center"><code>Rubout</code></td>
<td align="center"><code>\e[27;6;8~</code></td>
<td align="center"><code>\e^h</code></td>
<td align="center"><code>\e[27;4;8~</code></td>
<td align="center"><code>\eRubout</code></td>
<td align="center"><code>\e[27;8;8~</code></td>
</tr>
<tr>
<td align="center">F1</td>
<td align="center"><code>\eOP</code></td>
<td align="center"><code>\e[1;2P</code></td>
<td align="center"><code>\e[1;5P</code></td>
<td align="center"><code>\e[1;6P</code></td>
<td align="center"><code>\e\eOP</code></td>
<td align="center"><code>\e\e[1;2P</code></td>
<td align="center"><code>\e\e[1;5P</code></td>
<td align="center"><code>\e\e[1;6P</code></td>
</tr>
<tr>
<td align="center">F2</td>
<td align="center"><code>\eOQ</code></td>
<td align="center"><code>\e[1;2Q</code></td>
<td align="center"><code>\e[1;5Q</code></td>
<td align="center"><code>\e[1;6Q</code></td>
<td align="center"><code>\e\eOQ</code></td>
<td align="center"><code>\e\e[1;2Q</code></td>
<td align="center"><code>\e\e[1;5Q</code></td>
<td align="center"><code>\e\e[1;6Q</code></td>
</tr>
<tr>
<td align="center">F3</td>
<td align="center"><code>\eOR</code></td>
<td align="center"><code>\e[1;2R</code></td>
<td align="center"><code>\e[1;5R</code></td>
<td align="center"><code>\e[1;6R</code></td>
<td align="center"><code>\e\eOR</code></td>
<td align="center"><code>\e\e[1;2R</code></td>
<td align="center"><code>\e\e[1;5R</code></td>
<td align="center"><code>\e\e[1;6R</code></td>
</tr>
<tr>
<td align="center">F4</td>
<td align="center"><code>\eOS</code></td>
<td align="center"><code>\e[1;2S</code></td>
<td align="center"><code>\e[1;5S</code></td>
<td align="center"><code>\e[1;6S</code></td>
<td align="center"><code>\e\eOS</code></td>
<td align="center"><code>\e\e[1;2S</code></td>
<td align="center"><code>\e\e[1;5S</code></td>
<td align="center"><code>\e\e[1;6S</code></td>
</tr>
<tr>
<td align="center">F5</td>
<td align="center"><code>\e[15~</code></td>
<td align="center"><code>\e[15;2~</code></td>
<td align="center"><code>\e[15;5~</code></td>
<td align="center"><code>\e[15;6~</code></td>
<td align="center"><code>\e\e[15~</code></td>
<td align="center"><code>\e\e[15;2~</code></td>
<td align="center"><code>\e\e[15;5~</code></td>
<td align="center"><code>\e\e[15;6~</code></td>
</tr>
<tr>
<td align="center">F6</td>
<td align="center"><code>\e[17~</code></td>
<td align="center"><code>\e[17;2~</code></td>
<td align="center"><code>\e[17;5~</code></td>
<td align="center"><code>\e[17;6~</code></td>
<td align="center"><code>\e\e[17~</code></td>
<td align="center"><code>\e\e[17;2~</code></td>
<td align="center"><code>\e\e[17;5~</code></td>
<td align="center"><code>\e\e[17;6~</code></td>
</tr>
<tr>
<td align="center">F7</td>
<td align="center"><code>\e[18~</code></td>
<td align="center"><code>\e[18;2~</code></td>
<td align="center"><code>\e[18;5~</code></td>
<td align="center"><code>\e[18;6~</code></td>
<td align="center"><code>\e\e[18~</code></td>
<td align="center"><code>\e\e[18;2~</code></td>
<td align="center"><code>\e\e[18;5~</code></td>
<td align="center"><code>\e\e[18;6~</code></td>
</tr>
<tr>
<td align="center">F8</td>
<td align="center"><code>\e[19~</code></td>
<td align="center"><code>\e[19;2~</code></td>
<td align="center"><code>\e[19;5~</code></td>
<td align="center"><code>\e[19;6~</code></td>
<td align="center"><code>\e\e[19~</code></td>
<td align="center"><code>\e\e[19;2~</code></td>
<td align="center"><code>\e\e[19;5~</code></td>
<td align="center"><code>\e\e[19;6~</code></td>
</tr>
<tr>
<td align="center">F9</td>
<td align="center"><code>\e[20~</code></td>
<td align="center"><code>\e[20;2~</code></td>
<td align="center"><code>\e[20;5~</code></td>
<td align="center"><code>\e[20;6~</code></td>
<td align="center"><code>\e\e[20~</code></td>
<td align="center"><code>\e\e[20;2~</code></td>
<td align="center"><code>\e\e[20;5~</code></td>
<td align="center"><code>\e\e[20;6~</code></td>
</tr>
<tr>
<td align="center">F10</td>
<td align="center"><code>\e[21~</code></td>
<td align="center"><code>\e[21;2~</code></td>
<td align="center"><code>\e[21;5~</code></td>
<td align="center"><code>\e[21;6~</code></td>
<td align="center"><code>\e\e[21~</code></td>
<td align="center"><code>\e\e[21;2~</code></td>
<td align="center"><code>\e\e[21;5~</code></td>
<td align="center"><code>\e\e[21;6~</code></td>
</tr>
<tr>
<td align="center">F11</td>
<td align="center"><code>\e[23~</code></td>
<td align="center"><code>\e[23;2~</code></td>
<td align="center"><code>\e[23;5~</code></td>
<td align="center"><code>\e[23;6~</code></td>
<td align="center"><code>\e\e[23~</code></td>
<td align="center"><code>\e\e[23;2~</code></td>
<td align="center"><code>\e\e[23;5~</code></td>
<td align="center"><code>\e\e[23;6~</code></td>
</tr>
<tr>
<td align="center">F12</td>
<td align="center"><code>\e[24~</code></td>
<td align="center"><code>\e[24;2~</code></td>
<td align="center"><code>\e[24;5~</code></td>
<td align="center"><code>\e[24;6~</code></td>
<td align="center"><code>\e\e[24~</code></td>
<td align="center"><code>\e\e[24;2~</code></td>
<td align="center"><code>\e\e[24;5~</code></td>
<td align="center"><code>\e\e[24;6~</code></td>
</tr>
</tbody></table>
<p>When the <a href="#terminal_differentiate_keys"><code>terminal.differentiate_keys</code></a> setting is enabled then the following key bindings are also available:</p>
<table>
<thead>
<tr>
<th align="center"></th>
<th align="center">Ctrl</th>
<th align="center">Ctrl-Shift</th>
<th align="center">Alt</th>
<th align="center">Alt-Shift</th>
<th align="center">Alt-Ctrl</th>
<th align="center">Alt-Ctrl-Shift</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><code>H</code></td>
<td align="center"><code>\e[27;5;72~</code></td>
<td align="center"><code>\e[27;6;72~</code></td>
<td align="center"><code>\eh</code></td>
<td align="center"><code>\eH</code></td>
<td align="center"><code>\e[27;7;72~</code></td>
<td align="center"><code>\e[27;8;72~</code></td>
</tr>
<tr>
<td align="center"><code>I</code></td>
<td align="center"><code>\e[27;5;73~</code></td>
<td align="center"><code>\e[27;6;73~</code></td>
<td align="center"><code>\ei</code></td>
<td align="center"><code>\eI</code></td>
<td align="center"><code>\e[27;7;73~</code></td>
<td align="center"><code>\e[27;8;73~</code></td>
</tr>
<tr>
<td align="center"><code>M</code></td>
<td align="center"><code>\e[27;5;77~</code></td>
<td align="center"><code>\e[27;6;77~</code></td>
<td align="center"><code>\em</code></td>
<td align="center"><code>\eM</code></td>
<td align="center"><code>\e[27;7;77~</code></td>
<td align="center"><code>\e[27;8;77~</code></td>
</tr>
<tr>
<td align="center"><code>[</code></td>
<td align="center"><code>\e[27;5;219~</code></td>
<td align="center"><code>\e[27;6;219~</code></td>
<td align="center"><code>\e[27;3;219~</code></td>
<td align="center"><code>\e[27;4;219~</code></td>
<td align="center"><code>\e[27;7;219~</code></td>
<td align="center"><code>\e[27;8;219~</code></td>
</tr>
</tbody></table>
<p>The <a href="#terminal_raw_esc"><code>terminal.raw_esc</code></a> setting controls the binding sequence for the <kbd>Esc</kbd> key and a couple of other keys:</p>
<table>
<thead>
<tr>
<th align="left"><code>terminal.raw_esc</code> Setting Value</th>
<th>Esc</th>
<th>Alt-[</th>
<th>Alt-Shift-O</th>
</tr>
</thead>
<tbody><tr>
<td align="left">False (the default)</td>
<td><code>\e[27;27~</code></td>
<td><code>\e[27;3;91~</code></td>
<td><code>\e[27;4;79~</code></td>
</tr>
<tr>
<td align="left">True (replicate Unix terminal input quirks and issues)</td>
<td><code>\e</code></td>
<td><code>\e[</code></td>
<td><code>\eO</code></td>
</tr>
</tbody></table>
<p><a name="luakeybindings"></a></p>
<h3 id="lua-key-bindings"><a class="wlink" href="#luakeybindings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Lua key bindings <span class="uplinks"><a href="#keybindings">up</a> <a href="#toc">top</a></span></h3>
<p>You can bind a key to a <a href="#extending-clink">Lua</a> function by <a href="#keybindings">binding</a> it to a macro that begins with &quot;luafunc:&quot;.  Clink will invoke the named Lua function when the key binding is input.  Function names can include periods (such as <code>foo.bar</code>) but cannot include any other punctuation.</p>
<p>The Lua function receives two arguments:</p>
<p><span class="arg"><a href="#rl_buffer">rl_buffer</a></span> gives it access to the input buffer.</p>
<p><span class="arg"><a href="#line_state">line_state</a></span> gives it access to the same line state that a <a href="#match-generators">match generator</a> receives.</p>
<p>Lua functions can print output, but should first call <a href="#rl_buffer:beginoutput">rl_buffer:beginoutput()</a> so that the output doesn&#39;t overwrite the displayed input line.</p>
<blockquote>
<p><strong>Notes:</strong></p>
<ul>
<li>The <span class="arg">line_state</span> is nil if not using Clink v1.2.34 or higher.</li>
<li>The end word is always empty for generators.  So to get the word at the cursor use:<pre><code class="language-lua">local info = line_state:getwordinfo(line_state:getwordcount())
local word_at_cursor = line_state:getline():sub(info.offset, line_state:getcursor())
</code></pre>
</li>
</ul>
</blockquote>
<h4 id="basic-example"><a class="wlink" href="#basic-example"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Basic example <span class="uplinks"><a href="#luakeybindings">up</a> <a href="#toc">top</a></span></h4>
<p>Example of a Lua function key binding in a .inputrc file:</p>
<pre><code class="plaintext">M-C-y:          <span class="hljs-string">"luafunc:insert_date"</span>
M-C-z:          <span class="hljs-string">"luafunc:print_date"</span>
</code></pre>

<p>Example functions to go with that:</p>
<pre><code class="language-lua">function insert_date(rl_buffer)
    rl_buffer:insert(os.date(&quot;%x %X&quot;))
end

function print_date(rl_buffer)
    rl_buffer:beginoutput()
    print(os.date(&quot;%A %B %d, %Y   %I:%M %p&quot;))
end
</code></pre>
<h4 id="example-to-change-how-auto-suggested-text-is-inserted"><a class="wlink" href="#example-to-change-how-auto-suggested-text-is-inserted"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Example to change how auto-suggested text is inserted <span class="uplinks"><a href="#luakeybindings">up</a> <a href="#toc">top</a></span></h4>
<p>This example creates new commands that change <kbd>Right</kbd> and <kbd>Shift</kbd>-<kbd>Right</kbd> to swap how they behave when auto-suggested text is present.  It also uses Lua to add descriptions for the new commands, and to set key bindings.</p>
<pre><code class="language-lua">function cursor_forward_or_insert_full_word(rl_buffer)
    local at_end = (rl_buffer:getcursor() &gt; rl_buffer:getlength())
    local command = at_end and &quot;clink-insert-suggested-full-word&quot; or &quot;win-cursor-forward&quot;
    rl.invokecommand(command)
end
rl.describemacro([[&quot;luafunc:cursor_forward_or_insert_full_word&quot;]], &quot;Move cursor forward, or at end of line insert the next full suggested word up to a space&quot;)
rl.setbinding([[&quot;\e[C&quot;]], [[&quot;luafunc:cursor_forward_or_insert_full_word&quot;]])

function cua_forward_char_or_insert_line(rl_buffer)
    local at_end = (rl_buffer:getcursor() &gt; rl_buffer:getlength())
    local command = at_end and &quot;clink-insert-suggested-line&quot; or &quot;cua-forward-char&quot;
    rl.invokecommand(command)
end
rl.describemacro([[&quot;luafunc:cua_forward_char_or_insert_line&quot;]], &quot;Extend the selection forward one character, or insert the suggested line&quot;)
rl.setbinding([[&quot;\e[1;2C&quot;]], [[&quot;luafunc:cua_forward_char_or_insert_line&quot;]])
</code></pre>
<h4 id="advanced-example"><a class="wlink" href="#advanced-example"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Advanced example <span class="uplinks"><a href="#luakeybindings">up</a> <a href="#toc">top</a></span></h4>
<p><a name="findlineexample"></a></p>
<p>Here is an example that makes <kbd>F7</kbd>/<kbd>F8</kbd> jump to the previous/next screen line containing &quot;error&quot; or &quot;warn&quot; colored red or yellow, and makes <kbd>Shift</kbd>-<kbd>F7</kbd>/<kbd>Shift</kbd>-<kbd>F8</kbd> jump to the previous/next prompt line.</p>
<p>One way to use these is when reviewing compiler errors after building a project at the command line.  Press <kbd>Shift</kbd>-<kbd>F7</kbd> to jump to the previous prompt line, and then use <kbd>F8</kbd> repeatedly to jump to each next compiler warning or error listed on the screen.</p>
<p>Example key bindings for the .inputrc file:</p>
<pre><code class="plaintext"><span class="hljs-string">"\e[18~"</span>:       <span class="hljs-string">"luafunc:find_prev_colored_line"</span>
<span class="hljs-string">"\e[19~"</span>:       <span class="hljs-string">"luafunc:find_next_colored_line"</span>
<span class="hljs-string">"\e[18;2~"</span>:     <span class="hljs-string">"luafunc:find_prev_prompt"</span>
<span class="hljs-string">"\e[19;2~"</span>:     <span class="hljs-string">"luafunc:find_next_prompt"</span>
</code></pre>

<p>Example functions to go in a Lua script file:</p>
<pre><code class="language-lua">local max_recent_prompts = 10   -- Keep track of up to this many recent prompts.
local min_match_text = 10       -- Minimum length of text to count as a match.

local recent_prompts = {}       -- Queue of recent prompt match strings.
local scroll_stack = {}         -- Stack of found scroll positions.

-- Remember our most recent scroll position, so that if something else scrolls
-- the screen we can reset the find_prev_prompt/find_next_prompt stack.
local was_top

local function add_recent_prompt(text)
    -- Escape characters that have special meaning in regular expressions.
    text = &quot;^&quot;..text:gsub(&quot;([!-/:-@[-`{-~])&quot;, &quot;\\%1&quot;)

    -- Add new entry at the beginning of the queue.
    table.insert(recent_prompts, 1, text)

    -- Discard excess entries from the end of the queue.
    while #recent_prompts &gt; max_recent_prompts do
        table.remove(recent_prompts)
    end
end

local function reset_prompt_scroll_stack()
    was_top = nil
    scroll_stack = {}
end

local function update_recent_prompt_queue()
    -- Offset minus one because onendedit happens after the cursor moves down
    -- past the end of the input area, which skews the info returned from
    -- rl.getpromptinfo().
    local offset = -1
    local info = rl.getpromptinfo()
    local line = info.promptline + offset
    local last_line = console.getnumlines()

    -- Find a long enough string to be considered part of the prompt.
    while line &lt;= last_line do
        local text = console.getlinetext(line)
        text = text:gsub(&quot;%s+$&quot;, &quot;&quot;)
        if #text &gt;= min_match_text then
            add_recent_prompt(text)
            break
        end
        line = line + 1
    end
end

-- Register for events to maintain the scroll stack and recent prompt queue.
clink.onbeginedit(reset_prompt_scroll_stack)
clink.onendedit(update_recent_prompt_queue)

-- Jumps to the previous prompt on the screen (i.e. move upward, searching for
-- preceding recent prompts).
function find_prev_prompt(rl_buffer)
    local height = console.getheight()
    local offset = math.modf((height - 1) / 2)

    local top = console.gettop()
    if was_top and was_top ~= top then
        reset_prompt_scroll_stack()
    end
    if not was_top then
        was_top = top
    end

    if top &lt;= 1 then
        console.scroll(&quot;absolute&quot;, 1)
        return
    end

    -- Init the stack if it&#39;s empty.
    if #scroll_stack == 0 then
        local info = rl.getpromptinfo()
        scroll_stack[1] = info.promptline
    end

    local count = #scroll_stack
    local start = scroll_stack[count] - 1
    local text = recent_prompts[count]

    if not text then
        if count == 1 then
            -- Only ding if there are none; otherwise visual bell will
            -- scroll back to the bottom.
            rl_buffer:ding()
        else
            -- No more recent prompts?  Maintain the scroll position.
            console.scroll(&quot;absolute&quot;, scroll_stack[count] - offset)
            was_top = console.gettop()
        end
        return
    end

    -- Search upwards for the next most recent prompt.
    local match
    repeat
        match = console.findprevline(start, text, &quot;regex&quot;, {})
        if match &lt;= 0 then
            -- Can&#39;t find it?  Maintain the scroll position.
            console.scroll(&quot;absolute&quot;, scroll_stack[count] - offset)
            was_top = console.gettop()
            return
        end
        start = match - 1
    until match - offset &lt; was_top

    -- Add the found prompt to the stack.
    table.insert(scroll_stack, match)

    -- Scroll to the prompt position
    console.scroll(&quot;absolute&quot;, match - offset)
    was_top = console.gettop()
end

-- Jump to the next prompt on the screen (i.e. move downward, backtracking over
-- the prompts already visited by find_prev_prompt).
function find_next_prompt(rl_buffer)
    local height = console.getheight()
    local offset = math.modf((height - 1) / 2)

    -- Pop the last found prompt.  If the stack is empty, ding.
    if #scroll_stack &gt; 0 then
        table.remove(scroll_stack)
    end
    if #scroll_stack == 0 then
        rl_buffer:ding()
        return
    end

    -- Get the scroll position of the next to last found prompt.
    local top = scroll_stack[#scroll_stack] - offset
    if #scroll_stack == 1 then
        -- If it&#39;s the last prompt, pop it to reset the stack.
        top = console.getnumlines()
        table.remove(scroll_stack, #scroll_stack)
    end

    -- Scroll to the prompt position.
    console.scroll(&quot;absolute&quot;, top)
    was_top = console.gettop()
end

-- Searches upwards for a line containing &quot;warn&quot; or &quot;error&quot;
-- colored red or yellow.
function find_prev_colored_line(rl_buffer)
    local height = console.getheight()
    local cur_top = console.gettop()
    local offset = math.modf((height - 1) / 2) -- For vertically centering the found line.
    local start = cur_top + offset
    local found_index

    -- Only search if there&#39;s still room to scroll up.
    if start - offset &gt; 1 then
        local match = console.findprevline(start - 1, &quot;warn|error&quot;, &quot;regex&quot;, {4,12,14}, &quot;fore&quot;)
        if match ~= nil and match &gt; 0 then
            found_index = match
        end
    end

    -- If scrolled up but no more matches, maintain the scroll position.
    if found_index == nil and cur_top &lt;= console.getnumlines() - height then
        found_index = start
    end

    if found_index ~= nil then
        console.scroll(&quot;absolute&quot;, found_index - offset)
    else
        rl_buffer:ding()
    end
end

-- Searches downwards for a line containing &quot;warn&quot; or &quot;error&quot;
-- colored red or yellow.
function find_next_colored_line(rl_buffer)
    local height = console.getheight()
    local cur_top = console.gettop()
    local bottom = console.getnumlines()
    local offset = math.modf((height - 1) / 2) -- For vertically centering the found line.
    local start = cur_top + offset
    local found_index

    if cur_top &gt; bottom - height then
        rl_buffer:ding()
        return
    end

    -- Only search if there&#39;s still room to scroll down.
    if start - offset + height - 1 &lt; bottom then
        local match = console.findnextline(start + 1, &quot;warn|error&quot;, &quot;regex&quot;, {4,12,14}, &quot;fore&quot;)
        if match ~= nil and match &gt; 0 then
            found_index = match
        end
    end

    if found_index ~= nil then
        console.scroll(&quot;absolute&quot;, found_index - offset)
    else
        rl_buffer:ding()
    end
end
</code></pre>
<p><a name="nometakey"></a></p>
<h3 id="i-do-not-have-a-meta-or-alt-key"><a class="wlink" href="#nometakey"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>I do not have a Meta or <kbd>Alt</kbd> key <span class="uplinks"><a href="#keybindings">up</a> <a href="#toc">top</a></span></h3>
<p>If you do not have a Meta or <kbd>Alt</kbd> key, or another key working as a Meta key, there is another way to generate &quot;metafied&quot; keystrokes such as <kbd>M-k</kbd>.</p>
<p>You can configure <code>clink set <a href="#terminal_raw_esc">terminal.raw_esc</a> true</code> to make the <kbd>Esc</kbd> work as it does in Unix and Linux, and then you can type <kbd>Esc</kbd> followed by <kbd>k</kbd>. This is known as &quot;metafying&quot; the <kbd>k</kbd> key.</p>
<p>Clink is a Windows program, and so by default it makes the <kbd>Esc</kbd> key reset the input state, since that&#39;s how <kbd>Esc</kbd> generally works on Windows. When you enable the <a href="#terminal_raw_esc"><code>terminal.raw_esc</code></a> Clink setting, the <kbd>Esc</kbd> key changes its behavior, and pressing unbound special keys can land you in all of the same strange &quot;stuck input&quot; situations as in Unix and Linux.</p>
<p>But it might be more convenient to acquire a keyboard that has an <kbd>Alt</kbd> key.</p>
<h2 id="saved-command-history"><a class="wlink" href="#saved-command-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Saved Command History <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>Clink has a list of commands from the current session, and it can be saved and loaded across sessions.</p>
<p>By prefixing the command you can control whether it&#39;s added to history and whether a doskey alias may be expanded.</p>
<table>
<thead>
<tr>
<th>Line</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>somecmd</code></td>
<td>Can expand a doskey alias and adds to history.</td>
</tr>
<tr>
<td><code>&nbsp;somecmd</code></td>
<td>Starting with a space doesn&#39;t expand a doskey alias and doesn&#39;t add to history.</td>
</tr>
<tr>
<td><code>;somecmd</code></td>
<td>Starting with a semicolon doesn&#39;t expand a doskey alias but does add to history.</td>
</tr>
</tbody></table>
<p>You can list the saved history by running <code>clink history</code> or the <code>history</code> doskey alias that Clink automatically defines.  Use <code>history --help</code> for usage info.</p>
<p>There are several settings that control how history works.  Run <code>clink set history*</code> to see them all (orsee <a href="">here</a>).</p>
<p>Run <code>clink info</code> to find the history file.  See <a href="">File Locations</a> for more information.</p>
<blockquote>
<p><strong>Note:</strong> If the first word in the line matches one of the words in the <a href="#history_dont_add_to_history_cmds"><code>history.dont_add_to_history_cmds</code></a> setting then the command is not added to history.  By default, <code>history</code> and <code>exit</code> are not added to history.</p>
</blockquote>
<p><a name="navigating-through-the-history"></a>
<a name="list-the-history"></a></p>
<h3 id="navigating-through-the-history"><a class="wlink" href="#navigating-through-the-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Navigating through the history <span class="uplinks"><a href="#saved-command-history">up</a> <a href="#toc">top</a></span></h3>
<p>The default key bindings for navigating the history are:</p>
<table>
<thead>
<tr>
<th>Key Binding</th>
<th>Description</th>
<th>Command Name</th>
</tr>
</thead>
<tbody><tr>
<td><kbd>Enter</kbd></td>
<td>Accept the input line and send it to the shell for execution.  The line may be added to the history for future recall.</td>
<td><a href="#rlcmd-accept-line"><code>accept-line</code></a></td>
</tr>
<tr>
<td><kbd>Up</kbd></td>
<td>Move &quot;back&quot; through the history list, fetching the previous command.</td>
<td><a href="#rlcmd-previous-history"><code>previous-history</code></a></td>
</tr>
<tr>
<td><kbd>Down</kbd></td>
<td>Move &quot;forward&quot; through the history list, fetching the next command.</td>
<td><a href="#rlcmd-next-history"><code>next-history</code></a></td>
</tr>
<tr>
<td><kbd>PgUp</kbd></td>
<td>Search backward through the history for entries matching the typed prefix.</td>
<td><a href="#rlcmd-history-search-backward"><code>history-search-backward</code></a></td>
</tr>
<tr>
<td><kbd>PgDn</kbd></td>
<td>Search forward through the history for entries matching the typed prefix.</td>
<td><a href="#rlcmd-history-search-forward"><code>history-search-forward</code></a></td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>R</kbd></td>
<td>Perform an incremental search backward through the history.</td>
<td><a href="#rlcmd-reverse-search-history"><code>reverse-search-history</code></a></td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>S</kbd></td>
<td>Perform an incremental search forward through the history.</td>
<td><a href="#rlcmd-forward-search-history"><code>forward-search-history</code></a></td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>Up</kbd></td>
<td>Show a popup list of selectable history entries.  Typing searches or filters the list.</td>
<td><a href="#rlcmd-clink-popup-history"><code>clink-popup-history</code></a></td>
</tr>
<tr>
<td><kbd>F7</kbd></td>
<td>Show a popup list of selectable history entries.  Typing a number jumps to the corresponding history entry.</td>
<td><a href="#rlcmd-win-history"><code>win-history-list</code></a></td>
</tr>
<tr>
<td><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>K</kbd></td>
<td>Add the current line to the history without executing it, and clear the editing line.</td>
<td><a href="#rlcmd-add-history"><code>add-history</code></a></td>
</tr>
<tr>
<td><kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>D</kbd></td>
<td>While navigating through the history, removes the current history line from the saved history.  Otherwise has no effect.</td>
<td><a href="#rlcmd-remove-history"><code>remove-history</code></a></td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>O</kbd></td>
<td>Accept the input line and send it to the shell for execution (without adding it to the history), and then navigate to the next line after it from the saved history.  This can be handy for re-running a series of lines from the history.</td>
<td><a href="#rlcmd-operate-and-get-next"><code>operate-and-get-next</code></a></td>
</tr>
</tbody></table>
<p>See <a href="#commands-for-manipulating-the-history">Commands for Manipulating The History</a> and <a href="#clink-commands">Clink Commands</a> for more history commands and key bindings.</p>
<h3 id="the-master-history-file"><a class="wlink" href="#the-master-history-file"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>The master history file <span class="uplinks"><a href="#saved-command-history">up</a> <a href="#toc">top</a></span></h3>
<p>When the <a href="#history_save"><code>history.save</code></a> setting is enabled, then the command history is loaded and saved as follows (or when the setting is disabled, then it isn&#39;t saved between sessions).</p>
<p>Every time a new input line starts, Clink reloads the master history list and prunes it not to exceed the <a href="#history_max_lines"><code>history.max_lines</code></a> setting.</p>
<p>For performance reasons, deleting a history line marks the line as deleted without rewriting the history file.  When the number of deleted lines gets too large (exceeding the max lines or 200, whichever is larger) then the history file is compacted:  the file is rewritten with the deleted lines removed.</p>
<p>You can force the history file to be compacted regardless of the number of deleted lines by running <code>history compact</code>.</p>
<h3 id="shared-command-history"><a class="wlink" href="#shared-command-history"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Shared command history <span class="uplinks"><a href="#saved-command-history">up</a> <a href="#toc">top</a></span></h3>
<p>When the <a href="#history_shared"><code>history.shared</code></a> setting is enabled, then all instances of Clink update the master history file and reload it every time a new input line starts.  This gives the effect that all instances of Clink share the same history -- a command entered in one instance will appear in other instances&#39; history the next time they start an input line.</p>
<p>When the setting is disabled, then each instance of Clink loads the master file but doesn&#39;t append its own history back to the master file until after it exits, giving the effect that once an instance starts its history is isolated from other instances&#39; history.</p>
<h3 id="multiple-master-history-files"><a class="wlink" href="#multiple-master-history-files"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Multiple master history files <span class="uplinks"><a href="#saved-command-history">up</a> <a href="#toc">top</a></span></h3>
<p>Normally Clink saves a single saved master history list.  All instances of Clink load and save the same master history list.</p>
<p>It&#39;s also possible to make one or more instances of Clink use a different saved master history list by setting the <code>%CLINK_HISTORY_LABEL%</code> environment variable.  This can be up to 32 alphanumeric characters, and is appended to the master history file name.  Changing the <code>%CLINK_HISTORY_LABEL%</code> environment variable takes effect at the next input line.</p>
<h3 id="history-timestamps"><a class="wlink" href="#history-timestamps"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>History timestamps <span class="uplinks"><a href="#saved-command-history">up</a> <a href="#toc">top</a></span></h3>
<p>History items can optionally save the timestamp when they were added, and the timestamps can be shown in the <code>history</code> command.</p>
<p>Use <code>clink set <a href="#history_time_stamp">history.time_stamp</a> off</code> to not save or show timestamps for history items (this is the default).  Turning off timestamps doesn&#39;t remove existing timestamps.</p>
<p>Use <code>clink set history.time_stamp save</code> to save timestamps for each history item but only show them in the <code>history</code> command when the <code>--show-time</code> flag is used.  They may also be shown when a <code>clink-popup-history</code> or <code>win-history-list</code> key binding is pressed, if a non-zero <a href="#readline-arguments">numeric argument</a> is supplied.</p>
<p>Use <code>clink set history.time_stamp show</code> to save timestamps for each history item and show them in the <code>history</code> command unless the <code>--bare</code> or <code>--no-show-time</code> flag is used.  They&#39;re also shown when a <code>clink-popup-history</code> or <code>win-history-list</code> key binding is pressed, unless a <a href="#readline-arguments">numeric argument</a> argument of zero is supplied.</p>
<p>Use <code>clink set <a href="#history_time_format">history.time_format</a> <span class="arg">format</span></code> to specify the format for showing timestamps (the default format is <code>%F %T &nbsp</code>).</p>
<p>The <span class="arg">format</span> string may contain regular characters and special format specifiers.  Format specifiers begin with a percent sign (<code>%</code>), and are expanded to their corresponding values.  For a list of possible format specifiers, refer to the C++ strftime() documentation.</p>
<p>Some common format specifiers are:</p>
<table>
<thead>
<tr>
<th>Specifier</th>
<th>Expands To</th>
</tr>
</thead>
<tbody><tr>
<td><code>%a</code></td>
<td>Abbreviated weekday name for the locale (e.g. Thu).</td>
</tr>
<tr>
<td><code>%b</code></td>
<td>Abbreviated month name for the locale (e.g. Aug).</td>
</tr>
<tr>
<td><code>%c</code></td>
<td>Date and time representation for the locale.</td>
</tr>
<tr>
<td><code>%D</code></td>
<td>Short MM/DD/YY date (e.g. 08/23/01).</td>
</tr>
<tr>
<td><code>%F</code></td>
<td>Short YYYY/MM/DD date (e.g. 2001-08-23).</td>
</tr>
<tr>
<td><code>%H</code></td>
<td>Hour in 24-hour format (00 - 23).</td>
</tr>
<tr>
<td><code>%I</code></td>
<td>Hour in 12-hour format (01 - 12).</td>
</tr>
<tr>
<td><code>%m</code></td>
<td>Month (01 - 12).</td>
</tr>
<tr>
<td><code>%M</code></td>
<td>Minutes (00 - 59).</td>
</tr>
<tr>
<td><code>%p</code></td>
<td>AM or PM indicator for the locale.</td>
</tr>
<tr>
<td><code>%r</code></td>
<td>12-hour clock time for the locale (e.g. 02:55:41 pm).</td>
</tr>
<tr>
<td><code>%R</code></td>
<td>24-hour clock time (e.g. 14:55).</td>
</tr>
<tr>
<td><code>%S</code></td>
<td>Seconds (00 - 59).</td>
</tr>
<tr>
<td><code>%T</code></td>
<td>ISO 8601 time format HH:MM:SS (e.g. 14:55:41).</td>
</tr>
<tr>
<td><code>%x</code></td>
<td>Date representation for the locale.</td>
</tr>
<tr>
<td><code>%X</code></td>
<td>Time representation for the locale.</td>
</tr>
<tr>
<td><code>%y</code></td>
<td>Year without century (00 - 99).</td>
</tr>
<tr>
<td><code>%Y</code></td>
<td>Year with century (e.g. 2001).</td>
</tr>
<tr>
<td><code>%%</code></td>
<td>A <code>%</code> sign.</td>
</tr>
</tbody></table>
<h2 id="using-history-expansion"><a class="wlink" href="#using-history-expansion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Using History Expansion <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>Clink uses Readline&#39;s <a href="https://tiswww.cwru.edu/php/chet/readline/history.html">History library</a> to
add history expansion capabilities.  If these are undesirable, they can be turned off by running
<code>clink set <a href="#history_auto_expand">history.auto_expand</a> off</code> or
<code>clink set <a href="#history_expand_mode">history.expand_mode</a> off</code>.</p>
<p>When enabled, history expansion is automatically performed when a command line
is accepted (by pressing <kbd>Enter</kbd>).  When disabled, history expansion
is performed only when a corresponding expansion command is used (such as
<a href="#rlcmd-clink-expand-history"><code>clink-expand-history</code></a> <kbd>Alt</kbd>-<kbd>^</kbd>,
or <a href="#rlcmd-clink-expand-line"><code>clink-expand-line</code></a> <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>E</kbd>).
Expansion commands also work when history expansion is enabled.</p>
<p>The History library provides a history expansion feature that is similar
to the history expansion provided by <code>csh</code>.  This section describes the
syntax used to manipulate the history information.</p>
<p>   History expansions introduce words from the history list into the
input stream, making it easy to repeat commands, insert the arguments to
a previous command into the current input line, or fix errors in
previous commands quickly.</p>
<p>   History expansion takes place in two parts.  The first is to
determine which line from the history list should be used during
substitution.  The second is to select portions of that line for
inclusion into the current one.  The line selected from the history is
called the &quot;event&quot;, and the portions of that line that are acted upon
are called &quot;words&quot;.  Various &quot;modifiers&quot; are available to manipulate the
selected words.  The line is broken into words in the same fashion that
Bash does, so that several words surrounded by quotes are considered one
word.  History expansions are introduced by the appearance of the
history expansion character, which is <code>!</code>.</p>
<p>   History expansion implements shell-like quoting conventions: a
backslash can be used to remove the special handling for the next
character; single quotes enclose verbatim sequences of characters, and
can be used to inhibit history expansion; and characters enclosed within
double quotes may be subject to history expansion, since backslash can
escape the history expansion character, but single quotes may not, since
they are not treated specially within double quotes.</p>
<p>The <a href="#color_histexpand"><code>color.histexpand</code></a> setting controls highlighting when
text under the cursor is subject to history expansion.  The
<a href="#history_show_preview"><code>history.show_preview</code></a> setting shows a preview of the
expanded result below the input line using the
<a href="#color_comment_row"><code>color.comment_row</code></a> setting.</p>
<table class="linkmenu">
<tr><td><a href="#event-designators">Event Designators</a></td><td>How to specify which history line to use.</td></tr>
<tr><td><a href="#word-designators">Word Designators</a></td><td>Specifying which words are of interest.</td></tr>
<tr><td><a href="#modifiers">Modifiers</a></td><td>Modifying the results of substitution.</td></tr>
</table>

<h3 id="event-designators"><a class="wlink" href="#event-designators"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Event Designators <span class="uplinks"><a href="#using-history-expansion">up</a> <a href="#toc">top</a></span></h3>
<p>An event designator is a reference to a command line entry in the
history list.  Unless the reference is absolute, events are relative to
the current position in the history list.</p>
<table>
<tr><td>
<code>!</code>
</td><td>
    Start a history substitution, except when followed by a space, tab,
    the end of the line, or <code>=</code>.
</td></tr>

<tr><td>
<code>!<em>n</em></code>
</td><td>
    Refer to command line <em>n</em>.
</td></tr>

<tr><td>
<code>!-<em>n</em></code>
</td><td>
    Refer to the command <em>n</em> lines back.
</td></tr>

<tr><td>
<code>!!</code>
</td><td>
    Refer to the previous command.  This is a synonym for <code>!-1</code>.
</td></tr>

<tr><td>
<code>!<em>string</em></code>
</td><td>
    Refer to the most recent command preceding the current position in
    the history list starting with <em>string</em>.
</td></tr>

<tr><td>
<code>!?<em>string</em>[?]</code>
</td><td>
    Refer to the most recent command preceding the current position in
    the history list containing <em>string</em>.  The trailing <code>?</code> may be
    omitted if the <em>string</em> is followed immediately by a newline.  If
    <em>string</em> is missing, the string from the most recent search is used;
    it is an error if there is no previous search string.
</td></tr>

<tr><td>
<code>^<em>string1</em>^<em>string2</em>^</code>
</td><td>
    Quick Substitution.  Repeat the last command, replacing <em>string1</em>
    with <em>string2</em>.  Equivalent to <code>!!:s^<em>string1</em>^<em>string2</em>^</code>.
</td></tr>

<tr><td>
<code>!#</code>
</td><td>
    The entire command line typed so far.
</td></tr>
</table>

<h3 id="word-designators"><a class="wlink" href="#word-designators"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Word Designators <span class="uplinks"><a href="#using-history-expansion">up</a> <a href="#toc">top</a></span></h3>
<p>Word designators are used to select desired words from the event.  A <code>:</code>
separates the event specification from the word designator.  It may be
omitted if the word designator begins with a <code>^</code>, <code>$</code>, <code>*</code>, <code>-</code>, or <code>%</code>.
Words are numbered from the beginning of the line, with the first word
being denoted by 0 (zero).  Words are inserted into the current line
separated by single spaces.</p>
<p>For example,</p>
<table>
<tr><td>
<code>!!</code>
</td><td>
    designates the preceding command.  When you type this, the
    preceding command is repeated in toto.
</td></tr>

<tr><td>
<code>!!:$</code>
</td><td>
    designates the last argument of the preceding command.  This may be
    shortened to <code>!$</code>.
</td></tr>

<tr><td>
<code>!fi:2</code>
</td><td>
    designates the second argument of the most recent command starting
    with the letters <code>fi</code>.
</td></tr>
</table>

<p>Here are the word designators:</p>
<table>
<tr><td>
<code>0 (zero)</code>
</td><td>
    The 0th word.  For many applications, this is the command word.
</td></tr>

<tr><td>
<code><em>n</em></code>
</td><td>
    The <em>n</em>-th word.
</td></tr>

<tr><td>
<code>^</code>
</td><td>
    The first argument; that is, word 1.
</td></tr>

<tr><td>
<code>$</code>
</td><td>
    The last argument.
</td></tr>

<tr><td>
<code>%</code>
</td><td>
    The first word matched by the most recent <code>!?<em>string</em>?</code> search, if the
    search string begins with a character that is part of a word.
</td></tr>

<tr><td>
<code><em>x</em>-<em>y</em></code>
</td><td>
    A range of words; <code>-<em>y</em></code> abbreviates <code>0-<em>y</em></code>.
</td></tr>

<tr><td>
<code>*</code>
</td><td>
    All of the words, except the 0th.  This is a synonym for <code>1-$</code>.
    It is not an error to use <code>*</code> if there is just one word in the
    event; the empty string is returned in that case.
</td></tr>

<tr><td>
<code><em>x</em>*</code>
</td><td>
    Abbreviates <code><em>x</em>-$</code>
</td></tr>

<tr><td>
<code><em>x</em>-</code>
</td><td>
    Abbreviates <code><em>x</em>-$</code> like <code><em>x</em>*</code>, but omits the last word.  If <code><em>x</em></code> is
    missing, it defaults to 0.
</td></tr>
</table>

<p>If a word designator is supplied without an event specification, the
previous command is used as the event.</p>
<h3 id="modifiers"><a class="wlink" href="#modifiers"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Modifiers <span class="uplinks"><a href="#using-history-expansion">up</a> <a href="#toc">top</a></span></h3>
<p>After the optional word designator, you can add a sequence of one or
more of the following modifiers, each preceded by a <code>:</code>.  These modify,
or edit, the word or words selected from the history event.</p>
<table>
<tr><td>
<code>h</code>
</td><td>
    Remove a trailing pathname component, leaving only the head.
</td></tr>

<tr><td>
<code>t</code>
</td><td>
    Remove all leading pathname components, leaving the tail.
</td></tr>

<tr><td>
<code>r</code>
</td><td>
    Remove a trailing suffix of the form <code>.<em>suffix</em></code>, leaving the
    basename.
</td></tr>

<tr><td>
<code>e</code>
</td><td>
    Remove all but the trailing suffix.
</td></tr>

<tr><td>
<code>p</code>
</td><td>
    Print the new command but do not execute it.
</td></tr>

<tr><td>
<code>s/<em>old</em>/<em>new</em>/</code>
</td><td>
    Substitute <em>new</em> for the first occurrence of <em>old</em> in the event line.
    Any character may be used as the delimiter in place of <code>/</code>.  The
    delimiter may be quoted in <em>old</em> and <em>new</em> with a single backslash.  If
    <code>&</code> appears in <em>new</em>, it is replaced by <em>old</em>.  A single backslash will
    quote the <code>&</code>.  If <em>old</em> is empty, it is set to the last <em>old</em>
    substituted, or, if no previous history substitutions took place,
    the last <em>string</em> in a <code>!?<em>string</em>?</code> search.  If <em>new</em> is empty, each
    matching <em>old</em> is deleted.  The final delimiter is optional if it is
    the last character on the input line.
</td></tr>

<tr><td>
<code>&</code>
</td><td>
    Repeat the previous substitution.
</td></tr>

<tr><td>
<code>g</code></br>
</td><td>
    Cause changes to be applied over the entire event line.  Used in
    conjunction with <code>s</code>, as in <code>gs/<em>old</em>/<em>new</em>/</code>, or with <code>&</code>.
</td></tr>

<tr><td>
<code>a</code></br>
</td><td>
    The same as <code>g</code>.
</td></tr>

<tr><td>
<code>G</code>
</td><td>
    Apply the following <code>s</code> or <code>&</code> modifier once to each word in the
    event.
</td></tr>
</table>

<h2 id="directory-shortcuts"><a class="wlink" href="#directory-shortcuts"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Directory Shortcuts <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>Clink provides some typing savers for changing the current directory.</p>
<ul>
<li>Typing a directory name followed by a path separator is a shortcut for <code>cd /d</code> to that directory.</li>
<li>Typing <code>..</code> or <code>...</code> is a shortcut for <code>cd ..</code> or <code>cd ..\..</code> (each additional <code>.</code> adds another <code>\..</code>).</li>
<li>Typing <code>-</code> or <code>cd -</code> changes to the previous current working directory.</li>
</ul>
<p>These shortcuts only work in the interactive command line; they do not work in batch scripts.</p>
<p><a name="sample-scripts"></a></p>
<h2 id="enhanced-doskey-expansion"><a class="wlink" href="#sample-scripts"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Enhanced Doskey Expansion <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>Enhanced Doskey expansion is enabled by default.  You can turn it off by running <code>clink set <a href="#doskey_enhanced">doskey.enhanced</a> off</code>.</p>
<p>When enabled, this adds two behaviors:</p>
<ul>
<li>Expansion of Doskey macros that follow <code>|</code> and <code>&amp;</code> command separators.</li>
<li>Respects quotes around words when expanding <code>$1</code>...<code>$9</code> tags in Doskey macros.</li>
</ul>
<p>You can suppress macro expansion for an individual command by prefixing the command with a space or semicolon (e.g. <code>&nbsp;foo</code> or <code>;foo</code>).  If the command follows a <code>|</code> or <code>&amp;</code> command separator, you can suppress macro expansion by prefixing the command with two spaces or a semicolon (e.g. <code>foo|&nbsp; bar</code> or <code>foo|;bar</code>).</p>
<blockquote>
<p><strong>Note:</strong> Some Doskey macros might be incompatible with the enhanced Doskey expansion feature, especially if they use special or complicated syntax.  If you encounter problems, you might need to turn off enhanced Doskey expansion or adjust the problematic macros.</p>
</blockquote>
<h2 id="popular-scripts"><a class="wlink" href="#popular-scripts"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Popular Scripts <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>Here are some popular scripts that show off what can be done with Clink.</p>
<h3 id="clink-completions"><a class="wlink" href="#clink-completions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>clink-completions <span class="uplinks"><a href="#popular-scripts">up</a> <a href="#toc">top</a></span></h3>
<p>The <a href="https://github.com/vladimir-kotikov/clink-completions">clink-completions</a> collection of scripts has a bunch of argument matchers and completion generators for things like git, mercurial, npm, and more.</p>
<h3 id="clink-flex-prompt"><a class="wlink" href="#clink-flex-prompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>clink-flex-prompt <span class="uplinks"><a href="#popular-scripts">up</a> <a href="#toc">top</a></span></h3>
<p>The <a href="https://github.com/chrisant996/clink-flex-prompt">clink-flex-prompt</a> script is similar to the zsh powerlevel10k theme.  It gives Clink a very customizable prompt, with many style options.  It&#39;s extensible so you can add your own segments.</p>
<p>It also takes advantage of Clink&#39;s <a href="#asyncpromptfiltering">asynchronous prompt refresh</a> to make prompts show up instantly, even in large git repos, for example.</p>
<h3 id="clink-fzf"><a class="wlink" href="#clink-fzf"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>clink-fzf <span class="uplinks"><a href="#popular-scripts">up</a> <a href="#toc">top</a></span></h3>
<p>The <a href="https://github.com/chrisant996/clink-fzf">clink-fzf</a> script integrates the popular <a href="https://github.com/junegunn/fzf">fzf</a> &quot;fuzzy finder&quot; tool with Clink.</p>
<h3 id="clink-gizmos"><a class="wlink" href="#clink-gizmos"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>clink-gizmos <span class="uplinks"><a href="#popular-scripts">up</a> <a href="#toc">top</a></span></h3>
<p>The <a href="https://github.com/chrisant996/clink-gizmos">clink-gizmos</a> collection of scripts has several handy scripts such as:</p>
<ul>
<li>Argmatchers for <code>msbuild</code>, <code>findstr</code>, <code>robocopy</code>, <code>xcopy</code>, <code>doskey</code>, <code>premake5</code>, and more.</li>
<li>Scripts to auto-generate argmatchers for commands by parsing their help text.</li>
<li>Automatically show a divider line before + after certain commands, to make it easy to see where their output begins and ends, and the elapsed time taken by the command.  This is especially handy when invoking compilers and build tools.</li>
<li>The <code>i.lua</code> script which makes <code>i <span class="arg">directory</span> <span class="arg">command</span></code> set the current directory to <span class="arg">directory</span> then run <span class="arg">command</span> then restore the original current directory afterwards.  While typing the <span class="arg">command</span>, completions are even generated relative to the specified <span class="arg">directory</span> rather than the current directory.</li>
<li>The <code>fzf.lua</code> script from <a href="https://github.com/chrisant996/clink-fzf">clink-fzf</a> for integrating the popular <a href="https://github.com/junegunn/fzf">fzf</a> &quot;fuzzy finder&quot; tool with Clink.</li>
<li>The <code>luaexec.lua</code> script which has various features handy for Clink Lua script authors.</li>
<li>And more.</li>
</ul>
<h3 id="clink-themes"><a class="wlink" href="#clink-themes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>clink-themes <span class="uplinks"><a href="#popular-scripts">up</a> <a href="#toc">top</a></span></h3>
<p>The <a href="https://github.com/chrisant996/clink-themes">clink-themes</a> repository contains some <a href="#color-themes">color themes</a> and <a href="#custom-prompts">custom prompts</a> which can be used with Clink.  If you have one you want to share, this can be a good place to share it.</p>
<h3 id="oh-my-posh"><a class="wlink" href="#oh-my-posh"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>oh-my-posh <span class="uplinks"><a href="#popular-scripts">up</a> <a href="#toc">top</a></span></h3>
<p>The <a href="https://ohmyposh.dev">oh-my-posh</a> program can generate fancy prompts. Refer to its <a href="https://ohmyposh.dev">documentation</a> for installation instructions, sample themes, and more information.</p>
<p>But in Clink v1.7.0 and newer, don&#39;t create a Lua script for oh-my-posh.</p>
<p>Instead do the following:</p>
<ol>
<li>Run <code>clink config prompt use oh-my-posh</code> to activate oh-my-posh as the custom prompt.</li>
<li>If the oh-my-posh.exe file is not in the system PATH, then run <code>clink set ohmyposh.exepath "<span class="arg">full_path_to_oh-my-posh.exe</span>"</code> to tell Clink where to find the oh-my-posh program file.</li>
<li>To configure oh-my-posh to use a particular prompt theme, run <code>clink set ohmyposh.theme "<span class="arg">full_path_to_theme_file</span>.omp.json"</code> to select the theme file.</li>
</ol>
<h3 id="starship"><a class="wlink" href="#starship"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>starship <span class="uplinks"><a href="#popular-scripts">up</a> <a href="#toc">top</a></span></h3>
<p>The <a href="https://github.com/starship/starship">starship</a> program can also generate fancy prompts. Refer to its <a href="https://starship.rs">documentation</a> for how to configure it.</p>
<p>Integrating starship with Clink is just as easy: save the following text to a <code>starship.lua</code> file in your Clink scripts directory (run <code>clink info</code> to find that), and make sure the <code>starship.exe</code> program is in a directory listed in the <code>%PATH%</code> environment variable (or edit the script below to provide a fully qualified path to the starship.exe program). The config file for starship is located at <code>C:\Users\<span class="arg">username</span>.config\starship.toml</code>.</p>
<pre><code class="language-lua">-- starship.lua
load(io.popen(&#39;starship.exe init cmd&#39;):read(&quot;*a&quot;))()
</code></pre>
<h3 id="zlua"><a class="wlink" href="#zlua"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>z.lua <span class="uplinks"><a href="#popular-scripts">up</a> <a href="#toc">top</a></span></h3>
<p>The <a href="https://github.com/skywind3000/z.lua">z.lua</a> tool is a faster way to navigate directories, and it integrates with Clink.</p>
<h2 id="terminal-support"><a class="wlink" href="#terminal-support"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Terminal Support <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>Windows programs generally don&#39;t need to worry about terminal support.  But the Readline library used by Clink comes from Unix, where there are many different kinds of terminals, and the library requires certain kinds of terminal support.</p>
<p>Clink&#39;s keyboard driver generally produces VT220 style key sequences, but it also includes many extensions from Xterm and other sources.  Use <code>clink echo</code> to find key sequences for specific inputs.</p>
<p>Clink&#39;s terminal output driver is designed for use with Windows and its console subsystem.  Clink can optionally handle output itself instead, and emulate terminal output support when the <a href="#terminal_emulation"><code>terminal.emulation</code></a> setting is <code>emulate</code>, or when <code>auto</code> and Clink is running on an older version of Windows that doesn&#39;t support ANSI escape codes.  In emulation mode, 8 bit and 24 bit color escape codes are mapped to the nearest 4 bit colors.</p>
<p>By default Clink sets the cursor style to a blinking horizontal partial-height block, or to a blink full-height solid block.  Some terminals support escape codes to select alternative cursor styles.  Clink provides environment variables where you may optionally provide escape codes to override the cursor style.  <code>%CLINK_TERM_VE%</code> selects the style for the normal cursor (insert mode), <code>%CLINK_TERM_VS%</code> selects the style for the enhanced cursor (overwrite mode).</p>
<p>Special codes recognized in the cursor style escape code strings:</p>
<table>
<tr><th>Code</th><th>Description</th></tr>
<tr><td><code>\e</code></td><td>Translated to the ESC character (27 decimal, 0x1b hex).</td></tr>
<tr><td><code>\x<span class="arg">HH</span></code></td><td>Translated to the character matching the hex <span class="arg">HH</span> value.<br/>E.g. <code>\x1b</code> is the same as <code>\e</code>, or <code>\x08</code> is a backspace, etc.</td></tr>
<tr><td><code>\\</code></td><td>Translated to the <code>\</code> character.</td></tr>
<tr><td><code>\<span class="arg">c</span></code></td><td>Any other backslash is translate to whatever character immediately follows it.<br/>E.g. <code>\a</code> becomes <code>a</code>.</td></tr>
</table>

<p>Refer to the documentation for individual terminal programs to find what (if any) escape codes they may support.  The default console in Windows 10 supports the <a href="https://invisible-island.net/xterm/ctlseqs/ctlseqs.html#h4-Functions-using-CSI-_-ordered-by-the-final-character-lparen-s-rparen:CSI-Ps-SP-q.1D81">DECSCUSR</a> escape codes for selecting cursor shape.</p>
<p>This .cmd script sets the normal cursor to a blinking vertical bar, and the enhanced cursor to a non-blinking solid box:</p>
<pre><code class="language-cmd">set CLINK_TERM_VE=\e[5 q
set CLINK_TERM_VS=\e[2 q
</code></pre>
<p>Or this .cmd script sets the normal cursor to blink, and the enhanced cursor to not blink:</p>
<pre><code class="language-cmd">set CLINK_TERM_VE=\e[?12h
set CLINK_TERM_VS=\e[?12l
</code></pre>
<h3 id="color-emojis"><a class="wlink" href="#color-emojis"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Color Emojis <span class="uplinks"><a href="#terminal-support">up</a> <a href="#toc">top</a></span></h3>
<p>The Unicode specification for emojis is constantly evolving.  It&#39;s natural for operating system versions, code libraries, and application programs to lag behind the latest Unicode specification.</p>
<p>Clink&#39;s emoji width predictions work best on Windows 11 with Windows Terminal 1.22 or newer.  All of the actual rendering is done by the terminal program.  Applications have to make assumptions and predictions about how Unicode characters will end up being rendered by terminal programs.  It involves a lot of guesswork.</p>
<p>Clink has no way to know for sure how different combinations of OS / graphics library / Windows Terminal versions will affect how different emoji characters will actually get rendered.  Clink also has no way to know for sure how different complex joined emoji sequences or malformed/invalid/nonsensical emoji sequences will end up getting rendered in a terminal program.  Windows Terminal 1.22 includes significant improvements for rendering color emojis, but there are still some edge cases that aren&#39;t fully implemented yet.  (When using older version of Windows Terminal then you should expect some emoji sequences to render incorrectly, and there&#39;s nothing Clink can do to work around that.)</p>
<p>If you encounter problems with emoji characters, first check whether the latest OS version and/or the latest terminal program version solves some of the problems.  If the problems persist, you can <a href="https://github.com/chrisant996/clink/issues/new">open a new issue</a> in the Clink repo.  Please be sure to share details and specific steps for how to reproduce the problem, so that it&#39;s possible for someone to try to help.</p>
<h2 id="how-clink-works"><a class="wlink" href="#how-clink-works"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>How Clink Works <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>The <code>clink inject</code> command checks whether the parent process is supported and injects a DLL.</p>
<p>The DLL takes over printing the prompt and reading command line input from the user.</p>
<h5 id="checking-if-the-parent-process-is-supported"><a class="wlink" href="#checking-if-the-parent-process-is-supported"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Checking if the parent process is supported <span class="uplinks"><a href="#how-clink-works">up</a> <a href="#toc">top</a></span></h5>
<p>The parent process is supported if it is <code>cmd.exe</code> and its command line indicates that it will be an interactive process.  The process will be interactive if the command line has <code>/k</code> or does not have <code>/c</code> or <code>/r</code>.</p>
<p>If the parent process is not supported, then the <code>clink.bat</code> script or the <code>clink_*.exe</code> program will exit before it actually injects the DLL into the <code>cmd.exe</code> process.</p>
<h5 id="hooking-os-functions"><a class="wlink" href="#hooking-os-functions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Hooking OS functions <span class="uplinks"><a href="#how-clink-works">up</a> <a href="#toc">top</a></span></h5>
<p>If the DLL gets loaded into the <code>cmd.exe</code> parent process and hooks some OS functions:</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Reason</th>
</tr>
</thead>
<tbody><tr>
<td>GetEnvironmentVariableW()</td>
<td>To let the DLL finish its initialization.  This is always called before CMD displays the prompt and is rarely called otherwise, so it&#39;s a reliable spot to hook regardless whether injection is triggered during CMD&#39;s AutoRun regkey or by running <code>clink inject</code> at the command line.</td>
</tr>
<tr>
<td>SetEnvironmentVariableW()</td>
<td>To intercept setting the <code>PROMPT</code> variable, and add a special tag so Clink can tell when CMD is trying to print the prompt.</td>
</tr>
<tr>
<td>SetEnvironmentStringsW()</td>
<td>To intercept setting the <code>PROMPT</code> variable, and add a special tag so Clink can tell when CMD is trying to print the prompt.</td>
</tr>
<tr>
<td>WriteConsoleW()</td>
<td>To capture the current prompt and defer printing it until command line editing begins (inside ReadConsoleW()).</td>
</tr>
<tr>
<td>ReadConsoleW()</td>
<td>To replace the command line editing with its own Readline-powered command line editing.</td>
</tr>
<tr>
<td>SetConsoleTitleW()</td>
<td>To enable replacing the &quot;Administrator:&quot; prefix in the title bar.</td>
</tr>
</tbody></table>
<h5 id="how-to-prevent-injection-when-clink-is-configured-for-autorun"><a class="wlink" href="#how-to-prevent-injection-when-clink-is-configured-for-autorun"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>How to prevent injection when Clink is configured for autorun <span class="uplinks"><a href="#how-clink-works">up</a> <a href="#toc">top</a></span></h5>
<p>There are several ways:</p>
<ol>
<li>The <code>cmd /d</code> flag disables CMD&#39;s AutoRun regkey processing, which will prevent CMD from running the Clink autorun script.</li>
<li>If the <code>CLINK_NOAUTORUN</code> environment variable is set, then the Clink autorun script exits quickly, without even invoking clink_x64.exe.</li>
<li>Clink autorun can be uninstalled:  <code>clink autorun uninstall</code>.</li>
</ol>
<h5 id="other-notes"><a class="wlink" href="#other-notes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Other notes <span class="uplinks"><a href="#how-clink-works">up</a> <a href="#toc">top</a></span></h5>
<p>The <code>clink.bat</code> file exists to enable seamless support for x64/x86/ARM64 on the same computer by detecting the current mode and invoking the corresponding <code>clink_*.exe</code> program.  There is no way for a batch script to figure out whether cmd.exe is going to be interactive, so that check has to happen inside the clink_x64.exe program.  If it assesses that it will be non-interactive, then clink_x64.exe exits without injecting clink_dll_x64.dll into the cmd.exe process.  The act of checking whether cmd.exe will be interactive is much faster than the act of injecting Clink into the cmd.exe process, and so the check minimizes performance degradation when Clink is configured for autorun.</p>
<p>Personally, I don&#39;t use Clink with autorun for three reasons:</p>
<ol>
<li>It slows down startup of cmd.exe processes that happen in the background or in automated situations,</li>
<li>It introduces the possibility of interfering with background or automated cmd usage, and</li>
<li>I don&#39;t want Clink auto-injected into every cmd session.  I prefer to be explicit about when I&#39;m going to use Clink, and I use LNK files or Windows Terminal profiles to control how and when Clink is injected.</li>
</ol>
<p>I haven&#39;t removed the autorun feature because:</p>
<ol>
<li>It already existed as the default mode before I ever found Clink or took over maintenance,</li>
<li>Many people like the feature, and</li>
<li>It performs as efficiently as possible given how the CMD AutoRun regkey operates.</li>
</ol>
<p>Redirected output is not considered when checking if the parent process is supported.  The only way to reliably and accurately check for redirected stdin/stdout is to do the check after having already injected Clink, which would be pointless since by that time Clink has already been injected, so the full slowdown cost has already been paid.  So, overall, trying to check for stdin/stdout doesn&#39;t have practical value.</p>
<h2 id="troubleshooting-tips"><a class="wlink" href="#troubleshooting-tips"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Troubleshooting Tips <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>If something seems to malfunction, here are some things to try that often help track down what&#39;s going wrong:</p>
<ul>
<li>Check if anti-malware software blocked Clink from injecting.<ul>
<li>Consider adding an exclusion for Clink.</li>
<li>The contents of the <code>clink.log</code> file often help in determining whether anti-malware software blocked Clink.</li>
<li>If it&#39;s indeed being blocked by anti-malware software, report the false positive to the publisher of the anti-malware software so they can confirm and update the detection signatures.  There&#39;s nothing Clink can do about it.</li>
</ul>
</li>
<li>If something looks wrong with the prompt display or input line display, try pressing <kbd>Ctrl</kbd>-<kbd>x</kbd>,<kbd>Ctrl</kbd>-<kbd>z</kbd> to invoke the <a href="#rlcmd-clink-diagnostics"><code>clink-diagnostics</code></a> command.  Any problems it finds in the prompt string are reported at the end.</li>
<li>Check <code>clink info</code>.  E.g. does the state dir look right, do the script paths look right, do the inputrc files look right?</li>
<li>Check <code>clink set</code>.  E.g. do the settings look right?</li>
<li>Check the <code>clink.log</code> file for clues (its location is reported by <code>clink info</code>).</li>
</ul>
<p>When <a href="https://github.com/chrisant996/clink/issues/new">reporting an issue</a>, please include the following which saves time by answering in advance the usual questions:</p>
<ul>
<li>Please describe what was expected to happen.</li>
<li>Please describe what actually happened.</li>
<li>Please include the output from <code>clink info</code> and <code>clink set</code>.</li>
<li>Please include the <code>clink.log</code> file (the location is reported by <code>clink info</code>).</li>
</ul>
<p><a name="privacy"></a></p>
<h2 id="privacy"><a class="wlink" href="#privacy"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Privacy <span class="uplinks"><a href="#miscellaneous">up</a> <a href="#toc">top</a></span></h2>
<p>Clink does not collect user data.  Clink writes diagnostic information to its local log file, and does not transmit the log file off the local computer.  For the location of the log file, refer to <a href="#filelocations">File Locations</a> or run <code>clink info</code>.</p>
        </div>
        <div class="section" id="api">

<h1 id="lua-api"><a class="wlink" href="#lua-api"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Lua API Reference <span class="uplinks"><a href="#toc">top</a></span></h1>
<p>This section describes the Clink Lua API extensions.</p>
<p>Also see <a href="https://www.lua.org/docs.html">Lua Documentation</a> and the <a href="https://www.lua.org/manual/5.2/">Lua 5.2 Manual</a> for more information about the Lua programming language.</p>
<h3 id="lua-api-groups"><a class="wlink" href="#lua-api-groups"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>API groups <span class="uplinks"><a href="#lua-api">up</a> <a href="#toc">top</a></span></h3>
<svg style="display:none" xmlns="http://www.w3.org/2000/svg"><defs><symbol id="wicon" viewBox="0 0 16 16" fill="currentColor"><path d="M4.715 6.542 3.343 7.914a3 3 0 1 0 4.243 4.243l1.828-1.829A3 3 0 0 0 8.586 5.5L8 6.086a1.002 1.002 0 0 0-.154.199 2 2 0 0 1 .861 3.337L6.88 11.45a2 2 0 1 1-2.83-2.83l.793-.792a4.018 4.018 0 0 1-.128-1.287z"/><path d="M6.586 4.672A3 3 0 0 0 7.414 9.5l.775-.776a2 2 0 0 1-.896-3.346L9.12 3.55a2 2 0 1 1 2.83 2.83l-.793.792c.112.42.155.855.128 1.287l1.372-1.372a3 3 0 1 0-4.243-4.243L6.586 4.672z"/></symbol></defs></svg><p/><div class="toc"><div class="H1"><a href="#_argmatcher">_argmatcher</a></div><div class="H1"><a href="#builder">builder</a></div><div class="H1"><a href="#clink">clink</a></div><div class="H1"><a href="#console">console</a></div><div class="H1"><a href="#git">git</a></div><div class="H1"><a href="#io">io</a></div><div class="H1"><a href="#line_state">line_state</a></div><div class="H1"><a href="#log">log</a></div><div class="H1"><a href="#matches">matches</a></div><div class="H1"><a href="#os">os</a></div><div class="H1"><a href="#path">path</a></div><div class="H1"><a href="#rl">rl</a></div><div class="H1"><a href="#rl_buffer">rl_buffer</a></div><div class="H1"><a href="#settings">settings</a></div><div class="H1"><a href="#string">string</a></div><div class="H1"><a href="#unicode">unicode</a></div><div class="H1"><a href="#word_classifications">word_classifications</a></div><div class="H1"><a href="#[other]">[other]</a></div><p/><div class="H1"><a href="#Deprecated"><em>Deprecated</em></a></div></div><div class="group">
<h5 id="_argmatcher" class="group_name"><a class="wlink" href="#_argmatcher"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>_argmatcher: <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#_argmatcher:addarg">addarg</a></td><td><a href="#_argmatcher:chaincommand">chaincommand</a></td><td><a href="#_argmatcher:setclassifier">setclassifier</a></td></tr><tr><td><a href="#_argmatcher:addargunsorted">addargunsorted</a></td><td><a href="#_argmatcher:hideflags">hideflags</a></td><td><a href="#_argmatcher:setdelayinit">setdelayinit</a></td></tr><tr><td><a href="#_argmatcher:adddescriptions">adddescriptions</a></td><td><a href="#_argmatcher:loop">loop</a></td><td><a href="#_argmatcher:setendofflags">setendofflags</a></td></tr><tr><td><a href="#_argmatcher:addflags">addflags</a></td><td><a href="#_argmatcher:nofiles">nofiles</a></td><td><a href="#_argmatcher:setflagprefix">setflagprefix</a></td></tr><tr><td><a href="#_argmatcher:addflagsunsorted">addflagsunsorted</a></td><td><a href="#_argmatcher:reset">reset</a></td><td><a href="#_argmatcher:setflagsanywhere">setflagsanywhere</a></td></tr></table>
<div class="function"><div class="header"> <div id="_argmatcher:addarg" class="name"><a class="wlink" href="#_argmatcher:addarg"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:addarg</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">choices...</span>:string|table ) : self<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">This adds a new argument position with the matches given by <span class="arg">choices</span>.  Arguments can be a string, a string linked to another parser by the concatenation operator, a table of arguments, or a function that returns a table of arguments.  See <a href="#argumentcompletion">Argument Completion</a> for more information.</p><pre class="language-lua"><code>local my_parser = clink.argmatcher("make_color_shape")
:addarg("red", "green", "blue")             -- 1st argument is a color
:addarg("circle", "square", "triangle")     -- 2nd argument is a shape</code></pre><p class="desc">When providing a table of arguments, the table can contain some special entries: <p><table> <tr><th>Entry</th><th>More Info</th><th>Version</th></tr> <tr><td><code>delayinit=<span class="arg">function</span></code></td><td>See <a href="#addarg_delayinit">Delayed initialization for an argument position</a>.</td><td class="version">v1.3.10 and newer</td></tr> <tr><td><code>fromhistory=true</code></td><td>See <a href="#addarg_fromhistory">Generate Matches From History</a>.</td><td class="version">v1.3.9 and newer</td></tr> <tr><td><code>hint=<span class="arg">string_or_function</span></code></td><td>See <a href="#addarg_hint">Show a Usage Hint</a>.</td><td class="version">v1.7.0 and newer</td></tr> <tr><td><code>loopchars="<span class="arg">characters</span>"</code></td><td>See <a href="#addarg_loopchars">Delimited Arguments</a>.</td><td class="version">v1.3.37 and newer</td></tr> <tr><td><code>nosort=true</code></td><td>See <a href="#addarg_nosort">Disable Sorting Matches</a>.</td><td class="version">v1.3.3 and newer</td></tr> <tr><td><code>nowordbreakchars=true</code></td><td>See <a href="#addarg_nowordbreakchars">Overcoming Word Breaks</a>.</td><td class="version">v1.5.17 and newer</td></tr> <tr><td><code>onadvance=<span class="arg">function</span></code></td><td>See <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a>.</td><td class="version">v1.5.14 and newer</td></tr> <tr><td><code>onalias=<span class="arg">function</span></code></td><td>See <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a>.</td><td class="version">v1.6.18 and newer</td></tr> <tr><td><code>onarg=<span class="arg">function</span></code></td><td>See <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a>.</td><td class="version">v1.3.13 and newer</td></tr> <tr><td><code>onlink=<span class="arg">function</span></code></td><td>See <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a>.</td><td class="version">v1.5.14 and newer</td></tr> </table></p> <strong>Note:</strong>  Arguments are positional in an argmatcher.  Using <code>:addarg()</code> multiple times adds multiple argument positions, in the order they are specified.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:addargunsorted" class="name"><a class="wlink" href="#_argmatcher:addargunsorted"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:addargunsorted</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">choices...</span>:string|table ) : self<br/><div class="version">v1.3.3 and newer</div></div></div><div class="body"><p class="desc">This is the same as <a href="#_argmatcher:addarg">_argmatcher:addarg</a> except that this disables sorting the matches.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:adddescriptions" class="name"><a class="wlink" href="#_argmatcher:adddescriptions"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:adddescriptions</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">descriptions...</span>:table] ) : self<br/><div class="version">v1.2.38 and newer</div></div></div><div class="body"><p class="desc">Adds descriptions for arg matches and/or flag matches.  Descriptions are displayed for their associated args or flags whenever possible completions are listed, for example by the <code><a href="#rlcmd-complete">complete</a></code> or <code><a href="#rlcmd-clink-select-complete">clink-select-complete</a></code> or <code><a href="#rlcmd-possible-completions">possible-completions</a></code> commands.</p><p class="desc"> Any number of descriptions tables may be passed to the function, and each table must use one of the following schemes: <ul> <li>One or more string values that are args or flags, and a <code>description</code> field that is the associated description string. <li>Key/value pairs where each key is an arg or flag, and its value is either a description string or a table containing an optional argument info string and a description string.  If an argument info string is provided, it is appended to the arg or flag string when listing possible completions. For example, <code>["--user"] = { " name", "Specify username"}</code> gets printed as:</p><p class="desc"> <pre style="border-radius:initial;border:initial;background-color:black"><code class="plaintext" style="background-color:black"> <span class="color_default">--user</span> <span class="color_arginfo">name</span>&nbsp;&nbsp;&nbsp;&nbsp;<span class="color_description">Specify username</span> </code></pre> </ul></p><p class="desc"></p><pre class="language-lua"><code>local foo = clink.argmatcher("foo")
foo:addflags("-h", "--help", "--user")
foo:addarg("info", "set")
-- Example using first scheme and one table per description:
foo:adddescriptions(
&nbsp;   { "-h", "--help",   description = "Show help" },
&nbsp;   { "--user",         description = "Specify user name" },
&nbsp;   { "info",           description = "Prints information" },
&nbsp;   { "set",            description = "Show or change settings" },
)
-- Example using second scheme and just one table:
foo:adddescriptions( {
&nbsp;   ["-h"]              = "Show help",
&nbsp;   ["--help"]          = "Show help",
&nbsp;   ["--user"]          = { " name", "Specify user name" },
&nbsp;   ["info"]            = { "Prints information" },
&nbsp;   ["set"]             = { " var[=value]", "Show or change settings" },
} )</code></pre><p class="desc">You can make your scripts backward compatible with older Clink versions by adding a helper function.  The following is the safest and simplest way to support backward compatibility:</p><pre class="language-lua"><code>-- Helper function to add descriptions, when possible.
local function maybe_adddescriptions(matcher, ...)
&nbsp;   if matcher and matcher.adddescriptions then
&nbsp;       matcher:adddescriptions(...)
&nbsp;   end
end

-- This adds descriptions only if the Clink version being used
-- supports them, otherwise it does nothing.
maybe_adddescriptions(foo, {
&nbsp;   ["-h"] = "Show help",
&nbsp;   -- etc
})</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:addflags" class="name"><a class="wlink" href="#_argmatcher:addflags"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:addflags</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">flags...</span>:string ) : self<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">This adds flag matches.  Flags are separate from arguments:  When listing possible completions for an empty word, only arguments are listed.  But when the word being completed starts with the first character of any of the flags, then only flags are listed.  See <a href="#argumentcompletion">Argument Completion</a> for more information.</p><pre class="language-lua"><code>local my_parser = clink.argmatcher("git")
:addarg({ "add", "status", "commit", "checkout" })
:addflags("-a", "-g", "-p", "--help")</code></pre><p class="desc">When providing a table of flags, the table can contain some special entries: <p><table> <tr><th>Entry</th><th>More Info</th><th>Version</th></tr> <tr><td><code>delayinit=<span class="arg">function</span></code></td><td>See <a href="#addarg_delayinit">Delayed initialization for an argument position</a>.</td><td class="version">v1.3.10 and newer</td></tr> <tr><td><code>fromhistory=true</code></td><td>See <a href="#addarg_fromhistory">Generate Matches From History</a>.</td><td class="version">v1.3.9 and newer</td></tr> <tr><td><code>nosort=true</code></td><td>See <a href="#addarg_nosort">Disable Sorting Matches</a>.</td><td class="version">v1.3.3 and newer</td></tr> <tr><td><code>onarg=<span class="arg">function</span></code></td><td>See <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a>.</td><td class="version">v1.3.13 and newer</td></tr> </table></p> <strong>Note:</strong>  Flags are not positional in an argmatcher.  Using <code>:addarg()</code> multiple times with different flags is the same as using <code>:addarg()</code> once with all of the flags.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:addflagsunsorted" class="name"><a class="wlink" href="#_argmatcher:addflagsunsorted"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:addflagsunsorted</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">flags...</span>:string ) : self<br/><div class="version">v1.3.3 and newer</div></div></div><div class="body"><p class="desc">This is the same as <a href="#_argmatcher:addflags">_argmatcher:addflags</a> except that this also disables sorting for flags.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:chaincommand" class="name"><a class="wlink" href="#_argmatcher:chaincommand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:chaincommand</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">modes</span>:string] ) : self<br/><div class="version">v1.3.13 and newer</div></div></div><div class="body"><p class="desc">This makes the rest of the line be parsed as a separate command, after the argmatcher reaches the end of its defined argument positions.  You can use it to "chain" from one parser to another.</p><p class="desc"> For example, <code>cmd.exe program arg</code> is example of a line where one command can have another command within it.  <code>:chaincommand()</code> enables <code>program arg</code> to be parsed separately.  If <code>program</code> has an argmatcher, then it takes over and parses the rest of the input line.</p><p class="desc"> An example that chains in a linked argmatcher:</p><pre class="language-lua"><code>clink.argmatcher("program"):addflags("/x", "/y")
clink.argmatcher("cmd"):addflags(
&nbsp;   "/c" .. clink.argmatcher():chaincommand(),
&nbsp;   "/k" .. clink.argmatcher():chaincommand()
):nofiles()
-- Consider the following input:
--    cmd /c program /
-- "cmd" is colored as an argmatcher.
-- "/c" is colored as a flag (by the "cmd" argmatcher).
-- "program" is colored as an argmatcher.
-- "/" generates completions "/x" and "/y".</code></pre><p class="desc">Examples that chain at the end of their argument positions:</p><pre class="language-lua"><code>clink.argmatcher("program"):addflags("-x", "-y")
clink.argmatcher("sometool"):addarg(
&nbsp;   "exec" .. clink.argmatcher()
&nbsp;               :addflags("-a", "-b")
&nbsp;               :addarg("profile1", "profile2")
&nbsp;               :chaincommand()
)
-- Consider the following input:
--    sometool exec profile1 program -
-- "sometool" is colored as an argmatcher.
-- "exec" is colored as an argument (for "sometool").
-- "profile1" is colored as an argument (for "exec").
-- "program" is colored as an argmatcher.
-- "-" generates completions "-x" and "-y".</code></pre><p class="desc">In Clink v1.6.2 and higher, an optional <span class="arg">modes</span> argument can let Clink know how the command will get interpreted.  The string can contain any combination of the following words, separated by spaces or commas.  If some words are mutually exclusive, the one that comes last in the string is used. <table> <tr><th>Mode</th><th>Description</th></tr> <tr><td><code>cmd</code></td><td>Lets the argmatcher know that the command gets processed how CMD.exe would process it.  This is the default if <span class="arg">modes</span> is omitted.</td></tr> <tr><td><code>start</code></td><td>Lets the argmatcher know the command gets processed how the START command would process it.</td></tr> <tr><td><code>run</code></td><td>Lets the argmatcher know the command gets processed how the <kbd>Win</kbd>-<kbd>R</kbd> Windows Run dialog box would process it.</td></tr> <tr><td><code>doskey</code></td><td>Lets the argmatcher know if the command starts with a doskey alias it will be expanded.  This is very unusual, but for example the <a href="https://github.com/chrisant996/clink-gizmos/blob/main/i.lua">i.lua</a> script in <a href="https://github.com/chrisant996/clink-gizmos">clink-gizmos</a> does this.</td></tr> </table></p><p class="desc"> The <span class="arg">modes</span> string does not affect how the command gets executed.  It only affects how the argmatcher performs completions and input line coloring, to help the argmatcher be accurate.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:hideflags" class="name"><a class="wlink" href="#_argmatcher:hideflags"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:hideflags</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">flags...</span>:string ) : self<br/><div class="version">v1.3.3 and newer</div></div></div><div class="body"><p class="desc">This hides the specified flags when displaying possible completions (the flags are still recognized).</p><p class="desc"> This is intended for use when there are several synonyms for a flag, so that input coloring and linked argmatchers work, without cluttering the possible completion list.</p><pre class="language-lua"><code>local dirs = clink.argmatcher():addarg(clink.dirmatches)
local my_parser = clink.argmatcher("mycommand")
:addflags("-a", "--a", "--al", "--all",
&nbsp;         "-d"..dirs, "--d"..dirs, "--di"..dirs, "--dir"..dirs)
:hideflags("--a", "--al", "--all",      -- Only "-a" is displayed.
&nbsp;          "-d", "--d", "--di")         -- Only "--dir" is displayed.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:loop" class="name"><a class="wlink" href="#_argmatcher:loop"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:loop</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">index</span>:integer] ) : self<br/><div class="version">v0.4.9 and newer</div></div></div><div class="body"><p class="desc">This makes the parser loop back to argument position <span class="arg">index</span> when it runs out of positional sets of arguments (if <span class="arg">index</span> is omitted it loops back to argument position 1).</p><pre class="language-lua"><code>clink.argmatcher("xyzzy")
:addarg("zero", "cero")     -- first arg can be zero or cero
:addarg("one", "uno")       -- second arg can be one or uno
:addarg("two", "dos")       -- third arg can be two or dos
:loop(2)    -- fourth arg loops back to position 2, for one or uno, and so on</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:nofiles" class="name"><a class="wlink" href="#_argmatcher:nofiles"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:nofiles</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : self<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">This makes the parser prevent invoking <a href="#matchgenerators">match generators</a>.  You can use it to "dead end" a parser and suggest no completions.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:reset" class="name"><a class="wlink" href="#_argmatcher:reset"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:reset</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : self<br/><div class="version">v1.3.10 and newer</div></div></div><div class="body"><p class="desc">Resets the argmatcher to an empty state.  All flags, arguments, and settings are cleared and reset back to a freshly-created state.</p><p class="desc"> See <a href="#adaptive-argmatchers">Adaptive Argmatchers</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:setclassifier" class="name"><a class="wlink" href="#_argmatcher:setclassifier"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:setclassifier</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : self<br/><div class="version">v1.1.18 and newer</div></div></div><div class="body"><p class="desc">This registers a function that gets called for each word the argmatcher handles, to classify the word as part of coloring the input text.  See <a href="#classifywords">Coloring the Input Text</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:setdelayinit" class="name"><a class="wlink" href="#_argmatcher:setdelayinit"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:setdelayinit</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : self<br/><div class="version">v1.3.10 and newer</div></div></div><div class="body"><p class="desc">This registers a function that gets called the first time the argmatcher is used in each edit line session.  See <a href="#adaptive-argmatchers">Adaptive Argmatchers</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:setendofflags" class="name"><a class="wlink" href="#_argmatcher:setendofflags"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:setendofflags</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">endofflags</span>:string|boolean] ) : self<br/><div class="version">v1.3.12 and newer</div></div></div><div class="body"><p class="desc">When <span class="arg">endofflags</span> is a string, it is a special flag that signals the end of flags.  When <span class="arg">endflags</span> is true or nil, then "<code>--</code>" is used as the end of flags string. Otherwise, the end of flags string is cleared.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:setflagprefix" class="name"><a class="wlink" href="#_argmatcher:setflagprefix"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:setflagprefix</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">prefixes...</span>:string] ) : self<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">This is almost never needed, because <code>:addflags()</code> automatically identifies flag prefix characters.</p><p class="desc"> However, any flags generated by functions can't influence the automatic flag prefix character(s) detection.  So in some cases it may be necessary to directly set the flag prefix.</p><p class="desc"> <strong>Note:</strong> <code>:setflagprefix()</code> behaves differently in different versions of Clink: <table> <tr><th>Version</th><th>Description</th></tr> <tr><td>v1.0.0 through v1.1.3</td><td>Sets the flag prefix characters.</td></tr> <tr><td>v1.1.4 through v1.2.35</td><td>Only sets flag prefix characters in an argmatcher created using the deprecated <a href="#clink.arg.register_parser">clink.arg.register_parser()</a> function.  Otherwise it has no effect.</td></tr> <tr><td>v1.2.36 through v1.3.8</td><td>Does nothing.</td></tr> <tr><td>v1.3.9 onward</td><td>Adds flag prefix characters, in addition to the ones automatically identified.</td></tr> </table></p><pre class="language-lua"><code>local function make_flags()
&nbsp;   return { '-a', '-b', '-c' }
end

clink.argmatcher('some_command')
:addflags(make_flags)   -- Only a function is added, so flag prefix characters cannot be determined automatically.
:setflagprefix('-')     -- Force '-' to be considered as a flag prefix character.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:setflagsanywhere" class="name"><a class="wlink" href="#_argmatcher:setflagsanywhere"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:setflagsanywhere</span> <span class="uplinks"><a href="#_argmatcher">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">anywhere</span>:boolean ) : self<br/><div class="version">v1.3.12 and newer</div></div></div><div class="body"><p class="desc">When <span class="arg">anywhere</span> is false, flags are only recognized until an argument is encountered.  Otherwise they are recognized anywhere (which is the default).</p></div></div><hr/>

</div><div class="group">
<h5 id="builder" class="group_name"><a class="wlink" href="#builder"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>builder: <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#builder:addmatch">addmatch</a></td><td><a href="#builder:setfullyqualify">setfullyqualify</a></td></tr><tr><td><a href="#builder:addmatches">addmatches</a></td><td><a href="#builder:setnosort">setnosort</a></td></tr><tr><td><a href="#builder:isempty">isempty</a></td><td><a href="#builder:setsuppressappend">setsuppressappend</a></td></tr><tr><td><a href="#builder:setappendcharacter">setappendcharacter</a></td><td><a href="#builder:setsuppressquoting">setsuppressquoting</a></td></tr><tr><td><a href="#builder:setforcequoting">setforcequoting</a></td><td><a href="#builder:setvolatile">setvolatile</a></td></tr></table>
<div class="function"><div class="header"> <div id="builder:addmatch" class="name"><a class="wlink" href="#builder:addmatch"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:addmatch</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">match</span>:string|table, [<span class="arg_name">type</span>:string] ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Adds a match.</p><p class="desc"> The <span class="arg">match</span> argument is the match string to add.</p><p class="desc"> The <span class="arg">type</span> argument is the optional match type, or "none" if omitted (see below for the possible match types).</p><p class="desc"> Alternatively, the <span class="arg">match</span> argument can be a table with the following scheme:</p><pre class="language-lua"><code>{
&nbsp;   match           = "..."    -- [string] The match text.
&nbsp;   display         = "..."    -- [string] OPTIONAL; alternative text to display when listing possible completions.
&nbsp;   arginfo         = "..."    -- [string] OPTIONAL; an argument info string (requires v1.5.4 or greater).
&nbsp;   description     = "..."    -- [string] OPTIONAL; a description for the match.
&nbsp;   type            = "..."    -- [string] OPTIONAL; the match type.
&nbsp;   appendchar      = "..."    -- [string] OPTIONAL; character to append after the match.
&nbsp;   suppressappend  = t_or_f   -- [boolean] OPTIONAL; whether to suppress appending a character after the match.
}</code></pre><p class="desc"><ul> <li>The <code>display</code> field is optional, and is displayed instead of the <code>match</code> field when listing possible completions.  It can even include ANSI escape codes for colors, etc.  (Requires v1.2.38 or greater.) <li>The <code>arginfo</code> field is optional, and is displayed next to the <code>match</code> field.  See <a href="#_argmatcher:adddescriptions">_argmatcher:adddescriptions</a> for more about the argument info string.  The <code>arginfo</code> field is ignored if the <code>display</code> field is present.  (Requires v1.5.4 or greater.) <li>The <code>description</code> field is optional, and is displayed in addition to <code>match</code> or <code>display</code> when listing possible completions.  (Requires v1.2.38 or greater.) <li>The <code>type</code> field is optional.  If omitted, then the <span class="arg">type</span> argument is used for that element. <li>The <code>appendchar</code> field is optional, and overrides the normal behavior for only this match.  (Requires v1.3.1 or greater.) <li>The <code>suppressappend</code> field is optional, and overrides the normal behavior for only this match.  (Requires v1.3.1 or greater.) </ul></p><p class="desc"> The match type affects how the match is inserted, displayed, and colored. Some type modifiers may be combined with a match type.</p><p class="desc"> <table> <tr><th>Type</th><th>Description</th></tr> <tr><td>"word"</td><td>Shows the whole word even if it contains slashes.</td></tr> <tr><td>"arg"</td><td>Avoids appending a space if the match ends with a colon or equal sign.</td></tr> <tr><td>"cmd"</td><td>Displays the match using <a href="#color_cmd">color.cmd</a>.</td></tr> <tr><td>"alias"</td><td>Displays the match using <a href="#color_doskey">color.doskey</a>.</td></tr> <tr><td>"file"</td><td>Shows only the last path component, with appropriate file coloring.</td></tr> <tr><td>"dir"</td><td>Shows only the last path component and adds a trailing path separator, with appropriate directory coloring.</td></tr> <tr><td>"none"</td><td>For backward compatibility the match is treated like "file", unless it ends with a path separator in which case it's treated like "dir".</td></tr> </table></p><p class="desc"> <table> <tr><th>Modifier</th><th>Description</th></tr> <tr><td>"hidden"</td><td>This can be combined with "file" or "dir" to use <a href="#color_hidden">color.hidden</a> (e.g. "file,hidden").</td></tr> <tr><td>"readonly"</td><td>This can be combined with "file" or "dir" to use <a href="#color_readonly">color.readonly</a> (e.g. "file,readonly").</td></tr> <tr><td>"link"</td><td>This can be combined with "file" or "dir" to appropriate symlink coloring (e.g. "file,link").</td></tr> <tr><td>"orphaned"</td><td>This can be combined with "link" to use appropriate orphaned symlink coloring (e.g. "file,link,orphaned").</td></tr> </table></p><p class="desc"> See <a href="#completioncolors">Completion Colors</a> and <a href="#colorsettings">Color Settings</a> for more information about colors.</p><pre class="language-lua"><code>builder:addmatch("hello") -- type is "none"
builder:addmatch("some_word", "word")
builder:addmatch("/flag", "arg")
builder:addmatch("abbrev", "alias")
builder:addmatch({ match="foo.cpp", type="file" })
builder:addmatch({ match="bar", type="dir" })
builder:addmatch({ match=".git", type="dir,hidden" })</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:addmatches" class="name"><a class="wlink" href="#builder:addmatches"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:addmatches</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">matches</span>:table, [<span class="arg_name">type</span>:string] ) : integer, boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">This is the equivalent of calling <a href="#builder:addmatch">builder:addmatch()</a> in a for-loop. Returns the number of matches added and a boolean indicating if all matches were added successfully.</p><p class="desc"> The <span class="arg">matches</span> argument can be a table of match strings, or a table of tables describing the matches.</p><p class="desc"> The <span class="arg">type</span> argument is used as the type when a match doesn't explicitly include a type, and is "none" if omitted.</p><pre class="language-lua"><code>builder:addmatches({"abc", "def"}) -- Adds two matches of type "none"
builder:addmatches({"abc", "def"}, "file") -- Adds two matches of type "file"
builder:addmatches({
&nbsp;   -- Same table scheme per entry here as in builder:addmatch()
&nbsp;   { match="remote/origin/master", type="word" },
&nbsp;   { match="remote/origin/topic", type="word" }
})</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:isempty" class="name"><a class="wlink" href="#builder:isempty"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:isempty</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : boolean<br/><div class="version">v1.3.9 and newer</div></div></div><div class="body"><p class="desc">Returns whether the match builder is empty.  It is empty when no matches have been added yet.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:setappendcharacter" class="name"><a class="wlink" href="#builder:setappendcharacter"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:setappendcharacter</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">append</span>:string] ) : nil<br/><div class="version">v1.1.2 and newer</div></div></div><div class="body"><p class="desc">Sets character to append after matches.  For example the <code>set</code> match generator uses this to append "=" when completing matches, so that completing <code>set USER</code> becomes <code>set USERDOMAIN=</code> (rather than <code>set USERDOMAIN&nbsp;</code>).</p></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:setforcequoting" class="name"><a class="wlink" href="#builder:setforcequoting"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:setforcequoting</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.4.19 and newer</div></div></div><div class="body"><p class="desc">Forces quoting rules to be applied to matches even if they aren't filenames.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:setfullyqualify" class="name"><a class="wlink" href="#builder:setfullyqualify"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:setfullyqualify</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">fullyqualify</span>:boolean] ) : nil<br/><div class="version">v1.5.3 and newer</div></div></div><div class="body"><p class="desc">Forces completions to be inserted as fully qualified paths.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:setnosort" class="name"><a class="wlink" href="#builder:setnosort"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:setnosort</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.3.3 and newer</div></div></div><div class="body"><p class="desc">Turns off sorting the matches.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:setsuppressappend" class="name"><a class="wlink" href="#builder:setsuppressappend"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:setsuppressappend</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">state</span>:boolean] ) : nil<br/><div class="version">v1.1.2 and newer</div></div></div><div class="body"><p class="desc">Sets whether to suppress appending anything after the match except a possible closing quote.  For example the env var match generator uses this.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:setsuppressquoting" class="name"><a class="wlink" href="#builder:setsuppressquoting"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:setsuppressquoting</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">state</span>:integer] ) : nil<br/><div class="version">v1.1.2 and newer</div></div></div><div class="body"><p class="desc">Sets whether to suppress quoting for the matches.  Set to 0 for normal quoting, or 1 to suppress quoting, or 2 to suppress end quotes.  For example the env var match generator sets this to 1 to overcome the quoting that would normally happen for "%" characters in filenames.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="builder:setvolatile" class="name"><a class="wlink" href="#builder:setvolatile"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>builder:setvolatile</span> <span class="uplinks"><a href="#builder">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.3.37 and newer</div></div></div><div class="body"><p class="desc">Forces the generated matches to be used only once.</p><p class="desc"> Normally Clink tries to reuse the most recently generated list of matches, if possible.  It is an optimization, to avoid doing potentally expensive work multiple times in a row to generate the same list of matches when nothing has changed.  Normally the optimization is beneficial, and typing more letters in a word can simply filter the existing list of matches.</p><p class="desc"> But sometimes an argument may have special syntax.  For example, an email address argument might want to generate matches for names until the word contains a <code>@</code>, and then it might want to generate matches for domain names.  The optimization interferes with situations where parsing the word produces a completely different list of possible matches.</p><p class="desc"> Making the generated matches volatile ensures matches are generated anew each time completion is invoked.</p></div></div><hr/>

</div><div class="group">
<h5 id="clink" class="group_name"><a class="wlink" href="#clink"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>clink. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#clink.applytheme">applytheme</a></td><td><a href="#clink.getsession">getsession</a></td><td><a href="#clink.oninputlinechanged">oninputlinechanged</a></td><td><a href="#clink.runcoroutineuntilcomplete">runcoroutineuntilcomplete</a></td></tr><tr><td><a href="#clink.argmatcher">argmatcher</a></td><td><a href="#clink.getthemes">getthemes</a></td><td><a href="#clink.onprovideline">onprovideline</a></td><td><a href="#clink.runonmain">runonmain</a></td></tr><tr><td><a href="#clink.classifier">classifier</a></td><td><a href="#clink.hinter">hinter</a></td><td><a href="#clink.parseline">parseline</a></td><td><a href="#clink.setcoroutineinterval">setcoroutineinterval</a></td></tr><tr><td><a href="#clink.dirmatches">dirmatches</a></td><td><a href="#clink.lower">lower</a></td><td><a href="#clink.popuplist">popuplist</a></td><td><a href="#clink.setcoroutinename">setcoroutinename</a></td></tr><tr><td><a href="#clink.dirmatchesexact">dirmatchesexact</a></td><td><a href="#clink.onaftercommand">onaftercommand</a></td><td><a href="#clink.print">print</a></td><td><a href="#clink.suggester">suggester</a></td></tr><tr><td><a href="#clink.filematches">filematches</a></td><td><a href="#clink.onbeginedit">onbeginedit</a></td><td><a href="#clink.promptcoroutine">promptcoroutine</a></td><td><a href="#clink.translateslashes">translateslashes</a></td></tr><tr><td><a href="#clink.filematchesexact">filematchesexact</a></td><td><a href="#clink.oncommand">oncommand</a></td><td><a href="#clink.promptfilter">promptfilter</a></td><td><a href="#clink.upper">upper</a></td></tr><tr><td><a href="#clink.generator">generator</a></td><td><a href="#clink.ondisplaymatches">ondisplaymatches</a></td><td><a href="#clink.readtheme">readtheme</a></td><td><a href="#clink.version_commit">version_commit</a></td></tr><tr><td><a href="#clink.getansihost">getansihost</a></td><td><a href="#clink.onendedit">onendedit</a></td><td><a href="#clink.reclassifyline">reclassifyline</a></td><td><a href="#clink.version_encoded">version_encoded</a></td></tr><tr><td><a href="#clink.getargmatcher">getargmatcher</a></td><td><a href="#clink.onfilterinput">onfilterinput</a></td><td><a href="#clink.recognizecommand">recognizecommand</a></td><td><a href="#clink.version_major">version_major</a></td></tr><tr><td><a href="#clink.getclinkprompt">getclinkprompt</a></td><td><a href="#clink.onfiltermatches">onfiltermatches</a></td><td><a href="#clink.refilterafterterminalresize">refilterafterterminalresize</a></td><td><a href="#clink.version_minor">version_minor</a></td></tr><tr><td><a href="#clink.getpopuplistcolors">getpopuplistcolors</a></td><td><a href="#clink.onhistory">onhistory</a></td><td><a href="#clink.refilterprompt">refilterprompt</a></td><td><a href="#clink.version_patch">version_patch</a></td></tr><tr><td><a href="#clink.getprompts">getprompts</a></td><td><a href="#clink.oninject">oninject</a></td><td><a href="#clink.reload">reload</a></td></tr></table>
<div class="function"><div class="header"> <div id="clink.applytheme" class="name"><a class="wlink" href="#clink.applytheme"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.applytheme</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">theme</span>:string, [<span class="arg_name">clearall</span>:boolean], [<span class="arg_name">no_save</span>:boolean] ) : table, message<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Finds the <span class="arg">theme</span> and tries to apply its setting (which are saved in the current profile settings, which affects all Clink sessions using that profile directory).</p><p class="desc"> If successful, it returns true.  If unsuccessful, it returns nil followed by a message describing the failure.</p><p class="desc"> Applying a color theme clears the built-in color settings to their default values before loading the theme.  If the optional <span class="arg">clearall</span> argument is true, then it also clears any color settings added by Lua scripts.</p><p class="desc"> If the optional <span class="arg">no_save</span> argument is true, then the color theme is loaded into memory but is not saved back to the Clink settings file.</p><p class="desc"> Refer to <a href="#color-themes">Color Themes</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.argmatcher" class="name"><a class="wlink" href="#clink.argmatcher"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.argmatcher</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">priority</span>:integer], <span class="arg_name">commands...</span>:string ) : <a href="#_argmatcher">_argmatcher</a><br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Creates and returns a new argument matcher parser object.  Use <a href="#_argmatcher:addarg">:addarg()</a> and etc to add arguments, flags, other parsers, and more.  See <a href="#argumentcompletion">Argument Completion</a> for more information.</p><p class="desc"> If one <span class="arg">command</span> is provided and there is already an argmatcher for it, then this returns the existing parser rather than creating a new parser.  Using :addarg() starts at arg position 1, making it possible to merge new args and etc into the existing parser.</p><p class="desc"> In Clink v1.3.38 and higher, if a <span class="arg">command</span> is a fully qualified path, then it is only used when the typed command expands to the same fully qualified path.  This makes it possible to create one argmatcher for <code>c:\general\program.exe</code> and another for <code>c:\special\program.exe</code>.  For example, aliases may be used to make both programs runnable, or the system PATH might be changed temporarily while working in a particular context.</p><p class="desc"> <strong>Note:</strong>  Merging <a href="#argmatcher_linking">linked argmatchers</a> only merges the first argument position.  The merge is simple, but should be sufficient for common simple cases.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.classifier" class="name"><a class="wlink" href="#clink.classifier"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.classifier</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">priority</span>:integer] ) : table<br/><div class="version">v1.1.49 and newer</div></div></div><div class="body"><p class="desc">Creates and returns a new word classifier object.  Define on the object a <code>:classify()</code> function which gets called in increasing <span class="arg">priority</span> order (low values to high values) when classifying words for coloring the input.  See <a href="#classifywords">Coloring the Input Text</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.dirmatches" class="name"><a class="wlink" href="#clink.dirmatches"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.dirmatches</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">word</span>:string ) : table<br/><div class="version">v1.1.8 and newer</div></div></div><div class="body"><p class="desc">You can use this function in an argmatcher to supply directory matches. This automatically handles Readline tilde completion.</p><pre class="language-lua"><code>-- Make "cd" generate directory matches (no files).
clink.argmatcher("cd")
:addflags("/d")
:addarg({ clink.dirmatches })</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.dirmatchesexact" class="name"><a class="wlink" href="#clink.dirmatchesexact"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.dirmatchesexact</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">word</span>:string ) : table<br/><div class="version">v1.6.4 and newer</div></div></div><div class="body"><p class="desc">This is the same as <a href="#clink.dirmatches">clink.dirmatches()</a> except this doesn't append a <code>*</code> to the search pattern.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.filematches" class="name"><a class="wlink" href="#clink.filematches"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.filematches</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">word</span>:string ) : table<br/><div class="version">v1.1.8 and newer</div></div></div><div class="body"><p class="desc">You can use this function in an argmatcher to supply file matches.  This automatically handles Readline tilde completion.</p><p class="desc"> Argmatchers default to matching files, so it's unusual to need this function.  However, some exceptions are when a flag needs to accept file matches but other flags and arguments don't, or when matches need to include more than files.</p><pre class="language-lua"><code>-- Make "foo --file" generate file matches, but other flags and args don't.
-- And the third argument can be a file or $stdin or $stdout.
clink.argmatcher("foo")
:addflags(
&nbsp;   "--help",
&nbsp;   "--file"..clink.argmatcher():addarg({ clink.filematches })
)
:addarg({ "one", "won" })
:addarg({ "two", "too" })
:addarg({ clink.filematches, "$stdin", "$stdout" })</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.filematchesexact" class="name"><a class="wlink" href="#clink.filematchesexact"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.filematchesexact</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">word</span>:string ) : table<br/><div class="version">v1.6.4 and newer</div></div></div><div class="body"><p class="desc">This is the same as <a href="#clink.filematches">clink.filematches()</a> except this doesn't append a <code>*</code> to the search pattern.</p><pre class="language-lua"><code>local function zip_file_matches(word)
&nbsp;   return clink.filematchesexact(word.."*.zip")
end

clink.argmatcher("unzip")
:addarg(zip_file_matches)   -- First arg is name of a .zip file.
:addarg()
:loop(2)</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.generator" class="name"><a class="wlink" href="#clink.generator"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.generator</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">priority</span>:integer] ) : table<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Creates and returns a new match generator object.  Define on the object a <code>:generate()</code> function which gets called in increasing <span class="arg">priority</span> order (low values to high values) when generating matches for completion.  See <a href="#matchgenerators">Match Generators</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.getansihost" class="name"><a class="wlink" href="#clink.getansihost"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.getansihost</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.1.48 and newer</div></div></div><div class="body"><p class="desc">Returns up to two strings indicating who Clink thinks will currently handle ANSI escape codes.</p><p class="desc"> The first returned string is the "current" handler.  This can change based on the <code><a href="#terminal_emulation">terminal.emulation</a></code> setting.</p><p class="desc"> Starting in v1.4.26 a second string can be returned which indicates the "native" handler.  This is what Clink has detected as the terminal host and is not affected by the `terminal.emulation` setting.</p><p class="desc"> The returned strings will always be <code>"unknown"</code> until the first edit prompt (see <a href="#clink.onbeginedit">clink.onbeginedit()</a>).</p><p class="desc"> These can be useful in choosing what kind of ANSI escape codes to use, but are a best guess and are not necessarily 100% reliable.</p><p class="desc"> <table> <tr><th>Return</th><th>Description</th></tr> <tr><td>"unknown"</td><td>Clink doesn't know.</td></tr> <tr><td>"clink"</td><td>Clink is emulating ANSI support.  256 color and 24 bit color escape codes are mapped to the nearest of the 16 basic colors.</td></tr> <tr><td>"conemu"</td><td>Clink thinks ANSI escape codes will be handled by ConEmu.</td></tr> <tr><td>"ansicon"</td><td>Clink thinks ANSI escape codes will be handled by ANSICON.</td></tr> <tr><td>"winterminal"</td><td>Clink thinks ANSI escape codes will be handled by Windows Terminal.</td></tr> <tr><td>"wezterm"</td><td>Clink thinks ANSI escape codes will be handled by WezTerm.</td></tr> <tr><td>"winconsole"</td><td>Clink thinks ANSI escape codes will be handled by the default console support in Windows, but Clink detected a terminal replacement that won't support 256 color or 24 bit color.</td></tr> <tr><td>"winconsolev2"</td><td>Clink thinks ANSI escape codes will be handled by the default console support in Windows, or it might be handled by a terminal replacement that Clink wasn't able to detect.</td></tr> </table></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.getargmatcher" class="name"><a class="wlink" href="#clink.getargmatcher"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.getargmatcher</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">find</span>:string|line_state ) : argmatcher|nil<br/><div class="version">v1.3.12 and newer</div></div></div><div class="body"><p class="desc">Finds the argmatcher registered to handle a command, if any.</p><p class="desc"> When <span class="arg">find</span> is a string it is interpreted as the name of a command, and this looks up the argmatcher for the named command.</p><p class="desc"> When <span class="arg">find</span> is a <a href="#line_state">line_state</a> this looks up the argmatcher for the command line.</p><p class="desc"> If no argmatcher is found, this returns nil.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.getclinkprompt" class="name"><a class="wlink" href="#clink.getclinkprompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.getclinkprompt</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string, string, string, table<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Returns four values related to the current clinkprompt module, if any:</p><p class="desc"> <ul> <li>A string containing the lowercase name (e.g. <code>"myprompt"</code>). <li>A string containing the full path name of the current clinkprompt module (e.g. <code>"C:\MyScripts\themes\MyPrompt.clinkprompt"</code>). <li>Lowercase full path name of the current clinkprompt module. <li>A table of other clinkprompt modules that the current module depends on.  The keys are the lowercase names (not full paths) of modules, and the values are all <code>true</code>. </ul></p><p class="desc"> If no clinkprompt module is currently active, then the return values are three empty strings and an empty table.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.getpopuplistcolors" class="name"><a class="wlink" href="#clink.getpopuplistcolors"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.getpopuplistcolors</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : table<br/><div class="version">v1.4.0 and newer</div></div></div><div class="body"><p class="desc">Returns the default popup colors in a table with the following scheme:</p><pre class="language-lua"><code>{
&nbsp;   items      = "...",   -- The SGR parameters for the items color.
&nbsp;   desc       = "...",   -- The SGR parameters for the description color.
&nbsp;   -- Clink v1.7.0 adds the following colors to the table:
&nbsp;   border     = "...",   -- The SGR parameters for the border color.
&nbsp;   header     = "...",   -- The SGR parameters for the title color.
&nbsp;   footer     = "...",   -- The SGR parameters for the footer message color.
&nbsp;   select     = "...",   -- The SGR parameters for the selected item color.
&nbsp;   selectdesc = "...",   -- The SGR parameters for the selected item description color.
}</code></pre><p class="desc">See <a href="https://en.wikipedia.org/wiki/ANSI_escape_code#SGR">SGR parameters</a> for more information on ANSI escape codes for colors.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.getprompts" class="name"><a class="wlink" href="#clink.getprompts"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.getprompts</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">name</span>:string] ) : (see remarks below)<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">This has two different behaviors, depending on whether the optional <span class="arg">name</span> argument is provided:</p><p class="desc"> If <span class="arg">name</span> is omitted, this returns two tables. The first table is an array of custom prompt names.  The second table is a map of lowercase names to their corresponding file paths.</p><pre class="language-lua"><code>local names, map = clink.getprompts()
for _, name in ipairs(names) do
&nbsp;   local file = map[clink.lower(name)]
&nbsp;   print(string.format('"%s" -> "%s"', name, file))
end</code></pre><p class="desc">If <span class="arg">name</span> is a string, this returns the file path of a matching custom prompt file.  If the ".clinkprompt" extension is not present, it is assumed.  If no matching prompt file is found, nil is returned.</p><pre class="language-lua"><code>clink.getprompt("My Prompt Name")
-- Could return "My Prompt Name.clinkprompt" if that file exists in the current directory.
-- Could return "c:\myclink\scripts\themes\My Prompt Name.clinkprompt" if that exists.
-- Etc.</code></pre><p class="desc">Refer to <a href="#customisingtheprompt">Customizing the Prompt</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.getsession" class="name"><a class="wlink" href="#clink.getsession"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.getsession</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.1.44 and newer</div></div></div><div class="body"><p class="desc">Returns the current Clink session id.</p><p class="desc"> This is needed when using <a href="https://www.lua.org/manual/5.2/manual.html#pdf-io.popen">io.popen()</a> (or similar functions) to invoke <code>clink history</code> or <code>clink info</code> while Clink is installed for autorun.  The popen API spawns a new CMD.exe, which gets a new Clink instance injected, so the history or info command will use the new session unless explicitly directed to use the calling session.</p><pre class="language-lua"><code>local exe = string.format('"%s" --session %s', CLINK_EXE, clink.getsession())
local r = io.popen('2>nul '..exe..' history')
if r then
&nbsp;   for line in r:lines() do
&nbsp;       print(line)
&nbsp;   end
&nbsp;   r:close()
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.getthemes" class="name"><a class="wlink" href="#clink.getthemes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.getthemes</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">name</span>:string] ) : (see remarks below)<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">This has two different behaviors, depending on whether the optional <span class="arg">name</span> argument is provided:</p><p class="desc"> If <span class="arg">name</span> is omitted, this returns two tables. The first table is an array of theme names.  The second table is a map of lowercase names to their corresponding file paths.</p><pre class="language-lua"><code>local names, map = clink.getthemes()
for _, name in ipairs(names) do
&nbsp;   local file = map[clink.lower(name)]
&nbsp;   print(string.format('"%s" -> "%s"', name, file))
end</code></pre><p class="desc">If <span class="arg">name</span> is a string, this returns the file path of a matching theme file.  If the ".clinktheme" extension is not present, it is assumed.  If no matching theme file is found, nil is returned.</p><pre class="language-lua"><code>clink.getthemes("My Theme Name")
-- Could return "My Theme Name.clinktheme" if that file exists in the current directory.
-- Could return "c:\myclink\scripts\themes\My Theme Name.clinktheme" if that exists.
-- Etc.</code></pre><p class="desc">Refer to <a href="#color-themes">Color Themes</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.hinter" class="name"><a class="wlink" href="#clink.hinter"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.hinter</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">priority</span>:integer] ) : table<br/><div class="version">v1.6.22 and newer</div></div></div><div class="body"><p class="desc">Creates and returns a new hinter object.  Define on the object a <code>:gethint()</code> function which gets called in increasing <span class="arg">priority</span> order (low values to high values) when updating the input line display (e.g. while typing).  See <a href="#showinginputhints">Showing Input Hints</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.lower" class="name"><a class="wlink" href="#clink.lower"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.lower</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : string<br/><div class="version">v0.4.9 and newer</div></div></div><div class="body"><p class="desc">This API correctly converts UTF8 strings to lowercase, with international linguistic awareness.</p><pre class="language-lua"><code>clink.lower("Hello World") -- returns "hello world"
clink.lower("ÁÈÏõû")       -- returns "áèïõû"</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.onaftercommand" class="name"><a class="wlink" href="#clink.onaftercommand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.onaftercommand</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.2.50 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called after every editing command (key binding).</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.onbeginedit" class="name"><a class="wlink" href="#clink.onbeginedit"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.onbeginedit</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.1.11 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called when Clink's edit prompt is activated.  The function receives no arguments and has no return values.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.oncommand" class="name"><a class="wlink" href="#clink.oncommand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.oncommand</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.3.12 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called when the command word changes in the edit line.</p><p class="desc"> The function receives 2 arguments:  the <a href="#line_state">line_state</a> for the command, and a table with the following scheme:</p><pre class="language-lua"><code>{
&nbsp;   command =   -- [string] The command.
&nbsp;   quoted  =   -- [boolean] Whether the command is quoted in the command line.
&nbsp;   type    =   -- [string] "unrecognized", "executable", or "command" (a CMD command name).
&nbsp;   file    =   -- [string] The file that would be executed, or an empty string.
}</code></pre><p class="desc">The function has no return values.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.ondisplaymatches" class="name"><a class="wlink" href="#clink.ondisplaymatches"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.ondisplaymatches</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.1.12 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called when Clink is about to display matches.  See <a href="#filteringthematchdisplay">Filtering the Match Display</a> for more information.</p><pre class="language-lua"><code>local function my_filter(matches, popup)
&nbsp;   local new_matches = {}
&nbsp;   for _,m in ipairs(matches) do
&nbsp;       if m.match:find("[0-9]") then
&nbsp;           -- Ignore matches with one or more digits.
&nbsp;       else
&nbsp;           -- Keep the match, and also add * prefix to directory matches.
&nbsp;           if m.type:find("^dir") then
&nbsp;               m.display = "*"..m.match
&nbsp;           end
&nbsp;           table.insert(new_matches, m)
&nbsp;       end
&nbsp;   end
&nbsp;   return new_matches
end

function my_match_generator:generate(line_state, match_builder)
&nbsp;   ...
&nbsp;   clink.ondisplaymatches(my_filter)
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.onendedit" class="name"><a class="wlink" href="#clink.onendedit"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.onendedit</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called when Clink's edit prompt ends.  The function receives a string argument containing the input text from the edit prompt.</p><p class="desc"> <strong>Breaking Change in v1.2.16:</strong>  The ability to replace the user's input has been moved to a separate <a href="#clink.onfilterinput">onfilterinput</a> event.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.onfilterinput" class="name"><a class="wlink" href="#clink.onfilterinput"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.onfilterinput</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.2.16 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called after Clink's edit prompt ends (it is called after the <a href="#clink.onendedit">onendedit</a> event).  The function receives a string argument containing the input text from the edit prompt.  The function returns up to two values.  If the first is not nil then it's a string that replaces the edit prompt text.  If the second is not nil and is false then it stops further onfilterinput handlers from running.</p><p class="desc"> Starting in v1.3.13 <span class="arg">func</span> may return a table of strings, and each is executed as a command line.</p><p class="desc"> <strong>Note:</strong>  Be very careful if you replace the text; this has the potential to interfere with or even ruin the user's ability to enter command lines for CMD to process.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.onfiltermatches" class="name"><a class="wlink" href="#clink.onfiltermatches"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.onfiltermatches</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.1.41 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called after Clink generates matches for completion.  See <a href="#filteringmatchcompletions"> Filtering Match Completions</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.onhistory" class="name"><a class="wlink" href="#clink.onhistory"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.onhistory</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.5.13 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called when an input line has been accepted and is about to be added to history.  The function receives a string argument containing the input text from the edit prompt.  The function can return false to cancel adding the line to history (if it returns false then no further onhistory handlers will run for that line).</p><p class="desc"> <strong>Note:</strong>  The onhistory handler functions are not called by <code><a href="#rlcmd-add-history">add-history</a></code> or the <code>clink history</code> command.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.oninject" class="name"><a class="wlink" href="#clink.oninject"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.oninject</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.1.21 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called when Clink is injected into a CMD process.  The function is called only once per session.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.oninputlinechanged" class="name"><a class="wlink" href="#clink.oninputlinechanged"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.oninputlinechanged</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.4.18 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called after an editing command (key binding) makes changes in the input line.</p><p class="desc"> The function receives one argument, a <span class="arg">line</span> string which contains the new contents of the input line.</p><p class="desc"> The function has no return values.</p><p class="desc"> Here is a script that demonstrates a lighthearted example of how this could be used.  Any time the input line contains "marco" it replaces the prompt with "POLO!".</p><pre class="language-lua"><code>local has_marco
local polo = clink.promptfilter(-1)

function polo:filter()
&nbsp;   if has_marco then
&nbsp;       return "\x1b[44;96mPOLO!\x1b[m ", false
&nbsp;   end
end

local function onbeginedit()
&nbsp;   has_marco = nil
end

local function oninputlinechanged(line)
&nbsp;   local new_marco = line:find("marco") and true
&nbsp;   if has_marco ~= new_marco then
&nbsp;       has_marco = new_marco
&nbsp;       clink.refilterprompt()
&nbsp;   end
end

clink.onbeginedit(onbeginedit)
clink.oninputlinechanged(oninputlinechanged)

function clink.oninputlinechanged(func)
&nbsp;   _add_event_callback("oninputlinechanged", func)
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.onprovideline" class="name"><a class="wlink" href="#clink.onprovideline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.onprovideline</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.3.18 and newer</div></div></div><div class="body"><p class="desc">Registers <span class="arg">func</span> to be called after the <a href="#clink.onbeginedit">onbeginedit</a> event but before the input line editor starts.  If <span class="arg">func</span> returns a string, it is executed as a command line without showing a prompt.  The input line editor is skipped, and the <a href="#clink.onendedit">onendedit</a> and <a href="#clink.onfilterinput">onfilterinput</a> events happen immediately.</p><p class="desc"> <strong>Note:</strong>  Be very careful when returning a string; this can interfere with the user's ability to use CMD.  Mistakes in the command string can have potential to cause damage to the system very quickly.  It is also possible for a script to cause an infinite loop, and therefore <kbd>Ctrl</kbd>-<kbd>Break</kbd> skips the next <a href="#clink.onprovideline">onprovideline</a> event, allowing the user to regain control.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.parseline" class="name"><a class="wlink" href="#clink.parseline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.parseline</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">line</span>:string ) : table<br/><div class="version">v1.3.37 and newer</div></div></div><div class="body"><p class="desc">This parses the <span class="arg">line</span> string into a table of commands, with one <a href="#line_state">line_state</a> for each command parsed from the line string.</p><p class="desc"> The returned table of tables has the following scheme:</p><pre class="language-lua"><code>local commands = clink.parseline("echo hello & echo world")
-- commands[1].line_state corresponds to "echo hello".
-- commands[2].line_state corresponds to "echo world".</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.popuplist" class="name"><a class="wlink" href="#clink.popuplist"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.popuplist</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">title</span>:string, <span class="arg_name">items</span>:table, [<span class="arg_name">index</span>:integer], [<span class="arg_name">del_callback</span>:function] ) : string, boolean, integer<br/><div class="version">v1.2.17 and newer</div></div></div><div class="body"><p class="desc">Displays a popup list and returns the selected item.  May only be used within a <a href="#luakeybindings">luafunc: key binding</a> or inside a function registered with <a href="#clink.onfiltermatches">clink.onfiltermatches()</a>.</p><p class="desc"> <span class="arg">title</span> is required and captions the popup list.</p><p class="desc"> <span class="arg">items</span> is a table of strings to display.</p><p class="desc"> <span class="arg">index</span> optionally specifies the default item (or 1 if omitted).</p><p class="desc"> <span class="arg">del_callback</span> optionally specifies a callback function to be called when <kbd>Del</kbd> is pressed.  The function receives the index of the selected item.  If the function returns true then the item is deleted from the popup list.  This requires Clink v1.3.41 or higher.</p><p class="desc"> The function returns one of the following: <ul> <li>nil if the popup is canceled or an error occurs. <li>Three values: <ul> <li>string indicating the <code>value</code> field from the selected item (or the <code>display</code> field if no value field is present). <li>boolean which is true if the item was selected with <kbd>Shift</kbd> or <kbd>Ctrl</kbd> pressed. <li>integer indicating the index of the selected item in the original <span class="arg">items</span> table. </ul> </ul></p><p class="desc"> Alternatively, the <span class="arg">items</span> argument can be a table of tables with the following scheme:</p><pre class="language-lua"><code>{
&nbsp;   {
&nbsp;       value       = "...",   -- Required; this is returned if the item is chosen.
&nbsp;       display     = "...",   -- Optional; displayed instead of value.
&nbsp;       description = "...",   -- Optional; displayed in a dimmed color in a second column.
&nbsp;   },
&nbsp;   ...
}</code></pre><p class="desc">The <code>value</code> field is returned if the item is chosen.</p><p class="desc"> The optional <code>display</code> field is displayed in the popup list instead of the <code>value</code> field.</p><p class="desc"> The optional <code>description</code> field is displayed in a dimmed color in a second column.  If it contains tab characters (<code>"\t"</code>) the description string is split into multiple columns (up to 3).</p><p class="desc"> Starting in v1.3.18, if any description contains a tab character, then the descriptions are automatically aligned in a column.</p><p class="desc"> Otherwise, the descriptions follow immediately after the display field. They can be aligned in a column by making all of the display fields be the same number of character cells.</p><p class="desc"> Starting in v1.4.0, the <span class="arg">items</span> table may optionally include any of the following fields to customize the popup list.  The color strings must be <a href="https://en.wikipedia.org/wiki/ANSI_escape_code#SGR">SGR parameters</a> and will be automatically converted into the corresponding ANSI escape code.</p><pre class="language-lua"><code>{
&nbsp;   height          = 20,       -- Preferred height, not counting the border.
&nbsp;   width           = 60,       -- Preferred width, not counting the border.
&nbsp;   reverse         = true,     -- Start at bottom; search upwards.
&nbsp;   searchmode      = "filter", -- Use "find" or "filter" to override the default search mode (in v1.6.13 and higher).
&nbsp;   colors = {                  -- Override the popup colors using any colors in this table.
&nbsp;       items       = "97;44",  -- The items color (e.g. bright white on blue).
&nbsp;       desc        = "...",    -- The description color.
&nbsp;       border      = "...",    -- The border color (defaults to items color).
&nbsp;       header      = "...",    -- The title color (defaults to border).
&nbsp;       footer      = "...",    -- The footer message color (defaults to border color).
&nbsp;       select      = "...",    -- The selected item color (defaults to reverse video of items color).
&nbsp;       selectdesc  = "...",    -- The selected item description color (defaults to selected item color).
&nbsp;   }
}</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.print" class="name"><a class="wlink" href="#clink.print"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.print</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( ... ) : nil<br/><div class="version">v1.2.11 and newer</div></div></div><div class="body"><p class="desc">This works like <a href="https://www.lua.org/manual/5.2/manual.html#pdf-print">print()</a>, but this supports ANSI escape codes and Unicode.</p><p class="desc"> If the special value <code>NONL</code> is included anywhere in the argument list then the usual trailing newline is omitted.  This can sometimes be useful particularly when printing certain ANSI escape codes.</p><p class="desc"> <strong>Note:</strong>  In Clink versions before v1.2.11 the <code>clink.print()</code> API exists (undocumented) but accepts exactly one string argument and is therefore not fully compatible with normal <a href="https://www.lua.org/manual/5.2/manual.html#pdf-print">print()</a> syntax.  If you use fewer or more than 1 argument or if the argument is not a string, then first checking the Clink version (e.g. <a href="#clink.version_encoded">clink.version_encoded</a>) can avoid runtime errors.</p><pre class="language-lua"><code>clink.print("\x1b[32mgreen\x1b[m \x1b[35mmagenta\x1b[m")
-- Outputs "green" in green, a space, and "magenta" in magenta.

local a = "hello"
local world = 73
clink.print("a", a, "world", world)
-- Outputs "a       hello   world   73".

clink.print("hello", NONL)
clink.print("world")
-- Outputs "helloworld".</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.promptcoroutine" class="name"><a class="wlink" href="#clink.promptcoroutine"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.promptcoroutine</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function, [<span class="arg_name">cookie</span>:string] ) : [return value from func]<br/><div class="version">v1.2.10 and newer</div></div></div><div class="body"><p class="desc">Creates a coroutine to run the <span class="arg">func</span> function in the background.  Clink will automatically resume the coroutine repeatedly while input line editing is idle.  When the <span class="arg">func</span> function completes, Clink will automatically refresh the prompt by triggering prompt filtering again.</p><p class="desc"> A coroutine is only created the first time each prompt filter calls this API during a given input line session.  Subsequent calls reuse the already-created coroutine.  (E.g. pressing <kbd>Enter</kbd> ends an input line session.)</p><p class="desc"> <fieldset><legend>Compatibility Note:</legend> Starting in v1.7.0, the optional <span class="arg">cookie</span> argument can be included to allow a prompt filter to have multiple different coroutines during a given input line session.  Subsequent calls for a given <span class="arg">cookie</span> value reuse the already-created coroutine associated with that cookie value.  This greatly simplifies the use of <a href="#asyncpromptfiltering">Asynchronous Prompt Filtering</a>.  When <span class="arg">cookie</span> is omitted, then <code>"default"</code> is assumed as the cookie value. </fieldset></p><p class="desc"> The API returns nil until the <span class="arg">func</span> function has finished.  After that, the API returns whatever the <span class="arg">func</span> function returned.  The API returns one value; if multiple return values are needed, return them in a table.</p><p class="desc"> If the <code><a href="#prompt_async">prompt.async</a></code> setting is disabled, then the coroutine runs to completion immediately before returning.  Otherwise, the coroutine runs during idle while editing the input line.  The <span class="arg">func</span> function receives one argument: true if it's running in the background, or false if it's running immediately.</p><p class="desc"> See <a href="#asyncpromptfiltering">Asynchronous Prompt Filtering</a> for more information.</p><p class="desc"> <strong>Note:</strong> each prompt filter can have at most one prompt coroutine.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.promptfilter" class="name"><a class="wlink" href="#clink.promptfilter"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.promptfilter</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">priority</span>:integer] ) : table<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Creates and returns a new promptfilter object that is applied in increasing <span class="arg">priority</span> order (low values to high values).  Define on the object a <code>:filter()</code> function that takes a string argument which contains the filtered prompt so far.  The function can return nil to have no effect, or can return a new prompt string.  It can optionally stop further prompt filtering by also returning false.  See <a href="#customisingtheprompt">Customizing the Prompt</a> for more information.</p><pre class="language-lua"><code>local foo_prompt = clink.promptfilter(80)
function foo_prompt:filter(prompt)
&nbsp;   -- Insert the date at the beginning of the prompt.
&nbsp;   return os.date("%a %H:%M").." "..prompt
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.readtheme" class="name"><a class="wlink" href="#clink.readtheme"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.readtheme</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">theme</span>:string ) : table, string<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Reads the specified theme and returns a table with its settings.  If unsuccessful, it returns nil followed by a message describing the failure.</p><p class="desc"> <span class="arg">theme</span> can be a filename or the title of an installed theme.</p><p class="desc"> Refer to <a href="#color-themes">Color Themes</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.reclassifyline" class="name"><a class="wlink" href="#clink.reclassifyline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.reclassifyline</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.3.9 and newer</div></div></div><div class="body"><p class="desc">Reclassify the input line text again and refresh the input line display.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.recognizecommand" class="name"><a class="wlink" href="#clink.recognizecommand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.recognizecommand</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">line</span>:string], <span class="arg_name">word</span>:string, [<span class="arg_name">quoted</span>:boolean] ) : word_class:string, ready:boolean, file:string<br/><div class="version">v1.3.38 and newer</div></div></div><div class="body"><p class="desc">This reports the input line coloring word classification to use for a command word.  The return value can be passed into <a href="#word_classifications:classifyword">word_classifications:classifyword()</a> as its <span class="arg">word_class</span> argument.</p><p class="desc"> This is intended for advanced input line coloring purposes.  For example if a script uses <a href="#clink.onfilterinput">clink.onfilterinput()</a> to modify the input text, then it can use this function inside a custom <a href="#classifier_override_line">classifier</a> to look up the color appropriate for the modified input text.</p><p class="desc"> The <span class="arg">line</span> is optional and may be an empty string or omitted.  When present, it is parsed to check if it would be processed as a <a href="#directory-shortcuts">directory shortcut</a>.</p><p class="desc"> The <span class="arg">word</span> is a string indicating the word to be analyzed.</p><p class="desc"> The <span class="arg">quoted</span> is optional.  When true, it indicates the word is quoted and any <code>^</code> characters are taken as-is, rather than treating them as the usual CMD escape character.</p><p class="desc"> The possible return values for <span class="arg">word_class</span> are:</p><p class="desc"> <table> <tr><th>Code</th><th>Classification</th><th>Clink Color Setting</th></tr> <tr><td><code>"x"</code></td><td>Executable; used for the first word when it is not a command or doskey alias, but is an executable name that exists.</td><td><code><a href="#color_executable">color.executable</a></code></td></tr> <tr><td><code>"u"</code></td><td>Unrecognized; used for the first word when it is not a command, doskey alias, or recognized executable name.</td><td><code><a href="#color_unrecognized">color.unrecognized</a></code></td></tr> <tr><td><code>"o"</code></td><td>Other; used for file names and words that don't fit any of the other classifications.</td><td><code><a href="#color_input">color.input</a></code></td></tr> </table></p><p class="desc"> The possible return values for <span class="arg">ready</span> are:</p><p class="desc"> <ul> <li>True if the analysis has completed.</li> <li>False if the analysis has not yet completed (and the returned word class may be a temporary placeholder).</li> </ul></p><p class="desc"> The return value for <span class="arg">file</span> is the fully qualified path to the found executable file, if any, or nil.</p><p class="desc"> <strong>Note:</strong>  This always returns immediately, and it uses a background thread to analyze the <span class="arg">word</span> asynchronously. When the background thread finishes analyzing the word, Clink automatically redisplays the input line, giving classifiers a chance to call this function again and get the final <span class="arg">word_class</span> result.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.refilterafterterminalresize" class="name"><a class="wlink" href="#clink.refilterafterterminalresize"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.refilterafterterminalresize</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">refilter</span>:boolean ) : boolean<br/><div class="version">v1.4.0 and newer</div></div></div><div class="body"><p class="desc">Call this with <span class="arg">refilter</span> either nil or true to make Clink automatically rerun prompt filters after the terminal is resized.  The previous value is returned.</p><p class="desc"> On Windows the terminal is resized while the console program in the terminal (such as CMD) continues to run.  If a console program writes to the terminal while the resize is happening, then the terminal display can become garbled. So Clink waits until the terminal has stayed the same size for at least 1.5 seconds, and then it reruns the prompt filters.</p><p class="desc"> <strong>Use this with caution:</strong>  if the prompt filters have not been designed efficiently, then rerunning them after resizing the terminal could cause responsiveness problems.  Also, if the terminal is resized again while the prompt filters are being rerun, then the terminal display may become garbled.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.refilterprompt" class="name"><a class="wlink" href="#clink.refilterprompt"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.refilterprompt</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.2.46 and newer</div></div></div><div class="body"><p class="desc">Invoke the prompt filters again and refresh the prompt.</p><p class="desc"> <strong>Note:</strong> This can potentially be expensive; call this only infrequently.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.reload" class="name"><a class="wlink" href="#clink.reload"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.reload</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.2.29 and newer</div></div></div><div class="body"><p class="desc">Reloads Lua scripts and Readline config file at the next prompt.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.runcoroutineuntilcomplete" class="name"><a class="wlink" href="#clink.runcoroutineuntilcomplete"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.runcoroutineuntilcomplete</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">coroutine</span>:coroutine ) : nil<br/><div class="version">v1.3.5 and newer</div></div></div><div class="body"><p class="desc">By default, a coroutine is canceled if it doesn't complete before an edit line ends.  In some cases it may be necessary for a coroutine to run until it completes, even if it spans multiple edit lines.</p><p class="desc"> <strong>Use this with caution:</strong>  This can potentially cause performance problems or cause prompt filtering to experience delays.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.runonmain" class="name"><a class="wlink" href="#clink.runonmain"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.runonmain</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function ) : nil<br/><div class="version">v1.5.21 and newer</div></div></div><div class="body"><p class="desc">Runs <span class="arg">func</span> on the main coroutine.</p><p class="desc"> If main is the current coroutine, then <span class="arg">func</span> runs immediately.</p><p class="desc"> If main is not the current coroutine, then <span class="arg">func</span> is scheduled to run when control returns to the main coroutine.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.setcoroutineinterval" class="name"><a class="wlink" href="#clink.setcoroutineinterval"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.setcoroutineinterval</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">coroutine</span>:coroutine, [<span class="arg_name">interval</span>:number] ) : nil<br/><div class="version">v1.3.1 and newer</div></div></div><div class="body"><p class="desc">Overrides the interval at which a coroutine is resumed.  All coroutines are automatically added with an interval of 0 by default, so calling this is only needed when you want to change the interval.</p><p class="desc"> Coroutines are automatically resumed while waiting for input while editing the input line.</p><p class="desc"> If a coroutine's interval is less than 5 seconds and the coroutine has been alive for more than 5 seconds, then the coroutine is throttled to run no more often than once every 5 seconds (regardless how much total time is has spent running).  Throttling is meant to prevent long-running coroutines from draining battery power, interfering with responsiveness, or other potential problems.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.setcoroutinename" class="name"><a class="wlink" href="#clink.setcoroutinename"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.setcoroutinename</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">coroutine</span>:coroutine, <span class="arg_name">name</span>:string ) : nil<br/><div class="version">v1.3.1 and newer</div></div></div><div class="body"><p class="desc">Sets a name for the coroutine.  This is purely for diagnostic purposes.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.suggester" class="name"><a class="wlink" href="#clink.suggester"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.suggester</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string ) : table<br/><div class="version">v1.2.47 and newer</div></div></div><div class="body"><p class="desc">Creates and returns a new suggester object.  Suggesters are consulted in the order their names are listed in the <code><a href="#autosuggest.strategy">autosuggest.strategy</a></code> setting.</p><p class="desc"> Define on the object a <code>:suggest()</code> function that takes a <a href="#line_state">line_state</a> argument which contains the input line, and a <a href="#matches">matches</a> argument which contains the possible completions.  The function can return nil to give the next suggester a chance, or can return a suggestion (or an empty string) to stop looking for suggestions.</p><p class="desc"> In Clink v1.2.51 and higher, the function may return a suggestion and an offset where the suggestion begins in the line.  This is useful if the suggester wants to be able to insert the suggestion using the original casing.  For example if you type "set varn" and a history entry is "set VARNAME" then returning <code>"set VARNAME", 1</code> or <code>"VARNAME", 5</code> can accept "set VARNAME" instead of "set varnAME".</p><p class="desc"> See <a href="#customisingsuggestions">Customizing Suggestions</a> for more information.</p><pre class="language-lua"><code>local doskeyarg = clink.suggester("doskeyarg")
function doskeyarg:suggest(line, matches)
&nbsp;   if line:getword(1) == "doskey" and
&nbsp;           line:getline():match("[ \t][^ \t/][^ \t]+=") and
&nbsp;           not line:getline():match("%$%*") then
&nbsp;       -- If the line looks like it defines a macro and doesn't yet add all
&nbsp;       -- arguments, suggest adding all arguments.
&nbsp;       if line:getline():sub(#line:getline()) == " " then
&nbsp;           return "$*"
&nbsp;       else
&nbsp;           return " $*"
&nbsp;       end
&nbsp;   end
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.translateslashes" class="name"><a class="wlink" href="#clink.translateslashes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.translateslashes</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">mode</span>:integer] ) : integer<br/><div class="version">v1.2.7 and newer</div></div></div><div class="body"><p class="desc">This overrides how Clink translates slashes in completion matches, which is normally determined by the <code><a href="#match_translate_slashes">match.translate_slashes</a></code> setting.</p><p class="desc"> This is reset every time match generation is invoked, so use a generator to set this.</p><p class="desc"> The <span class="arg">mode</span> specifies how to translate slashes when generators add matches: <table> <tr><th>Mode</th><th>Description</th></tr> <tr><td><code>0</code></td><td>No translation.</td></tr> <tr><td><code>1</code></td><td>Translate using the system path separator (backslash on Windows).</td></tr> <tr><td><code>2</code></td><td>Translate to slashes (<code>/</code>).</td></tr> <tr><td><code>3</code></td><td>Translate to backslashes (<code>\</code>).</td></tr> <tr><td><code>4</code></td><td>Translate using the first kind of slash found in the word being completed, or the system path separator if there are no slashes yet.  (Only available in Clink v1.6.16 and higher.)</td></tr> </table></p><p class="desc"> If <span class="arg">mode</span> is omitted, then the function returns the current slash translation mode without changing it.</p><p class="desc"> <strong>Note:</strong>  Clink always generates file matches using the system path separator (backslash on Windows), regardless what path separator may have been typed as input.  Setting this to <code>0</code> does not disable normalizing typed input paths when invoking completion; it only disables translating slashes in custom generators.</p><pre class="language-lua"><code>-- This example affects all match generators, by using priority -1 to
-- run first and returning false to let generators continue.
-- To instead affect only one generator, call clink.translateslashes()
-- in its :generate() function and return true.
local force_slashes = clink.generator(-1)
function force_slashes:generate()
&nbsp;   clink.translateslashes(2)  -- Convert to slashes.
&nbsp;   return false               -- Allow generators to continue.
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.upper" class="name"><a class="wlink" href="#clink.upper"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.upper</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : string<br/><div class="version">v1.1.5 and newer</div></div></div><div class="body"><p class="desc">This API correctly converts UTF8 strings to uppercase, with international linguistic awareness.</p><pre class="language-lua"><code>clink.upper("Hello World") -- returns "HELLO WORLD"
clink.lower("áèïÕÛ")       -- returns "ÁÈÏÕÛ"</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.version_commit" class="name"><a class="wlink" href="#clink.version_commit"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.version_commit</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">string variable<br/><div class="version">v1.1.10 and newer</div></div></div><div class="body"><p class="desc">The commit part of the Clink version number. For v1.2.3.<strong>a0f14d</strong> the commit part is a0f14d.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.version_encoded" class="name"><a class="wlink" href="#clink.version_encoded"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.version_encoded</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">integer variable<br/><div class="version">v1.1.10 and newer</div></div></div><div class="body"><p class="desc">The Clink version number encoded as a single integer following the format <span class="arg">Mmmmpppp</span> where <span class="arg">M</span> is the major part, <span class="arg">m</span> is the minor part, and <span class="arg">p</span> is the patch part of the version number.</p><p class="desc"> For example, Clink v95.6.723 would be <code>950060723</code>.</p><p class="desc"> This format makes it easy to test for feature availability by encoding version numbers from the release notes.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.version_major" class="name"><a class="wlink" href="#clink.version_major"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.version_major</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">integer variable<br/><div class="version">v1.1.10 and newer</div></div></div><div class="body"><p class="desc">The major part of the Clink version number. For v<strong>1</strong>.2.3.a0f14d the major version is 1.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.version_minor" class="name"><a class="wlink" href="#clink.version_minor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.version_minor</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">integer variable<br/><div class="version">v1.1.10 and newer</div></div></div><div class="body"><p class="desc">The minor part of the Clink version number. For v1.<strong>2</strong>.3.a0f14d the minor version is 2.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.version_patch" class="name"><a class="wlink" href="#clink.version_patch"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.version_patch</span> <span class="uplinks"><a href="#clink">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">integer variable<br/><div class="version">v1.1.10 and newer</div></div></div><div class="body"><p class="desc">The patch part of the Clink version number. For v1.2.<strong>3</strong>.a0f14d the patch version is 3.</p></div></div><hr/>

</div><div class="group">
<h5 id="console" class="group_name"><a class="wlink" href="#console"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>console. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#console.cellcount">cellcount</a></td><td><a href="#console.findprevline">findprevline</a></td><td><a href="#console.gettitle">gettitle</a></td><td><a href="#console.readinput">readinput</a></td></tr><tr><td><a href="#console.cellcountiter">cellcountiter</a></td><td><a href="#console.getcolortable">getcolortable</a></td><td><a href="#console.gettop">gettop</a></td><td><a href="#console.screengrab">screengrab</a></td></tr><tr><td><a href="#console.checkinput">checkinput</a></td><td><a href="#console.getcursorpos">getcursorpos</a></td><td><a href="#console.getwidth">getwidth</a></td><td><a href="#console.scroll">scroll</a></td></tr><tr><td><a href="#console.ellipsify">ellipsify</a></td><td><a href="#console.getheight">getheight</a></td><td><a href="#console.islinedefaultcolor">islinedefaultcolor</a></td><td><a href="#console.settitle">settitle</a></td></tr><tr><td><a href="#console.explodeansi">explodeansi</a></td><td><a href="#console.getlinetext">getlinetext</a></td><td><a href="#console.linehascolor">linehascolor</a></td></tr><tr><td><a href="#console.findnextline">findnextline</a></td><td><a href="#console.getnumlines">getnumlines</a></td><td><a href="#console.plaintext">plaintext</a></td></tr></table>
<div class="function"><div class="header"> <div id="console.cellcount" class="name"><a class="wlink" href="#console.cellcount"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.cellcount</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : integer<br/><div class="version">v1.2.5 and newer</div></div></div><div class="body"><p class="desc">Returns the count of visible character cells that would be consumed if the <span class="arg">text</span> string were output to the console, accounting for any ANSI escape codes that may be present in the text.</p><p class="desc"> <strong>Note:</strong> Backspace characters and line endings are counted as visible character cells and will skew the resulting count.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.cellcountiter" class="name"><a class="wlink" href="#console.cellcountiter"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.cellcountiter</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : iterator<br/><div class="version">v1.7.4 and newer</div></div></div><div class="body"><p class="desc">This returns an iterator function which steps through <span class="arg">text</span> one glyph at a time.  Each call to the iterator function returns the string for the next glyph, the count of visible character cells that would be consumed when displaying it in the terminal, and a boolean indicating whether the string is an emoji.</p><p class="desc"> <strong>Note:</strong> This only recognizes emojis if Clink recognizes that the terminal program supports emojis.  The results are "best effort", and may differ from reality depending on the specific OS version, terminal program (and its version), and the input string.  The width prediction is based on the Unicode emoji specification, with accommodations for how Windows Terminal renders certain emoji sequences.</p><pre class="language-lua"><code>-- UTF8 sample string:
-- Index by glyph:       12                                                   3
-- Unicode character:    A❤️          U+FE0F      ZWJ         🔥              Z
local text            = "A\xe2\x9d\xa4\xef\xb8\x8f\xe2\x80\x8d\xf0\x9f\x94\xa5Z"
-- Index by byte:        12   3   4   5   6   7   8   9   10  11  12  13  14  15

for str, width, emoji in console.cellcountiter(text) do
&nbsp;   -- Build string showing byte values.
&nbsp;   local bytes = ""
&nbsp;   for i = 1, #str do
&nbsp;       bytes = bytes .. string.format("\\x%02x", str:byte(i, i))
&nbsp;   end
&nbsp;   -- Print the cellcount substring and info about it.
&nbsp;   clink.print(str, width, emoji, bytes)
&nbsp;   -- Print the individual codepoints in the cellcount substring.
&nbsp;   for s, value in unicode.iter(str) do
&nbsp;       bytes = ""
&nbsp;       for i = 1, #s do
&nbsp;           bytes = bytes .. string.format("\\x%02x", s:byte(i, i))
&nbsp;       end
&nbsp;       clink.print("", s, string.format("U+%X", value), bytes)
&nbsp;   end
end

-- The above prints the following:
--      A       1       false   \x41
--              A       U+41    \x41
--      ❤️‍🔥      2       true    \xe2\x9d\xa4\xef\xb8\x8f\xe2\x80\x8d\xf0\x9f\x94\xa5
--              ❤       U+2764  \xe2\x9d\xa4
--              ️       U+FE0F  \xef\xb8\x8f
--              ‍        U+200D  \xe2\x80\x8d
--              🔥      U+1F525 \xf0\x9f\x94\xa5
--      Z       1       false   \x5a
--              Z       U+5A    \x5a</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="console.checkinput" class="name"><a class="wlink" href="#console.checkinput"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.checkinput</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">timeout</span>:number] ) : boolean<br/><div class="version">v1.3.42 and newer</div></div></div><div class="body"><p class="desc">Checks whether input is available.</p><p class="desc"> The optional <span class="arg">timeout</span> is the number of seconds to wait for input to be available (use a floating point number for fractional seconds).  The default is 0 seconds, which returns immediately if input is not available.</p><p class="desc"> If input is available before the <span class="arg">timeout</span> is reached, the return value is true.  Use <a href="#console.readinput">console.readinput()</a> to read the available input.</p><p class="desc"> In Clink v1.6.0 and higher, when <span class="arg">timeout</span> is negative, the timeout is infinite.</p><p class="desc"> <strong>Note:</strong> Mouse input is not supported.</p><pre class="language-lua"><code>if console.checkinput() then
&nbsp;   local key = console.readinput() -- Returns immediately since input is available.
&nbsp;   if key == "\x03" or key == "\x1b[27;27~" or key == "\x1b" then
&nbsp;       -- Ctrl-C or ESC was pressed.
&nbsp;   end
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="console.ellipsify" class="name"><a class="wlink" href="#console.ellipsify"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.ellipsify</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string, <span class="arg_name">limit</span>:integer, [<span class="arg_name">mode</span>:string], [<span class="arg_name">ellipsis</span>:string] ) : string, integer<br/><div class="version">v1.7.5 and newer</div></div></div><div class="body"><p class="desc">Returns as much of <span class="arg">text</span> as fits in <span class="arg">limit</span> screen columns, truncated with either an ellipsis or the optional custom <span class="arg">ellipsis</span> string.</p><p class="desc"> The optional <span class="arg">mode</span> can be any of the following:</p><p class="desc"> <table> <tr><th>Value</th><th>Description</th></tr> <tr><td><code>"right"</code></td><td>Truncates from the right end of the input string.</td></tr> <tr><td><code>"left"</code></td><td>Truncates from the left end of the input string.</td></tr> <tr><td><code>"path"</code></td><td>Treats the input string as a file path and keeps any drive specifier, and truncates any directory portion from its left end.</td></tr> </table></p><p class="desc"> <strong>Note:</strong> Both <span class="arg">text</span> and/or <span class="arg">ellipsis</span> may include ANSI escape codes.  When the <code>"left"</code> or <code>"path"</code> truncation modes are used, then any ANSI escape code to the left of the ellipsis are preserved, to ensure consistent styling regardless whether truncation occurs.  Any ANSI escape codes in <span class="arg">ellipsis</span> are included as-is, which means it's possible for the caller to give the ellipsis string different styling from the rest of the string.</p><pre class="language-lua"><code>print(ellipsify("abcdef", 4))
--  abc…

print(ellipsify("abcdef", 4, "right", ".."))
--  ab..

print(ellipsify("abcdef", 4, "right", ""))
--  abcd

print(ellipsify("abcdef", 4, "left"))
--  …def

print(ellipsify("abcdefghijk", 8, "left", "[...]"))
--  [...]ijk

print(ellipsify("abcdefghijk", 4, "left", ""))
--  hijk

print(ellipsify("c:/abcd/wxyz", 8, "path"))
--  c:…/wxyz

print(ellipsify("c:/abcd/wxyz", 8, "path", "..."))
--  c:...xyz

print(ellipsify("c:/abcd/wxyz", 5, "path", ""))
--  c:xyz</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="console.explodeansi" class="name"><a class="wlink" href="#console.explodeansi"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.explodeansi</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : table<br/><div class="version">v1.6.1 and newer</div></div></div><div class="body"><p class="desc">Splits <span class="arg">text</span> on ANSI escape code boundaries and returns a table containing the substrings.</p><pre class="language-lua"><code>console.explodeansi("\x1b[7mReverse\x1b[0;1mBold\x1b[m\x1b[K")
-- returns the following table:
--  {
--      "\x1b[7m",
--      "Reverse",
--      "\x1b[0;1m",
--      "Bold",
--      "\x1b[m",
--      "\x1b[K",
--  }</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="console.findnextline" class="name"><a class="wlink" href="#console.findnextline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.findnextline</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">starting_line</span>:integer, [<span class="arg_name">text</span>:string], [<span class="arg_name">mode</span>:string], [<span class="arg_name">attr</span>:integer | table of integers], [<span class="arg_name">mask</span>:string] ) : integer<br/><div class="version">v1.1.21 and newer</div></div></div><div class="body"><p class="desc">Searches downwards (forwards) for a line containing the specified text and/or attributes, starting at line <span class="arg">starting_line</span>. The matching line number is returned, or 0 if no matching line is found.</p><p class="desc"> This behaves the same as <a href="#console.findprevline">console.findprevline()</a> except that it searches in the opposite direction.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.findprevline" class="name"><a class="wlink" href="#console.findprevline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.findprevline</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">starting_line</span>:integer, [<span class="arg_name">text</span>:string], [<span class="arg_name">mode</span>:string], [<span class="arg_name">attr</span>:integer | table of integers], [<span class="arg_name">mask</span>:string] ) : integer<br/><div class="version">v1.1.21 and newer</div></div></div><div class="body"><p class="desc">Searches upwards (backwards) for a line containing the specified text and/or attributes, starting at line <span class="arg">starting_line</span>.  The matching line number is returned, or 0 if no matching line is found, or -1 if an invalid regular expression is provided.</p><p class="desc"> You can search for text, attributes, or both.  Include the <span class="arg">text</span> argument to search for text, and include either the <span class="arg">attr</span> or <span class="arg">attrs</span> argument to search for attributes.  If both text and attribute(s) are passed, then the attribute(s) must be found within the found text.  If only attribute(s) are passed, then they must be found anywhere in the line.  See <a href="#console.linehascolor">console.linehascolor()</a> for more information about the color codes.</p><p class="desc"> The <span class="arg">mode</span> argument selects how the search behaves. To use a regular expression, pass "regex".  To use a case insensitive search, pass "icase".  These can be combined by separating them with a comma.  The regular expression syntax is the ECMAScript syntax described <a href="https://docs.microsoft.com/en-us/cpp/standard-library/regular-expressions-cpp">here</a>.</p><p class="desc"> Any trailing whitespace is ignored when searching.  This especially affects the <code>$</code> (end of line) regex operator.</p><p class="desc"> <span class="arg">mask</span> is optional and can be "fore" or "back" to only match foreground or background colors, respectively.</p><p class="desc"> <strong>Note:</strong> Although most of the arguments are optional, the order of provided arguments is important.</p><p class="desc"> For more information, see <a href="#findlineexample">this example</a> of using this in some <a href="#luakeybindings">luafunc: macros</a>.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.getcolortable" class="name"><a class="wlink" href="#console.getcolortable"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.getcolortable</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : table<br/><div class="version">v1.5.15 and newer</div></div></div><div class="body"><p class="desc">This returns a table containing the 16 predefined colors in the console's color theme.</p><p class="desc"> Clink also tries to detect the terminal's background color.  If it's able to, then the returned table also includes either a <code>light = true</code> field or a <code>dark = true</code> field.</p><p class="desc"> The returned table also includes <code>foreground</code> and <code>background</code> fields which contain the index of the corresponding closest colors in the color table.  If unable to determine the closest colors, then either of these fields may be missing.</p><p class="desc"> **Note:**  When using Windows Terminal, ConEmu, or other ConPty-based terminals it is currently not possible to get the current color theme until <a href="https://github.com/microsoft/terminal/issues/10639">Terminal#10639</a> gets fixed.  Until that's fixed, this can only return a default color table, which includes a <code>default = true</code> field.  When using the legacy conhost terminal then this is always able to report the current color theme.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.getcursorpos" class="name"><a class="wlink" href="#console.getcursorpos"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.getcursorpos</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer, integer<br/><div class="version">v1.4.28 and newer</div></div></div><div class="body"><p class="desc">Returns the current cursor column and row in the console screen buffer. The row is between 1 and <a href="#console.getnumlines">console.getnumlines()</a>. The column is between 1 and <a href="#console.getwidth">console.getwidth()</a>.</p><pre class="language-lua"><code>local x, y = console.getcursorpos()</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="console.getheight" class="name"><a class="wlink" href="#console.getheight"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.getheight</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns the number of visible lines of the console screen buffer.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.getlinetext" class="name"><a class="wlink" href="#console.getlinetext"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.getlinetext</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">line</span>:integer ) : string<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns the text from line number <span class="arg">line</span>, from 1 to <a href="#console.getnumlines">console.getnumlines()</a>.</p><p class="desc"> Any trailing whitespace is stripped before returning the text.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.getnumlines" class="name"><a class="wlink" href="#console.getnumlines"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.getnumlines</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns the total number of lines in the console screen buffer.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.gettitle" class="name"><a class="wlink" href="#console.gettitle"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.gettitle</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.1.32 and newer</div></div></div><div class="body"><p class="desc">Returns the console title text.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.gettop" class="name"><a class="wlink" href="#console.gettop"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.gettop</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns the current top line (scroll position) in the console screen buffer.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.getwidth" class="name"><a class="wlink" href="#console.getwidth"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.getwidth</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns the width of the console screen buffer in characters.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.islinedefaultcolor" class="name"><a class="wlink" href="#console.islinedefaultcolor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.islinedefaultcolor</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">line</span>:integer ) : boolean<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns whether line number <span class="arg">line</span> uses only the default text color.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.linehascolor" class="name"><a class="wlink" href="#console.linehascolor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.linehascolor</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">line</span>:integer, [<span class="arg_name">attr</span>:integer], [<span class="arg_name">attrs</span>:table of integers], [<span class="arg_name">mask</span>:string] ) : boolean<br/><div class="version">v1.1.21 and newer</div></div></div><div class="body"><p class="desc">Returns whether line number <span class="arg">line</span> contains the DOS color code <span class="arg">attr</span>, or any of the DOS color codes in <span class="arg">attrs</span> (either an integer or a table of integers must be provided, but not both).  <span class="arg">mask</span> is optional and can be "fore" or "back" to only match foreground or background colors, respectively.</p><p class="desc"> The low 4 bits of the color code are the foreground color, and the high 4 bits of the color code are the background color.  This refers to the default 16 color palette used by console windows.  When 256 color or 24-bit color ANSI escape codes have been used, the closest of the 16 colors is used.</p><p class="desc"> To build a color code, add the corresponding Foreground color and the Background color values from this table:</p><p class="desc"> <table><tr><th align="center">Foreground</th><th align="center">Background</th><th>Color</th></tr> <tr><td align="center">0</td><td align="center">0</td><td><div class="colorsample" style="background-color:#000000">&nbsp;</div> Black</td></tr> <tr><td align="center">1</td><td align="center">16</td><td><div class="colorsample" style="background-color:#000080">&nbsp;</div> Dark Blue</td></tr> <tr><td align="center">2</td><td align="center">32</td><td><div class="colorsample" style="background-color:#008000">&nbsp;</div> Dark Green</td></tr> <tr><td align="center">3</td><td align="center">48</td><td><div class="colorsample" style="background-color:#008080">&nbsp;</div> Dark Cyan</td></tr> <tr><td align="center">4</td><td align="center">64</td><td><div class="colorsample" style="background-color:#800000">&nbsp;</div> Dark Red</td></tr> <tr><td align="center">5</td><td align="center">80</td><td><div class="colorsample" style="background-color:#800080">&nbsp;</div> Dark Magenta</td></tr> <tr><td align="center">6</td><td align="center">96</td><td><div class="colorsample" style="background-color:#808000">&nbsp;</div> Dark Yellow</td></tr> <tr><td align="center">7</td><td align="center">112</td><td><div class="colorsample" style="background-color:#c0c0c0">&nbsp;</div> Gray</td></tr> <tr><td align="center">8</td><td align="center">128</td><td><div class="colorsample" style="background-color:#808080">&nbsp;</div> Dark Gray</td></tr> <tr><td align="center">9</td><td align="center">144</td><td><div class="colorsample" style="background-color:#0000ff">&nbsp;</div> Bright Blue</td></tr> <tr><td align="center">10</td><td align="center">160</td><td><div class="colorsample" style="background-color:#00ff00">&nbsp;</div> Bright Green</td></tr> <tr><td align="center">11</td><td align="center">176</td><td><div class="colorsample" style="background-color:#00ffff">&nbsp;</div> Bright Cyan</td></tr> <tr><td align="center">12</td><td align="center">192</td><td><div class="colorsample" style="background-color:#ff0000">&nbsp;</div> Bright Red</td></tr> <tr><td align="center">13</td><td align="center">208</td><td><div class="colorsample" style="background-color:#ff00ff">&nbsp;</div> Bright Magenta</td></tr> <tr><td align="center">14</td><td align="center">224</td><td><div class="colorsample" style="background-color:#ffff00">&nbsp;</div> Bright Yellow</td></tr> <tr><td align="center">15</td><td align="center">240</td><td><div class="colorsample" style="background-color:#ffffff">&nbsp;</div> White</td></tr> </table></p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.plaintext" class="name"><a class="wlink" href="#console.plaintext"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.plaintext</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : string, integer<br/><div class="version">v1.2.5 and newer</div></div></div><div class="body"><p class="desc">Returns the input <span class="arg">text</span> with ANSI escape codes removed, and the count of visible character cells that would be consumed if the text were output to the console.</p><p class="desc"> <strong>Note:</strong> Backspace characters and line endings are counted as visible character cells and will skew the resulting count.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.readinput" class="name"><a class="wlink" href="#console.readinput"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.readinput</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">no_cursor</span>:boolean ) : string | nil<br/><div class="version">v1.2.29 and newer</div></div></div><div class="body"><p class="desc">Reads one key sequence from the console input.  If no input is available, it waits until input becomes available.</p><p class="desc"> This returns the full key sequence string for the pressed key. For example, <kbd>A</kbd> is <code>"A"</code> and <kbd>Home</kbd> is <code>"\027[A"</code>, etc.  Nil is returned when an interrupt occurs by pressing <kbd>Ctrl</kbd>-<kbd>Break</kbd>.</p><p class="desc"> See <a href="#discoverkeysequences">Discovering Key Sequences</a> for information on how to find the key sequence for a key.</p><p class="desc"> In Clink v1.3.42 and higher, passing true for <span class="arg">no_cursor</span> avoids modifying the cursor visibility or position.</p><p class="desc"> <strong>Note:</strong> Mouse input is not supported.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.screengrab" class="name"><a class="wlink" href="#console.screengrab"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.screengrab</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">candidate_pattern</span>:string, <span class="arg_name">accept_pattern</span>:string ) : table<br/><div class="version">v1.1.40 and newer</div></div></div><div class="body"><p class="desc">Uses the provided Lua string patterns to collect text from the current console screen and returns a table of matching text snippets.  The snippets are ordered by distance from the input line.</p><p class="desc"> For example <span class="arg">candidate_pattern</span> could specify a pattern that identifies words, and <span class="arg">accept_pattern</span> could specify a pattern that matches words composed of hexadecimal digits.</p><pre class="language-lua"><code>local matches = console.screengrab(
&nbsp;       "[^%w]*(%w%w[%w]+)",   -- Words with 3 or more letters are candidates.
&nbsp;       "^%x+$")               -- A candidate containing only hexadecimal digits is a match.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="console.scroll" class="name"><a class="wlink" href="#console.scroll"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.scroll</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">mode</span>:string, <span class="arg_name">amount</span>:integer ) : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Scrolls the console screen buffer and returns the number of lines scrolled up (negative) or down (positive).</p><p class="desc"> The <span class="arg">mode</span> specifies how to scroll: <table> <tr><th>Mode</th><th>Description</th></tr> <tr><td>"line"</td><td>Scrolls by <span class="arg">amount</span> lines; negative is up and positive is down.</td></tr> <tr><td>"page"</td><td>Scrolls by <span class="arg">amount</span> pages; negative is up and positive is down.</td></tr> <tr><td>"end"</td><td>Scrolls to the top if <span class="arg">amount</span> is negative, or to the bottom if positive.</td></tr> <tr><td>"absolute"</td><td>Scrolls to line <span class="arg">amount</span>, from 1 to <a href="#console.getnumlines">console.getnumlines()</a>.</td></tr> </table></p></div></div><hr/>

<div class="function"><div class="header"> <div id="console.settitle" class="name"><a class="wlink" href="#console.settitle"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>console.settitle</span> <span class="uplinks"><a href="#console">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">title</span>:string ) : nil<br/><div class="version">v1.1.32 and newer</div></div></div><div class="body"><p class="desc">Sets the console title text.</p></div></div><hr/>

</div><div class="group">
<h5 id="git" class="group_name"><a class="wlink" href="#git"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>git. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#git.getaction">getaction</a></td><td><a href="#git.getgitdir">getgitdir</a></td><td><a href="#git.hasstash">hasstash</a></td></tr><tr><td><a href="#git.getaheadbehind">getaheadbehind</a></td><td><a href="#git.getremote">getremote</a></td><td><a href="#git.isgitdir">isgitdir</a></td></tr><tr><td><a href="#git.getbranch">getbranch</a></td><td><a href="#git.getstashcount">getstashcount</a></td><td><a href="#git.loadconfig">loadconfig</a></td></tr><tr><td><a href="#git.getcommondir">getcommondir</a></td><td><a href="#git.getstatus">getstatus</a></td><td><a href="#git.makecommand">makecommand</a></td></tr><tr><td><a href="#git.getconflictstatus">getconflictstatus</a></td><td><a href="#git.getsystemname">getsystemname</a></td></tr></table>
<div class="function"><div class="header"> <div id="git.getaction" class="name"><a class="wlink" href="#git.getaction"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getaction</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string, number, number | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">This checks for git actions in progress, and returns the action name.  For certain actions it may also return the current step number and the total number of steps.</p><p class="desc"> If unsuccessful, this returns nil.</p><p class="desc"> The possible returned actions are: <ul> <li><code>"rebase-i"</code>: a rebase -i is in progress (includes step and total). <li><code>"rebase-m"</code>: a rebase -m is in progress (includes step and total). <li><code>"rebase"</code>: a rebase is in progress (includes step and total). <li><code>"am"</code>: a "git am" is in progress (includes step and total). <li><code>"am/rebase"</code>: a "git am" is in progress (includes step and total). <li><code>"merge"</code>: a merge is in progress. <li><code>"cherry-pick"</code>: a cherry-pick is in progress. <li><code>"revert"</code>: a revert is in progress. <li><code>"bisect"</code>: a bisect is in progress. </ul></p><p class="desc"></p><pre class="language-lua"><code>local action, step, total = git.getaction()
if action then
&nbsp;   print("current git action is '"..action.."'")
&nbsp;   if step and total then
&nbsp;       print(string.format("... step %d of %d", step, total))
&nbsp;   end
else
&nbsp;   print("no git action currently in progress")
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getaheadbehind" class="name"><a class="wlink" href="#git.getaheadbehind"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getaheadbehind</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string, string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Gets the number of commits ahead/behind from upstream.</p><p class="desc"> In a git repo, it returns two strings: <ol> <li>A string with the number commits ahead of upstream. <li>A string with the number commits behind upstream. </ol></p><p class="desc"> Or when unsuccessful it returns nil.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getbranch" class="name"><a class="wlink" href="#git.getbranch"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getbranch</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">git_dir</span>:string] ) : string, boolean | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Returns the current git branch for <span class="arg">git_dir</span>, or for the current working directory if <span class="arg">git_dir</span> is omitted.</p><p class="desc"> If the workspace has a detached HEAD, then this returns two values:  the short hash of the current HEAD commit, and true.</p><p class="desc"> If unable to get the branch info, then nil is returned.</p><pre class="language-lua"><code>local branch, detached = git.getbranch()</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getcommondir" class="name"><a class="wlink" href="#git.getcommondir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getcommondir</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">start_dir</span>:string] ) : string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Returns the common git dir for <span class="arg">start_dir</span>, or for the current working directory if <span class="arg">git_dir</span> is omitted.</p><p class="desc"> When in a worktree, this returns the git dir for the main repo, rather than the git dir of the worktree itself.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getconflictstatus" class="name"><a class="wlink" href="#git.getconflictstatus"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getconflictstatus</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : boolean<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Gets the conflict status for the repo or worktree associated with the current working directory.</p><p class="desc"> Returns false if there are no conflicts, otherwise it returns true.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getgitdir" class="name"><a class="wlink" href="#git.getgitdir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getgitdir</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">dir</span>:string] ) : string, string, string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Tests whether <span class="arg">dir</span> is part of a git repo.  If <span class="arg">dir</span> is omitted then it assumes the current working directory.</p><p class="desc"> In a git repo, it returns three strings: <ol> <li>The git dir. <li>The workspace dir.  If not in a workspace, then this matches the git dir. <li>The original input <span class="arg">dir</span>. </ol></p><p class="desc"> Or when not in a git repo it returns nil.</p><p class="desc"> See <a href="#git.isgitdir">git.isgitdir()</a> for examples (they return the same strings).</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getremote" class="name"><a class="wlink" href="#git.getremote"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getremote</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">git_dir</span>:string] ) : string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Gets the remote for the current branch for <span class="arg">start_dir</span>, or for the current working directory if <span class="arg">git_dir</span> is omitted.</p><p class="desc"> Returns nil if the current branch cannot be found.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getstashcount" class="name"><a class="wlink" href="#git.getstashcount"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getstashcount</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : number | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Returns the number of stashes that exist for the repo or worktree associated with the current working directory.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getstatus" class="name"><a class="wlink" href="#git.getstatus"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getstatus</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">no_untracked</span>:boolean], [<span class="arg_name">include_submodules</span>:boolean] ) : table | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">This runs <code>git status</code> to collect status information for the repo or worktree associated with the current working directory.</p><p class="desc"> If unsuccessful, this returns nil.</p><p class="desc"> Otherwise it returns a table with the following scheme:</p><pre class="language-lua"><code>{
&nbsp;   branch = ...                -- branch name, or commit hash if detached
&nbsp;   HEAD = ...                  -- HEAD commit hash, or "(initial)"
&nbsp;   detached = ...              -- true if HEAD is detached, otherwise nil
&nbsp;   upstream = ...              -- upstream name, other nil
&nbsp;   dirty = ...                 -- true if working and/or staged changes, otherwise nil
&nbsp;   ahead = ...                 -- number of commits ahead, otherwise nil
&nbsp;   behind = ...                -- number of commits behind, otherwise nil
&nbsp;   unpublished = ...           -- true if unpublished, otherwise nil
&nbsp;   submodule = ...             -- true if in a submodule, otherwise nil
&nbsp;   onlystaged = ...            -- number of changes only in staged files not in working files, otherwise nil
&nbsp;   tracked = ...               -- number of changes in tracked working files, otherwise nil
&nbsp;   untracked = ...             -- number of untracked files or directories, otherwise nil
&nbsp;   conflict = ...              -- number of conflicted files, otherwise nil
&nbsp;   working = {                 -- nil if no working changes
&nbsp;       add = ...               -- number of added files
&nbsp;       modify = ...            -- number of modified files
&nbsp;       delete = ...            -- number of deleted files
&nbsp;       conflict = ...          -- number of conflicted files
&nbsp;       untracked = ...         -- number of untracked files or directories
&nbsp;   }
&nbsp;   staged = {                  -- nil if no staged changes
&nbsp;       add = ...               -- number of added files
&nbsp;       modify = ...            -- number of modified files
&nbsp;       delete = ...            -- number of deleted files
&nbsp;       rename = ...            -- number of renamed files
&nbsp;   }
&nbsp;   total = {                   -- nil if neither working nor staged
&nbsp;       -- This counts files uniquely; if a file "foo" is deleted in working and
&nbsp;       -- also in staged, it counts as only 1 deleted file.  Etc.
&nbsp;       add = ...               -- total added files
&nbsp;       modify = ...            -- total modified files
&nbsp;       delete = ...            -- total deleted files
&nbsp;   }
}</code></pre><p class="desc">Example of checking whether the workspace is clean (no changes):</p><pre class="language-lua"><code>local status = git.getstatus()
if not status then
&nbsp;   print("failed")
elseif status.dirty then
&nbsp;   print("dirty (has changes)")
else
&nbsp;   print("clean (no changes)")
end</code></pre><p class="desc">**Compatibility Note:** This requires a version of git that supports <code>git status --porcelain=v2</code>.  Porcelain v2 format has existed for a long time, so that isn't expected to be a limitation in practice.</p><p class="desc"> <fieldset><legend>Warning</legend> This runs slowly.  To keep a custom prompt responsive, run this in a coroutine so that it runs in the background (the prompt will automatically refresh when the background operation finishes).  See <a href="#asyncpromptfiltering">Asynchronous Prompt Filtering</a> for more information. </fieldset> luacheck: pop</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.getsystemname" class="name"><a class="wlink" href="#git.getsystemname"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.getsystemname</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">dir</span>:string] ) : string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Checks whether <span class="arg">dir</span> is under git source control, and returns <code>"git"</code> if it is.  Otherwise returns nil.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.hasstash" class="name"><a class="wlink" href="#git.hasstash"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.hasstash</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : boolean | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Returns whether any stashes exist for the repo or worktree associated with the current working directory.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="git.isgitdir" class="name"><a class="wlink" href="#git.isgitdir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.isgitdir</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">dir</span>:string] ) : string, string, string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Tests whether <span class="arg">dir</span> is a git repo root, or a workspace dir, or a submodule dir.  If <span class="arg">dir</span> is omitted then it assumes the current working directory.</p><p class="desc"> In a git repo, it returns three strings: <ol> <li>The git dir. <li>The workspace dir.  If not in a workspace, then this matches the git dir. <li>The original input <span class="arg">dir</span>. </ol></p><p class="desc"> Or when not in a git repo it returns nil.</p><p class="desc"> Examples:</p><pre class="language-lua"><code>-- In a repo c:\repo:
git.isgitdir("c:/repo")
-- Returns:  "c:\repo\.git", "c:\repo\.git", "c:\repo"

-- In a submodule under c:\repo:
git.isgitdir("c:/repo/submodule")
-- Returns:  "c:\repo\.git\modules\submodule", "c:\repo\.git", "c:\repo\submodule"

-- In a worktree under c:\repo:
git.isgitdir("c:/repo/worktree")
-- Returns:  "c:\repo\.git\worktrees\worktree", "c:\repo\worktree\.git", "c:\repo\worktree"

-- In a worktree outside c:\repo:
git.isgitdir("c:/worktree")
-- Returns:  "c:\repo\.git\worktrees\worktree", "c:\worktree\.git", "c:\worktree"</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="git.loadconfig" class="name"><a class="wlink" href="#git.loadconfig"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.loadconfig</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">git_dir</span>:string | system:boolean] ) : table | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Loads a git config file and returns a table containing the data, or returns nil if unable to load the config file.</p><p class="desc"> The function accepts either a git dir string or a boolean indicating whether to load the system config file.  If neither is provided then it loads the repo config file.</p><p class="desc"> The returned table has a <code>:get(section, param)</code> function to make it convenient to look up config parameters.</p><pre class="language-lua"><code>local config = git.loadconfig()
print(config:get("core", "autocrlf"))
print(config:get("user", "name"))</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="git.makecommand" class="name"><a class="wlink" href="#git.makecommand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>git.makecommand</span> <span class="uplinks"><a href="#git">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">command</span>:string, [<span class="arg_name">include_stderr</span>:boolean] ) : string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Returns a command line for running the specified git command.  The command line automatically prepends <code>git</code> to the input <span class="arg">command</span> string, plus disables git's optional locks and advice messages.  Unless <span class="arg">include_stderr</span> is true, it also includes <code>2>nul</code> to hide stderr output.</p><p class="desc"> If <span class="arg">command</span> is missing or empty, it returns nil.</p><pre class="language-lua"><code>git.makecommand("rev-parse HEAD")</code></pre></div></div><hr/>

</div><div class="group">
<h5 id="io" class="group_name"><a class="wlink" href="#io"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>io. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#io.open">open</a></td></tr><tr><td><a href="#io.popenrw">popenrw</a></td></tr><tr><td><a href="#io.popenyield">popenyield</a></td></tr><tr><td><a href="#io.sopen">sopen</a></td></tr><tr><td><a href="#io.truncate">truncate</a></td></tr></table>
<div class="function"><div class="header"> <div id="io.open" class="name"><a class="wlink" href="#io.open"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>io.open</span> <span class="uplinks"><a href="#io">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">filename</span>:string, [<span class="arg_name">mode</span>:string] ) : file<br/><div class="version">v0.0.1 and newer</div></div></div><div class="body"><p class="desc">This function opens a file named by <span class="arg">filename</span>, in the mode specified in the string <span class="arg">mode</span>.  It returns a new file handle, or, in case of errors, nil plus an error message and error number.</p><p class="desc"> The <span class="arg">mode</span> string can be any of the following: <ul> <li><code>"r"</code>: opens for read (the default); <li><code>"w"</code>: opens for write, all previous data is erased; <li><code>"wx"</code>: opens for write, but fail if the file already exists (requires v1.3.18 or higher); <li><code>"a"</code>: opens for writing at the end of the file (append), creates the file if it doesn't exist; <li><code>"r+"</code>: opens for read and write, all previous data is preserved; <li><code>"w+"</code>: opens for read and write, all previous data is erased; <li><code>"w+x"</code>: opens for read and write, all previous data is erased, but fail if the file already exists (requires v1.3.18 or higher); <li><code>"a+"</code>: opens for reading and writing at the end of the file (append), writing is only allowed at the end of file, creates the file if it doesn't exist. </ul></p><p class="desc"> The <span class="arg">mode</span> string can also have a <code>'b'</code> at the end to open the file in binary mode.</p><p class="desc"> The <code>'x'</code> modes are Clink extensions to Lua.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="io.popenrw" class="name"><a class="wlink" href="#io.popenrw"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>io.popenrw</span> <span class="uplinks"><a href="#io">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">command</span>:string, [<span class="arg_name">mode</span>:string] ) : file, file<br/><div class="version">v1.1.42 and newer</div></div></div><div class="body"><p class="desc">Runs <span class="arg">command</span> and returns two file handles:  a file handle for reading output from the command, and a file handle for writing input to the command.</p><p class="desc"> <span class="arg">mode</span> can be "t" for text mode (the default if omitted) or "b" for binary mode.</p><p class="desc"> If the function fails it returns nil, an error message, and an error number.</p><p class="desc"> <fieldset><legend>Warning</legend> This can result in deadlocks unless the command fully reads all of its input before writing any output.  This is because Lua uses blocking IO to read and write file handles.  If the write buffer fills (or the read buffer is empty) then the write (or read) will block and can only become unblocked if the command correspondingly reads (or writes).  But the other command can easily experience the same blocking IO problem on its end, resulting in a deadlock: process 1 is blocked from writing more until process 2 reads, but process 2 can't read because it is blocked from writing until process 1 reads. </fieldset></p><pre class="language-lua"><code>local r,w = io.popenrw("fzf.exe --height 40%")

w:write("hello\n")
w:write("world\n")
w:close()

while (true) do
&nbsp;   local line = r:read("*line")
&nbsp;   if not line then
&nbsp;       break
&nbsp;   end
&nbsp;   print(line)
end
r:close()</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="io.popenyield" class="name"><a class="wlink" href="#io.popenyield"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>io.popenyield</span> <span class="uplinks"><a href="#io">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">command</span>:string, [<span class="arg_name">mode</span>:string] ) : file, function (see remarks below)<br/><div class="version">v1.2.10 and newer</div></div></div><div class="body"><p class="desc">This behaves similar to <a href="https://www.lua.org/manual/5.2/manual.html#pdf-io.popen">io.popen()</a> except that it only supports read mode and when used in a coroutine it yields until the command has finished.</p><p class="desc"> The <span class="arg">command</span> argument is the command to run.</p><p class="desc"> The <span class="arg">mode</span> argument is the optional mode to use.  It can contain "r" (read mode) and/or either "t" for text mode (the default if omitted) or "b" for binary mode.  Write mode is not supported, so it cannot contain "w".</p><p class="desc"> This runs the specified command and returns a read file handle for reading output from the command.  It yields until the command has finished and the complete output is ready to be read without blocking.</p><p class="desc"> In v1.3.31 and higher, it may also return a function.  If the second return value is a function then it can be used to get the exit status for the command.  The function returns the same values as <a href="https://www.lua.org/manual/5.2/manual.html#pdf-os.execute">os.execute()</a>. The function may be used only once, and it closes the read file handle, so if the function is used then do not use <code>file:close()</code>.  Or, if the second return value is not a function, then the exit status may be retrieved from calling <code>file:close()</code> on the returned file handle.</p><p class="desc"> <strong>Compatibility Note:</strong> when <code>io.popen()</code> is used in a coroutine, it is automatically redirected to <code>io.popenyield()</code>. This means on success the second return value from <code>io.popen()</code> in a coroutine may not be nil as callers might normally expect.</p><p class="desc"> <strong>Note:</strong> if the <code><a href="#prompt_async">prompt.async</a></code> setting is disabled, or while a <a href="#transientprompts">transient prompt filter</a> is executing, or if used outside of a coroutine, then this behaves like <a href="https://www.lua.org/manual/5.2/manual.html#pdf-io.popen">io.popen()</a> instead.</p><pre class="language-lua"><code>local file = io.popenyield("git status")

while (true) do
&nbsp;   local line = file:read("*line")
&nbsp;   if not line then
&nbsp;       break
&nbsp;   end
&nbsp;   do_things_with(line)
end
file:close()</code></pre><p class="desc">Here is an example showing how to get the exit status, if desired:</p><pre class="language-lua"><code>-- Clink v1.3.31 and higher return a pclose function, for optional use.
local file, pclose = io.popenyield("kubectl.exe")
if file then
&nbsp;   local ok, what, code = pclose()
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="io.sopen" class="name"><a class="wlink" href="#io.sopen"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>io.sopen</span> <span class="uplinks"><a href="#io">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">filename</span>:string, [<span class="arg_name">mode</span>:string], [<span class="arg_name">deny</span>:string] ) : file<br/><div class="version">v1.3.18 and newer</div></div></div><div class="body"><p class="desc">This is the same as <a href="#io.open">io.open()</a>, but adds an optional <code>deny</code> argument that specifies the type of sharing allowed.</p><p class="desc"> This function opens a file named by <span class="arg">filename</span>, in the mode specified in the string <span class="arg">mode</span>.  It returns a new file handle, or, in case of errors, nil plus an error message and error number.</p><p class="desc"> The <span class="arg">mode</span> string can be any of the following: <ul> <li><code>"r"</code>: opens for read (the default); <li><code>"w"</code>: opens for write, all previous data is erased; <li><code>"wx"</code>: opens for write, but fail if the file already exists (requires v1.3.18 or higher); <li><code>"a"</code>: opens for writing at the end of the file (append), creates the file if it doesn't exist; <li><code>"r+"</code>: opens for read and write, all previous data is preserved; <li><code>"w+"</code>: opens for read and write, all previous data is erased; <li><code>"w+x"</code>: opens for read and write, all previous data is erased, but fail if the file already exists (requires v1.3.18 or higher); <li><code>"a+"</code>: opens for reading and writing at the end of the file (append), writing is only allowed at the end of file, creates the file if it doesn't exist. </ul></p><p class="desc"> The <span class="arg">mode</span> string can also have a <code>'b'</code> at the end to open the file in binary mode.</p><p class="desc"> The <span class="arg">deny</span> string can be any of the following: <ul> <li><code>"r"</code> denies read access; <li><code>"w"</code> denies write access; <li><code>"rw"</code> denies read and write access; <li><code>""</code> permits read and write access (the default). </ul></p></div></div><hr/>

<div class="function"><div class="header"> <div id="io.truncate" class="name"><a class="wlink" href="#io.truncate"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>io.truncate</span> <span class="uplinks"><a href="#io">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">file</span>:file ) : boolean<br/><div class="version">v1.3.41 and newer</div></div></div><div class="body"><p class="desc">This function truncates the <span class="arg">file</span> previously opened by <a href="#io.open">io.open()</a> or <a href="#io.sopen">io.sopen()</a>. When used on a pipe or other file handle that doesn't refer to an actual file, the behavior is undefined.</p><p class="desc"> If successful, the return value is true. If an error occurs, the return value  is false, an error message, and an error code.</p></div></div><hr/>

</div><div class="group">
<h5 id="line_state" class="group_name"><a class="wlink" href="#line_state"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>line_state: <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#line_state:getcommandoffset">getcommandoffset</a></td><td><a href="#line_state:getendwordoffset">getendwordoffset</a></td><td><a href="#line_state:getword">getword</a></td></tr><tr><td><a href="#line_state:getcommandwordindex">getcommandwordindex</a></td><td><a href="#line_state:getline">getline</a></td><td><a href="#line_state:getwordcount">getwordcount</a></td></tr><tr><td><a href="#line_state:getcursor">getcursor</a></td><td><a href="#line_state:getrangelength">getrangelength</a></td><td><a href="#line_state:getwordinfo">getwordinfo</a></td></tr><tr><td><a href="#line_state:getendword">getendword</a></td><td><a href="#line_state:getrangeoffset">getrangeoffset</a></td></tr></table>
<div class="function"><div class="header"> <div id="line_state:getcommandoffset" class="name"><a class="wlink" href="#line_state:getcommandoffset"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getcommandoffset</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the offset to the start of the delimited command in the line that's being effectively edited. Note that this may not be the offset of the first command of the line unquoted as whitespace isn't considered for words.</p><pre class="language-lua"><code>-- Given the following line;  abc&123
--                                ^
-- In the line_state for the second command;
line_state:getcommandoffset() == 5</code></pre><p class="desc">The command offset points to the beginning of the command, but that might be a space character.  Two spaces after a command separator is like one space at the beginning of a line; it disables doskey alias expansion.  So, if the command offset points at a space, then you know the first word will not be treated as a doskey alias.</p><pre class="language-lua"><code>-- Given the following line;  abc&  123
--                                 ^
-- In the line_state for the second command;
line_state:getcommandoffset() == 6</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getcommandwordindex" class="name"><a class="wlink" href="#line_state:getcommandwordindex"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getcommandwordindex</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.2.27 and newer</div></div></div><div class="body"><p class="desc">Returns the index of the command word. Usually the index is 1, but if a redirection symbol occurs before the command name then the index can be greater than 1.</p><pre class="language-lua"><code>-- Given the following line;  >x abc
-- the first word is "x" and is an argument to the redirection symbol,
-- and the second word is "abc" and is the command word.
line_state:getcommandwordindex() == 2</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getcursor" class="name"><a class="wlink" href="#line_state:getcursor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getcursor</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the position of the cursor.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getendword" class="name"><a class="wlink" href="#line_state:getendword"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getendword</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the last word of the line. This is the word that matches are being generated for.</p><p class="desc"> <strong>Note:</strong>  The returned word omits any quotes.  This helps generators naturally complete <code>"foo\"ba</code> to <code>"foo\bar"</code>.  The raw word including quotes can be obtained using the <code>offset</code> and <code>length</code> fields from <a href="#line_state:getwordinfo">line_state:getwordinfo()</a> to extract a substring from the line returned by <a href="#line_state:getline">line_state:getline()</a>.</p><pre class="language-lua"><code>line_state:getword(line_state:getwordcount()) == line_state:getendword()</code></pre><p class="desc"><strong>However:</strong>  During <code><a href="#the-getwordbreakinfo-function">generator:getwordbreakinfo()</a></code> functions the returned word includes quotes, otherwise word break offsets could be garbled.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getendwordoffset" class="name"><a class="wlink" href="#line_state:getendwordoffset"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getendwordoffset</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.6.2 and newer</div></div></div><div class="body"><p class="desc">Returns the offset of the last word of the line. This is the word that matches are being generated for.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getline" class="name"><a class="wlink" href="#line_state:getline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getline</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the current line in its entirety.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getrangelength" class="name"><a class="wlink" href="#line_state:getrangelength"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getrangelength</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.6.1 and newer</div></div></div><div class="body"><p class="desc">Each line_state describes a range of text in a line.  This function returns the length of the range described by this line_state.</p><p class="desc"> For all commands after the first command in a line, the first space (if any) is not part of the range. See [line_state:getcommandoffset](#line_state:getcommandoffset) for details.</p><pre class="language-lua"><code>-- Given a line_state for the 2nd command in;  abc & ( @where   >nul  )  & xyz
line_state:getrangeoffset() == 9           --          ^
line_state:getcommandoffset() == 10        --           ^
line_state:getrangelength() == 15          --          <------------->

-- Given a line_state for the 2nd command in;  abc & (   @ where   >nul  )  & xyz
line_state:getrangeoffset() == 9           --          ^
line_state:getcommandoffset() == 13        --              ^
line_state:getrangelength() == 18          --          <----------------></code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getrangeoffset" class="name"><a class="wlink" href="#line_state:getrangeoffset"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getrangeoffset</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.6.1 and newer</div></div></div><div class="body"><p class="desc">Each line_state describes a range of text in a line.  This function returns the offset to the start of the range described by this line_state.</p><p class="desc"> For all commands after the first command in a line, the first space (if any) is not part of the range. See [line_state:getcommandoffset](#line_state:getcommandoffset) for details.</p><pre class="language-lua"><code>-- Given a line_state for the 2nd command in;  abc & ( @where   >nul  )  & xyz
line_state:getrangeoffset() == 9           --          ^
line_state:getcommandoffset() == 10        -            ^
line_state:getrangelength() == 15          --          <------------->

-- Given a line_state for the 2nd command in;  abc & (   @ where   >nul  )  & xyz
line_state:getrangeoffset() == 9           --          ^
line_state:getcommandoffset() == 13        --              ^
line_state:getrangelength() == 18          --          <----------------></code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getword" class="name"><a class="wlink" href="#line_state:getword"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getword</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">index</span>:integer ) : string<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the word of the line at <span class="arg">index</span>.</p><p class="desc"> <strong>Note:</strong>  The returned word omits any quotes.  This helps generators naturally complete <code>"foo\"ba</code> to <code>"foo\bar"</code>.  The raw word including quotes can be obtained using the <code>offset</code> and <code>length</code> fields from <a href="#line_state:getwordinfo">line_state:getwordinfo()</a> to extract a substring from the line returned by <a href="#line_state:getline">line_state:getline()</a>.</p><p class="desc"> <strong>However:</strong>  During <code><a href="#the-getwordbreakinfo-function">generator:getwordbreakinfo()</a></code> functions the returned word includes quotes, otherwise word break offsets could be garbled.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getwordcount" class="name"><a class="wlink" href="#line_state:getwordcount"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getwordcount</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the number of words in the current line.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="line_state:getwordinfo" class="name"><a class="wlink" href="#line_state:getwordinfo"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>line_state:getwordinfo</span> <span class="uplinks"><a href="#line_state">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">index</span>:integer ) : table<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns a table of information about the Nth word in the line.</p><p class="desc"> <strong>Note:</strong>  The length refers to the substring in the line; it omits leading and trailing quotes, but <em><strong>includes</strong></em> embedded quotes.  <a href="#line_state:getword">line_state:getword()</a> conveniently strips embedded quotes to help generators naturally complete <code>"foo\"ba</code> to <code>"foo\bar"</code>.</p><p class="desc"> The table returned has the following scheme:</p><pre class="language-lua"><code>local t = line_state:getwordinfo(word_index)
-- t.offset     [integer] Offset where the word starts in the line_state:getline() string.
-- t.length     [integer] Length of the word (includes embedded quotes).
-- t.quoted     [boolean] Indicates whether the word is quoted.
-- t.delim      [string] The delimiter character, or an empty string.
-- t.alias      [boolean | nil] true if the word is a doskey alias, otherwise nil.
-- t.redir      [boolean | nil] true if the word is a redirection arg, otherwise nil.</code></pre></div></div><hr/>

</div><div class="group">
<h5 id="log" class="group_name"><a class="wlink" href="#log"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>log. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#log.getfile">getfile</a></td></tr><tr><td><a href="#log.info">info</a></td></tr></table>
<div class="function"><div class="header"> <div id="log.getfile" class="name"><a class="wlink" href="#log.getfile"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>log.getfile</span> <span class="uplinks"><a href="#log">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string | nil<br/><div class="version">v1.4.15 and newer</div></div></div><div class="body"><p class="desc">Returns the file name of the current session's log file.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="log.info" class="name"><a class="wlink" href="#log.info"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>log.info</span> <span class="uplinks"><a href="#log">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">message</span>:string, [<span class="arg_name">level</span>:integer] ) : nil<br/><div class="version">v1.1.3 and newer</div></div></div><div class="body"><p class="desc">Writes info <span class="arg">message</span> to the Clink log file.  Use this sparingly, or it could cause performance problems or disk space problems.</p><p class="desc"> In v1.4.10 and higher, the optional <span class="arg">level</span> number tells which stack level to log as the source of the log message (default is 1, the function calling <code>log.info</code>).</p></div></div><hr/>

</div><div class="group">
<h5 id="matches" class="group_name"><a class="wlink" href="#matches"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>matches: <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#matches:getcount">getcount</a></td></tr><tr><td><a href="#matches:getmatch">getmatch</a></td></tr><tr><td><a href="#matches:getprefix">getprefix</a></td></tr><tr><td><a href="#matches:gettype">gettype</a></td></tr></table>
<div class="function"><div class="header"> <div id="matches:getcount" class="name"><a class="wlink" href="#matches:getcount"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>matches:getcount</span> <span class="uplinks"><a href="#matches">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.2.47 and newer</div></div></div><div class="body"><p class="desc">Returns the number of available matches.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="matches:getmatch" class="name"><a class="wlink" href="#matches:getmatch"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>matches:getmatch</span> <span class="uplinks"><a href="#matches">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">index</span>:integer ) : string<br/><div class="version">v1.2.47 and newer</div></div></div><div class="body"><p class="desc">Returns the match text for the <span class="arg">index</span> match.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="matches:getprefix" class="name"><a class="wlink" href="#matches:getprefix"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>matches:getprefix</span> <span class="uplinks"><a href="#matches">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.2.47 and newer</div></div></div><div class="body"><p class="desc">Returns the longest common prefix of the available matches.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="matches:gettype" class="name"><a class="wlink" href="#matches:gettype"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>matches:gettype</span> <span class="uplinks"><a href="#matches">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">index</span>:integer ) : string<br/><div class="version">v1.2.47 and newer</div></div></div><div class="body"><p class="desc">Returns the match type for the <span class="arg">index</span> match.</p></div></div><hr/>

</div><div class="group">
<h5 id="os" class="group_name"><a class="wlink" href="#os"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>os. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#os.abbreviatepath">abbreviatepath</a></td><td><a href="#os.getaliases">getaliases</a></td><td><a href="#os.getnetconnectionname">getnetconnectionname</a></td><td><a href="#os.isuseradmin">isuseradmin</a></td></tr><tr><td><a href="#os.chdir">chdir</a></td><td><a href="#os.getbatterystatus">getbatterystatus</a></td><td><a href="#os.getpid">getpid</a></td><td><a href="#os.mkdir">mkdir</a></td></tr><tr><td><a href="#os.clock">clock</a></td><td><a href="#os.getclipboardtext">getclipboardtext</a></td><td><a href="#os.getpushddepth">getpushddepth</a></td><td><a href="#os.move">move</a></td></tr><tr><td><a href="#os.copy">copy</a></td><td><a href="#os.getcwd">getcwd</a></td><td><a href="#os.getscreeninfo">getscreeninfo</a></td><td><a href="#os.resolvealias">resolvealias</a></td></tr><tr><td><a href="#os.createguid">createguid</a></td><td><a href="#os.getdrivetype">getdrivetype</a></td><td><a href="#os.getshortpathname">getshortpathname</a></td><td><a href="#os.rmdir">rmdir</a></td></tr><tr><td><a href="#os.createtmpfile">createtmpfile</a></td><td><a href="#os.getenv">getenv</a></td><td><a href="#os.gettemppath">gettemppath</a></td><td><a href="#os.setalias">setalias</a></td></tr><tr><td><a href="#os.debugprint">debugprint</a></td><td><a href="#os.getenvnames">getenvnames</a></td><td><a href="#os.globdirs">globdirs</a></td><td><a href="#os.setclipboardtext">setclipboardtext</a></td></tr><tr><td><a href="#os.enumshares">enumshares</a></td><td><a href="#os.geterrorlevel">geterrorlevel</a></td><td><a href="#os.globfiles">globfiles</a></td><td><a href="#os.setenv">setenv</a></td></tr><tr><td><a href="#os.expandabbreviatedpath">expandabbreviatedpath</a></td><td><a href="#os.getfileversion">getfileversion</a></td><td><a href="#os.globmatch">globmatch</a></td><td><a href="#os.sleep">sleep</a></td></tr><tr><td><a href="#os.expandenv">expandenv</a></td><td><a href="#os.getfullpathname">getfullpathname</a></td><td><a href="#os.isdir">isdir</a></td><td><a href="#os.touch">touch</a></td></tr><tr><td><a href="#os.findfiles">findfiles</a></td><td><a href="#os.gethost">gethost</a></td><td><a href="#os.isfile">isfile</a></td><td><a href="#os.unlink">unlink</a></td></tr><tr><td><a href="#os.getalias">getalias</a></td><td><a href="#os.getlongpathname">getlongpathname</a></td><td><a href="#os.issignaled">issignaled</a></td></tr></table>
<div class="function"><div class="header"> <div id="os.abbreviatepath" class="name"><a class="wlink" href="#os.abbreviatepath"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.abbreviatepath</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string, [<span class="arg_name">decide</span>:function], [<span class="arg_name">transform</span>:function] ) : string<br/><div class="version">v1.4.1 and newer</div></div></div><div class="body"><p class="desc">This abbreviates parent directories in <span class="arg">path</span> to the shortest string that uniquely identifies the directory.  The drive, if present, is never abbreviated.  By default, the first and last names in the string are not abbreviated.</p><p class="desc"> For performance reasons, UNC paths and paths on remote or removeable drives are never abbreviated.</p><p class="desc"> The return value is the resulting path after abbreviation.</p><p class="desc"> If an optional <span class="arg">decide</span> function is provided then it is called once for each directory name in <span class="arg">path</span>, and it can control which directories get abbreviated.  The <span class="arg">decide</span> function receives one argument: the path to the directory that may be abbreviated.  The function can return true to try to abbreviate the directory, or false to prevent abbreviating the directory, or nil to allow the default behavior (don't abbreviate the first or last directory names).</p><p class="desc"> If an optional <span class="arg">transform</span> function is provided then it is called once for each directory name in the resulting string.  The <span class="arg">transform</span> function receives two arguments: the string to be appended, and a boolean indicating whether it has been abbreviated.  The function can adjust the string, and should return a string to appended.  If it returns nil, the string is appended as-is.  This is intended to be able to apply ANSI escape color codes, for example to highlight special directories or to show which directory names have been abbreviated.</p><p class="desc"> This function can potentially take some time to complete, but it can be called in a coroutine and yields appropriately.  It is the caller's responsibility to ensure that any <span class="arg">decide</span> or <span class="arg">transform</span> functions are either very fast, yield appropriately, or are not used from a coroutine.</p><pre class="language-lua"><code>-- Suppose only the following directories exist in the D:\xyz directory:
--  - D:\xyz\bag
--  - D:\xyz\bookkeeper
--  - D:\xyz\bookkeeping
--  - D:\xyz\box
--  - D:\xyz\boxes
--  - D:\xyz\nonrepo
--  - D:\xyz\repo

os.abbreviatepath("d:\\xyz")                        -- returns "d:\\xyz"
os.abbreviatepath("d:\\xyz\\bag")                   -- returns "d:\\xyz\\bag"
os.abbreviatepath("d:\\xyz\\bag\\subdir")           -- returns "d:\\xyz\\ba\\subdir"
os.abbreviatepath("d:\\xyz\\bookkeeper")            -- returns "d:\\xyz\\bookkeeper"
os.abbreviatepath("d:\\xyz\\bookkeeper\\subdir")    -- returns "d:\\xyz\\bookkeepe\\subdir"
os.abbreviatepath("d:\\xyz\\bookkeeping\\file")     -- returns "d:\\xyz\\bookkeepi\\file"
os.abbreviatepath("d:\\xyz\\box\\subdir")           -- returns "d:\\xyz\\box\\subdir"
os.abbreviatepath("d:\\xyz\\boxes\\file")           -- returns "d:\\xyz\\boxe\\file"

-- Examples with a `decide` function.

local function not_git_dir(dir)
&nbsp;   if os.isdir(path.join(dir, ".git")) then
&nbsp;       return false -- Don't abbreviate git repo directories.
&nbsp;   end
end

os.abbreviatepath("d:\\xyz\\nonrepo\\subdir", not_git_dir)  -- returns "d:\\xyz\\n\\subdir"
os.abbreviatepath("d:\\xyz\\repo\\subdir", not_git_dir)     -- returns "d:\\xyz\\repo\\subdir"

-- Example with a `decide` function and a `transform` function.

local function do_all(dir)
&nbsp;   return true
end

local function dim_abbrev(name, abbrev)
&nbsp;   if abbrev then
&nbsp;       return "\027[38m"..name.."\027[m" -- Use dark gray text.
&nbsp;   else
&nbsp;       return name
&nbsp;   end
end

os.abbreviatepath("d:\\xyz\\bag", do_all, dim_abbrev)
-- returns "c:\\\027[38mx\027[m\\\027[38mba\027[m"

-- Relative paths work as well.

os.chdir("d:\\xyz")
os.abbreviatesetcurrentdir("bag\\subdir", true)     -- returns "ba\\s" (if "subdir" is unique)</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.chdir" class="name"><a class="wlink" href="#os.chdir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.chdir</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Changes the current directory to <span class="arg">path</span> and returns whether it was successful. If unsuccessful it returns false, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.clock" class="name"><a class="wlink" href="#os.clock"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.clock</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : number<br/><div class="version">v1.2.30 and newer</div></div></div><div class="body"><p class="desc">This returns the number of seconds since the program started.</p><p class="desc"> Normally, Lua's os.clock() has millisecond precision until the program has been running for almost 25 days, and then it suddenly breaks and starts always returning -0.001 seconds.</p><p class="desc"> Clink's version of os.clock() has microsecond precision until the program has been running for many weeks.  It maintains at least millisecond precision until the program has been running for many years.</p><p class="desc"> It was necessary to replace os.clock() in order for <a href="#asyncpromptfiltering">asynchronous prompt filtering</a> to continue working when CMD has been running for more than 25 days.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.copy" class="name"><a class="wlink" href="#os.copy"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.copy</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">src</span>:string, <span class="arg_name">dest</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Copies the <span class="arg">src</span> file to the <span class="arg">dest</span> file. If unsuccessful it returns false, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.createguid" class="name"><a class="wlink" href="#os.createguid"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.createguid</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">faster</span>:boolean] ) : string, boolean<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Generates a 128-bit unique ID represented as 32 hexadecimal characters.</p><p class="desc"> By default, this uses the OS `UuidCreate()` API to create a unique ID.</p><p class="desc"> When the optional <span class="arg">faster</span> argument is <code>true</code> then this uses `UuidCreateSequential()` instead, which is faster but can potentially be traced back to the ethernet address of the computer.</p><p class="desc"> If successful, this returns a 32 digit hexadecimal string and a boolean value.  When the boolean value is true then the ID is only locally unique, and cannot safely be used to uniquely identify an object that is not strictly local to your computer.</p><p class="desc"> If an error occurs, this returns nil.</p><p class="desc"> <strong>IMPORTANT:</strong> Not all of the 128 bits necessarily have the same degree of entropy on each computer.  If you discard any bits from the string then you could accidentally greatly reduce the uniqueness of the ID (even on the same computer), or even completely remove all entropy.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.createtmpfile" class="name"><a class="wlink" href="#os.createtmpfile"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.createtmpfile</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">prefix</span>:string], [<span class="arg_name">ext</span>:string], [<span class="arg_name">path</span>:string], [<span class="arg_name">mode</span>:string] ) : file, string<br/><div class="version">v1.1.42 and newer</div></div></div><div class="body"><p class="desc">Creates a uniquely named file, intended for use as a temporary file.  The name pattern is "<em>location</em> <code>\</code> <em>prefix</em> <code>_</code> <em>processId</em> <code>_</code> <em>uniqueNum</em> <em>extension</em>".</p><p class="desc"> <span class="arg">prefix</span> optionally specifies a prefix for the file name and defaults to "tmp".</p><p class="desc"> <span class="arg">ext</span> optionally specifies a suffix for the file name and defaults to "" (if <span class="arg">ext</span> starts with a period "." then it is a filename extension).</p><p class="desc"> <span class="arg">path</span> optionally specifies a path location in which to create the file.  The default is the system TEMP directory.</p><p class="desc"> <span class="arg">mode</span> optionally specifies "t" for text mode (line endings are translated) or "b" for binary mode (untranslated IO).  The default is "t".</p><p class="desc"> When successful, the function returns a file handle and the file name. If unsuccessful it returns nil, an error message, and the error number.</p><p class="desc"> <strong>Note:</strong> Be sure to delete the file when finished, or it will be leaked.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.debugprint" class="name"><a class="wlink" href="#os.debugprint"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.debugprint</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( ... ) : nil<br/><div class="version">v1.2.20 and newer</div></div></div><div class="body"><p class="desc">This works like <a href="https://www.lua.org/manual/5.2/manual.html#pdf-print">print()</a> but writes the output via the OS <code>OutputDebugString()</code> API.</p><p class="desc"> This function has no effect if the <code><a href="#lua_debug">lua.debug</a></code> Clink setting is off.</p><pre class="language-lua"><code>clink.debugprint("my variable = "..myvar)</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.enumshares" class="name"><a class="wlink" href="#os.enumshares"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.enumshares</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">server</span>:string, [<span class="arg_name">hidden</span>:boolean], [<span class="arg_name">timeout</span>:number] ) : iterator<br/><div class="version">v1.6.0 and newer</div></div></div><div class="body"><p class="desc">This returns an iterator function which steps through the share names available on the given <span class="arg">server</span> one name at a time. (This only enumerates SMB UNC share names.)</p><p class="desc"> When <span class="arg">hidden</span> is true, special hidden shares like ADMIN$ or C$ are included.</p><p class="desc"> The optional <span class="arg">timeout</span> is the maximum number of seconds to wait for shares to be retrieved (use a floating point number for fractional seconds).  The default is 0, which means an unlimited wait (negative numbers are treated the same as 0).</p><p class="desc"> Each call to the returned iterator function returns a share name, a boolean indicating whether it's a special share, and either nil or "canceled" (if it takes longer than <span class="arg">timeout</span> to retrieve the share names for the given <span class="arg">server</span>).  When there are no more shares, the iterator function returns nil.</p><p class="desc"> When called from a coroutine, the iterator function automatically yields when appropriate.</p><pre class="language-lua"><code>local server = "localhost"
local hidden = true -- Include special hidden shares.
local timeout = 2.5 -- Wait up to 2.5 seconds for completion.
for share, special, canceled in os.enumshares(server, hidden, timeout) do
local s = "\\\\"..server.."\\"..share
if special then
s = s.."  (special)"
end
if canceled then
s = s.."  ("..canceled..")"
end
print(s)
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.expandabbreviatedpath" class="name"><a class="wlink" href="#os.expandabbreviatedpath"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.expandabbreviatedpath</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : nil | string, string, boolean<br/><div class="version">v1.4.1 and newer</div></div></div><div class="body"><p class="desc">This expands any abbreviated directory components in <span class="arg">path</span>.</p><p class="desc"> The return value is nil if <span class="arg">path</span> couldn't be expanded.  It can't be expanded if it is a UNC path or a remote drive, or if it is already expanded, or if there are no matches for one of the directory components.</p><p class="desc"> Otherwise three values are returned.  First, a string containing the expanded part of <span class="arg">path</span>.  Second, a string containing the rest of <span class="arg">path</span> that wasn't expanded.  Third, a boolean indicating whether <span class="arg">path</span> was able to expand uniquely.</p><pre class="language-lua"><code>-- Suppose only the following directories exist in the D: drive:
--  - D:\bag
--  - D:\bookkeeper
--  - D:\bookkeeping
--  - D:\box
--  - D:\boxes

expanded, remaining, unique = os.expandabbreviatedpath("d:\\b\\file")
-- returns "d:\\b", "\\file", false         -- Ambiguous.

expanded, remaining, unique = os.expandabbreviatedpath("d:\\ba\\file")
-- returns "d:\\bag", "\\file", true        -- Unique; only "bag" can match "ba".

expanded, remaining, unique = os.expandabbreviatedpath("d:\\bo\\file")
-- returns "d:\\bo", "\\file", false        -- Ambiguous.

expanded, remaining, unique = os.expandabbreviatedpath("d:\\boo\\file")
-- returns "d:\\bookkeep", "\\file", false  -- Ambiguous; "bookkeep" is longest common part matching "boo".

expanded, remaining, unique = os.expandabbreviatedpath("d:\\box\\file")
-- returns "d:\\box", "\\file", false       -- Ambiguous; "box" is an exact match.

expanded, remaining, unique = os.expandabbreviatedpath("d:\\boxe\\file")
-- returns "d:\\boxes", "\\file", true      -- Unique; only "boxes" can match "boxe".

expanded, remaining, unique = os.expandabbreviatedpath("d:\\boxes\\file")
-- returns nil                              -- Is already expanded.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.expandenv" class="name"><a class="wlink" href="#os.expandenv"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.expandenv</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">value</span>:string ) : string<br/><div class="version">v1.2.5 and newer</div></div></div><div class="body"><p class="desc">Returns <span class="arg">value</span> with any <code>%name%</code> environment variables expanded.  Names are case insensitive.  Special CMD syntax is not supported (e.g. <code>%name:str1=str2%</code> or <code>%name:~offset,length%</code>).</p><p class="desc"> <strong>Note:</strong> See <a href="#os.getenv">os.getenv()</a> for a list of special variable names.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.findfiles" class="name"><a class="wlink" href="#os.findfiles"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.findfiles</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">pattern</span>:string, [<span class="arg_name">extrainfo</span>:integer|boolean], [<span class="arg_name">flags</span>:table] ) : object<br/><div class="version">v1.6.13 and newer</div></div></div><div class="body"><p class="desc">Returns an object that can be used to get files and/or directories matching <span class="arg">pattern</span>.</p><p class="desc"> <strong>Note:</strong> Any quotation marks (<code>"</code>) in <span class="arg">pattern</span> are stripped.</p><p class="desc"> Unlike <a href="#os.globfiles">os.globfiles</a>, this only collects matching files or directories one at a time, instead of collecting all matches in a table.</p><p class="desc"> The returned object has the following functions: <ul> <li><strong>next()</strong> - Returns the next file or directory, or nil where there are no more. <li><strong>files()</strong> - Returns a Lua iterator function which can be used in a <strong>for</strong> loop, returning the next file or directory each time. <li><strong>close()</strong> - Releases the OS resources used for the search.  This is automatically called by the Lua garbage collector, but that may not happen quickly enough to avoid interfering with operations such as deleting a parent directory, so it's good to call <code>:close()</code> directly. </ul></p><pre class="language-lua"><code>-- Print the first matching file, without wasting time collecting
-- the rest of the files, since they aren't needed here.
local ff = os.findfiles(pattern)
local name = ff:next()
print(name)
ff:close()</code></pre><p class="desc">By default <code>:next()</code> returns a string containing the name of the file or directory.  The optional <span class="arg">extrainfo</span> argument can instead return a table corresponding to one file or directory, with the following scheme:</p><pre class="language-lua"><code>local ff = os.findfiles(pattern, extrainfo)
local t = ff:next()
-- Included when extrainfo is true or >= 1:
--   t.name             -- [string] The file or directory name.
--   t.type             -- [string] The match type (see below).
-- Included when extrainfo is 2:
--   t.size             -- [number] The file size, in bytes.
--   t.atime            -- [number] The access time, compatible with os.time().
--   t.mtime            -- [number] The modified time, compatible with os.time().
--   t.ctime            -- [number] The creation time, compatible with os.time().
ff:close()</code></pre><p class="desc">The <span class="tablescheme">type</span> string can be "file" or "dir", and may also contain ",hidden", ",readonly", ",link", and ",orphaned" depending on the attributes (making it usable as a match type for <a href="#builder:addmatch">builder:addmatch()</a>).</p><p class="desc"> The optional <span class="arg">flags</span> argument can be a table with fields that select how finding files should behave.  By default files, directories, hidden files/directories are included, system files/directories are omitted, and directories have a <code>\</code> suffix.</p><pre class="language-lua"><code>local flags = {
&nbsp;   files = true,       -- True includes files, or false omits them.
&nbsp;   dirs = true,        -- True includes directories, or false omits them.
&nbsp;   hidden = true,      -- True includes hidden files (default), or false omits them.
&nbsp;   system = false,     -- True includes system files, or false omits them (default).
&nbsp;   dirsuffix = true,   -- True adds a \ suffix to directories, or false omits it.
}
local ff = os.findfiles(pattern, true, flags)
for t in ff:files() do
&nbsp;   print(t.name.." ("..t.type..")")
end
ff:close()</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getalias" class="name"><a class="wlink" href="#os.getalias"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getalias</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string ) : string | nil<br/><div class="version">v1.1.4 and newer</div></div></div><div class="body"><p class="desc">Returns command string for doskey alias <span class="arg">name</span>, or nil if the named alias does not exist.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getaliases" class="name"><a class="wlink" href="#os.getaliases"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getaliases</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : table<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns doskey alias names in a table of strings.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getbatterystatus" class="name"><a class="wlink" href="#os.getbatterystatus"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getbatterystatus</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : table<br/><div class="version">v1.1.17 and newer</div></div></div><div class="body"><p class="desc">Returns a table containing the battery status for the device, or nil if an error occurs.  The returned table has the following scheme:</p><pre class="language-lua"><code>local t = os.getbatterystatus()
-- t.level              [integer] The battery life from 0 to 100, or -1 if error or no battery.
-- t.acpower            [boolean] Whether the device is connected to AC power.
-- t.charging           [boolean] Whether the battery is charging.
-- t.batterysaver       [boolean] Whether Battery Saver mode is active.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getclipboardtext" class="name"><a class="wlink" href="#os.getclipboardtext"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getclipboardtext</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string | nil<br/><div class="version">v1.2.32 and newer</div></div></div><div class="body"><p class="desc">This returns the text from the system clipboard, or nil if there is no text on the system clipboard.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getcwd" class="name"><a class="wlink" href="#os.getcwd"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getcwd</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the current directory.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getdrivetype" class="name"><a class="wlink" href="#os.getdrivetype"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getdrivetype</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : string<br/><div class="version">v1.3.37 and newer</div></div></div><div class="body"><p class="desc">Returns the drive type for the drive associated with the specified <span class="arg">path</span>.</p><p class="desc"> Relative paths automatically use the current drive.  Absolute paths use the specified drive.  UNC paths are always reported as remote drives.</p><p class="desc"> The possible drive types are: <p><table> <tr><th>Type</th><th>Description</th></tr> <tr><td>"unknown"</td><td>The drive type could not be determined.</td></tr> <tr><td>"invalid"</td><td>The drive type is invalid; for example, there is no volume mounted at the specified path.</td></tr> <tr><td>"removable"</td><td>Floppy disk drive, thumb drive, flash card reader, CD-ROM, etc.</td></tr> <tr><td>"fixed"</td><td>Hard drive, solid state drive, etc.</td></tr> <tr><td>"ramdisk"</td><td>RAM disk.</td></tr> <tr><td>"remote"</td><td>Remote (network) drive.</td></tr> </table></p></p><pre class="language-lua"><code>local t = os.getdrivetype("c:")
if t == "remote" then
&nbsp;   -- Network paths are often slow, and code may want to detect and skip them.
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getenv" class="name"><a class="wlink" href="#os.getenv"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getenv</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string ) : string | nil<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the value of the named environment variable, or nil if it doesn't exist.</p><p class="desc"> <strong>Note:</strong> Certain environment variable names receive special treatment:</p><p class="desc"> <table> <tr><th>Name</th><th>Special Behavior</th></tr> <tr><td><code>"CD"</code></td><td>If %CD% is not set then a return value is synthesized from the current working directory path name.</td></tr> <tr><td><code>"CMDCMDLINE"</code></td><td>If %CMDCMDLINE% is not set then this returns the command line that started the CMD process.</td></tr> <tr><td><code>"ERRORLEVEL"</code></td><td>If %ERRORLEVEL% is not set and the <code><a href="#cmd_get_errorlevel">cmd.get_errorlevel</a></code> setting is enabled this returns the most recent exit code, just like the <code>echo %ERRORLEVEL%</code> command displays.  Otherwise this returns 0.</td></tr> <tr><td><code>"HOME"</code></td><td>If %HOME% is not set then a return value is synthesized from %HOMEDRIVE% and %HOMEPATH%, or from %USERPROFILE%.</td></tr> <tr><td><code>"RANDOM"</code></td><td>If %RANDOM% is not set then this returns a random integer.</td></tr> </table></p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getenvnames" class="name"><a class="wlink" href="#os.getenvnames"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getenvnames</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : table<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns all environment variables in a table with the following scheme:</p><pre class="language-lua"><code>local t = os.getenvnames()
-- t[index].name        [string] The environment variable's name.
-- t[index].value       [string] The environment variable's value.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.geterrorlevel" class="name"><a class="wlink" href="#os.geterrorlevel"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.geterrorlevel</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.2.14 and newer</div></div></div><div class="body"><p class="desc">Returns the last command's exit code, if the <code><a href="#cmd_get_errorlevel">cmd.get_errorlevel</a></code> setting is enabled.  Otherwise it returns 0.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getfileversion" class="name"><a class="wlink" href="#os.getfileversion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getfileversion</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">file</span>:string ) : table | nil<br/><div class="version">v1.4.17 and newer</div></div></div><div class="body"><p class="desc">This tries to get a Windows file version info resource from the specified file.  It tries to get translated strings in the closest available language to the current user language configured in the OS.</p><p class="desc"> If successful, the returned table contains as many of the following fields as were available in the file's version info resource.</p><pre class="language-lua"><code>local info = os.getfileversion("c:/windows/notepad.exe")
-- info.filename            c:\windows\notepad.exe
-- info.filevernum          10.0.19041.1865
-- info.productvernum       10.0.19041.1865
-- info.fileflags
-- info.osplatform          Windows NT
-- info.osqualifier
-- info.comments
-- info.companyname         Microsoft Corporation
-- info.filedescription     Notepad
-- info.fileversion         10.0.19041.1 (WinBuild.160101.0800)
-- info.internalname        Notepad
-- info.legalcopyright      © Microsoft Corporation. All rights reserved.
-- info.legaltrademarks
-- info.originalfilename    NOTEPAD.EXE.MUI
-- info.productname         Microsoft® Windows® Operating System
-- info.productversion      10.0.19041.1
-- info.privatebuild
-- info.specialbuild</code></pre><p class="desc"><strong>Note:</strong>  The <span class="arg">fileflags</span> field may be nil (omitted), or it may contain a table with additional fields.</p><pre class="language-lua"><code>if info.fileflags then
-- info.fileflags.debug
-- info.fileflags.prerelease
-- info.fileflags.patched
-- info.fileflags.privatebuild
-- info.fileflags.specialbuild
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getfullpathname" class="name"><a class="wlink" href="#os.getfullpathname"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getfullpathname</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : string<br/><div class="version">v1.1.42 and newer</div></div></div><div class="body"><p class="desc">Returns the full path name for <span class="arg">path</span>. If unsuccessful it returns nil, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.gethost" class="name"><a class="wlink" href="#os.gethost"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.gethost</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the fully qualified file name of the host process.  Currently only CMD.EXE can host Clink.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getlongpathname" class="name"><a class="wlink" href="#os.getlongpathname"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getlongpathname</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : string<br/><div class="version">v1.1.42 and newer</div></div></div><div class="body"><p class="desc">Returns the long path name for <span class="arg">path</span>. If unsuccessful it returns nil, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getnetconnectionname" class="name"><a class="wlink" href="#os.getnetconnectionname"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getnetconnectionname</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : string<br/><div class="version">v1.2.27 and newer</div></div></div><div class="body"><p class="desc">Returns the remote name associated with <span class="arg">path</span>, or an empty string if it's not a network drive. If unsuccessful it returns nil, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getpid" class="name"><a class="wlink" href="#os.getpid"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getpid</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.1.41 and newer</div></div></div><div class="body"><p class="desc">Returns the CMD.EXE process ID. This is mainly intended to help with salting unique resource names (for example named pipes).</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getpushddepth" class="name"><a class="wlink" href="#os.getpushddepth"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getpushddepth</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer, boolean<br/><div class="version">v1.5.6 and newer</div></div></div><div class="body"><p class="desc">Returns the depth of the <code>pushd</code> directory stack, and a boolean indicating whether the depth is known.</p><p class="desc"> <strong>Note:</strong> The depth is only known if the <code>%PROMPT%</code> environment variable includes the <code>$+</code> code exactly once.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getscreeninfo" class="name"><a class="wlink" href="#os.getscreeninfo"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getscreeninfo</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : table<br/><div class="version">v1.1.2 and newer</div></div></div><div class="body"><p class="desc">Returns dimensions of the terminal's buffer and visible window. The returned table has the following scheme:</p><pre class="language-lua"><code>local info = os.getscreeninfo()
-- info.bufwidth        [integer] Width of the screen buffer.
-- info.bufheight       [integer] Height of the screen buffer.
-- info.winwidth        [integer] Width of the visible window.
-- info.winheight       [integer] Height of the visible window.

-- v1.4.28 and higher include the cursor position:
-- info.x               [integer] Current cursor column (from 1 to bufwidth).
-- info.y               [integer] Current cursor row (from 1 to bufheight).</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.getshortpathname" class="name"><a class="wlink" href="#os.getshortpathname"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.getshortpathname</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : string<br/><div class="version">v1.1.42 and newer</div></div></div><div class="body"><p class="desc">Returns the 8.3 short path name for <span class="arg">path</span>.  This may return the input path if an 8.3 short path name is not available. If unsuccessful it returns nil, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.gettemppath" class="name"><a class="wlink" href="#os.gettemppath"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.gettemppath</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.3.18 and newer</div></div></div><div class="body"><p class="desc">Returns the path of the system temporary directory. If unsuccessful it returns nil, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.globdirs" class="name"><a class="wlink" href="#os.globdirs"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.globdirs</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">globpattern</span>:string, [<span class="arg_name">extrainfo</span>:integer|boolean], [<span class="arg_name">flags</span>:table] ) : table<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Collects directories matching <span class="arg">globpattern</span> and returns them in a table of strings.</p><p class="desc"> <strong>Note:</strong> Any quotation marks (<code>"</code>) in <span class="arg">globpattern</span> are stripped.</p><p class="desc"> Starting in v1.3.1, when this is used in a coroutine it automatically yields periodically.</p><p class="desc"> The optional <span class="arg">extrainfo</span> argument can return a table of tables instead, where each sub-table corresponds to one directory and has the following scheme:</p><pre class="language-lua"><code>local t = os.globdirs(pattern, extrainfo)
-- Included when extrainfo is true or >= 1 (requires v1.1.7 or higher):
--   t[index].name      -- [string] The directory name.
--   t[index].type      -- [string] The match type (see below).
-- Included when extrainfo is 2 (requires v1.2.31 or higher):
--   t[index].size      -- [number] The file size, in bytes.
--   t[index].atime     -- [number] The access time, compatible with os.time().
--   t[index].mtime     -- [number] The modified time, compatible with os.time().
--   t[index].ctime     -- [number] The creation time, compatible with os.time().</code></pre><p class="desc">The <span class="tablescheme">type</span> string is "dir", and may also contain ",hidden", ",readonly", ",link", and ",orphaned" depending on the attributes (making it usable as a match type for <a href="#builder:addmatch">builder:addmatch()</a>).</p><p class="desc"> Starting in v1.4.16, the optional <span class="arg">flags</span> argument can be a table with fields that select how directory globbing should behave. By default hidden directories are included and system directories are omitted.</p><pre class="language-lua"><code>local flags = {
&nbsp;   hidden = true,      -- True includes hidden directories (default), or false omits them.
&nbsp;   system = false,     -- True includes system directories, or false omits them (default).
}
local t = os.globdirs("*", true, flags)</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.globfiles" class="name"><a class="wlink" href="#os.globfiles"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.globfiles</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">globpattern</span>:string, [<span class="arg_name">extrainfo</span>:integer|boolean], [<span class="arg_name">flags</span>:table] ) : table<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Collects files and/or directories matching <span class="arg">globpattern</span> and returns them in a table of strings.</p><p class="desc"> <strong>Note:</strong> Any quotation marks (<code>"</code>) in <span class="arg">globpattern</span> are stripped.</p><p class="desc"> Starting in v1.3.1, when this is used in a coroutine it automatically yields periodically.</p><p class="desc"> The optional <span class="arg">extrainfo</span> argument can return a table of tables instead, where each sub-table corresponds to one file or directory and has the following scheme:</p><pre class="language-lua"><code>local t = os.globfiles(pattern, extrainfo)
-- Included when extrainfo is true or >= 1 (requires v1.1.7 or higher):
--   t[index].name      -- [string] The file or directory name.
--   t[index].type      -- [string] The match type (see below).
-- Included when extrainfo is 2 (requires v1.2.31 or higher):
--   t[index].size      -- [number] The file size, in bytes.
--   t[index].atime     -- [number] The access time, compatible with os.time().
--   t[index].mtime     -- [number] The modified time, compatible with os.time().
--   t[index].ctime     -- [number] The creation time, compatible with os.time().</code></pre><p class="desc">The <span class="tablescheme">type</span> string can be "file" or "dir", and may also contain ",hidden", ",readonly", ",link", and ",orphaned" depending on the attributes (making it usable as a match type for <a href="#builder:addmatch">builder:addmatch()</a>).</p><p class="desc"> Starting in v1.4.16, the optional <span class="arg">flags</span> argument can be a table with fields that select how file globbing should behave.  By default hidden files are included and system files are omitted.</p><pre class="language-lua"><code>local flags = {
&nbsp;   hidden = true,      -- True includes hidden files (default), or false omits them.
&nbsp;   system = false,     -- True includes system files, or false omits them (default).
}
local t = os.globfiles("*", true, flags)</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.globmatch" class="name"><a class="wlink" href="#os.globmatch"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.globmatch</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">pattern</span>:string, [<span class="arg_name">extrainfo</span>:integer|boolean], [<span class="arg_name">flags</span>:table] ) : table<br/><div class="version">v1.4.24 and newer</div></div></div><div class="body"><p class="desc">Collects files or directories matching <span class="arg">pattern</span> and returns them in a table of strings.  This matches <code>**</code> patterns <a href="https://git-scm.com/docs/gitignore#_pattern_format">the same as git does</a>.  When <span class="arg">pattern</span> ends with <code>/</code> this collects directories, otherwise it collects files.</p><p class="desc"> <strong>Note:</strong> any quotation marks (<code>"</code>) in <span class="arg">pattern</span> are stripped.</p><p class="desc"> When this is used in a coroutine it automatically yields periodically.</p><p class="desc"> The optional <span class="arg">extrainfo</span> argument can return a table of tables instead, where each sub-table corresponds to one file or directory and has the following scheme:</p><pre class="language-lua"><code>local t = os.globmatch(pattern, extrainfo)
-- Included when extrainfo is true or >= 1:
--   t[index].name      -- [string] The file or directory name.
--   t[index].type      -- [string] The match type (see below).
-- Included when extrainfo is 2:
--   t[index].size      -- [number] The file size, in bytes.
--   t[index].atime     -- [number] The access time, compatible with os.time().
--   t[index].mtime     -- [number] The modified time, compatible with os.time().
--   t[index].ctime     -- [number] The creation time, compatible with os.time().</code></pre><p class="desc">The <span class="tablescheme">type</span> string can be "file" or "dir", and may also contain ",hidden", ",readonly", ",link", and ",orphaned" depending on the attributes (making it usable as a match type for <a href="#builder:addmatch">builder:addmatch()</a>).</p><p class="desc"> The optional <span class="arg">flags</span> argument can be a table with fields that select how the globbing should behave.  By default hidden files are included, system files are omitted, and comparisons are case insensitive.</p><pre class="language-lua"><code>local flags = {
&nbsp;   hidden = true,      -- True includes hidden files (default), or false omits them.
&nbsp;   system = false,     -- True includes system files, or false omits them (default).
&nbsp;   period = false,     -- True matches files beginning with period (.) if pattern has a corresponding
&nbsp;                       -- period, or false matches even without a corresponding period (default).
&nbsp;   nocasefold = false, -- True is case-sensitive, or false is case-insensitive (default).
}
local t = os.globmatch("docs/**/*.md", true, flags)</code></pre><p class="desc"><strong>Note:</strong> The returned table is built using a pre-order traversal, so files in a directory are listed before recursing into its subdirectories ("dir\xyzfile" precedes "dir\abcdir\abcfile").</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.isdir" class="name"><a class="wlink" href="#os.isdir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.isdir</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns whether <span class="arg">path</span> is a directory.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.isfile" class="name"><a class="wlink" href="#os.isfile"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.isfile</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns whether <span class="arg">path</span> is a file.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.issignaled" class="name"><a class="wlink" href="#os.issignaled"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.issignaled</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : boolean<br/><div class="version">v1.3.14 and newer</div></div></div><div class="body"><p class="desc">Returns whether a <kbb>Ctrl</kbd>+<kbd>Break</kbd> has been received. Scripts may use this to decide when to end work early.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.isuseradmin" class="name"><a class="wlink" href="#os.isuseradmin"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.isuseradmin</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : boolean<br/><div class="version">v1.4.17 and newer</div></div></div><div class="body"><p class="desc">Returns true if running as an administrator account.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.mkdir" class="name"><a class="wlink" href="#os.mkdir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.mkdir</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Creates the directory <span class="arg">path</span> and returns whether it was successful. If unsuccessful it returns false, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.move" class="name"><a class="wlink" href="#os.move"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.move</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">src</span>:string, <span class="arg_name">dest</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Moves the <span class="arg">src</span> file to the <span class="arg">dest</span> file. If unsuccessful it returns false, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.resolvealias" class="name"><a class="wlink" href="#os.resolvealias"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.resolvealias</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : table|nil<br/><div class="version">v1.3.12 and newer</div></div></div><div class="body"><p class="desc">Identifies whether <span class="arg">text</span> begins with a doskey alias, and expands the doskey alias.</p><p class="desc"> Returns a table of strings, or nil if there is no associated doskey alias. The return type is a table of strings because doskey aliases can be defined to expand into multiple command lines:  one entry in the table per resolved command line.  Most commonly, the table will contain one string.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.rmdir" class="name"><a class="wlink" href="#os.rmdir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.rmdir</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Removes the directory <span class="arg">path</span> and returns whether it was successful. If unsuccessful it returns false, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.setalias" class="name"><a class="wlink" href="#os.setalias"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.setalias</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string, <span class="arg_name">command</span>:string ) : boolean<br/><div class="version">v1.6.11 and newer</div></div></div><div class="body"><p class="desc">Sets a doskey alias <span class="arg">name</span> to <span class="arg">command</span>.  Returns true if successful, or returns false if not successful.</p><p class="desc"> <strong>Note:</strong> For more information on the syntax of doskey aliases in Windows read documentation on the <code>doskey</code> command, or run <code>doskey /?</code> for a quick summary.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.setclipboardtext" class="name"><a class="wlink" href="#os.setclipboardtext"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.setclipboardtext</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( string ) : boolean<br/><div class="version">v1.2.32 and newer</div></div></div><div class="body"><p class="desc">This sets the text onto the system clipboard, and returns whether it was successful.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.setenv" class="name"><a class="wlink" href="#os.setenv"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.setenv</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string, <span class="arg_name">value</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Sets the <span class="arg">name</span> environment variable to <span class="arg">value</span> and returns whether it was successful. If unsuccessful it returns false, an error message, and the error number.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.sleep" class="name"><a class="wlink" href="#os.sleep"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.sleep</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">seconds</span>:number ) : nil<br/><div class="version">v1.3.16 and newer</div></div></div><div class="body"><p class="desc">Sleeps for the indicated duration, in seconds, with millisecond granularity.</p><pre class="language-lua"><code>os.sleep(0.01)  -- Sleep for 10 milliseconds.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="os.touch" class="name"><a class="wlink" href="#os.touch"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.touch</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string, [<span class="arg_name">atime</span>:number], [<span class="arg_name">mtime</span>:number] ) : boolean<br/><div class="version">v1.2.31 and newer</div></div></div><div class="body"><p class="desc">Sets the access and modified times for <span class="arg">path</span>, and returns whether it was successful. If unsuccessful it returns false, an error message, and the error number.</p><p class="desc"> The second argument is <span class="arg">atime</span> and is a time to set as the file's access time.  If omitted, the current time is used.  If present, the value must use the same format as <code><a href="https://www.lua.org/manual/5.2/manual.html#pdf-os.time">os.time()</a></code>.</p><p class="desc"> The third argument is <span class="arg">mtime</span> and is a time to set as the file's modified time.  If omitted, the <span class="arg">atime</span> value is used (or the current time).  If present, the value must use the same format as <code>os.time()</code>.  In order to pass <span class="arg">mtime</span> it is necessary to also pass <span class="arg">atime</span>.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.unlink" class="name"><a class="wlink" href="#os.unlink"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.unlink</span> <span class="uplinks"><a href="#os">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Deletes the file <span class="arg">path</span> and returns whether it was successful. If unsuccessful it returns false, an error message, and the error number.</p></div></div><hr/>

</div><div class="group">
<h5 id="path" class="group_name"><a class="wlink" href="#path"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>path. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#path.fnmatch">fnmatch</a></td><td><a href="#path.getname">getname</a></td></tr><tr><td><a href="#path.getbasename">getbasename</a></td><td><a href="#path.isexecext">isexecext</a></td></tr><tr><td><a href="#path.getdirectory">getdirectory</a></td><td><a href="#path.join">join</a></td></tr><tr><td><a href="#path.getdrive">getdrive</a></td><td><a href="#path.normalise">normalise</a></td></tr><tr><td><a href="#path.getextension">getextension</a></td><td><a href="#path.toparent">toparent</a></td></tr></table>
<div class="function"><div class="header"> <div id="path.fnmatch" class="name"><a class="wlink" href="#path.fnmatch"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.fnmatch</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">pattern</span>:string, <span class="arg_name">string</span>:string, [<span class="arg_name">flags</span>:string] ) : boolean<br/><div class="version">v1.4.24 and newer</div></div></div><div class="body"><p class="desc">This compares the two strings <span class="arg">pattern</span> and <span class="arg">string</span> and returns whether they are considered to match.  This is like the Linux <code>fnmatch</code> function, with an additional optional mode that can allow matching <code>**</code> patterns <a href="https://git-scm.com/docs/gitignore#_pattern_format">the same as git does</a>.</p><p class="desc"> The optional <span class="arg">flags</span> string may contain any of the following characters to modify the behavior accordingly: <table> <tr><th>Flag</th><th>Mnemonic</th><th>Description</th></tr> <tr><td>"<code>e</code>"</td><td>NoEscape</td><td>Treat backslash in <span class="arg">pattern</span> as a normal character, rather than as an escape character.</td></tr> <tr><td>"<code>p</code>"</td><td>PathName</td><td>Path separators in <span class="arg">string</span> are matched only by a slash <code>/</code> in <span class="arg">pattern</span> (unless the <code>*</code> flag is used; see below).</td></tr> <tr><td>"<code>.</code>"</td><td>Period</td><td>A leading period <code>.</code> in <span class="arg">string</span> is matched only by a period <code>.</code> in <span class="arg">pattern</span>.  A leading period is one at the beginning of <span class="arg">string</span>, or immediately following a path separator when the <code>p</code> flag is used.</td></tr> <tr><td>"<code>l</code>"</td><td>LeadingDir</td><td>Consider <span class="arg">pattern</span> to be matched if it completely matches <span class="arg">string</span>, or if it matches <span class="arg">string</span> up to a path separator.</td></tr> <tr><td>"<code>c</code>"</td><td>NoCaseFold</td><td>Match with case sensitivity. By default it matches case-insensitively, because Windows is case-insensitive.</td></tr> <tr><td>"<code>*</code>"</td><td>WildStar</td><td>Treat double-asterisks in <span class="arg">pattern</span> as matching path separators as well, the same as how git does (implies the <code>p</code> flag).</td></tr> <tr><td>"<code>s</code>"</td><td>NoSlashFold</td><td>Treat slashes <code>/</code> in <span class="arg">pattern</span> as only matching slashes in <span class="arg">string</span>. By default slashes in <span class="arg">pattern</span> match both slash <code>/</code> and backslash <code>\</code> because Windows recognizes both as path separators.</td></tr> </table></p><p class="desc"> The <span class="arg">pattern</span> supports wildcards (<code>?</code> and <code>*</code>), character classes (<code>[</code>...<code>]</code>), ranges (<code>[</code>.<code>-</code>.<code>]</code>), and complementation (<code>[!</code>...<code>]</code> and <code>[!</code>.<code>-</code>.<code>]</code>).</p><p class="desc"> The <span class="arg">pattern</span> also supports the following character classes: <ul> <li>"<code>[[:alnum:]]</code>": Matches any alphabetic character or digit a - z, or A - Z, or 0 - 9. <li>"<code>[[:alpha:]]</code>": Matches any alphabetic character a - z or A - Z. <li>"<code>[[:blank:]]</code>": Matches 0x20 (space) or 0x09 (tab). <li>"<code>[[:cntrl:]]</code>": Matches 0x00 - 0x1F or 0x7F. <li>"<code>[[:digit:]]</code>": Matches any of the digits 0 - 9. <li>"<code>[[:graph:]]</code>": Matches any character that matches <code>[[:print:]]</code> but does not match <code>[[:space:]]</code>. <li>"<code>[[:lower:]]</code>": Matches any lower case ASCII letter a - z. <li>"<code>[[:print:]]</code>": Matches any printable character (e.g. 0x20 - 0x7E). <li>"<code>[[:punct:]]</code>": Matches any character that matches <code>[[:print:]]</code> but does not match <code>[[:alnum:]]</code>, <code>[[:space:]]</code>, or <code>[[:alnum:]]</code>. <li>"<code>[[:space:]]</code>": Matches 0x20 (space) or 0x09 - 0x0D (tab, linefeed, carriage return, etc). <li>"<code>[[:xdigit:]]</code>": Matches any of the hexadecimal digits 0 - 9, A - F, or a - f. <li>"<code>[[:upper:]]</code>": Matches any upper case ASCII letter A - Z. </ul></p><p class="desc"> <strong>Note:</strong> At this time the character classes and case-insensitivity operate on one byte at a time, so they do not fully work as expected with non-ASCII characters.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="path.getbasename" class="name"><a class="wlink" href="#path.getbasename"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.getbasename</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : string<br/><div class="version">v1.1.0 and newer</div></div></div><div class="body"><p class="desc"></p><pre class="language-lua"><code>path.getbasename("/foo/bar.ext")    -- returns "bar"
path.getbasename("")                -- returns ""</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="path.getdirectory" class="name"><a class="wlink" href="#path.getdirectory"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.getdirectory</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : nil or string<br/><div class="version">v1.1.0 and newer</div></div></div><div class="body"><p class="desc">This is similar to <a href="#path.toparent">path.toparent()</a> but can behave differently when the input path ends with a path separator.  This is the recommended API for parsing a path into its component pieces, but is not recommended for walking up through parent directories.</p><pre class="language-lua"><code>path.getdirectory("foo")                -- returns nil
path.getdirectory("\\foo")              -- returns "\\"
path.getdirectory("c:foo")              -- returns "c:"
path.getdirectory("c:\\")               -- returns "c:\\"
path.getdirectory("c:\\foo")            -- returns "c:\\"
path.getdirectory("c:\\foo\\bar")       -- returns "c:\\foo"
path.getdirectory("\\\\foo\\bar")       -- returns "\\\\foo\\bar"
path.getdirectory("\\\\foo\\bar\\dir")  -- returns "\\\\foo\\bar"
path.getdirectory("")                   -- returns nil

-- These split the path components differently than path.toparent().
path.getdirectory("c:\\foo\\bar\\")         -- returns "c:\\foo\\bar"
path.getdirectory("\\\\foo\\bar\\dir\\")    -- returns "\\\\foo\\bar\\dir"</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="path.getdrive" class="name"><a class="wlink" href="#path.getdrive"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.getdrive</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : nil or string<br/><div class="version">v1.1.0 and newer</div></div></div><div class="body"><p class="desc"></p><pre class="language-lua"><code>path.getdrive("e:/foo/bar")     -- returns "e:"
path.getdrive("foo/bar")        -- returns nil
path.getdrive("")               -- returns nil</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="path.getextension" class="name"><a class="wlink" href="#path.getextension"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.getextension</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : string<br/><div class="version">v1.1.0 and newer</div></div></div><div class="body"><p class="desc"></p><pre class="language-lua"><code>path.getextension("bar.ext")    -- returns ".ext"
path.getextension("bar")        -- returns ""
path.getextension("")           -- returns ""</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="path.getname" class="name"><a class="wlink" href="#path.getname"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.getname</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : string<br/><div class="version">v1.1.0 and newer</div></div></div><div class="body"><p class="desc"></p><pre class="language-lua"><code>path.getname("/foo/bar.ext")    -- returns "bar.ext"
path.getname("")                -- returns ""</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="path.isexecext" class="name"><a class="wlink" href="#path.isexecext"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.isexecext</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean<br/><div class="version">v1.1.5 and newer</div></div></div><div class="body"><p class="desc">Examines the extension of the path name.  Returns true if the extension is listed in %PATHEXT%.  This caches the extensions in a map so that it's more efficient than getting and parsing %PATHEXT% each time.</p><pre class="language-lua"><code>path.isexecext("program.exe")   -- returns true
path.isexecext("file.doc")      -- returns false
path.isexecext("")              -- returns false</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="path.join" class="name"><a class="wlink" href="#path.join"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.join</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">left</span>:string, <span class="arg_name">right</span>:string ) : string<br/><div class="version">v1.1.0 and newer</div></div></div><div class="body"><p class="desc">If <span class="arg">right</span> is a relative path, this joins <span class="arg">left</span> and <span class="arg">right</span>.</p><p class="desc"> If <span class="arg">right</span> is not a relative path, this returns <span class="arg">right</span>.</p><pre class="language-lua"><code>path.join("/foo", "bar")        -- returns "/foo\\bar"
path.join("", "bar")            -- returns "bar"
path.join("/foo", "")           -- returns "/foo\\"
path.join("/foo", "/bar/xyz")   -- returns "/bar/xyz"</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="path.normalise" class="name"><a class="wlink" href="#path.normalise"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.normalise</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string, [<span class="arg_name">separator</span>:string] ) : string<br/><div class="version">v1.1.0 and newer</div></div></div><div class="body"><p class="desc">Cleans <span class="arg">path</span> by normalising separators and removing "." and ".." elements.  If <span class="arg">separator</span> is provided it is used to delimit path elements, otherwise a system-specific delimiter is used.</p><pre class="language-lua"><code>path.normalise("a////b/\\/c/")  -- returns "a\\b\\c\\"
path.normalise("./foo/../bar")  -- returns "bar"
path.normalise("")              -- returns ""</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="path.toparent" class="name"><a class="wlink" href="#path.toparent"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>path.toparent</span> <span class="uplinks"><a href="#path">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : parent:string, child:string<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Splits the last path component from <span class="arg">path</span>, if possible. Returns the result and the component that was split, if any.</p><p class="desc"> This is similar to <a href="#path.getdirectory">path.getdirectory()</a> but can behave differently when the input path ends with a path separator.  This is the recommended API for walking up through parent directories.</p><pre class="language-lua"><code>local parent,child
parent,child = path.toparent("foo")                 -- returns "", "foo"
parent,child = path.toparent("\\foo")               -- returns "\\", "foo"
parent,child = path.toparent("c:foo")               -- returns "c:", "foo"
parent,child = path.toparent("c:\\"])               -- returns "c:\\", ""
parent,child = path.toparent("c:\\foo")             -- returns "c:\\", "foo"
parent,child = path.toparent("c:\\foo\\bar")        -- returns "c:\\foo", "bar"
parent,child = path.toparent("\\\\foo\\bar")        -- returns "\\\\foo\\bar", ""
parent,child = path.toparent("\\\\foo\\bar\\dir")   -- returns "\\\\foo\\bar", "dir"
parent,child = path.toparent("")                    -- returns "", ""

-- These split the path components differently than path.getdirectory().
parent,child = path.toparent("c:\\foo\\bar\\"")     -- returns "c:\\foo", "bar"
parent,child = path.toparent("\\\\foo\\bar\\dir\\") -- returns "\\\\foo\\bar", "dir"</code></pre></div></div><hr/>

</div><div class="group">
<h5 id="rl" class="group_name"><a class="wlink" href="#rl"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>rl. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#rl.bracketpromptcodes">bracketpromptcodes</a></td><td><a href="#rl.gethistorycount">gethistorycount</a></td><td><a href="#rl.getpromptinfo">getpromptinfo</a></td><td><a href="#rl.isvariabletrue">isvariabletrue</a></td></tr><tr><td><a href="#rl.collapsetilde">collapsetilde</a></td><td><a href="#rl.gethistoryitems">gethistoryitems</a></td><td><a href="#rl.getvariable">getvariable</a></td><td><a href="#rl.needquotes">needquotes</a></td></tr><tr><td><a href="#rl.describemacro">describemacro</a></td><td><a href="#rl.getinputrcfilename">getinputrcfilename</a></td><td><a href="#rl.insertmode">insertmode</a></td><td><a href="#rl.setbinding">setbinding</a></td></tr><tr><td><a href="#rl.expandtilde">expandtilde</a></td><td><a href="#rl.getkeybindings">getkeybindings</a></td><td><a href="#rl.invokecommand">invokecommand</a></td><td><a href="#rl.setmatches">setmatches</a></td></tr><tr><td><a href="#rl.getbinding">getbinding</a></td><td><a href="#rl.getlastcommand">getlastcommand</a></td><td><a href="#rl.islineequal">islineequal</a></td><td><a href="#rl.setvariable">setvariable</a></td></tr><tr><td><a href="#rl.getcommandbindings">getcommandbindings</a></td><td><a href="#rl.getmatchcolor">getmatchcolor</a></td><td><a href="#rl.ismodifiedline">ismodifiedline</a></td><td><a href="#rl.translatekey">translatekey</a></td></tr></table>
<div class="function"><div class="header"> <div id="rl.bracketpromptcodes" class="name"><a class="wlink" href="#rl.bracketpromptcodes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.bracketpromptcodes</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">prompt</span>:string ) : string<br/><div class="version">v1.6.1 and newer</div></div></div><div class="body"><p class="desc">Certain Readline configuration variables need for ANSI escape codes to be bracketed with <code>\1</code> and <code>\2</code>.  This function returns the <span class="arg">prompt</span> string with that bracketing applied.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.collapsetilde" class="name"><a class="wlink" href="#rl.collapsetilde"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.collapsetilde</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string, [<span class="arg_name">force</span>:boolean] ) : string<br/><div class="version">v1.1.6 and newer</div></div></div><div class="body"><p class="desc">Undoes Readline tilde expansion.  See <a href="#rl.expandtilde">rl.expandtilde()</a> for more information.</p><pre class="language-lua"><code>rl.collapsetilde("C:\\Users\\yourusername\\Documents")
&nbsp;
-- The return value depends on the expand-tilde configuration variable:
-- When "on", the function returns "C:\\Users\\yourusername\\Documents".
-- When "off", the function returns "~\\Documents".
&nbsp;
-- Or when <span class="arg">force</span> is true, the function returns "~\Documents".</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.describemacro" class="name"><a class="wlink" href="#rl.describemacro"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.describemacro</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">macro</span>:string, <span class="arg_name">description</span>:string ) : nil<br/><div class="version">v1.3.41 and newer</div></div></div><div class="body"><p class="desc">This associates <span class="arg">description</span> with <span class="arg">macro</span>, to be displayed in the <code><a href="#rlcmd-clink-show-help">clink-show-help</a></code> and <code><a href="#rlcmd-clink-what-is">clink-what-is</a></code> commands.</p><p class="desc"> This may be used to add a description for a <a href="#luakeybindings">luafunc: key binding</a> macro, or for a keyboard macro.</p><p class="desc"> The <span class="arg">macro</span> string should include quotes, just like in <a href="#rl.setbinding">rl.setbinding()</a>.  If quotes are not present, they are added automatically.</p><pre class="language-lua"><code>rl.describemacro([["luafunc:mycommand"]], "Does whatever mycommand does")
rl.describemacro([["\e[Hrem "]], "Insert 'rem ' at the beginning of the line")
rl.setbinding([["\C-o"]], [["luafunc:mycommand"]])
rl.setbinding([["\C-r"]], [["\e[Hrem "]])
-- Press Alt-H to see the list of key bindings and descriptions.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.expandtilde" class="name"><a class="wlink" href="#rl.expandtilde"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.expandtilde</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string, [<span class="arg_name">whole_line</span>:boolean] ) : string, boolean<br/><div class="version">v1.1.6 and newer</div></div></div><div class="body"><p class="desc">Performs Readline tilde expansion.</p><p class="desc"> When generating filename matches for a word, use the <a href="#rl.expandtilde">rl.expandtilde()</a> and <a href="#rl.collapsetilde">rl.collapsetilde()</a> helper functions to perform tilde completion expansion according to Readline's configuration.</p><p class="desc"> An optional <span class="arg">whole_line</span> argument selects whether to expand tildes everywhere in the input string (pass true), or to expand only a tilde at the beginning of the input string (pass false or omit the second argument).  See the Compatibility Note below for more information.</p><p class="desc"> Use <a href="#rl.expandtilde">rl.expandtilde()</a> to do tilde expansion before collecting file matches (e.g. via <a href="#os.globfiles">os.globfiles()</a>).  If it indicates that it expanded the string, then use <a href="#rl.collapsetilde">rl.collapsetilde()</a> to put back the tilde before returning a match.</p><pre class="language-lua"><code>local result, expanded = rl.expandtilde("~\\Documents")
-- result is "C:\\Users\\yourusername\\Documents"
-- expanded is true

-- This dir_matches function demonstrates efficient use of rl.expandtilde()
-- and rl.collapsetilde() to generate directory matches from the file system.
function dir_matches(match_word, word_index, line_state)
&nbsp;   -- Expand tilde before scanning file system.
&nbsp;   local word = line_state:getword(word_index)
&nbsp;   local expanded
&nbsp;   word, expanded = rl.expandtilde(word)

&nbsp;   -- Get the directory from 'word', and collapse tilde before generating
&nbsp;   -- matches.  Notice that collapsetilde() only needs to be called once!
&nbsp;   local root = path.getdirectory(word) or ""
&nbsp;   if expanded then
&nbsp;       root = rl.collapsetilde(root)
&nbsp;   end

&nbsp;   local matches = {}
&nbsp;   for _, d in ipairs(os.globdirs(word.."*", true)) do
&nbsp;       -- Join the filename with the input directory (might have a tilde).
&nbsp;       local dir = path.join(root, d.name)
&nbsp;       table.insert(matches, { match = dir, type = d.type })
&nbsp;   end
&nbsp;   return matches
end</code></pre><p class="desc"><fieldset><legend>Compatibility Note:</legend> The original intended usage for this function was to expand tildes in a single word.  But sometimes it may be convenient to expand tildes for an entire command line all at once.</p><p class="desc"> Prior to v1.3.36, this function simply asked the Readline library to expand tildes, but that mode of operation doesn't respect quotes and has quirks that can produce unexpected results when the input is a single pathname (which was the documented supported usage).</p><p class="desc"> In v1.3.36 this function fixed that problem, and expands tildes correctly a single pathname as the input (and also accepts quotes).  But that broke an undocumented quirk that could expand tildes for a whole command line as the input.</p><p class="desc"> In v1.3.37 and newer, this function accepts a boolean second argument which selects whether to expand for a whole input line using the quirky Readline tilde expansion (pass true), or to expand for a single pathname as the input (pass false or omit the second argument).</p><p class="desc"> Passing true for the second argument causes any version of Clink (except v1.3.36) to expand the input as a whole command line. </fieldset></p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.getbinding" class="name"><a class="wlink" href="#rl.getbinding"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.getbinding</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">key</span>:string, [<span class="arg_name">keymap</span>:string] ) : binding:string, type:string<br/><div class="version">v1.2.46 and newer</div></div></div><div class="body"><p class="desc">Returns the command or macro bound to <span class="arg">key</span>, and the type of the binding.</p><p class="desc"> If nothing is bound to the specified key sequence, the returned binding will be nil.</p><p class="desc"> The returned type can be <code>"function"</code>, <code>"macro"</code>, or <code>"keymap"</code> (if <span class="arg">key</span> is an incomplete key sequence).</p><p class="desc"> If an error occurs, only nil is returned.</p><p class="desc"> The <span class="arg">key</span> sequence string is the same format as from <code>clink echo</code>.  See <a href="#discoverkeysequences">Discovering Clink key bindings</a> for more information.</p><p class="desc"> An optional <span class="arg">keymap</span> may be specified as well.  If it is omitted or nil, then the current keymap is searched.  Otherwise it may refer to one of the three built in keymaps: <table> <tr><th>Keymap</th><th>Description</th></tr> <tr><td><code>"emacs"</code></td><td>The Emacs keymap, which is the default keymap.</td></tr> <tr><td><code>"vi"</code>, <code>"vi-move"</code>, or <code>"vi-command"</code></td><td>The VI command mode keymap.</td></tr> <tr><td><code>"vi-insert"</code></td><td>The VI insertion mode keymap.</td></tr> </table></p><p class="desc"> The return value can be passed as input to <a href="#rl.setbinding">rl.setbinding()</a> or <a href="#rl.invokecommand">rl.invokecommand()</a>.</p><pre class="language-lua"><code>local b,t = rl.getbinding([["\e[H"]], "emacs")
if b then
&nbsp;   print("Home is bound to "..b.." ("..t..") in emacs mode.")
else
&nbsp;   print("Home is not bound in emacs mode.")
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.getcommandbindings" class="name"><a class="wlink" href="#rl.getcommandbindings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.getcommandbindings</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">command</span>:string, <span class="arg_name">raw</span>:boolean ) : table | nil<br/><div class="version">v1.5.1 and newer</div></div></div><div class="body"><p class="desc">Returns key bindings and info for <span class="arg">command</span> in a table with the following scheme:</p><pre class="language-lua"><code>local t = rl.getcommandbindings("complete")
-- t.desc               [string] Description of the command.
-- t.category           [string] Category of the command.
-- t.keys               [table] Table of strings listing the key names that are bound to the command.</code></pre><p class="desc">When <span class="arg">raw</span> is true, the key names are the literal key sequences without being converted to user-friendly key names.</p><p class="desc"> If <span class="arg">command</span> is neither a command nor a macro string, then nil is returned.</p><pre class="language-lua"><code>local command = 'complete'
-- or for example '"luafunc:my_macro_function"' or '"some macro text"'
local info = rl.getcommandbindings(command)
if info then
&nbsp;   local info = rl.getcommandbindings(command)
&nbsp;   print("Info for '"..command.."':")
&nbsp;   print("Description is:  "..info.desc)
&nbsp;   print("Category is:     "..info.category)
&nbsp;   if #info.keys > 0 then
&nbsp;       print("Bound to:")
&nbsp;       for _,key in ipairs(info.keys) do
&nbsp;           print("    "..key)
&nbsp;       end
&nbsp;   else
&nbsp;       print("Not bound to any keys.")
&nbsp;   end
else
&nbsp;   print("Command '"..command.."' not recognized.")
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.gethistorycount" class="name"><a class="wlink" href="#rl.gethistorycount"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.gethistorycount</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.3.18 and newer</div></div></div><div class="body"><p class="desc">Returns the number of history items.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.gethistoryitems" class="name"><a class="wlink" href="#rl.gethistoryitems"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.gethistoryitems</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : start:integer<br/><div class="version">v1.3.18 and newer</div></div></div><div class="body"><p class="desc">Returns a table of history items.</p><p class="desc"> The first history item is 1, and the last history item is <a href="#rl.gethistorycount">rl.gethistorycount()</a>.  For best performance, use <span class="arg">start</span> and <span class="arg">end</span> to request only the range of history items that will be needed.</p><p class="desc"> Each history item is a table with the following scheme:</p><pre class="language-lua"><code>local h = rl.gethistoryitems(1, rl.gethistorycount())
-- h.line       [string] The item's command line string.
-- h.time       [integer or nil] The item's time, compatible with os.time().</code></pre><p class="desc"><strong>Note:</strong> The time field is omitted if the history item does not have an associated time.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.getinputrcfilename" class="name"><a class="wlink" href="#rl.getinputrcfilename"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.getinputrcfilename</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string|nil, string|nil<br/><div class="version">v1.6.1 and newer</div></div></div><div class="body"><p class="desc">Returns the path and file name of the Readline init file that was loaded, if any.  Also returns the path and file name of the default Readline init file, if any is present.</p><p class="desc"> See [Init File](#init-file) for more info.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.getkeybindings" class="name"><a class="wlink" href="#rl.getkeybindings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.getkeybindings</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">raw</span>:boolean, [<span class="arg_name">mode</span>:integer] ) : table<br/><div class="version">v1.2.16 and newer</div></div></div><div class="body"><p class="desc">Returns key bindings in a table with the following scheme:</p><pre class="language-lua"><code>local t = rl.getkeybindings()
-- t[index].key         [string] Key name.
-- t[index].binding     [string] Command or macro bound to the key.
-- t[index].desc        [string] Description of the command.
-- t[index].category    [string] Category of the command.</code></pre><p class="desc">When <span class="arg">raw</span> is true, the key names are the literal key sequences without being converted to user-friendly key names.</p><p class="desc"> The optional <span class="arg">mode</span> specifies bit flags that control how the returned table is sorted, and whether it includes commands that are not bound to any key.</p><p class="desc"> <table> <tr><th>Mode</th><th>Description</th></tr> <tr><td>0</td><td>Key bindings, sorted by key (this is the default).</td></tr> <tr><td>1</td><td>Key bindings, sorted by category and then key.</td></tr> <tr><td>4</td><td>All commands, sorted by key.</td></tr> <tr><td>5</td><td>All commands, sorted by category and then key.</td></tr> </table></p><p class="desc"> The following example demonstrates using this function in a <a href="#luakeybindings">luafunc: key binding</a> to invoke <a href="#clink.popuplist">clink.popuplist()</a> to show a searchable list of key bindings, and then invoke whichever key binding is selected.</p><pre class="language-lua"><code>function luafunc_showkeybindings(rl_buffer)
&nbsp;   local bindings = rl.getkeybindings()
&nbsp;   if #bindings <= 0 then
&nbsp;       rl_buffer:refreshline()
&nbsp;       return
&nbsp;   end

&nbsp;   local items = {}
&nbsp;   for _,kb in ipairs(bindings) do
&nbsp;       table.insert(items, {
&nbsp;           value = kb.binding,     -- Return the binding when selected, so it can be invoked.
&nbsp;           display = kb.key,       -- Display the key name.
&nbsp;           description = kb.binding.."\t"..kb.desc -- Also display the command and description.
&nbsp;       })
&nbsp;   end

&nbsp;   -- Show a popup that lists the items from above.
&nbsp;   local binding, _, index = clink.popuplist("Key Bindings", items)
&nbsp;   rl_buffer:refreshline()
&nbsp;   if binding then
&nbsp;       -- Invoke the selected binding (a command or macro).
&nbsp;       rl.invokecommand(binding)
&nbsp;   end
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.getlastcommand" class="name"><a class="wlink" href="#rl.getlastcommand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.getlastcommand</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string, function<br/><div class="version">v1.1.40 and newer</div></div></div><div class="body"><p class="desc">Returns two values: <ul> <li>The name of the last Readline command invoked by a key binding. <li>The name of the last Lua function invoked by a key binding. </ul></p><p class="desc"> If the last key binding invoked a Lua function, then the first return value is an empty string unless the Lua function used <a href="#rl.invokecommand">rl.invokecommand()</a> to also internally invoke a Readline command. If the last key binding did not invoke a Lua function, then the second return value is an empty string.</p><pre class="language-lua"><code>local last_rl_func, last_lua_func = rl.getlastcommand()</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.getmatchcolor" class="name"><a class="wlink" href="#rl.getmatchcolor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.getmatchcolor</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">match</span>:string|table, [<span class="arg_name">type</span>:string] ) : string<br/><div class="version">v1.3.4 and newer</div></div></div><div class="body"><p class="desc">Returns the color string associated with the match.</p><p class="desc"> The arguments are the same as in <a href="#builder:addmatch">builder:addmatch()</a>.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.getpromptinfo" class="name"><a class="wlink" href="#rl.getpromptinfo"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.getpromptinfo</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : table<br/><div class="version">v1.2.28 and newer</div></div></div><div class="body"><p class="desc">Returns information about the current prompt and input line.</p><p class="desc"> <strong>Note:</strong> The <span class="arg">promptline</span> and <span class="arg">inputline</span> fields may be skewed if any additional terminal output has occurred (for example if any <a href="#https://www.lua.org/manual/5.2/manual.html#pdf-print">print()</a> calls have happened, or if <code>rl.getpromptinfo()</code> is used inside a <a href="#clink_onendedit">clink.onendedit()</a> event handler, or any other output that the Readline library wouldn't know about).</p><p class="desc"> The returned table has the following scheme:</p><pre class="language-lua"><code>local info = rl.getpromptinfo()
-- info.promptprefix              [string] The prompt string, minus the last line of the prompt string.
-- info.promptprefixlinecount     [integer] Number of lines in the promptprefix string.
-- info.prompt                    [string] The last line of the prompt string.
-- info.rprompt                   [string or nil] The right side prompt (or nil if none).
-- info.promptline                [integer] Console line on which the prompt starts.
-- info.inputline                 [integer] Console line on which the input text starts.
-- info.inputlinecount            [integer] Number of lines in the input text.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.getvariable" class="name"><a class="wlink" href="#rl.getvariable"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.getvariable</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string ) : string | nil<br/><div class="version">v1.1.6 and newer</div></div></div><div class="body"><p class="desc">Returns the value of the named Readline configuration variable as a string, or nil if the variable name is not recognized.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.insertmode" class="name"><a class="wlink" href="#rl.insertmode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.insertmode</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">insert</span>:boolean] ) : boolean<br/><div class="version">v1.2.50 and newer</div></div></div><div class="body"><p class="desc">Returns true when typing insertion mode is on.</p><p class="desc"> When the optional <span class="arg">insert</span> argument is passed, this also sets typing insertion mode on or off accordingly.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.invokecommand" class="name"><a class="wlink" href="#rl.invokecommand"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.invokecommand</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">command</span>:string, [<span class="arg_name">count</span>:integer] ) : boolean | nil<br/><div class="version">v1.1.26 and newer</div></div></div><div class="body"><p class="desc">Invokes a Readline command named <span class="arg">command</span>.  May only be used within a <a href="#luakeybindings">luafunc: key binding</a>.</p><p class="desc"> <span class="arg">count</span> is optional and defaults to 1 if omitted.</p><p class="desc"> Returns true if the named command succeeds, false if the named command fails, or nil if the named command doesn't exist.</p><p class="desc"> Warning:  Invoking more than one Readline command in a luafunc: key binding could have unexpected results, depending on which commands are invoked.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.islineequal" class="name"><a class="wlink" href="#rl.islineequal"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.islineequal</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string, [<span class="arg_name">to_cursor</span>:boolean] ) : boolean<br/><div class="version">v1.4.14 and newer</div></div></div><div class="body"><p class="desc">Returns whether the current input line exactly matches <span class="arg">text</span>.  This can be useful in a coroutine that wants to know whether the current input line has already changed, before it starts a potentially slow operation to generate matches. If the optional <span class="arg">to_cursor</span> is true, then only the line up to the current cursor position is compared.</p><pre class="language-lua"><code>local function matches_func(word, index, line_state, builder)
&nbsp;    -- Delay match generation briefly, to allow coalescing typed letters into
&nbsp;    -- a single query.  This can make auto-suggestions more responsive if the
&nbsp;    -- match generation operation is slow, such as doing a network query.
&nbsp;    local co, ismain = coroutine.running()
&nbsp;    if not ismain then
&nbsp;        local orig_line = line_state:getline()
&nbsp;        orig_line = orig_line:sub(1, line_state:getcursor() - 1)
&nbsp;        -- Yield for 0.2 seconds.
&nbsp;        clink.setcoroutineinterval(co, 0.2)
&nbsp;        coroutine.yield()
&nbsp;        -- Reset the interval back to normal.
&nbsp;        clink.setcoroutineinterval(co, 0)
&nbsp;        -- If the input line changed during the 0.2 seconds, then don't generate
&nbsp;        -- matches, and mark the matches as needing to be regenerated.
&nbsp;        if not rl.islineequal(orig_line, true) then
&nbsp;            builder:setvolatile()
&nbsp;            return {}
&nbsp;        end
&nbsp;    end

&nbsp;    -- Do something slow that generates matches.
&nbsp;    local matches = {}
&nbsp;    local f = io.popen("slow_operation.exe")
&nbsp;    if f then
&nbsp;        for l in f:lines() do
&nbsp;            table.insert(matches, l)
&nbsp;        end
&nbsp;    end
&nbsp;    return matches
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.ismodifiedline" class="name"><a class="wlink" href="#rl.ismodifiedline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.ismodifiedline</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : boolean<br/><div class="version">v1.2.51 and newer</div></div></div><div class="body"><p class="desc">Returns true when the current input line is a history entry that has been modified (i.e. has an undo list).</p><p class="desc"> This enables prompt filters to show a "modmark" of their own, as an alternative to the modmark shown when the <code><a href="#configmarkmodifiedlines">mark-modified-lines</a></code> Readline config setting is enabled.</p><p class="desc"> The following sample illustrates a prompt filter that shows a "modified line" indicator when the current line is a history entry and has been modified.</p><pre class="language-lua"><code>local p = clink.promptfilter(10)
local normal = "\x1b[m"

local function get_settings_color(name)
&nbsp;   return "\x1b[" .. settings.get(name) .. "m"
end

function p:filter(prompt)
&nbsp;   prompt = os.getcwd()
&nbsp;   if rl.ismodifiedline() then
&nbsp;       -- If the current line is a history entry and has been modified,
&nbsp;       -- then show an indicator.
&nbsp;       prompt = get_settings_color("color.modmark") .. "*" .. normal .. " " .. prompt
&nbsp;   end
&nbsp;   prompt = prompt .. "\n$ "
&nbsp;   return prompt
end

local last_modmark = false

local function modmark_reset()
&nbsp;   -- Reset the remembered state at the beginning of each edit line.
&nbsp;   last_modmark = rl.ismodifiedline()

&nbsp;   -- Turn off `mark-modified-lines` to avoid two modmarks showing up.
&nbsp;   rl.setvariable("mark-modified-lines", "off")
end

local function modmark_refilter()
&nbsp;   -- If the modmark state has changed, refresh the prompt.
&nbsp;   if last_modmark ~= rl.ismodifiedline() then
&nbsp;       last_modmark = rl.ismodifiedline()
&nbsp;       clink.refilterprompt()
&nbsp;   end
end

clink.onbeginedit(modmark_reset)
clink.onaftercommand(modmark_refilter)</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.isvariabletrue" class="name"><a class="wlink" href="#rl.isvariabletrue"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.isvariabletrue</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string ) : boolean | nil<br/><div class="version">v1.1.6 and newer</div></div></div><div class="body"><p class="desc">Returns a boolean value indicating whether the named Readline configuration variable is set to true (on), or nil if the variable name is not recognized.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.needquotes" class="name"><a class="wlink" href="#rl.needquotes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.needquotes</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : boolean<br/><div class="version">v1.4.8 and newer</div></div></div><div class="body"><p class="desc">Returns whether the <span class="arg">text</span> needs quotes to be parsed correctly in a command line.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.setbinding" class="name"><a class="wlink" href="#rl.setbinding"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.setbinding</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">key</span>:string, <span class="arg_name">binding</span>:string | nil, [<span class="arg_name">keymap</span>:string] ) : boolean<br/><div class="version">v1.2.46 and newer</div></div></div><div class="body"><p class="desc">Binds <span class="arg">key</span> to invoke <span class="arg">binding</span>, and returns whether it was successful.</p><p class="desc"> The <span class="arg">key</span> sequence string is the same format as from <code>clink echo</code>.  See <a href="#discoverkeysequences">Discovering Clink key bindings</a> for more information.</p><p class="desc"> The <span class="arg">binding</span> is either the name of a Readline command, a quoted macro string (just like in the .inputrc config file), or nil to clear the key binding.</p><p class="desc"> An optional <span class="arg">keymap</span> may be specified as well.  If it is omitted or nil, then the current keymap is searched.  Otherwise it may refer to one of the three built in keymaps: <table> <tr><th>Keymap</th><th>Description</th></tr> <tr><td><code>"emacs"</code></td><td>The Emacs keymap, which is the default keymap.</td></tr> <tr><td><code>"vi"</code>, <code>"vi-move"</code>, or <code>"vi-command"</code></td><td>The VI command mode keymap.</td></tr> <tr><td><code>"vi-insert"</code></td><td>The VI insertion mode keymap.</td></tr> </table></p><p class="desc"> Using Lua's <code>[[</code>..<code>]]</code> string syntax conveniently lets you simply copy the key string exactly from the <code>clink echo</code> output, without needing to translate the quotes or backslashes.</p><p class="desc"> <strong>Note:</strong> This does not write the value into a config file. Instead it updates the key binding in memory, temporarily overriding whatever is present in any config files.  When config files are reloaded, they may replace the key binding again.</p><pre class="language-lua"><code>local old_space = rl.getbinding('" "')
function hijack_space(rl_buffer)
&nbsp;   rl.invokecommand("clink-expand-line")   -- Expand envvars, etc in the line.
&nbsp;   rl.invokecommand(old_space)             -- Then invoke whatever was previously bound to Space.
end
rl.setbinding([[" "]], [["luafunc:hijack_space"]])

-- The [[]] string syntax lets you copy key strings directly from 'clink echo'.
-- [["\e[H"]] is much easier than translating to "\"\\e[H\"", for example.
rl.setbinding([["\e[H"]], [[beginning-of-line]])</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.setmatches" class="name"><a class="wlink" href="#rl.setmatches"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.setmatches</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">matches</span>:table, [<span class="arg_name">type</span>:string] ) : integer, boolean<br/><div class="version">v1.1.40 and newer</div></div></div><div class="body"><p class="desc">Provides an alternative set of matches for the current word.  This discards any matches that may have already been collected and uses <span class="arg">matches</span> for subsequent Readline completion commands until any action that normally resets the matches (such as moving the cursor or editing the input line).</p><p class="desc"> The syntax is the same as for <a href="#builder:addmatches()">builder:addmatches()</a> with one addition: You can add a <code>"nosort"</code> key to the <span class="arg">matches</span> table to disable sorting the matches.</p><p class="desc"> <pre><code class="lua">local matches = {}<br/>matches["nosort"] = true<br/>rl.setmatches(matches)</code></pre></p><p class="desc"> This function may (only) be used by a <a href="#luakeybindings">luafunc: key binding</a> to provide matches based on some special criteria.  For example, a key binding could collect numbers from the current screen buffer (such as issue numbers, commit hashes, line numbers, etc) and provide them to Readline as matches, making it convenient to grab a number from the screen and insert it as a command line argument.</p><p class="desc"> Match display filtering is also possible by using <a href="#clink.ondisplaymatches">clink.ondisplaymatches()</a> after setting the matches.</p><p class="desc"> <em>Example .inputrc key binding:</em> <pre><code class="plaintext">M-n:            <span class="hljs-string">"luafunc:completenumbers"</span>       <span class="hljs-comment"># Alt+N</span></code></pre></p><p class="desc"> <em>Example Lua function:</em></p><pre class="language-lua"><code>function completenumbers()
&nbsp;   local _,last_luafunc = rl.getlastcommand()
&nbsp;   if last_luafunc ~= "completenumbers" then
&nbsp;       -- Collect numbers from the screen (minimum of three digits).
&nbsp;       -- The numbers can be any base up to hexadecimal (decimal, octal, etc).
&nbsp;       local matches = console.screengrab("[^%w]*(%w%w[%w]+)", "^%x+$")
&nbsp;       -- They're already sorted by distance from the input line.
&nbsp;       matches["nosort"] = true
&nbsp;       rl.setmatches(matches)
&nbsp;   end

&nbsp;   rl.invokecommand("old-menu-complete")
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.setvariable" class="name"><a class="wlink" href="#rl.setvariable"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.setvariable</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string, <span class="arg_name">value</span>:string ) : boolean<br/><div class="version">v1.1.46 and newer</div></div></div><div class="body"><p class="desc">Temporarily overrides the named Readline configuration variable to the specified value.  The return value reports whether it was successful, or is nil if the variable name is not recognized.</p><p class="desc"> <strong>Note:</strong> This does not write the value into a config file. Instead it updates the variable in memory, temporarily overriding whatever is present in any config files.  When config files are reloaded, they may replace the value again.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl.translatekey" class="name"><a class="wlink" href="#rl.translatekey"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl.translatekey</span> <span class="uplinks"><a href="#rl">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">input</span>:string, <span class="arg_name">form</span>:integer ) : string | nil<br/><div class="version">v1.6.1 and newer</div></div></div><div class="body"><p class="desc">Translates <span class="arg">input</span> to another format, according to the value of <span class="arg">form</span>: format.</p><p class="desc"> <ul> <li><code>1</code> converts from an input key sequence (as returned by <a href="#console.readinput">console.readinput</a>) to a friendly key name. <li><code>2</code> converts from an input key sequence (as returned by <a href="#console.readinput">console.readinput</a>) to a bindable key sequence string suitable for use with <a href="#rl.setkeybinding">rl.setkeybinding</a>. <li><code>3</code> converts from a key binding sequence (as understood by <a href="#readline-key-bindings">Readline key bindings</a>) to a friendly key name. <li><code>4</code> converts from a key binding sequence (as understood by <a href="#readline-key-bindings">Readline key bindings</a>) to an input key sequence. </ul></p><p class="desc"> If the input key sequence string cannot be translated then nil is returned.</p></div></div><hr/>

</div><div class="group">
<h5 id="rl_buffer" class="group_name"><a class="wlink" href="#rl_buffer"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>rl_buffer: <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#rl_buffer:beginoutput">beginoutput</a></td><td><a href="#rl_buffer:getargument">getargument</a></td><td><a href="#rl_buffer:insert">insert</a></td><td><a href="#rl_buffer:setcommentrow">setcommentrow</a></td></tr><tr><td><a href="#rl_buffer:beginundogroup">beginundogroup</a></td><td><a href="#rl_buffer:getbuffer">getbuffer</a></td><td><a href="#rl_buffer:insertsuggestion">insertsuggestion</a></td><td><a href="#rl_buffer:setcursor">setcursor</a></td></tr><tr><td><a href="#rl_buffer:ding">ding</a></td><td><a href="#rl_buffer:getcursor">getcursor</a></td><td><a href="#rl_buffer:refreshline">refreshline</a></td></tr><tr><td><a href="#rl_buffer:endundogroup">endundogroup</a></td><td><a href="#rl_buffer:getlength">getlength</a></td><td><a href="#rl_buffer:remove">remove</a></td></tr><tr><td><a href="#rl_buffer:getanchor">getanchor</a></td><td><a href="#rl_buffer:hassuggestion">hassuggestion</a></td><td><a href="#rl_buffer:setargument">setargument</a></td></tr></table>
<div class="function"><div class="header"> <div id="rl_buffer:beginoutput" class="name"><a class="wlink" href="#rl_buffer:beginoutput"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:beginoutput</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Advances the output cursor to the next line after the Readline input buffer so that subsequent output doesn't overwrite the input buffer display.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:beginundogroup" class="name"><a class="wlink" href="#rl_buffer:beginundogroup"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:beginundogroup</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Starts a new undo group.  This is useful for grouping together multiple editing actions into a single undo operation.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:ding" class="name"><a class="wlink" href="#rl_buffer:ding"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:ding</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Dings the bell.  If the <code><a href="#configbellstyle">bell-style</a></code> Readline variable is <code>visible</code> then it flashes the cursor instead.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:endundogroup" class="name"><a class="wlink" href="#rl_buffer:endundogroup"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:endundogroup</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Ends an undo group.  This is useful for grouping together multiple editing actions into a single undo operation.</p><p class="desc"> <strong>Note:</strong>  All undo groups are automatically ended when a key binding finishes execution, so this function is only needed if a key binding needs to create more than one undo group.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:getanchor" class="name"><a class="wlink" href="#rl_buffer:getanchor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:getanchor</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer | nil<br/><div class="version">v1.2.35 and newer</div></div></div><div class="body"><p class="desc">Returns the anchor position of the currently selected text in the input line, or nil if there is no selection.  The value can be from 1 to rl_buffer:getlength() + 1.  It can exceed the length of the input line because the anchor can be positioned just past the end of the input line.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:getargument" class="name"><a class="wlink" href="#rl_buffer:getargument"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:getargument</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer | nil<br/><div class="version">v1.2.22 and newer</div></div></div><div class="body"><p class="desc">Returns any accumulated numeric argument (<kbd>Alt</kbd>+Digits, etc), or nil if no numeric argument has been entered.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:getbuffer" class="name"><a class="wlink" href="#rl_buffer:getbuffer"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:getbuffer</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the current input line.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:getcursor" class="name"><a class="wlink" href="#rl_buffer:getcursor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:getcursor</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns the cursor position in the input line.  The value can be from 1 to rl_buffer:getlength() + 1.  It can exceed the length of the input line because the cursor can be positioned just past the end of the input line.</p><p class="desc"> <strong>Note:</strong> In v1.1.20 through v1.2.31 this accidentally returned 1 less than the actual cursor position.  In v1.2.32 and higher it returns the correct cursor position.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:getlength" class="name"><a class="wlink" href="#rl_buffer:getlength"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:getlength</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns the length of the input line.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:hassuggestion" class="name"><a class="wlink" href="#rl_buffer:hassuggestion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:hassuggestion</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : boolean<br/><div class="version">v1.6.4 and newer</div></div></div><div class="body"><p class="desc">Returns <code>true</code> if a suggestion is available (see <a href="#gettingstarted_autosuggest">Auto-Suggest</a>).  Otherwise returns <code>false</code>.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:insert" class="name"><a class="wlink" href="#rl_buffer:insert"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:insert</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : nil<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Inserts <span class="arg">text</span> at the cursor position in the input line.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:insertsuggestion" class="name"><a class="wlink" href="#rl_buffer:insertsuggestion"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:insertsuggestion</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">amount</span>:string] ) : boolean<br/><div class="version">v1.6.4 and newer</div></div></div><div class="body"><p class="desc">If no suggestion is available (see <a href="#gettingstarted_autosuggest">Auto-Suggest</a>), this does nothing and returns <code>false</code>.</p><p class="desc"> If a suggestion is available, then this inserts the suggestion and returns <code>true</code>.</p><p class="desc"> The optional <span class="arg">amount</span> argument can change how much of the suggestion is inserted:</p><p class="desc"> <table> <tr><th><code>amount</code></th><th>Description</th></tr> <tr><td><code>"all"</code></td><td>All of the suggestion is inserted (this is the default if <span class="arg">amount</span> is omitted).</td></tr> <tr><td><code>"word"</code></td><td>The next word in the suggestion is inserted, according to normal word breaks.</td></tr> <tr><td><code>"fullword"</code></td><td>The next full word in the suggestion is inserted, using spaces as word breaks.</td></tr> </table></p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:refreshline" class="name"><a class="wlink" href="#rl_buffer:refreshline"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:refreshline</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.1.41 and newer</div></div></div><div class="body"><p class="desc">Redraws the input line.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:remove" class="name"><a class="wlink" href="#rl_buffer:remove"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:remove</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">from</span>:integer, <span class="arg_name">to</span>:integer ) : nil<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Removes text from the input line starting at cursor position <span class="arg">from</span> up to but not including <span class="arg">to</span>.</p><p class="desc"> If <span class="arg">from</span> is greater than <span class="arg">to</span> then the positions are swapped before removing text.</p><p class="desc"> <strong>Note:</strong>  The input line is UTF8, and removing only part of a multi-byte Unicode character may have undesirable results.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:setargument" class="name"><a class="wlink" href="#rl_buffer:setargument"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:setargument</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">argument</span>:integer | nil ) : nil<br/><div class="version">v1.2.32 and newer</div></div></div><div class="body"><p class="desc">When <span class="arg">argument</span> is a number, it is set as the numeric argument for use by Readline commands (as entered using <kbd>Alt</kbd>+Digits, etc).  When <span class="arg">argument</span> is nil, the numeric argument is cleared (having no numeric argument is different from having 0 as the numeric argument).</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:setcommentrow" class="name"><a class="wlink" href="#rl_buffer:setcommentrow"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:setcommentrow</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil<br/><div class="version">v1.7.5 and newer</div></div></div><div class="body"><p class="desc">Displays the <span class="arg">text</span> in the comment row.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_buffer:setcursor" class="name"><a class="wlink" href="#rl_buffer:setcursor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_buffer:setcursor</span> <span class="uplinks"><a href="#rl_buffer">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">cursor</span>:integer ) : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Sets the cursor position in the input line and returns the previous cursor position.  <span class="arg">cursor</span> can be from 1 to rl_buffer:getlength() + 1.  It can exceed the length of the input line because the cursor can be positioned just past the end of the input line.</p><p class="desc"> <strong>Note:</strong> The input line is UTF8, and setting the cursor position inside a multi-byte Unicode character may have undesirable results.</p><p class="desc"> <strong>Note:</strong> In v1.1.20 through v1.6.0 this accidentally didn't return the previous cursor position.  In v1.6.1 and higher it returns the the correct previous cursor position.</p></div></div><hr/>

</div><div class="group">
<h5 id="settings" class="group_name"><a class="wlink" href="#settings"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>settings. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#settings.add">add</a></td><td><a href="#settings.get">get</a></td></tr><tr><td><a href="#settings.clear">clear</a></td><td><a href="#settings.parsecolor">parsecolor</a></td></tr><tr><td><a href="#settings.formatcolor">formatcolor</a></td><td><a href="#settings.set">set</a></td></tr></table>
<div class="function"><div class="header"> <div id="settings.add" class="name"><a class="wlink" href="#settings.add"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>settings.add</span> <span class="uplinks"><a href="#settings">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string, <span class="arg_name">default</span>:..., [<span class="arg_name">short_desc</span>:string], [<span class="arg_name">long_desc</span>:string] ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Adds a setting to the list of Clink settings and includes it in <code>clink set</code>.  The new setting is named <span class="arg">name</span> and has a default value <span class="arg">default</span> when the setting isn't explicitly set.</p><p class="desc"> The type of <span class="arg">default</span> determines what kind of setting is added: <ul> <li>Boolean; a boolean value adds a boolean setting. <li>Integer; an integer value adds an integer setting. <li>Enum; a table adds an enum setting.  The table defines the accepted string values, and the first value is the default value.  The setting has an integer value which corresponds to the position in the table of accepted values.  The first position is 0, the second position is 1, etc. <li>String; a string value adds a string setting. <li>Color; when <span class="arg">name</span> begins with <code>"color."</code> then a string value adds a color setting. </ul></p><p class="desc"> <span class="arg">name</span> can't be more than 32 characters.</p><p class="desc"> <span class="arg">short_desc</span> is an optional quick summary description and can't be more than 48 characters.</p><p class="desc"> <span class="arg">long_desc</span> is an optional long description.</p><pre class="language-lua"><code>settings.add("myscript.myabc", true, "Boolean setting")
settings.add("myscript.mydef", 100, "Number setting")
settings.add("myscript.myghi", "abc", "String setting")
settings.add("myscript.myjkl", {"x","y","z"}, "Enum setting")
settings.add("color.mymno", "bright magenta", "Color setting")</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="settings.clear" class="name"><a class="wlink" href="#settings.clear"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>settings.clear</span> <span class="uplinks"><a href="#settings">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string ) : nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Clears the <span class="arg">name</span> Clink setting and reverts to its default value.</p><p class="desc"> <strong>Note:</strong> This updates the settings file.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="settings.formatcolor" class="name"><a class="wlink" href="#settings.formatcolor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>settings.formatcolor</span> <span class="uplinks"><a href="#settings">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">code</span>:string, [<span class="arg_name">compat</span>:boolean] ) : string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Formats an ANSI color code <span class="arg">code</span> into a color setting string suitable for use with <code>clink set color.foo</code>.</p><p class="desc"> Returns the formatted color setting string if successful, or nil if unsuccessful.</p><p class="desc"> If <span class="arg">compat</span> is true, then the formatted string uses the most compatible format.  This can be useful if the string needs to be usable by older versions of Clink.</p><p class="desc"> See <a href="#color-settings">Color Settings</a> for more information.</p><pre class="language-lua"><code>-- Fully defined color codes:
settings.formatcolor("0;1")                 -- Returns "bold"
settings.formatcolor("0;4;32")              -- Returns "underline green"
settings.formatcolor("0;97;44")             -- Returns "bright white on blue"
-- Partial color codes:
settings.formatcolor("1")                   -- Returns "sgr 1"
settings.formatcolor("4;32")                -- Returns "sgr 4;32"
settings.formatcolor("97;44")               -- Returns "sgr 97;44"</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="settings.get" class="name"><a class="wlink" href="#settings.get"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>settings.get</span> <span class="uplinks"><a href="#settings">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string, [<span class="arg_name">descriptive</span>:boolean] ) : boolean | string | integer | nil<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns the current value of the <span class="arg">name</span> Clink setting or nil if the setting does not exist.</p><p class="desc"> The return type corresponds to the setting type: <ul> <li>Boolean settings return a boolean value. <li>Integer settings return an integer value. <li>Enum settings return an integer value corresponding to a position in the setting's table of accepted values.  The first position is 0, the second position is 1, etc. <li>String settings return a string. <li>Color settings return a string. </ul></p><p class="desc"> Color settings normally return the ANSI color code, suitable for use in an ANSI escape sequence.  If the optional <span class="arg">descriptive</span> parameter is true then the friendly color name is returned.</p><pre class="language-lua"><code>print(settings.get("color.doskey"))         -- Can print "1;36"
print(settings.get("color.doskey", true))   -- Can print "bold cyan"</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="settings.parsecolor" class="name"><a class="wlink" href="#settings.parsecolor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>settings.parsecolor</span> <span class="uplinks"><a href="#settings">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">color</span>:string ) : string | nil<br/><div class="version">v1.7.0 and newer</div></div></div><div class="body"><p class="desc">Parses a color setting string <span class="arg">color</span> into an ANSI color code, suitable for use in an ANSI escape sequence.  The string is parsed the same way as <code>clink set color.foo <em>string</em></code> would parse it.</p><p class="desc"> Returns the ANSI color code if successful, or nil if unsuccessful.</p><p class="desc"> See <a href="#color-settings">Color Settings</a> for more information.</p><pre class="language-lua"><code>settings.parsecolor("bold")                 -- Returns "0;1"
settings.parsecolor("underline green")      -- Returns "0;4;32"
settings.parsecolor("bri whi on blu")       -- Returns "0;97;44"</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="settings.set" class="name"><a class="wlink" href="#settings.set"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>settings.set</span> <span class="uplinks"><a href="#settings">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">name</span>:string, <span class="arg_name">value</span>:... ) : boolean<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Sets the <span class="arg">name</span> Clink setting to <span class="arg">value</span> and returns whether it was successful.</p><p class="desc"> The type of <span class="arg">value</span> depends on the type of the setting.  Some automatic type conversions are performed when appropriate.</p><p class="desc"> <ul> <li>Boolean settings convert string values <code>"true"</code>/<code>"false"</code>, <code>"yes"</code>/<code>"no"</code>, and <code>"on"</code>/<code>"off"</code> into a boolean <code>true</code>/<code>false</code>.  Any numeric values are converted to <code>true</code>, even <code>0</code> (Lua considers 0 to be true, unlike some other languages). <li>Integer settings convert string values starting with a digit or minus sign into an integer value. <li>Enum settings convert the allowed string values into an integer value corresponding to the position in the table of allowed values.  The first position is 0, the second position is 1, etc. <li>String settings convert boolean or number values into a corresponding string value. <li>Color settings convert boolean or number values into a corresponding string value. </ul></p><p class="desc"> <strong>Note:</strong> Beginning in Clink v1.2.31 this updates the settings file.  Prior to that, it was necessary to separately use <code>clink set</code> to update the settings file.</p></div></div><hr/>

</div><div class="group">
<h5 id="string" class="group_name"><a class="wlink" href="#string"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>string. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#string.comparematches">comparematches</a></td></tr><tr><td><a href="#string.equalsi">equalsi</a></td></tr><tr><td><a href="#string.explode">explode</a></td></tr><tr><td><a href="#string.hash">hash</a></td></tr><tr><td><a href="#string.matchlen">matchlen</a></td></tr></table>
<div class="function"><div class="header"> <div id="string.comparematches" class="name"><a class="wlink" href="#string.comparematches"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>string.comparematches</span> <span class="uplinks"><a href="#string">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">a</span>:string, [<span class="arg_name">a_type</span>:string], <span class="arg_name">b</span>:string, [<span class="arg_name">b_type</span>:string] ) : boolean<br/><div class="version">v1.3.41 and newer</div></div></div><div class="body"><p class="desc">Returns true if <span class="arg">a</code> sorts as "less than" <span class="arg">b</code>.</p><p class="desc"> The <span class="arg">a_type</code> and <span class="arg">b_type</code> are optional, and affect the sort order accordingly when present.</p><p class="desc"> This produces the same sort order as normally used for displaying matches. This can be used for manually sorting a subset of matches when a match builder has been told not to sort the list of matches.</p><pre class="language-lua"><code>local files = {
&nbsp;   { match="xyzFile", type="file" },
&nbsp;   { match="abcFile", type="file" },
}
local other = {
&nbsp;   { match="abc_branch", type="arg" },
&nbsp;   { match="xyz_branch", type="arg" },
&nbsp;   { match="mno_tag", type="alias" },
}

local function comparator(a, b)
&nbsp;   return string.comparematches(a.match, a.type, b.match, b.type)
end

-- Sort files.
table.sort(files, comparator)

-- Sort branches and tags together.
table.sort(other, comparator)

match_builder:setnosort()           -- Disable automatic sorting.
match_builder:addmatches(files)     -- Add the sorted files.
match_builder:addmatches(other)     -- Add the branches and tags files.

-- The overall sort order ends up listing all the files in sorted
-- order, followed by branches and tags sorted together.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="string.equalsi" class="name"><a class="wlink" href="#string.equalsi"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>string.equalsi</span> <span class="uplinks"><a href="#string">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">a</span>:string, <span class="arg_name">b</span>:string ) : boolean<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Performs a case insensitive comparison of the strings with international linguistic awareness.  This is more efficient than converting both strings to lowercase and comparing the results.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="string.explode" class="name"><a class="wlink" href="#string.explode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>string.explode</span> <span class="uplinks"><a href="#string">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string, [<span class="arg_name">delims</span>:string], [<span class="arg_name">quote_pair</span>:string] ) : table<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Splits <span class="arg">text</span> delimited by <span class="arg">delims</span> (or by spaces if not provided) and returns a table containing the substrings.</p><p class="desc"> The optional <span class="arg">quote_pair</span> can provide a beginning quote character and an ending quote character.  If only one character is provided it is used as both a beginning and ending quote character.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="string.hash" class="name"><a class="wlink" href="#string.hash"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>string.hash</span> <span class="uplinks"><a href="#string">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : integer<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Returns a hash of the input <span class="arg">text</span>.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="string.matchlen" class="name"><a class="wlink" href="#string.matchlen"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>string.matchlen</span> <span class="uplinks"><a href="#string">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">a</span>:string, <span class="arg_name">b</span>:string ) : integer<br/><div class="version">v1.1.20 and newer</div></div></div><div class="body"><p class="desc">Returns how many characters match at the beginning of the strings, or -1 if the entire strings match.  This respects the <code><a href="#match_ignore_case">match.ignore_case</a></code> and <code><a href="#match_ignore_accent">match.ignore_accent</a></code> Clink settings.</p><pre class="language-lua"><code>string.matchlen("abx", "a")         -- returns 1
string.matchlen("abx", "aby")       -- returns 2
string.matchlen("abx", "abx")       -- returns -1</code></pre></div></div><hr/>

</div><div class="group">
<h5 id="unicode" class="group_name"><a class="wlink" href="#unicode"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>unicode. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#unicode.fromcodepage">fromcodepage</a></td></tr><tr><td><a href="#unicode.isnormalized">isnormalized</a></td></tr><tr><td><a href="#unicode.iter">iter</a></td></tr><tr><td><a href="#unicode.normalize">normalize</a></td></tr><tr><td><a href="#unicode.tocodepage">tocodepage</a></td></tr></table>
<div class="function"><div class="header"> <div id="unicode.fromcodepage" class="name"><a class="wlink" href="#unicode.fromcodepage"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>unicode.fromcodepage</span> <span class="uplinks"><a href="#unicode">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string, [<span class="arg_name">codepage</span>:integer] ) : string | nil<br/><div class="version">v1.3.27 and newer</div></div></div><div class="body"><p class="desc">This converts <span class="arg">text</span> from the <span class="arg">codepage</span> encoding to UTF8.</p><p class="desc"> When <span class="arg">codepage</span> is omitted, the current Active Code Page is used.</p><p class="desc"> If the text cannot be converted, nil is returned.</p><p class="desc"> <strong>Note:</strong>  Clink uses UTF8 internally, and conversion to/from other encodings is intended for use with file input/output or network input/output.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="unicode.isnormalized" class="name"><a class="wlink" href="#unicode.isnormalized"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>unicode.isnormalized</span> <span class="uplinks"><a href="#unicode">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">form</span>:integer, <span class="arg_name">text</span>:string ) : boolean [, integer]<br/><div class="version">v1.3.26 and newer</div></div></div><div class="body"><p class="desc">Returns whether <span class="arg">text</span> is already normalized according to the Unicode normalization <span class="arg">form</span>:</p><p class="desc"> <ul> <li><code>1</code> is Unicode normalization form C, canonical composition. Transforms each base character + combining characters into the precomposed equivalent.  For example, A + umlaut becomes Ä. <li><code>2</code> is Unicode normalization form D, canonical decomposition. Transforms each precomposed character into base character + combining characters.  For example, Ä becomes A + umlaut. <li><code>3</code> is Unicode normalization form KC, compatibility composition.  Transforms each base character + combining characters into the precomposed equivalent, and transforms compatibility characters into their equivalents.  For example, A + umlaut + ligature for "fi" becomes Ä + f + i. <li><code>4</code> is Unicode normalization form KD, compatibility decomposition.  Transforms each precomposed character into base character + combining characters, and transforms compatibility characters to their equivalents.  For example, Ä + ligature for "fi" becomes A + umlaut + f + i. </ul></p><p class="desc"> If successful, true or false is returned.</p><p class="desc"> If unsuccessful, false and an error code are returned.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="unicode.iter" class="name"><a class="wlink" href="#unicode.iter"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>unicode.iter</span> <span class="uplinks"><a href="#unicode">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string ) : iterator<br/><div class="version">v1.3.26 and newer</div></div></div><div class="body"><p class="desc">This returns an iterator function which steps through <span class="arg">text</span> one Unicode codepoint at a time.  Each call to the iterator function returns the string for the next codepoint, the numeric value of the codepoint, and a boolean indicating whether the codepoint is a combining mark.</p><pre class="language-lua"><code>-- UTF8 sample string:
-- Index by codepoint:   1       2       3           4       5
-- Unicode character:    à       é       ᴆ           õ       û
local text            = "\xc3\xa0\xc3\xa9\xe1\xb4\x86\xc3\xb5\xc3\xbb"
-- Index by byte:        1   2   3   4   5   6   7   8   9   10  11

for str, value, combining in unicode.iter(text) do
&nbsp;   local bytes = ""
&nbsp;   for i = 1, #str do
&nbsp;       bytes = bytes .. string.format("\\x%02x", str:byte(i, i))
&nbsp;   end
&nbsp;   clink.print(str, value, combining, bytes)
end

-- The above prints the following:
--      à       224     false   \xc3\xa0
--      é       233     false   \xc3\xa9
--      ᴆ       7430    false   \xe1\xb4\x86
--      õ       245     false   \xc3\xb5
--      û       373     false   \xc3\xbb</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="unicode.normalize" class="name"><a class="wlink" href="#unicode.normalize"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>unicode.normalize</span> <span class="uplinks"><a href="#unicode">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">form</span>:integer, <span class="arg_name">text</span>:string ) : string [, integer]<br/><div class="version">v1.3.26 and newer</div></div></div><div class="body"><p class="desc">Transforms the <span class="arg">text</span> according to the Unicode normalization <span class="arg">form</span>:</p><p class="desc"> <ul> <li><code>1</code> is Unicode normalization form C, canonical composition. Transforms each base character + combining characters into the precomposed equivalent.  For example, A + umlaut becomes Ä. <li><code>2</code> is Unicode normalization form D, canonical decomposition. Transforms each precomposed character into base character + combining characters.  For example, Ä becomes A + umlaut. <li><code>3</code> is Unicode normalization form KC, compatibility composition.  Transforms each base character + combining characters into the precomposed equivalent, and transforms compatibility characters into their equivalents.  For example, A + umlaut + ligature for "fi" becomes Ä + f + i. <li><code>4</code> is Unicode normalization form KD, compatibility decomposition.  Transforms each precomposed character into base character + combining characters, and transforms compatibility characters to their equivalents.  For example, Ä + ligature for "fi" becomes A + umlaut + f + i. </ul></p><p class="desc"> If successful, the resulting string is returned.</p><p class="desc"> If unsuccessful, both the original string and an error code are returned.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="unicode.tocodepage" class="name"><a class="wlink" href="#unicode.tocodepage"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>unicode.tocodepage</span> <span class="uplinks"><a href="#unicode">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string, [<span class="arg_name">codepage</span>:integer] ) : string | nil<br/><div class="version">v1.3.27 and newer</div></div></div><div class="body"><p class="desc">This converts <span class="arg">text</span> from UTF8 to the <span class="arg">codepage</span> encoding.</p><p class="desc"> When <span class="arg">codepage</span> is omitted, the current Active Code Page is used.</p><p class="desc"> If the text cannot be converted, nil is returned.</p><p class="desc"> <strong>Note:</strong>  Clink uses UTF8 internally, and conversion to/from other encodings is intended for use with file input/output or network input/output.</p></div></div><hr/>

</div><div class="group">
<h5 id="word_classifications" class="group_name"><a class="wlink" href="#word_classifications"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>word_classifications: <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#word_classifications:applycolor">applycolor</a></td></tr><tr><td><a href="#word_classifications:classifyword">classifyword</a></td></tr></table>
<div class="function"><div class="header"> <div id="word_classifications:applycolor" class="name"><a class="wlink" href="#word_classifications:applycolor"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>word_classifications:applycolor</span> <span class="uplinks"><a href="#word_classifications">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">start</span>:integer, <span class="arg_name">length</span>:integer, <span class="arg_name">color</span>:string, [<span class="arg_name">overwrite</span>:boolean] ) : nil<br/><div class="version">v1.1.49 and newer</div></div></div><div class="body"><p class="desc">Applies an ANSI <a href="https://en.wikipedia.org/wiki/ANSI_escape_code#SGR">SGR escape code</a> to some characters in the input line.</p><p class="desc"> <span class="arg">start</span> is where to begin applying the SGR code.</p><p class="desc"> <span class="arg">length</span> is the number of characters to affect.</p><p class="desc"> <span class="arg">color</span> is the SGR parameters sequence to apply (for example <code>"7"</code> is the code for reverse video, which swaps the foreground and background colors).</p><p class="desc"> By default the color is applied to the characters even if some of them are already colored.  But if <span class="arg">overwrite</span> is <code>false</code> each character is only colored if it hasn't been yet.</p><p class="desc"> See <a href="#classifywords">Coloring the Input Text</a> for more information.</p><p class="desc"> <strong>Note:</strong> An input line can have up to 100 different unique color strings applied, and then this stops applying new colors.  The counter gets reset when the onbeginedit event is sent.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="word_classifications:classifyword" class="name"><a class="wlink" href="#word_classifications:classifyword"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>word_classifications:classifyword</span> <span class="uplinks"><a href="#word_classifications">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">word_index</span>:integer, <span class="arg_name">word_class</span>:string, [<span class="arg_name">overwrite</span>:boolean] ) : nil<br/><div class="version">v1.1.18 and newer</div></div></div><div class="body"><p class="desc">This classifies the indicated word so that it can be colored appropriately.</p><p class="desc"> The <span class="arg">word_class</span> is one of the following codes:</p><p class="desc"> <table> <tr><th>Code</th><th>Classification</th><th>Clink Color Setting</th></tr> <tr><td><code>"a"</code></td><td>Argument; used for words that match a list of preset argument matches.</td><td><code><a href="#color_arg">color.arg</a></code> or <code><a href="#color_input">color.input</a></code></td></tr> <tr><td><code>"c"</code></td><td>Shell command; used for CMD command names.</td><td><code><a href="#color_cmd">color.cmd</a></code></td></tr> <tr><td><code>"d"</code></td><td>Doskey alias.</td><td><code><a href="#color_doskey">color.doskey</a></code></td></tr> <tr><td><code>"f"</code></td><td>Flag; used for flags that match a list of preset flag matches.</td><td><code><a href="#color_flag">color.flag</a></code></td></tr> <tr><td><code>"x"</code></td><td>Executable; used for the first word when it is not a command or doskey alias, but is an executable name that exists.</td><td><code><a href="#color_executable">color.executable</a></code></td></tr> <tr><td><code>"u"</code></td><td>Unrecognized; used for the first word when it is not a command, doskey alias, or recognized executable name.</td><td><code><a href="#color_unrecognized">color.unrecognized</a></code></td></tr> <tr><td><code>"o"</code></td><td>Other; used for file names and words that don't fit any of the other classifications.</td><td><code><a href="#color_input">color.input</a></code></td></tr> <tr><td><code>"n"</code></td><td>None; used for words that aren't recognized as part of the expected input syntax.</td><td><code><a href="#color_unexpected">color.unexpected</a></code></td></tr> <tr><td><code>"m"</code></td><td>Prefix that can be combined with another code (for the first word) to indicate the command has an argmatcher (e.g. <code>"mc"</code> or <code>"md"</code>).</td><td><code><a href="#color_argmatcher">color.argmatcher</a></code> or the other code's color</td></tr> </table></p><p class="desc"> By default the classification is applied to the word even if the word has already been classified.  But if <span class="arg">overwrite</span> is <code>false</code> the word is only classified if it hasn't been yet.</p><p class="desc"> See <a href="#classifywords">Coloring the Input Text</a> for more information.</p></div></div><hr/>

</div><div class="group">
<h5 id="[other]" class="group_name"><a class="wlink" href="#[other]"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>[other] <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#CLINK_EXE">CLINK_EXE</a></td></tr><tr><td><a href="#pause">pause</a></td></tr></table>
<div class="function"><div class="header"> <div id="CLINK_EXE" class="name"><a class="wlink" href="#CLINK_EXE"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>CLINK_EXE</span> <span class="uplinks"><a href="#[other]">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">string variable<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">The full path to the Clink executable file.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="pause" class="name"><a class="wlink" href="#pause"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>pause</span> <span class="uplinks"><a href="#[other]">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">message</span>:string], [<span class="arg_name">lines</span>:integer], [<span class="arg_name">force</span>:boolean] ) : nil<br/><div class="version">v1.0.0 and newer</div></div></div><div class="body"><p class="desc">Breaks into the Lua debugger, if the <code><a href="#lua_debug">lua.debug</a></code> setting is enabled.</p><p class="desc"> If <code>pause()</code> is used by itself, the debugger breaks on the line after the pause call.</p><p class="desc"> The <span class="arg">message</span> argument can be a message the debugger will display, for example to differentiate between multiple pause calls.</p><p class="desc"> The <span class="arg">lines</span> argument indicates how many lines to step further before breaking into the debugger.  The default is nil, which breaks on the line immediately following the pause call.  Passing an integer value will step some number of lines before breaking (this will produce confusing results and is discouraged).</p><p class="desc"> When the <span class="arg">force</span> argument is <code>true</code> then it will break into the debugger even if the <code>poff</code> debugger command has been used to turn off the pause command.</p></div></div><hr/>

</div><div class="group deprecated">
<h5 id="Deprecated" class="group_name"><a class="wlink" href="#Deprecated"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Deprecated. <span class="uplinks"><a href="#lua-api-groups">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></h5>
<table class="grouplist"><tr><td><a href="#_argmatcher:add_arguments">add_arguments</a></td><td><a href="#clink.compute_lcd">compute_lcd</a></td><td><a href="#clink.get_screen_info">get_screen_info</a></td><td><a href="#clink.matches_are_files">matches_are_files</a></td></tr><tr><td><a href="#_argmatcher:add_flags">add_flags</a></td><td><a href="#clink.find_dirs">find_dirs</a></td><td><a href="#clink.get_setting_int">get_setting_int</a></td><td><a href="#clink.prompt.register_filter">register_filter</a></td></tr><tr><td><a href="#_argmatcher:be_precise">be_precise</a></td><td><a href="#clink.find_files">find_files</a></td><td><a href="#clink.get_setting_str">get_setting_str</a></td><td><a href="#clink.quote_split">quote_split</a></td></tr><tr><td><a href="#_argmatcher:disable_file_matching">disable_file_matching</a></td><td><a href="#clink.get_console_aliases">get_console_aliases</a></td><td><a href="#clink.is_dir">is_dir</a></td><td><a href="#clink.register_match_generator">register_match_generator</a></td></tr><tr><td><a href="#_argmatcher:set_arguments">set_arguments</a></td><td><a href="#clink.get_cwd">get_cwd</a></td><td><a href="#clink.is_match">is_match</a></td><td><a href="#clink.set_match">set_match</a></td></tr><tr><td><a href="#_argmatcher:set_flags">set_flags</a></td><td><a href="#clink.get_cwd">get_cwd</a></td><td><a href="#clink.is_rl_variable_true">is_rl_variable_true</a></td><td><a href="#clink.slash_translation">slash_translation</a></td></tr><tr><td><a href="#clink.add_match">add_match</a></td><td><a href="#clink.get_env">get_env</a></td><td><a href="#clink.is_single_match">is_single_match</a></td><td><a href="#clink.split">split</a></td></tr><tr><td><a href="#clink.addcoroutine">addcoroutine</a></td><td><a href="#clink.get_env_var_names">get_env_var_names</a></td><td><a href="#clink.match_count">match_count</a></td><td><a href="#clink.suppress_char_append">suppress_char_append</a></td></tr><tr><td><a href="#clink.arg.new_parser">new_parser</a></td><td><a href="#clink.get_host_process">get_host_process</a></td><td><a href="#clink.match_display_filter">match_display_filter</a></td><td><a href="#clink.suppress_quoting">suppress_quoting</a></td></tr><tr><td><a href="#clink.arg.register_parser">register_parser</a></td><td><a href="#clink.get_match">get_match</a></td><td><a href="#clink.match_files">match_files</a></td><td><a href="#os.ishidden">ishidden</a></td></tr><tr><td><a href="#clink.chdir">chdir</a></td><td><a href="#clink.get_rl_variable">get_rl_variable</a></td><td><a href="#clink.match_words">match_words</a></td><td><a href="#rl_state">rl_state</a></td></tr></table>
<div class="function"><div class="header"> <div id="_argmatcher:add_arguments" class="name"><a class="wlink" href="#_argmatcher:add_arguments"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:add_arguments</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#_argmatcher:addarg">_argmatcher:addarg</a> for more information.</p><p class="desc">Adds one argument slot per table passed to it (as v0.4.9 did).</p><p class="desc"> <strong>Note:</strong> v1.3.10 and lower <code>:add_arguments()</code> mistakenly added all arguments into the first argument slot.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:add_flags" class="name"><a class="wlink" href="#_argmatcher:add_flags"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:add_flags</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#_argmatcher:addflags">_argmatcher:addflags</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:be_precise" class="name"><a class="wlink" href="#_argmatcher:be_precise"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:be_precise</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : self</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong></p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:disable_file_matching" class="name"><a class="wlink" href="#_argmatcher:disable_file_matching"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:disable_file_matching</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : self</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#_argmatcher:nofiles">_argmatcher:nofiles</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:set_arguments" class="name"><a class="wlink" href="#_argmatcher:set_arguments"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:set_arguments</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">choices...</span>:string|table ) : self</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#_argmatcher:addarg">_argmatcher:addarg</a> for more information.</p><p class="desc">Sets one argument slot per table passed to it (as v0.4.9 did).</p><p class="desc"> <strong>Note:</strong> v1.3.10 and lower <code>:add_arguments()</code> mistakenly set all arguments into the first argument slot.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="_argmatcher:set_flags" class="name"><a class="wlink" href="#_argmatcher:set_flags"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>_argmatcher:set_flags</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">flags...</span>:string ) : self</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#_argmatcher:addflags">_argmatcher:addflags</a> for more information.</p><p class="desc"><strong>Note:</strong>  The new API has no way to remove flags that were previously added, so converting from <code>:set_flags()</code> to <code>:addflags()</code> may require the calling script to reorganize how and when it adds flags.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.add_match" class="name"><a class="wlink" href="#clink.add_match"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.add_match</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">match</span>:string ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#builder:addmatch">builder:addmatch</a> for more information.</p><p class="desc">This is a shim that lets clink.register_match_generator continue to work for now, despite being obsolete.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.addcoroutine" class="name"><a class="wlink" href="#clink.addcoroutine"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.addcoroutine</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">coroutine</span>:coroutine, [<span class="arg_name">interval</span>:number] ) : nil<br/><div class="version">v1.2.10 and newer</div></div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.setcoroutineinterval">clink.setcoroutineinterval</a> for more information.</p><p class="desc">Prior to v1.3.1 this was undocumented, and coroutines had to be manually added in order to be scheduled for resume while waiting for input.  Starting in v1.3.1 this is no longer necessary, but it can still be used to override the interval at which to resume the coroutine.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.arg.new_parser" class="name"><a class="wlink" href="#clink.arg.new_parser"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.arg.new_parser</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( ... ) : table</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.argmatcher">clink.argmatcher</a> for more information.</p><p class="desc">Creates a new parser and adds <span class="arg">...</span> to it.</p><pre class="language-lua"><code>-- Deprecated form:
local parser = clink.arg.new_parser(
&nbsp; { "abc", "def" },       -- arg position 1
&nbsp; { "ghi", "jkl" },       -- arg position 2
&nbsp; "--flag1", "--flag2"    -- flags
)

-- Replace with form:
local parser = clink.argmatcher()
:addarg("abc", "def")               -- arg position 1
:addarg("ghi", "jkl")               -- arg position 2
:addflags("--flag1", "--flag2")     -- flags</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.arg.register_parser" class="name"><a class="wlink" href="#clink.arg.register_parser"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.arg.register_parser</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">cmd</span>:string, <span class="arg_name">parser</span>:table ) : table</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.argmatcher">clink.argmatcher</a> for more information.</p><p class="desc">Adds <span class="arg">parser</span> to the argmatcher for <span class="arg">cmd</span>.</p><p class="desc"> If there is already an argmatcher for <span class="arg">cmd</span> then the two argmatchers are merged.  It is only a simple merge; a more sophisticated merge would be much slower and use much more memory.  The simple merge should be sufficient for common simple cases.</p><p class="desc"> <strong>Note:</strong> In v1.3.11, merging parsers should be a bit improved compared to how v0.4.9 merging worked.  In v1.0 through v1.3.10, merging parsers doesn't work very well.</p><pre class="language-lua"><code>-- Deprecated form:
local parser1 = clink.arg.new_parser():set_arguments({ "abc", "def" }, { "old_second" })
local parser2 = clink.arg.new_parser():set_arguments({ "ghi", "jkl" }, { "new_second" })
clink.arg.register_parser("foo", parser1)
clink.arg.register_parser("foo", parser2)
-- In v0.4.9 that syntax only merged the first argument position, and "ghi" and
-- "jkl" ended up with no further arguments.  In v1.3.11 and higher that syntax
-- ends up with "ghi" and "jkl" having only "old_second" as a second argument.

-- Replace with new form:
clink.argmatcher("foo"):addarg(parser1)
clink.argmatcher("foo"):addarg(parser2)
-- In v1.3.11 and higher this syntax ends up with all 4 first argument strings
-- having both "old_second" and "new_second" as a second argument.</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.chdir" class="name"><a class="wlink" href="#clink.chdir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.chdir</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.chdir">os.chdir</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.compute_lcd" class="name"><a class="wlink" href="#clink.compute_lcd"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.compute_lcd</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string, <span class="arg_name">matches</span>:table ) : string</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong></p><p class="desc">This is no longer supported, and always returns an empty string.</p><p class="desc"> Returning an empty string works because in Clink v1.x and higher match generators are no longer responsible for filtering matches.  The match pipeline itself handles that internally now.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.find_dirs" class="name"><a class="wlink" href="#clink.find_dirs"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.find_dirs</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">mask</span>:string, [<span class="arg_name">case_map</span>:boolean] ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.globdirs">os.globdirs</a> for more information.</p><p class="desc">The <span class="arg">case_map</span> argument is ignored, because match generators are no longer responsible for filtering matches.  The match pipeline itself handles that internally now.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.find_files" class="name"><a class="wlink" href="#clink.find_files"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.find_files</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">mask</span>:string, [<span class="arg_name">case_map</span>:boolean] ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.globfiles">os.globfiles</a> for more information.</p><p class="desc">The <span class="arg">case_map</span> argument is ignored, because match generators are no longer responsible for filtering matches.  The match pipeline itself handles that internally now.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_console_aliases" class="name"><a class="wlink" href="#clink.get_console_aliases"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_console_aliases</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.getaliases">os.getaliases</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_cwd" class="name"><a class="wlink" href="#clink.get_cwd"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_cwd</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.getcwd">os.getcwd</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_cwd" class="name"><a class="wlink" href="#clink.get_cwd"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_cwd</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : string</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.getcwd">os.getcwd</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_env" class="name"><a class="wlink" href="#clink.get_env"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_env</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.getenv">os.getenv</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_env_var_names" class="name"><a class="wlink" href="#clink.get_env_var_names"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_env_var_names</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.getenvnames">os.getenvnames</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_host_process" class="name"><a class="wlink" href="#clink.get_host_process"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_host_process</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong></p><p class="desc">Always returns "clink"; this corresponds to the "clink" word in the <code>$if clink</code> directives in Readline's .inputrc file.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_match" class="name"><a class="wlink" href="#clink.get_match"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_match</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">index</span>:integer ) : string</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong></p><p class="desc">This is no longer supported, and always returns an empty string.  If a script needs to access matches it added, the script should keep track of the matches itself.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_rl_variable" class="name"><a class="wlink" href="#clink.get_rl_variable"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_rl_variable</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#rl.getvariable">rl.getvariable</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_screen_info" class="name"><a class="wlink" href="#clink.get_screen_info"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_screen_info</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.getscreeninfo">os.getscreeninfo</a> for more information.</p><p class="desc"><strong>Note:</strong> The field names are different between <code>os.getscreeninfo()</code> and the v0.4.9 implementation of <code>clink.get_screen_info</code>.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_setting_int" class="name"><a class="wlink" href="#clink.get_setting_int"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_setting_int</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#settings.get">settings.get</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.get_setting_str" class="name"><a class="wlink" href="#clink.get_setting_str"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.get_setting_str</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#settings.get">settings.get</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.is_dir" class="name"><a class="wlink" href="#clink.is_dir"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.is_dir</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.isdir">os.isdir</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.is_match" class="name"><a class="wlink" href="#clink.is_match"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.is_match</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">needle</span>:string, <span class="arg_name">candidate</span>:string ) : boolean</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.generator">clink.generator</a> for more information.</p><p class="desc">This returns true if <span class="arg">needle</span> is a prefix of <span class="arg">candidate</span> with a case insensitive comparison.</p><p class="desc"> Normally in Clink v1.x and higher the <span class="arg">needle</span> will be an empty string because match generators are no longer responsible for filtering matches.  The match pipeline itself handles that internally now.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.is_rl_variable_true" class="name"><a class="wlink" href="#clink.is_rl_variable_true"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.is_rl_variable_true</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#rl.isvariabletrue">rl.isvariabletrue</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.is_single_match" class="name"><a class="wlink" href="#clink.is_single_match"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.is_single_match</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">matches</span>:table ) : boolean</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong></p><p class="desc">This is no longer supported, and always returns false.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.match_count" class="name"><a class="wlink" href="#clink.match_count"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.match_count</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : integer</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong></p><p class="desc">This is no longer supported, and always returns 0.  If a script needs to know how many matches it added, the script should keep track of the count itself.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.match_display_filter" class="name"><a class="wlink" href="#clink.match_display_filter"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.match_display_filter</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">function variable</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.ondisplaymatches">clink.ondisplaymatches</a> for more information.</p><p class="desc">A match generator can set this varible to a filter function that is called before displaying matches.  It is reset every time match generation is invoked.  The filter function receives table argument containing the matches that are going to be displayed, and it returns a table filtered as required by the match generator.</p><p class="desc"> See <a href="#filteringthematchdisplay">Filtering the Match Display</a> for more information.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.match_files" class="name"><a class="wlink" href="#clink.match_files"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.match_files</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">pattern</span>:string, [<span class="arg_name">full_path</span>:boolean], [<span class="arg_name">find_func</span>:function] ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.filematches">clink.filematches</a> for more information.</p><p class="desc">Globs files using <span class="arg">pattern</span> and adds results as matches. If <span class="arg">full_path</span> is true then the path from <span class="arg">pattern</span> is prefixed to the results (otherwise only the file names are included). The last argument <span class="arg">find_func</span> is the function to use to do the globbing. If it's unspecified (or nil) Clink falls back to <a href="#clink.find_files">clink.find_files</a>.</p><p class="desc"> <strong>Note:</strong> This exists for backward compatibility but malfunctions with some inputs, in the same ways it did in v0.4.9.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.match_words" class="name"><a class="wlink" href="#clink.match_words"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.match_words</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">text</span>:string, <span class="arg_name">words</span>:table ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#builder:addmatches">builder:addmatches</a> for more information.</p><p class="desc">This adds words that match the text.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.matches_are_files" class="name"><a class="wlink" href="#clink.matches_are_files"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.matches_are_files</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( [<span class="arg_name">files</span>:boolean] ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#builder:addmatch">builder:addmatch</a> for more information.</p><p class="desc">This is only needed when using deprecated APIs.  It's automatically inferred from the match types when using the current APIs.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.prompt.register_filter" class="name"><a class="wlink" href="#clink.prompt.register_filter"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.prompt.register_filter</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">filter_func</span>:function, [<span class="arg_name">priority</span>:integer] ) : table</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.promptfilter">clink.promptfilter</a> for more information.</p><p class="desc">Registers a prompt filter function.  The capabilities are the same as before but the syntax is changed.</p><pre class="language-lua"><code>-- Deprecated form:
function foo_prompt()
&nbsp; clink.prompt.value = "FOO "..clink.prompt.value.." >>"
&nbsp; --return true  -- Returning true stops further filtering.
end
clink.prompt.register_filter(foo_prompt, 10)

-- Replace with new form:
local foo_prompt = clink.promptfilter(10)
function foo_prompt:filter(prompt)
&nbsp; return "FOO "..prompt.." >>" --,false  -- Adding ,false stops further filtering.
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.quote_split" class="name"><a class="wlink" href="#clink.quote_split"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.quote_split</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">str</span>:string, <span class="arg_name">ql</span>:string, <span class="arg_name">qr</span>:string ) : table</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#string.explode">string.explode</a> for more information.</p><p class="desc">This function takes the string <span class="arg">str</span> which is quoted by <span class="arg">ql</span> (the opening quote character) and <span class="arg">qr</span> (the closing character) and splits it into parts as per the quotes. A table of these parts is returned.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.register_match_generator" class="name"><a class="wlink" href="#clink.register_match_generator"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.register_match_generator</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">func</span>:function, <span class="arg_name">priority</span>:integer ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.generator">clink.generator</a> for more information.</p><p class="desc">Registers a generator function for producing matches.  This behaves similarly to v0.4.8, but not identically.  The Clink schema has changed significantly enough that there is no direct 1:1 translation; generators are called at a different time than before and have access to more information than before.</p><pre class="language-lua"><code>-- Deprecated form:
local function match_generator_func(text, first, last)
&nbsp; -- `text` is the word text.
&nbsp; -- `first` is the index of the beginning of the end word.
&nbsp; -- `last` is the index of the end of the end word.
&nbsp; -- `clink.add_match()` is used to add matches.
&nbsp; -- return true if handled, or false to let another generator try.
end
clink.register_match_generator(match_generator_func, 10)

-- Replace with new form:
local g = clink.generator(10)
function g:generate(line_state, match_builder)
&nbsp; -- `line_state` is a <a href="#line_state">line_state</a> object.
&nbsp; -- `match_builder:<a href="#builder:addmatch">addmatch</a>()` is used to add matches.
&nbsp; -- return true if handled, or false to let another generator try.
end</code></pre></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.set_match" class="name"><a class="wlink" href="#clink.set_match"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.set_match</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">index</span>:integer, <span class="arg_name">value</span>:string ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong></p><p class="desc">This is no longer supported, and does nothing.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.slash_translation" class="name"><a class="wlink" href="#clink.slash_translation"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.slash_translation</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">type</span>:integer ) : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#clink.translateslashes">clink.translateslashes</a> for more information.</p><p class="desc">Controls how Clink will translate the path separating slashes for the current path being completed. Values for <span class="arg">type</span> are; <ul> <li>-1 - no translation</li> <li>0 - to backslashes</li> <li>1 - to forward slashes</li> </ul></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.split" class="name"><a class="wlink" href="#clink.split"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.split</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">str</span>:string, <span class="arg_name">sep</span>:string ) : table</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#string.explode">string.explode</a> for more information.</p><p class="desc">Splits the string <span class="arg">str</span> into pieces separated by <span class="arg">sep</span>, returning a table of the pieces.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.suppress_char_append" class="name"><a class="wlink" href="#clink.suppress_char_append"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.suppress_char_append</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#builder:setsuppressappend">builder:setsuppressappend</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="clink.suppress_quoting" class="name"><a class="wlink" href="#clink.suppress_quoting"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>clink.suppress_quoting</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">() : nil</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#builder:setsuppressquoting">builder:setsuppressquoting</a> for more information.</p><p class="desc"></p></div></div><hr/>

<div class="function"><div class="header"> <div id="os.ishidden" class="name"><a class="wlink" href="#os.ishidden"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>os.ishidden</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">( <span class="arg_name">path</span>:string ) : boolean</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#os.globfiles">os.globfiles</a> for more information.</p><p class="desc">Returns whether <span class="arg">path</span> has the hidden attribute set.</p></div></div><hr/>

<div class="function"><div class="header"> <div id="rl_state" class="name"><a class="wlink" href="#rl_state"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a><span>rl_state</span> <span class="uplinks"><a href="#Deprecated">up</a> <a href="#lua-api">apis</a> <a href="#toc">top</a></span></div> <div class="signature">table variable</div></div><div class="body"><p class="desc"><strong>Deprecated; don't use this.</strong> See <a href="#line_state">line_state</a> for more information.</p><p class="desc">This is an obsolete global variable that was set while running match generators.  It has been superseded by the <a href="#line_state">line_state</a> type parameter passed into match generator functions when using the new <a href="#clink.generator">clink.generator()</a> API.</p></div></div><hr/>

</div>
        </div>
        <div class="section" id="changes">
<h1 id="changes"><a class="wlink" href="#changes"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Changes <span class="uplinks"><a href="#toc">top</a></span></h1>
<h3 id="releases-from-chrisant996clink-fork"><a class="wlink" href="#releases-from-chrisant996clink-fork"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Releases from <a href="https://github.com/chrisant996/clink">chrisant996/clink</a> fork <span class="uplinks"><a href="#changes">up</a> <a href="#toc">top</a></span></h3>
<h4 id="v175"><a class="wlink" href="#v175"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.7.5 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added new Lua API <a href="#console.ellipsify">console.ellipsify()</a> to truncate an input string in various ways.</li>
<li>Added new <a href="#rl_buffer:setcommentrow">rl_buffer:setcommentrow()</a> to let <a href="#luakeybindings"><code>&quot;luafunc:&quot;</code> commands</a> immediately show text in the comment row.</li>
<li>Adjusted some character width measurements based on analysis from <a href="https://github.com/chrisant996/wcwidth-verifier">wcwidth-verifier</a> on Win8.1, Win10 with conhost, Win10 with Windows Terminal 1.22, Win11 with conhost, and Win11 with Windows Terminal 1.22.</li>
<li>The Headline, Pure, and Bureau clinkprompt files now consider unpublished branches as being &quot;ahead&quot;, even in cases where git doesn&#39;t report a specific &quot;ahead by&quot; count.</li>
<li>Internal changes to the right side prompt implementation, to disentangle unnecessary internal dependencies.</li>
</ul>
<h4 id="v174"><a class="wlink" href="#v174"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.7.4 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Changed searching for color themes and custom prompts to always include <code>themes\</code> directories under the Clink program directory and Clink profile directory, even when the <code>clink.path</code> setting has been used to remove them from the list of script directories.</li>
<li>Improved emoji width measurements.<ul>
<li>Unqualified emojis are counted as a single cell now.  Windows Terminal intentionally renders these as a single cell for compatibility with the behavior of the first terminal programs on Linux that began to support emoji characters (an important compatibility detail for the Windows Subsystem for Linux, for example).</li>
<li>Country flag emoji character pairs are recognized.</li>
<li>Skin tone variant selectors are recognized.</li>
<li>The zero width joiner is recognized when it joins two emoji characters, or an emoji and a male or female symbol.</li>
<li><strong>NOTE:</strong>  A given OS version and terminal program version will only recognize certain combinations of joined emojis as valid sequences.  And Windows Terminal is one of the only terminal programs on Windows that can draw color emoji characters.  Clink has no way to know how a given terminal will actually render sequences of Unicode emoji characters.  If a terminal program renders a particular emoji sequence differently than Clink predicts, then the display may become garbled.  If that happens, don&#39;t use that emoji sequence.  But if a terminal program renders an emoji sequence as a single glyph and Clink predicts the width incorrectly, then please open an issue with details about the emoji.</li>
</ul>
</li>
<li>The pure.clinkprompt now also supports virtualenv&#39;s <code>VIRTUAL_ENV_DISABLE_PROMPT</code> and <code>VIRTUAL_ENV_PROMPT</code> environment variables.</li>
<li>Added <a href="#console.cellcountiter">console.cellcountiter()</a> so scripts can iterate over Unicode character sequences in a string.  Using <code>unicode.iter()</code> returns one codepoint at a time, but emojis can have multiple codepoints and <code>console.cellcountiter()</code> groups them together for easy processing and accurate overall width measures (measuring the width of each codepoint in an emoji sequence is not the same as measuring the width of the emoji sequence as a whole).</li>
<li>Fixed the right side transient prompt so it shows up even when identical to the right side normal prompt.</li>
<li>Fixed the <code>demo</code> callback in .clinkprompt files.</li>
<li>Fixed potential for incomplete input of Unicode surrogate pairs.  An easy way to encounter the problem was using the Windows emoji picker to input an emoji that&#39;s a sequence of other emojis joined together -- for example, the pride flag emoji is a flag emoji joined with a rainbow emoji, and the rainbow emoji uses a surrogate pair.</li>
<li>Fixed an edge case where if a .clinkprompt file calls <code>require()</code> to load a module, and later on a different script also calls <code>require()</code> for the same module, then any event handlers or prompt filters registered by the required module accidentally only worked inside the .clinkprompt that originally required it.  Now required modules behave the same regardless whether they are first required by a .clinkprompt file or by some other script file.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/685">#685</a>; CTRL-L while input text is present redraws the input line wrong.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/686">#686</a>; <code>clink config -h</code> shows inaccurate info.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/696">#696</a>; console width length off-by-one on certain characters (in particular U+26A1).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/698">#698</a>; script error when using <code>clink config prompt show pure</code>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/701">#701</a>; issues in Antares prompt (missing tag and error when truncation is needed).</li>
</ul>
<h4 id="v173"><a class="wlink" href="#v173"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.7.3 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added the missing Tomorrow* color themes.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/682">#682</a>; the <code>clink config theme use</code> and <code>clink config prompt use</code> commands had no effect if there is no <code>clink_settings</code> file yet.</li>
</ul>
<h4 id="v172"><a class="wlink" href="#v172"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.7.2 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed an error when the updater tried to install the new <code>themes\</code> subdirectory and files.</li>
</ul>
<h4 id="v170"><a class="wlink" href="#v170"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.7.0 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<p>Clink now supports color theme files and custom prompt files.  These enable packaging Clink color settings or Clink custom prompts into shareable files.  This finally makes it easy to download and apply themes or prompts shared by other people, or copy them and modify them.  The new <a href="https://github.com/chrisant996/clink-themes">clink-themes</a> repo is a site where .clinktheme and .clinkprompt files can be shared (see <a href="https://github.com/chrisant996/clink-themes#contributing">Contributing</a> for details on how to contribute your own themes and prompts).</p>
<ul>
<li>Added support for <code>*.clinktheme</code> color theme files; see <a href="#color-themes">Color Themes</a> for more information.<ul>
<li>Added several <code>clink config theme</code> commands for color themes (run <code>clink config theme --help</code>).</li>
<li>The famous <a href="https://draculatheme.com">Dracula</a>, <a href="https://github.com/altercation/solarized">Solarized</a> (light and dark), and <a href="https://github.com/chriskempson/tomorrow-theme">Tomorrow</a> (1 light, 4 dark) themes are included.</li>
<li>Use <code>clink config theme use <span class="arg">name</span></code> to apply a color theme, or set the <code>CLINK_COLORTHEME</code> environment variable to the color theme name.</li>
</ul>
</li>
<li>Added support for <code>*.clinkprompt</code> custom prompt files; see <a href="#custom-prompts">Custom Prompts</a> for more information.  This makes it easy to share custom prompts, and to have a library of many different custom prompts and switch between them quickly and easily.  One .clinkprompt can be active at a time; activating one deactivates any others.<ul>
<li>Added several <code>clink config prompt</code> commands for custom prompts (run <code>clink config prompt --help</code>).</li>
<li><a href="#oh-my-posh">Oh-My-Posh</a> support is included.</li>
<li>Also included are ports of <a href="https://github.com/agnoster/agnoster-zsh-theme">Agnoster</a>, <a href="https://github.com/sindresorhus/pure">Pure</a>, <a href="https://github.com/Moarram/headline">Headline</a>, <a href="https://github.com/elB4RTO/zsh-themes/tree/master/antares">Antares</a>, and a few others (all ported from zsh to Clink).</li>
<li>Use <code>clink config prompt use <span class="arg">name</span></code> to activate a custom prompt module, or set the <code>CLINK_CUSTOMPROMPT</code> environment variable to the custom prompt name.</li>
</ul>
</li>
<li>Added the ability to show input hints in the comment row (below the input line).<ul>
<li>Input hints are off by default, and can be enabled with <code>clink set comment_row.show_hints true</code>.</li>
<li>Argmatchers can provide input hints; see <a href="#addarg_hint">Show a Usage Hint</a> for more information.</li>
<li>Lua scripts can create custom hinters; see <a href="#showinginputhints">Showing Input Hints</a> for more information.</li>
</ul>
</li>
<li>Enhanced the syntax for setting colors; added <code>italic</code> and <code>reverse</code>, and added <code>#XXXXXX</code> and <code>#XXX</code> shortcuts for specifying 24-bit color values.</li>
<li>Added more popup list colors:  <code>color.popup_border</code>, <code>color.popup_header</code>, <code>color.popup_footer</code>, <code>color.popup_select</code>, and <code>color.popup_selectdesc</code>.</li>
<li>Changed phrasing from &quot;Accept Suggestion&quot; to &quot;Insert Suggestion&quot; in the documentation and in the auto-suggestions usage hint text.</li>
<li>Changed the Lua <code>print()</code> function to support UTF8 output and terminal escape codes.  Now the only reasons for a script to use <code>clink.print()</code> instead of <code>print()</code> are (1) background compatibility or (2) using <code>NONL</code> to suppress printing a line ending.</li>
<li>Improved terminal output logging when the <code>debug.log_terminal</code> setting is enabled (the setting is only for diagnostic use).<ul>
<li>Now it captures all WriteConsoleW and WriteFile output sent to stdout or stderr (instead of only capturing output from the Readline library).</li>
<li>Added a <code>debug.log_output_callstacks</code> setting which includes callstacks for each output reported by the <code>debug.log_terminal</code> setting.</li>
</ul>
</li>
<li>Added a workaround for Unicode limitations in legacy console windows and legacy terminals (improves cursor position accuracy when Unicode surrogate pairs are present).</li>
<li>Added several new Lua APIs for color themes and custom prompts:  <a href="#clink.getprompts">clink.getprompts()</a>, <a href="#clink.applyprompt">clink.applyprompt()</a>, <a href="#clink.getclinkprompt">clink.getclinkprompt()</a>, <a href="#clink.getthemes">clink.getthemes()</a>, <a href="#clink.readtheme">clink.readtheme()</a>, <a href="#clink.applytheme">clink.applytheme()</a>, <a href="#settings.clear">settings.clear()</a>, <a href="#settings.parsecolor">settings.parsecolor()</a>, <a href="#settings.formatcolor">settings.formatcolor()</a>, <a href="#os.createguid">os.createguid()</a>.</li>
<li>Added <a href="#git">git Lua APIs</a> for use by custom prompts.</li>
<li>Added optional <code>cookie</code> argument to <a href="#clink.promptcoroutine">clink.promptcoroutine()</a> to make it simple for *.clinkprompt files to allow customization that makes use of asynchronous prompt filtering without needing modifications to the main *.clinkprompt file.</li>
<li>Fixed detecting file associations (some file extensions weren&#39;t detected as having file associations, causing executable completion to omit them, and causing input line coloring to be inaccurate).</li>
<li>Fixed a case where updating the right side prompt could leave stray characters behind.</li>
<li>Fixed a case where the <code>match.coloring_rules</code> setting could have no effect.</li>
<li>Fixed delay when typing <code>X:</code> and it&#39;s a remote drive.</li>
<li>Fixed coloring <code>2&gt;&amp;1</code>; the <code>1</code> wasn&#39;t colored.</li>
<li>Fixed color of leading blank lines in a prompt string (use the terminal&#39;s default color, not the <code>color.prompt</code> color).</li>
<li>Fixed <code>rl.collapsetilde()</code> which just didn&#39;t do its job.</li>
<li>Fixed <code>%clink_dummy_capture_env%</code> to stop accidentally leaking into the environment variables collection.</li>
<li>Fixed an infinite loop when <code>prompt.async</code> was false.</li>
<li>Fixed <kbd>F9</kbd> to stop jumping one past the actual entered history number.</li>
<li>Fixed various edge case bugs in the input line display, which were uncovered while adding the ability to show input hints.</li>
</ul>
<h4 id="v1621"><a class="wlink" href="#v1621"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.21 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Reduced the performance overhead of hooked APIs from about 20 microseconds to about 2 microseconds.</li>
<li>Enhanced the executable recognition to avoid flickering red (or <code>color.unrecognized</code>) for an executable name that was already recognized in a recent previous input line.</li>
<li>Enhanced the <code>srcmap</code> command in the Lua debugger so that <code>srcmap dir</code> automatically sets up source mappings for Clink&#39;s built in scripts using <code>dir</code> as the repo root.</li>
<li>Fixed when <code>history.expand_mode</code> is <code>off</code>; it didn&#39;t fully turn off all of the history expansion syntax forms (for example the <code>^</code> syntax).</li>
<li>Fixed input line coloring when the first word is a device name (e.g. <code>nul</code> or <code>com1:</code>); it should use <code>color.unrecognized</code> for the color.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/651">#651</a>; completion doesn&#39;t work for <code>./</code> and <code>../</code> anymore in the first word of a command line.  Now when the <code>match.translate_slashes</code> setting is <code>system</code> or <code>backslash</code> then completing <code>./</code> and <code>../</code> can complete the word as a path, even though CMD does not consider it to be a path.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/653">#653</a>; <code>clink_start.cmd</code> gets run twice if the binaries directory is the same as the profile directory.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/654">#654</a>; input line coloring doesn&#39;t treat <code>^</code> correctly inside quotes (and related quirks).</li>
</ul>
<h4 id="v1620"><a class="wlink" href="#v1620"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.20 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/652">#652</a>; error when trying to update again after updating to v1.6.20 (regression introduced in v1.6.19).</li>
</ul>
<h4 id="v1619"><a class="wlink" href="#v1619"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.19 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed truncated descriptions with <code>clink set exec.</code> and then <code>clink-select-complete</code> (<kbd>Ctrl</kbd>-<kbd>Space</kbd>) (regression introduced in v1.6.11).</li>
<li>Fixed fully qualified paths from a different local drive accidentally being colored with <code>color.unrecognized</code>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/648">#648</a>; on Windows 8.1 the title bar can get changed to &quot;Windows PowerShell&quot; for the rest of the CMD session.</li>
</ul>
<h4 id="v1618"><a class="wlink" href="#v1618"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.18 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added a new callback function that can be assigned to an argument position in the table given to <code>:addarg()</code> via <code>onalias=</code> (see <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for more information).  The git argmatcher in the <a href="https://github.com/vladimir-kotikov/clink-completions">clink-completions</a> repo uses this to support git aliases.</li>
<li>When a doskey alias doesn&#39;t include any <code>$</code> tokens then CMD is guaranteed to ignore the rest of the command line after the alias, so now argmatcher parsing also ignores the rest of the command line and colors it using <code>color.unexpected</code>.</li>
<li>Suppress the ANSICON warning in the log file and diagnostics output on Windows 8.1.  The performance problem in ANSICON exists, but apparently there isn&#39;t a better alternative before Windows 10.</li>
</ul>
<h4 id="v1617"><a class="wlink" href="#v1617"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.17 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added warning in the log file and in <code>clink-diagnostics</code> (<kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Ctrl</kbd>-<kbd>Z</kbd>) when ANSICON is detected on Windows 8.1 or greater (it&#39;s unnecessary, less functional, and greatly degrades performance).</li>
<li>Added language info in <code>clink-diagnostics</code> when the code page is not 1252 (for easier troubleshooting).</li>
<li>Fixed finding argmatchers registered with exact names (typing <code>foo</code> couldn&#39;t find an argmatcher registered as <code>c:\dir\foo.exe</code> because it accidentally looked for <code>c:\dir\foo.EXE</code>).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/631">#631</a>; script error after <code>cmd </code> when the current language is German.</li>
</ul>
<h4 id="v1616"><a class="wlink" href="#v1616"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.16 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added a workaround for how <a href="https://scoop.sh/">scoop</a> tries to control app versions and updates (<a href="https://github.com/chrisant996/clink/issues/615">#615</a>; scoop causes <code>clink autorun install</code> to use a wrong path).</li>
<li>Added an <code>auto</code> mode for the <code>match.translate_slashes</code> setting.  This mode makes completion translate all slashes in the completed word to match whichever kind occurs first in the word, or to the system path separator if there are no slashes yet (e.g. when completing a directory name).</li>
<li>Changed the default to <code>auto</code> for the <code>match.translate_slashes</code> setting.</li>
<li>Updated the <code>clink.slash_translation()</code> function.</li>
<li>UNC share name completion works with forward slashes now (e.g. <code>//localhost/</code>).</li>
<li>Added a <code>clink-toggle-slashes</code> bindable command, bound by default to <kbd>Ctrl</kbd>-<kbd>/</kbd>.  The command toggles between forward and backslashes in the word at the cursor point, or in the <em>N</em>th word if a numeric argument is provided (e.g. by the <kbd>Alt</kbd>-Digit keys).</li>
<li>Fixed the <code>off</code> mode for the <code>matches.translate_slashes</code> setting (regression introduced in v1.1.23).</li>
<li>Fixed input line coloring of <code>@</code> in <code>for %a in (*) do @whatever</code>.</li>
<li>Fixed crash in <code>glob-list-expansions</code> when used on an empty word (regression introduced in v1.3.36).</li>
<li>Fixed wildcard completions when <code>match.wild</code> is on and <code>match.substring</code> is off.</li>
<li>Fixed obscure edge case where match filtering with wildcards could potentially yield inaccurate results immediately after an auto-suggestion was offered.</li>
</ul>
<h4 id="v1615"><a class="wlink" href="#v1615"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.15 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed hiding internal script names in the <code>clink-diagnostics</code> output (regression introduced in v1.6.11).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/613">#613</a>; wrong input line coloring for <code>cmd /c &quot;command line&quot;</code>.</li>
</ul>
<h4 id="v1614"><a class="wlink" href="#v1614"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.14 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <code>menu-complete</code> to respect <code>completion-auto-query-items</code>.</li>
<li>Fixed missing line break before <code>dump-macros</code>, <code>dump-variables</code>, <code>clink-dump-functions</code>, and <code>clink-dump-macros</code> (regression introduced in v1.6.3).</li>
<li>Fixed <code>rl.getbinding()</code> to return <code>clink-select-complete</code> instead of <code>clink-popup-complete</code> (the latter is just an alias; the real command name is <code>clink-select-complete</code>).</li>
</ul>
<h4 id="v1613"><a class="wlink" href="#v1613"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.13 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Popup lists can now be filtered.<ul>
<li>Press <kbd>F4</kbd> in a popup list to toggle the search mode between &quot;find&quot; and &quot;filter&quot;.</li>
<li>The <code>clink.popup_search_mode</code> setting controls the default search mode.</li>
<li>The <code>clink.popuplist()</code> function can be told to start in a specific search mode.</li>
</ul>
</li>
<li>Added <code>os.findfiles()</code> to allow getting files/directories one at a time (versus <code>os.globfiles()</code> which collects the entire set all at once into a table).</li>
<li>Added <code>exec.associations</code> setting to let Executable Completion include files with registered file associations as matches (e.g. launchable documents such as &quot;*.pdf&quot; files).</li>
<li>Fixed <kbd>Ctrl</kbd>-<kbd>C</kbd> in a popup list copying the wrong entry after having used <kbd>Del</kbd> to delete an entry.</li>
<li>Fixed input line coloring to use <code>color.executable</code> also for files included by the <code>exec.path</code> setting, if the files have registered file associations.</li>
</ul>
<h4 id="v1612"><a class="wlink" href="#v1612"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.12 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/597">#597</a>; prompt shows leftover text sometimes (regression introduced in v1.6.10).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/596">#596</a>; it&#39;s easy to forget whether <kbd>Enter</kbd> in history list executes or inserts.</li>
</ul>
<h4 id="v1611"><a class="wlink" href="#v1611"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.11 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>os.setalias()</code> for setting a doskey alias without needing to invoke the doskey.exe program.</li>
<li>Fixed a case where match descriptions could be displayed with incorrect padding and truncation.</li>
<li>Lua debugging enhancements:<ul>
<li>Changed the built-in embedded scripts to include debug info, which allows some Lua error messages to be more useful for troubleshooting.</li>
<li>Added <code>srcmap</code> command in the Lua debugger to override where to find source files.</li>
</ul>
</li>
</ul>
<h4 id="v1610"><a class="wlink" href="#v1610"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.10 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added an optimization to further reduce flicker when re-drawing the prompt.</li>
<li>Added a <code>user_data.shared_user_data</code> table to allow linked argmatchers to share data with each other while an input line is being parsed (see <a href="https://chrisant996.github.io/clink/clink.html#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for details).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/579">#579</a>; popup lists could accidentally truncate text in the first column when there&#39;s only one column.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/576">#576</a>; setup exe doesn&#39;t remove old uninstall exe files.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/575">#575</a>; error when <code>color.executable</code> is set and <code>color.unrecognized</code> is not (regression introduced in v1.6.2).</li>
</ul>
<h4 id="v169"><a class="wlink" href="#v169"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.9 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/574">#574</a>; <code>prompt.spacing</code> &quot;eats&quot; lines containing Unicode Surrogate Pairs such as for some <a href="https://nerdfonts.com">nerdfont</a> icons (Windows Terminal accidentally returns that such lines are empty).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/573">#573</a>; C# was unable to read Clink&#39;s version resource.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/555">#555</a>; security advisory <a href="https://github.com/advisories/GHSA-gfr4-c37g-mm3v">CVE-2020-24370</a> for a Lua bug.</li>
</ul>
<h4 id="v168"><a class="wlink" href="#v168"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.8 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/571">#571</a>; error in clink.bat under some circumstances (regression introduced in v1.6.7).</li>
</ul>
<h4 id="v167"><a class="wlink" href="#v167"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.7 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Recognize the little-known <code>cmd /r</code> as a synonym for <code>cmd /c</code> so that Clink can optimize and skip injecting into a <code>cmd /r</code> process.</li>
<li>Fixed displaying descriptions when they&#39;re left-justified (regression introduced in v1.6.6).</li>
<li>Fixed <code>argmatcher:chaincommand(&quot;run&quot;)</code> to not find argmatchers for builtin CMD command names (since CMD doesn&#39;t get invoked in that case, so it won&#39;t get interpreted as a CMD command).</li>
<li>Fixed <code>argmatcher:chaincommand()</code> to find an argmatcher for a builtin CMD command even if a directory exists with the same name (since CMD interprets that case as a CMD command).</li>
<li>Fixed <code>argmatcher:chaincommand(&quot;cmd&quot;)</code> so when <code>exec.aliases</code> is enabled it can include aliases as completions.</li>
<li>Fixed <code>argmatcher:addarg({loopchars=&quot;+&quot;, etcetc})</code> so that <code>-Q:+x</code> still gets parsed into two input words <code>-Q:</code> and <code>+x</code>.</li>
<li>Fixed to parse <code>foo^ bar</code> as two words &quot;foo&quot; and &quot;bar&quot;.</li>
<li>Fixed to recognize <code>^echo</code> (etc) as a builtin CMD command name despite embedded <code>^</code> characters.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/570">#570</a>; fixed #569 more thoroughly, and <code>cd /d</code> cannot be used anywhere because it also requires command extensions.</li>
</ul>
<h4 id="v166"><a class="wlink" href="#v166"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.6 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink history --no-show-time</code> to allow omitting history timestamps even when the <code>history.time_stamp</code> setting is <code>show</code>.</li>
<li>Fixed match display to not right justify descriptions when the screen isn&#39;t wide enough or when descriptions contain aligned columns (like <code>clink set</code> completions do since v1.6.3).</li>
<li>Fixed <code>clink history</code> when output is redirected; strip any escape codes that might be embedded in the time format.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/569">#569</a>; <code>cmd /e:off</code> causes syntax error in clink.bat script.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/567">#567</a>; <code>clink history compact</code> accidentally deletes all timestamps.</li>
<li>Fixed documentation error in Lua API Reference about <code>&quot;w&quot;</code> mode in <code>io.open()</code> and <code>io.sopen()</code> (the behavior was correct, but the documentation was inaccurate/unclear).</li>
</ul>
<h4 id="v165"><a class="wlink" href="#v165"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.5 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added all match fields in the table of matches passed to the <code>clink.onfiltermatches()</code> callback function.</li>
<li>Fixed stripping colors from strings (e.g. when displaying in popup lists); it didn&#39;t strip 8-bit and 24-bit colors correctly.</li>
</ul>
<h4 id="v164"><a class="wlink" href="#v164"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.4 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl_buffer:hassuggestion()</code> and <code>rl_buffer:insertsuggestion()</code> for direct access to inserting suggestions without invoking Readline commands.</li>
<li>Added <code>clink.dirmatchesexact()</code> and <code>clink.filematchesexact()</code> which are the same as the non-<code>exact</code> variants, except these don&#39;t append a <code>*</code> to the search pattern.  For example, <code>clink.filematchesexact(&quot;*.zip&quot;)</code> can collect exactly &quot;*.zip&quot; file matches instead of &quot;*.zip*&quot;.</li>
<li>Added OS version info to <code>clink info</code>.</li>
<li>Added UNC share name completion when using Executable Completion (the <code>exec.enable</code> setting).</li>
<li>Fixed completing input <code>.</code> or <code>..</code> when the <code>exec.enable</code> setting is enabled.</li>
<li>Fixed applying <code>colored-completion-prefix</code> when match display filtering is active or a match has a custom <code>display</code> field.</li>
<li>Fixed the <code>exec.path</code> setting so it doesn&#39;t accidentally include directories if their names end with an executable extension such as <code>.exe</code>.</li>
<li>Fixed finding an argmatcher registered with a full path (e.g. <code>c:\foo\bar.exe</code>) when a full path is entered without a drive letter (e.g. enter <code>\foo\bar.exe</code>).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/562">#562</a>; <code>clink autorun install</code> strips quotes by mistake.</li>
</ul>
<h4 id="v163"><a class="wlink" href="#v163"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.3 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li><strong>Breaking Change:</strong> For the four <kbd>Ctrl</kbd>-<kbd>-</kbd> key combinations, Clink got the <kbd>Shift</kbd> key backwards and generated inaccurate input codes.  And that broke the Readline/bash default key binding for <code>undo</code> (the Windows default key binding of <kbd>Ctrl</kbd>-<kbd>z</kbd> works fine).  If your .inputrc file has bindings for any of the <kbd>Ctrl</kbd>-<kbd>-</kbd> key combinations then you can keep the keys working the same by updating the key bindings.  You can even use the <a href="#if_clink_version"><code>$if clink_version &gt;= 1.6.3</code></a> syntax in your .inputrc file to make it define the key bindings differently in different versions of Clink.<table>
<thead>
<tr>
<th>Key Combination</th>
<th>Old Code</th>
<th>New Code</th>
</tr>
</thead>
<tbody><tr>
<td><kbd>Ctrl</kbd>-<kbd>-</kbd></td>
<td><code>&quot;\C-_&quot;</code> or <code>C-_</code></td>
<td><code>&quot;\e[27;5;189~&quot;</code></td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>Shift</kbd>-<kbd>-</kbd></td>
<td><code>&quot;\e[27;6;189~&quot;</code></td>
<td><code>&quot;\C-_&quot;</code> or <code>C-_</code></td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>-</kbd></td>
<td><code>&quot;\e\C-_&quot;</code> or <code>&quot;\M-\C-_&quot;</code> or <code>M-C-_</code> or etc</td>
<td><code>&quot;\e[27;7;189~&quot;</code></td>
</tr>
<tr>
<td><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>Shift</kbd>-<kbd>-</kbd></td>
<td><code>&quot;\e[27;8;189~&quot;</code></td>
<td><code>&quot;\e\C-_&quot;</code> or <code>&quot;\M-\C-_&quot;</code> or <code>M-C-_</code> or etc</td>
</tr>
</tbody></table>
</li>
<li>Completions for all <code>clink set</code> settings include the current value in the description field (e.g. type <code>clink set </code><kbd>Alt</kbd>-<kbd>=</kbd> to see Clink settings and their current values).</li>
<li>Fixed to differentiate between <code>undo</code> and <code>vi-undo</code> commands again (they do the same thing, but are technically different commands).</li>
<li>Fixed <code>execute-named-command</code> to also accept <kbd>Ctrl</kbd>-<kbd>-</kbd> for <code>undo</code> (the emacs binding for undo).</li>
<li>Fixed redisplaying multi-line prompts after using completion during <code>execute-named-command</code>.</li>
<li>Fixed accidentally loading the history file twice on each prompt; now it loads once, as intended.</li>
<li>Fixed another double-free and potential crash in the Readline library; after navigating through history entries and then editing a history entry, pressing <kbd>Ctrl</kbd>-<kbd>c</kbd> or <kbd>Ctrl</kbd>-<kbd>Break</kbd> could cause a crash or memory corruption (regression exposed by changes in Readline 8.2).</li>
<li>Applied fixes for 6 Lua bugs, curated by <a href="https://github.com/goodusername123">@goodusername123</a> (thank you!) from <a href="https://lua.org/bugs.html">Lua.org</a>:<ul>
<li>&quot;Dead keys with nil values can stay in weak tables.&quot;</li>
<li>&quot;Expression list with four or more expressions in a &#39;for&#39; loop can crash the interpreter.&quot;</li>
<li>&quot;Label between local definitions can mix-up their initializations.&quot;</li>
<li>&quot;Return hook may not see correct values for active local variables when function returns.&quot;</li>
<li>&quot;Suspended __le metamethod can give wrong result.&quot;</li>
<li>&quot;Wrong code generated for a &#39;goto&#39; followed by a label inside an &#39;if&#39;.&quot;</li>
</ul>
</li>
<li>Fixed the Lua debugger so 5-digit line numbers don&#39;t break indentation when showing source code lines.</li>
</ul>
<h4 id="v162"><a class="wlink" href="#v162"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.2 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added optional argument <code>argmatcher:chaincommand(aliases)</code> to let the argmatcher know that the chained command will have doskey aliases expanded.</li>
<li>Fixed match display potentially missing some matches (regression introduced in v1.6.1).  In particular, git command completions were affected.</li>
<li>Fixed command line input parsing so that the first word (the command word) <code>foo/</code> is interpreted as two words <code>foo</code> and <code>/</code> just like CMD does.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/549">#549</a>; <code>cd -</code> intercept interferes with <code>cd</code> doskey alias.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/546">#546</a>; in Windows 10 when &quot;Wrap text output on resize&quot; is unchecked or the Window Width is different from the Screen Buffer Width, then the display becomes garbled.  The root cause is a limitation in how Windows 10 implements support for ANSI escape codes, but Clink now has workaround code that tries to compensate for the problems as much as possible (the terminal display will be a bit jittery, though; there&#39;s nothing that can be done about that).</li>
<li>Fixed updating the display after using <code>clink-popup-show-help</code> to invoke a command that changes only the cursor position.</li>
<li>Fixed a case where a custom strategy for auto-suggestions could accidentally skip inserting part of the suggestion.</li>
<li>Fixed a race condition where <code>clink-diagnostics</code> could encounter an error while printing information about coroutines.</li>
</ul>
<p><strong>Important pre-release changes in Readline:</strong>
Readline 8.2 introduced a crash in the <code>undo</code> command after navigating through history and making edits in history entries.  The following pre-release updates in Readline fix the crash and several related issues.  They also fix many other edge-case stability issues, and add a couple of new features.</p>
<ul>
<li>Fixed crashes due to memory corruption in the undo information for editing operations.</li>
<li>Fixed many issues found by Address Sanitizer (ASAN); these are edge cases where crashes or memory corruption or malfunctions or memory leaks occurred.</li>
<li>Added new <code>execute-named-command</code> bindable command which reads a command name from the input and executes it (default is <kbd>Alt</kbd>-<kbd>x</kbd>).</li>
<li>Allow <code>quoted-insert</code> into search strings.</li>
<li>Repeated invocations of <code>vi-yank-pop</code> now cycle through the kill ring.</li>
<li>Fixed when <code>do-lowercase-version</code> is bound to something that&#39;s not an uppercase letter.</li>
<li>Fixed getting the value of the <code>active-region-start-color</code> config variable.</li>
</ul>
<h4 id="v161"><a class="wlink" href="#v161"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.1 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<p><strong>Features:</strong></p>
<ul>
<li>Improved input line parsing and coloring:<ul>
<li>Commands starting with <code>@</code> are supported, and completion correctly ignores the <code>@</code>.</li>
<li>Each of the following CMD syntax errors are recognized:  lines starting with <code>&amp;</code> or <code>@2&gt;</code>, and lines containing <code>&amp; &amp;</code> or <code>2&gt;&amp;file</code>.</li>
<li>The whole redirections <code>2&gt;file</code> or <code>&gt;file</code> or <code>2&gt;&amp;1</code> are colored instead of only the <code>&gt;</code> or <code>&gt;&amp;</code>.</li>
</ul>
</li>
<li>Completions for <code>clink set</code> color settings include a color sample in the description field (e.g. type <code>clink set color</code><kbd>Alt</kbd>-<kbd>=</kbd> to see the color settings and their current color samples).</li>
<li>The <code>clink-reload</code> bindable command now reverts key bindings and config variables before reloading the inputrc file, so that old bindings and values don&#39;t linger in the current session if they&#39;ve been removed from the inputrc file.</li>
<li>Added <code>clink-dump-functions</code> and <code>clink-dump-macros</code> bindable commands.  These behave similar to <code>dump-functions</code> and <code>dump-macros</code>, but they show user-friendly key names and <code>luafunc:</code> macros are listed as functions instead of as macros.</li>
<li>Added some new &quot;bigword&quot; cursor movement commands for moving to the next or previous space delimited word; <code>clink-backward-bigword</code>, <code>clink-forward-bigword</code>, <code>cua-backward-bigword</code>, <code>cua-forward-bigword</code>.</li>
<li>Added a new conditional directive <code>$if clink_version</code> in the inputrc file (e.g. <code>$if clink_version &gt;= 1.6.1</code>).</li>
<li>Added a new <code>prompt.spacing</code> setting which can control blank lines before the prompt (it was a clink-flex-prompt feature which has now been incorporated into Clink itself).</li>
<li>Added a new <code>match.coloring_rules</code> setting and <code>%CLINK_MATCH_COLORS%</code> environment variable, both of which supersede Readline&#39;s <code>%LS_COLORS%</code> definitions when displaying match completions.</li>
<li>Internal changes.</li>
</ul>
<p><strong>Lua:</strong></p>
<ul>
<li>Added <code>line_state:getrangeoffset()</code> and <code>line_state:getrangelength()</code> to get the beginning offset and length of the range in the input line described by the line_state.</li>
<li>Added <code>console.explodeansi()</code> to split a string into substrings on ANSI escape code boundaries.</li>
<li>Added <code>rl.getinputrcfilename()</code> to get the loaded inputrc file name.</li>
<li>Added <code>rl.translatekey()</code> to translate between key sequence formats (input key, key binding, and friendly key name).</li>
<li>Added <code>rl.bracketpromptcodes()</code> to apply <code>\1</code> and <code>\2</code> codes as needed by Readline in certain inputrc config variables.</li>
<li>Document the <code>CLINK_EXE</code> global variable which has existed since v1.0.0 but was accidentally undocumented.</li>
</ul>
<p><strong>Fixes:</strong></p>
<ul>
<li>Removed superfluous <code>;39</code> and/or <code>;49</code> from color setting escape codes in some cases.</li>
<li>Fixed <code>console.readinput()</code> repeatedly returning nil after <code>console.checkinput()</code> returns true (regression introduced in v1.5.12).</li>
<li>Fixed loading the <code>default_inputrc</code> file if it exists (introduced in v1.3.5, and it never worked properly until now).</li>
<li>Fixed the <code>history-size</code> config variable to be completely ignored (it interfered with Clink&#39;s history database and settings, which were meant to supersede it).</li>
<li>Fixed the <code>clink-popup-show-help</code> command when including unbound commands (numeric argument of 4) so it doesn&#39;t double-list the bound <code>luafunc:</code> macros.</li>
<li>Fixed updating column text in <code>clink.popuplist()</code> when <kbd>Del</kbd> is pressed (e.g. history timestamps in the <code>clink-popup-history</code> command).</li>
<li>Fixed the width of <code>clink.popuplist()</code> to take the title into account.</li>
<li>Fixed Lua argument errors for some objects (the argument # in the error message was one lower than it should have been in some messages).</li>
<li>Fixed the return value from <code>rl_buffer:setcursor()</code>.</li>
<li>Fixed <code>console:getnumlines()</code> between onendedit and onbeginedit.</li>
<li>Fixed erasing the &quot;History expansion for&quot; preview when the transient prompt is enabled.</li>
<li>Fixed the transient prompt sometimes not erasing properly (regression introduced in v1.5.17).</li>
<li>Fixed the color of flags for <code>clink set</code> (e.g. <code>--help</code>).</li>
<li>Fixed the <code>clink-reload</code> command so any inputrc file parse errors are printed on new lines.</li>
<li>Fixed the <code>lua.break_on_error</code> setting so it works properly in released builds of Clink.</li>
</ul>
<h4 id="v160"><a class="wlink" href="#v160"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.6.0 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Updated the Readline library to v8.2 patch 7 (the list here omits changes that were contributed to Readline from Clink, or which do not affect Clink).<ul>
<li>New features:<ul>
<li>History expansion better understands multiple history expansions that may contain strings that would ordinarily inhibit history expansion (e.g., <code>abc!$!$</code>).</li>
<li>There is a new <code>fetch-history</code> bindable command that retrieves the history entry corresponding to its numeric argument. Negative arguments count back from the end of the history.</li>
<li>There is a new option: <code>enable-active-region</code>. This separates control of the active region and bracketed-paste. It has the same default value as <code>enable-bracketed-paste</code>, and enabling bracketed paste enables the active region. Users can now turn off the active region while leaving bracketed paste enabled. (Note that bracketed paste is currently ignored in Clink.)</li>
<li>Readline looks in <code>%LS_COLORS%</code> for a custom filename extension (<code>*.readline-colored-completion-prefix</code>) and uses that as the default color for the common prefix displayed when <code>colored-completion-prefix</code> is set, superseding the <code>so</code> type if both are present.</li>
<li>Two new bindable string variables: <code>active-region-start-color</code> and <code>active-region-end-color</code>. The first sets the color used to display the active region; the second is unused and unnecessary in Clink, but exists anyway for compatibility. If set, these are used in place of terminal standout mode.</li>
</ul>
</li>
<li>Fixes:<ul>
<li>Fixed a problem with cleaning up active marks.</li>
<li>Fixed a problem with arithmetic comparison operators checking the version in the inputrc file.</li>
<li>Fixed a bug that could cause readline to crash if the application removed the callback line handler before readline read all typeahead.</li>
<li>Added additional checks for read errors in the middle of readline commands.</li>
<li>Fixed a problem with <code>unix-filename-rubout</code> that caused it to delete too much when applied to a pathname consisting only of one or more slashes.</li>
<li>Fixed a couple problems where <code>transpose-words</code> could corrupt the end of the input line.</li>
<li>Fixed an issue that caused a history line&#39;s undo list to be cleared when it should not have been.</li>
<li>Fixed leaked memory from undo lists.</li>
<li>When replacing a history entry, make sure the existing entry has a non-NULL timestamp before copying it; it may have been added by the application, not the history library.</li>
</ul>
</li>
</ul>
</li>
<li>The <code>blink-matching-paren</code> setting works in Clink now.</li>
<li>Completion works for UNC share names now (share names like <code>\\server\share</code>, not server names like <code>\\server</code>).</li>
<li>Improved undo grouping for consecutive inserted text.</li>
<li>Added <code>os.enumshares()</code> to enumerate the SMB UNC shares on a given server.</li>
<li>Fixed Lua error messages from custom Lua libraries that report errors using table objects instead of strings.</li>
<li>Fixed issue with the <code>autosuggest.hint</code> setting where it could apply incorrect input line coloring when the <kbd>Right</kbd> key isn&#39;t bound to one of the usual commands for that key.</li>
<li>Internal changes and optimizations.</li>
</ul>
<h4 id="v1518"><a class="wlink" href="#v1518"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.18 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/524">#524</a> and <a href="https://github.com/chrisant996/clink/issues/523">#523</a>; garbled display in wide terminal windows (regression introduced in v1.5.14, which exacerbated and revealed a bug that&#39;s existed since Clink v1.0.0 alpha and which could intermittently garble Unicode text or escape sequences).</li>
<li>Fixed the transient prompt sometimes not displaying properly (regression introduced in v1.5.17).</li>
</ul>
<h4 id="v1517"><a class="wlink" href="#v1517"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.17 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Reduced flicker when async prompt filtering redraws the prompt.</li>
<li>When <code>_argmatcher:addarg()</code> or <code>_argmatcher:addflags()</code> is passed a table containing <code>nowordbreakchars="<span class="arg">chars</span>"</code> then the <span class="arg">chars</span> are not treated as word breaks for that argument index or for flags (see <a href="#addarg_nowordbreakchars">Overcoming Word Breaks</a> for more information).</li>
<li>Added a <code>user_data</code> argument to the custom classifier function for an argmatcher (set via <code>_argmatcher:setclassifier()</code>).</li>
<li>Improved input line coloring for <code>clink set</code> so that <code>color.unexpected</code> is only used for a completed word that isn&#39;t a match.</li>
<li>Fixed reading lines from stdin in Lua scripts (e.g. <code>io.stdin:read()</code>).</li>
<li>Fixed accidentally showing matches in a single column sometimes even when there are no descriptions.</li>
<li>Fixed an incomplete <code>clink inject</code> if an explicit or implicit <code>endlocal</code> happens after <code>clink inject</code> but before the prompt is shown (the injection didn&#39;t finish successfully until the next time an environment variable was set, but now it finishes immediately).</li>
</ul>
<h4 id="v1516"><a class="wlink" href="#v1516"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.16 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/522">#522</a>; garbled display in JetBrains WebStorm terminal (regression introduced in v1.5.15).<ul>
<li>Fixing this required reverting the change that automatically chose a default for <code>color.suggestion</code> based on the current console colors.</li>
</ul>
</li>
<li>Fixed <code>:chaincommand()</code> so that generators and classifiers that come after argmatchers in the priority order receive the same <code>line_state</code> objects as ones that come before argmatchers in the priority order.</li>
<li>Fixed <code>:setdelayinit()</code> with linked argmatchers; the callback function was only called for registered argmatchers (e.g. <code>clink.argmatcher(&quot;foo&quot;):setdelayinit(func)</code>) and it wasn&#39;t called for linked argmatchers (e.g. <code>&quot;-x&quot; .. clink.argmatcher():setdelayinit(func)</code>).</li>
<li>Fixed the word parser to recognize a single digit as a word when followed by punctuation.</li>
<li>Fixed <code>loopchars</code> for characters like <code>-</code> or <code>*</code> that are also Lua pattern characters.</li>
</ul>
<h4 id="v1515"><a class="wlink" href="#v1515"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.15 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added localized descriptions for flag completions in <code>cmd</code>, <code>cd</code>, and <code>rd</code>.</li>
<li>Added partial ability to detect light/dark console color themes:<ul>
<li>Added <code>console.getcolortable()</code> which returns a table with the console&#39;s current 16 predefined colors.  When possible, the table includes a field indicating whether the current console color theme is a light or dark theme.</li>
<li>At this time, the colors can be accurately retrieved only when using the legacy conhost terminal.  When using Windows Terminal, ConEmu, or other ConPty-based terminals there is currently no way to accurately retrieve the colors.  Once the <a href="https://github.com/microsoft/terminal/issues/10639">Terminal#10639</a> issue is fixed then Clink will also detect the background color in these terminal programs.</li>
<li>Changed the default for <code>color.suggestion</code> so that it attempts to detect light themes (bright background colors) when possible, and it attempts to automatically choose a default color for suggestions that is faint but has sufficient contrast to be readable.</li>
</ul>
</li>
<li>Fixed the <code>onlink</code> callback function in <code>:addflags()</code> so that the <code>arg_index</code> parameter is correctly <code>0</code> instead of <code>1</code>.</li>
<li>Fixed the upper bound line number for Lua console line API functions.</li>
<li>Fixed <code>console.getlinetext()</code> when emojis are present.</li>
</ul>
<h4 id="v1514"><a class="wlink" href="#v1514"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.14 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added a visible usage hint for <a href="#gettingstarted_autosuggest">Auto-Suggestions</a> to help make the feature more discoverable and usable.  The usage hint can be hidden by turning off the <code>autosuggest.hint</code> setting.</li>
<li>Added new callback functions that can be assigned to an argument position in the table given to <code>:addarg()</code> via <code>onadvance=</code> and <code>onlink=</code> (see <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for more information).</li>
<li>Fixed displaying match descriptions containing embedded color codes.</li>
<li>Fixed finding argmatchers for doskey alias names containing quotes.</li>
<li>Fixed parsing the input line when a doskey alias references a command with an argmatcher that uses the <code>:chaincommand()</code> function (e.g. an alias <code>foo=sudo dir $*</code> with an argmatcher like <code>clink.argmatcher(&quot;sudo&quot;):chaincommand()</code> so that completions and input line coloring work properly for the rest of the input line).</li>
<li>Fixed the <code>exec.commands</code> setting with an argmatcher that uses the <code>:chaincommand()</code> function.</li>
<li>Fixed <code>_argmatcher:setclassifier()</code> so the custom classifier is called for flags as well as for arguments.</li>
</ul>
<h4 id="v1513"><a class="wlink" href="#v1513"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.13 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.onhistory()</code> to register a function to be called when the input line has been accepted and is about to be added to history (and optionally cancel adding it).</li>
<li>Fixed <code>history delete</code> with a negative number so it indexes backwards from the end, as advertised.</li>
<li>Fixed calling <code>clink.refilterprompt()</code> from a coroutine, and related fixes to ensure various Lua functions coexist properly with coroutines.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/520">#520</a>; add a link to the Releases page in the updater dialog box.</li>
</ul>
<h4 id="v1512"><a class="wlink" href="#v1512"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.12 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed updating the input line display after using <code>clink-popup-history</code> or <code>win-popup-history</code> (regression introduced in v1.5.3; the fix in v1.5.4 was incomplete).</li>
<li>Fixed <code>console.checkinput()</code> so it doesn&#39;t eat whatever pending input it detects.</li>
<li>Fixed the updater to be more specific about what PowerShell cmdlet it invokes, in case a module replaces the built-in <code>Expand-Archive</code> cmdlet.</li>
</ul>
<h4 id="v1511"><a class="wlink" href="#v1511"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.11 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed prompt filters and other Lua coroutines when <code>color.executable</code> and <code>color.unrecognized</code> are both empty (regression introduced in v1.5.10).</li>
</ul>
<h4 id="v1510"><a class="wlink" href="#v1510"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.10 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Changed <code>clink update</code> to consider &quot;up-to-date&quot; as a successful case.</li>
<li>Fixed a case where the <code>completion</code> auto-suggest strategy could be temporarily prevented from providing a suggestion (regression introduced in v1.4.22).</li>
<li>Fixed leaked memory when showing history expansion previews.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/511">#511</a>; <code>!</code> doesn&#39;t need to be treated as a word break character.</li>
<li>Internal changes.</li>
</ul>
<h4 id="v159"><a class="wlink" href="#v159"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.9 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added default key binding <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>Up</kbd> for <code>clink-popup-history</code>.</li>
<li>Fixed the <code>match.max_rows</code> setting to control the number of rows of items (instead of the total number of rows including description rows).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/509">#509</a>; crash when using <code>clink-popup-history</code> if <code>history.time_stamp</code> is <code>off</code> (regression introduced in v1.5.7).</li>
</ul>
<h4 id="v158"><a class="wlink" href="#v158"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.8 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/504">#504</a>; the <code>clink.autoupdate</code> setting behaves like <code>auto</code> even when it&#39;s set to <code>check</code> (regression introduced in v1.5.5).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/503">#503</a>; the updater could hang if any additional CMD instances were started while the &quot;Clink Update&quot; prompt window was open (regression introduced in v1.5.5).</li>
</ul>
<h4 id="v157"><a class="wlink" href="#v157"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.7 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added vertical scrollbars in <code>clink-select-complete</code> and in popup lists.</li>
<li>Added <code>terminal.scrollbars</code> setting which can disable the vertical scrollbars (e.g. according to preference, or if a terminal or font is incompatible with extended Unicode box drawing characters).</li>
<li>Added <code>clink set --info</code> flag.</li>
<li>Added language-related diagnostic info in <code>clink info</code>.</li>
<li>Added minor optimization when displaying prompt text.</li>
<li>Added enhancements in the pager used when displaying help or matches; <kbd>Tab</kbd> or <kbd>Space</kbd> or <kbd>Y</kbd> print the next page, <kbd>D</kbd> prints the next half-page, <kbd>Enter</kbd> prints the next line, <kbd>N</kbd> or <kbd>Q</kbd> stop printing, and <kbd>?</kbd> shows the available keys in the <code>-- More --</code> pager prompt (the enhancements were accidentally lost in v1.1.1-alpha).</li>
<li>Horizontal scrolling in popup lists works for all columns, if text doesn&#39;t fit in the column.</li>
<li>Fixed crash in <code>rl.getmatchcolor(match, type)</code>; when the optional <code>type</code> parameter was passed in, the API could crash.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/498">#498</a>; when <code>autosuggest.enable</code> is False, cycling or searching through history and then pressing <kbd>Right</kbd> does nothing (regression introduced in v1.5.4).</li>
<li>Internal improvements.</li>
</ul>
<h4 id="v156"><a class="wlink" href="#v156"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.6 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>os.getpushddepth()</code>, which works when <code>%PROMPT%</code> contains exactly one <code>$+</code>.</li>
<li>The <code>clink-popup-history</code> and <code>win-history-list</code> commands show timestamps when <code>history.time_stamp</code> is set to <code>show</code>.</li>
<li>Fixed <code>os.geterrorlevel()</code> when <code>cmd /u</code> was used.</li>
<li>Fixed word break parsing in the input line when certain Unicode characters are present.</li>
<li>Fixed Unicode string conversions to disallow translating to &quot;similar&quot; characters (which could be problematic in filenames).</li>
<li>Fixed a crash in <code>rl.getkeybindings()</code> if it&#39;s called by a Lua script running inside <code>clink set</code>.</li>
<li>Fixed Lua debugger input if a script error occurs inside <code>clink set</code>.</li>
<li>Fixed a width quirk in <code>clink-select-complete</code> where typing to narrow the list to a single item accidentally made the column width at least 3 characters, even if the item was only 1 or 2 characters width.</li>
<li>Fixed <code>clink history</code> to handle escape codes embedded in the <code>history.time_format</code> setting.</li>
<li>Fixed a potential crash after using <code>remove-history</code> at the beginning of the history list.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/494">#494</a>; Lua error when using <code>unicode.fromcodepage()</code> (reported and fixed before the bug was published).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/493">#493</a>; <code>clink-select-complete</code> displays the selected item incorrectly if both <code>colored-stats</code> and <code>colored-completion-prefix</code> are <code>off</code> (regression introduced in v1.5.5).</li>
</ul>
<h4 id="v155"><a class="wlink" href="#v155"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.5 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Changed the <code>clink.autoupdate</code> setting to allow <code>off</code>, <code>check</code> (the default), <code>prompt</code>, and <code>auto</code> for more control over how and when updating happens.  When set to <code>prompt</code> or <code>auto</code> Clink can trigger updates automatically, so you don&#39;t need to even run <code>clink update</code>.</li>
<li>Enhanced <code>debug.log_terminal</code> to include low level console keyboard and mouse input events.</li>
<li>Fixed <code>debug.log_terminal</code> to capture all input (regression introduced in v1.5.2).</li>
<li>Fixed slowness during <code>clink-select-complete</code> while typing, caused by excessive match generation.</li>
<li>Fixed selection highlight in <code>clink-select-complete</code> when the whole match text has been typed.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/486">#486</a>; window title escape code doesn&#39;t work properly if it contains emojis or UTF8 content.</li>
<li>Internal changes.</li>
</ul>
<h4 id="v154"><a class="wlink" href="#v154"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.4 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Further contrast improvements for default colors to be readable in both Dark and Light terminal themes.</li>
<li>Added <code>arginfo</code> field in <code>builder:addmatches()</code> and in match display filtering.</li>
<li>Auto-suggestions are no longer shown while searching history; it was too distracting and confusing.</li>
<li>Fixed updating the input line display after using <code>clink-popup-history</code> or <code>win-popup-history</code> (regression introduced in v1.5.3).</li>
<li>Fixed <code>old-menu-complete</code> and <code>menu-complete</code> when there&#39;s only one match.  The first time it should insert the match, and subsequent times should ding instead of cycling through the same match over and over and requiring an equal number of <code>undo</code> to undo.</li>
<li>Fixed match display filtering to support the <code>match.substring</code> setting.</li>
<li>Fixed match display filtering to support the <code>files.system</code> setting.</li>
<li>Fixed the cursor position if match display filtering happens the first time <code>clink-select-complete</code> is used in a session.</li>
<li>Fixed a case where two <code>undo</code> were required to fully undo what <code>menu-complete</code> inserted.</li>
<li>Fixed <kbd>Esc</kbd> during incremental history search mode so it cancels the search.</li>
<li>Fixed input line coloring after <code>non-incremental-reverse-search-history</code> or <code>non-incremental-forward-search-history</code> finds an exact match for the search text (since v1.1.5).</li>
<li>Internal changes and optimizations.</li>
</ul>
<h4 id="v153"><a class="wlink" href="#v153"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.3 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>builder:setfullyqualified()</code> to force completions to be inserted as fully qualified path names.</li>
<li>Completions for <code>clink set <span class="arg">setting_name</span> <span class="arg">input</span></code> use fully qualified path names for <span class="arg">input</span>.  This helps avoid accidentally setting relative paths in global settings; since the current directory changes frequently, setting relative paths usually leads to unintended consequences.</li>
<li>Only load a script from a <code>completions\</code> directory if the associated command exists in the file system.  Also, pass the fully qualified file name as input to the script (in Lua, use <code>...</code> to get script arguments, e.g. <code>local command = ...</code>).</li>
<li><code>clink info</code> now reports whether Clink is injected.</li>
<li>Improve efficiency of updating the input line display.  This eliminates some redundant processing in the Readline library and in Clink.</li>
<li>Fixed input line parsing and coloring when the <code>doskey.enhanced</code> setting is off or when doskey macro expansion is suppressed.</li>
<li>Fixed <code>line_state:getwordinfo()</code> to accurately set the <code>.alias</code> field when the <code>doskey.enhanced</code> setting is off or when doskey macro expansion is suppressed.</li>
<li>Fixed coloring the command word in the command line when queued keys select and accept a command line from history instantly (it could accidentally continue without applying the appropriate coloring).</li>
<li>Fixed script error in <code>clink.filematches(nil)</code> and <code>clink.dirmatches(nil)</code>; they were meant to behave the same as passing an empty string.</li>
</ul>
<h4 id="v152"><a class="wlink" href="#v152"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.2 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Adjusted the colors in &quot;Use enhanced defaults&quot; to have sufficient contrast to be readable in both Dark and Light terminal themes.</li>
<li>More reliably detect whether hosted in Windows Terminal, and even when Windows Terminal is set as the default terminal application.</li>
<li>Fixed crash in <code>clink.popuplist()</code> when the <code>current</code> argument is past the end of the list of items.</li>
<li>Fixed cursor location when the input line contains embedded CTRL characters.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/474">#474</a>; pasting is slow in Windows Terminal and ConEmu.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/470">#470</a>; typo in help text.</li>
</ul>
<h4 id="v151"><a class="wlink" href="#v151"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.1 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl.getcommandbindings()</code> to get info about a command, including the key(s) bound to it, if any.</li>
<li>Changed to also allow <code>clink.popuplist()</code> inside a function registered by <code>clink.onfiltermatches()</code>.</li>
<li>Changed console input mode handling to more aggressively clear <code>ENABLE_VIRTUAL_TERMINAL_INPUT</code> since it interferes with input (especially <kbd>Ctrl</kbd> key combinations) and some console programs set it but accidentally neglect to clear it when they&#39;re finished.</li>
</ul>
<h4 id="v150"><a class="wlink" href="#v150"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.5.0 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added code-signing.</li>
<li>Added note after successful <code>clink update</code> to clarify that the update will take effect in new Clink windows.</li>
<li>Fixed order of running the autostart script (from the <code>clink.autostart</code> setting) vs loading Lua; the autostart script should run before Lua so that Lua scripts can query environment variables set by it.  Otherwise Lua scripts may behave differently on initial load versus after invoking the <code>clink-reload</code> command (e.g. <kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Ctrl</kbd>-<kbd>R</kbd>).</li>
<li>Fixed precedence of match colors; readonly should be lower precedence than executable.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/469">#469</a>; incorrect usage of <code>memset()</code>.</li>
</ul>
<h4 id="v1428"><a class="wlink" href="#v1428"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.28 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>console.getcursorpos()</code> to get the cursor position.</li>
<li>Updated <code>os.getscreeninfo()</code> to include the cursor position.</li>
<li>Changed character width measurements in Windows Terminal to accommodate certain fully qualified color emoji variants such as &quot;✔️&quot; vs &quot;✔&quot;.  The former is U+2714 U+FE0F and Windows Terminal draws a double-width color emoji; the latter is U+2714 and Windows Terminal draws a single-width character in the current font.  Note that Windows Terminal draws the characters; Clink just tries to make the best prediction it can about how Windows Terminal will draw the characters.</li>
<li>Fixed display glitch where auto-suggest caused the display to scroll up an extra line at the bottom of the screen.</li>
<li>Fixed display glitch where cursor position was wrong when the input line ends with a history expansion directive that ends exactly at the right edge of the terminal.</li>
<li>Fixed <code>cmd.ctrld_exits</code> so <kbd>Ctrl</kbd>-<kbd>D</kbd> always exits with return code 0, so that terminal programs allow the shell window to close gracefully.</li>
<li>Fixed mouse input when the <code>horizontal-scroll-mode</code> inputrc variable is <code>on</code>.</li>
<li>Fixed missing prompt text when a prompt filter encounters an unhandled Lua error; now a placeholder prompt string is used so it&#39;s clear where the prompt is.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/467">#467</a>; On-Screen Keyboard in Swedish keyboard layout can&#39;t type <code>\</code>.</li>
<li>Internal improvements.</li>
</ul>
<h4 id="v1427"><a class="wlink" href="#v1427"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.27 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed when the <code>terminal.emulate</code> setting is <code>auto</code> on Windows 8.1 and earlier (regression introduced in v1.4.26).</li>
</ul>
<h4 id="v1426"><a class="wlink" href="#v1426"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.26 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added built-in support for shell integration with Windows Terminal v1.18 and higher.  <em>Note: Windows Terminal gets confused about the command line text when the transient prompt is enabled.</em></li>
<li>Changed <code>clink.getansihost()</code> to return two strings; the first string is the mode in use, and the new second string is what Clink detected (and will use when the <code>terminal.emulation</code> setting is <code>auto</code>).</li>
<li>Fixed to use terminal emulation when the <code>terminal.emulate</code> setting is <code>auto</code> and ANSICON is present.  Clink&#39;s output is no longer able to be intercepted by ANSICON, so bypass it and use Clink&#39;s own terminal emulation.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/461">#461</a>; crash due to invalid RVA in ANSI32.DLL or ANSI64.DLL (ANSICON).</li>
</ul>
<h4 id="v1425"><a class="wlink" href="#v1425"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.25 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Now <code>os.issignaled()</code> works during <code>onendedit</code> and <code>onfilterinput</code> events.</li>
<li>Improve emulation for <kbd>F7</kbd> history popup (the <code>win-history-popup</code> command); <kbd>Left</kbd> or <kbd>Right</kbd> replace the input text with the selected line.</li>
<li>Transient prompt filters can suppress the transient prompt on a case by case basis by returning <code>nil, false</code>.</li>
<li>Fixed typo in <code>clink set --help</code> text.</li>
<li>Fixed where the prompt prefix (from v1.4.24) is inserted in the prompt string, so that shell integration escape codes can work properly.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/457">#457</a>; unrecognized OSC escape codes accidentally stripped from prompt string.</li>
</ul>
<h4 id="v1424"><a class="wlink" href="#v1424"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.24 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>path.fnmatch()</code> which behaves like the Linux <code>fnmatch(3)</code> function.</li>
<li>Added <code>os.globmatch()</code> which performs recursive file pattern globbing <a href="https://git-scm.com/docs/gitignore#_pattern_format">the same as git does</a>.</li>
<li>Added support for <code>%CLINK_PROMPT_PREFIX%</code>, <code>%CLINK_PROMPT_SUFFIX%</code>, <code>%CLINK_RPROMPT_PREFIX%</code>, and <code>%CLINK_RPROMPT_SUFFIX%</code> to provide prefix/suffix strings to surround the prompt strings, and for prompt filters to define a <code>:surround()</code> function to add their own prefix/suffix strings if needed.</li>
<li>Fixed <code>~</code> by itself to change directories, the same as <code>~\</code>.</li>
<li>Fixed horizontal scrolling in popup lists (is possible whenever the item doesn&#39;t fit and no items contain control codes).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/452">#452</a>; <code>history delete #</code> doesn&#39;t work (regression introduced in v1.1.43).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/448">#448</a>; completion malfunction with <code>..\does_not_exist</code> (regression introduced in v1.4.1).</li>
</ul>
<h4 id="v1423"><a class="wlink" href="#v1423"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.23 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added help message in <code>clink-select-complete</code>: when descriptions are shown below the matches, this adds text to mention that <kbd>F1</kbd> toggles showing descriptions inline with the matches.</li>
<li>Added <code>clink update --check</code> to only check for an update without installing it.</li>
</ul>
<h4 id="v1422"><a class="wlink" href="#v1422"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.22 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <code>clink-select-complete</code> to use per-match <code>appendchar</code> when present.</li>
<li>Fixed repetitive unnecessary work in the background when the <code>completion</code> auto-suggest strategy encounters a <code>fromhistory</code> argument slot in an argmatcher.</li>
<li>Fixed the installer <code>/S</code> flag (silent install) so it returns exit code 0 on success.</li>
</ul>
<h4 id="v1421"><a class="wlink" href="#v1421"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.21 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>The <code>clink-diagnostics</code> command can report merged argmatchers.  When a numeric arg of 2 or greater is given (e.g. <kbd>Alt</kbd>-<kbd>2</kbd>,<kbd>Ctrl</kbd>-<kbd>x</kbd>,<kbd>Ctrl</kbd>-<kbd>z</kbd>) then it includes a list of defined argmatchers.  The list now also reports any merging of argmatchers that occurred.</li>
<li>Fixed <code>clink update</code> so <code>winget</code> doesn&#39;t get confused about whether an update is available for Clink.  Once <code>winget update clink</code> performs an update, or once a Clink v1.4.21 or greater .exe installer is run, then <code>winget</code> should stop getting confused.</li>
</ul>
<h4 id="v1420"><a class="wlink" href="#v1420"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.20 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <code>os.isfile()</code> and <code>os.isdir()</code> when the specified name contains <code>&lt;</code> or <code>&gt;</code> or <code>&quot;</code>, which are special wildcard characters for MS-DOS compatibility.  This caused an error when typing <code>&quot;&lt;</code>, which then mistakenly thought a completion script named <code>&lt;.lua</code> existed.</li>
<li>Fixed <code>rl.expandtilde()</code> to omit a trailing backslash when expanding <code>~</code> by itself.  This is to avoid running afoul of the <a href="https://learn.microsoft.com/en-us/windows/win32/api/shellapi/nf-shellapi-commandlinetoargvw"><code>\&quot;</code> parsing rules</a> for <code>argv[]</code> for programs.</li>
<li>Fixed potential crash when the <code>clink</code> command line takes more bytes as UTF8 than it does as UTF16.</li>
</ul>
<h4 id="v1419"><a class="wlink" href="#v1419"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.19 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>builder:setforcequoting()</code> to force quoting rules to be applied to matches even if they aren&#39;t filenames.  This also reverts &quot;quoting for non-filename completions&quot; in v1.4.13; there isn&#39;t a safe and backward-compatible way to automatically deduce when non-filenames matches need quoting, so a match generator needs to turn it on explicitly when desired.</li>
</ul>
<h4 id="v1418"><a class="wlink" href="#v1418"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.18 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.oninputlinechanged()</code> to register a function to be called whenever the input line is changed.</li>
</ul>
<h4 id="v1417"><a class="wlink" href="#v1417"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.17 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>os.isuseradmin()</code> to get whether CMD is running as an admin account.</li>
<li>Added <code>os.getfileversion()</code> to get a table with version information if the file contains a Windows version info resource.</li>
<li>The <code>clink-diagnostics</code> command now reports costs for Lua event callback functions when a numeric arg is given (e.g. <kbd>Alt</kbd>-<kbd>1</kbd>,<kbd>Ctrl</kbd>-<kbd>x</kbd>,<kbd>Ctrl</kbd>-<kbd>z</kbd>) or when the <code>lua.debug</code> setting is enabled.</li>
</ul>
<h4 id="v1416"><a class="wlink" href="#v1416"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.16 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>history.show_preview</code> setting that controls whether to show a preview of history expansions (previously it was inferred by whether <code>color.histexpand</code> was set).</li>
<li>Added detection for problematic codes in the prompt string.  The <code>clink-diagnostics</code> <kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Ctrl</kbd>-<kbd>Z</kbd> command reports problem codes in the prompt string.  When certain problem codes exist in the prompt string, then Clink compensates by reprinting the entire input line after printing the prompt string.  Ideally, the prompt string should be fixed by the user, but sometimes that&#39;s difficult if the prompt string was generated by a tool.</li>
<li><strong>Potential Breaking Change:</strong> Fixed how hidden and system files are handled by <code>os.globdirs()</code> and <code>os.globfiles()</code> (it had never worked properly).  It worked fine with the default modes of the <code>files.hidden</code> and <code>files.system</code> settings and <code>match-hidden-files</code> config variable.  But if any of those were changed from the default values then malfunctions could occur.  With the fix, in backward compatibility mode the <code>files.hidden</code> and <code>files.system</code> settings and <code>match-hidden-files</code> config variable control whether <code>os.globdirs()</code> and <code>os.globfiles()</code> find hidden or system files, as before, and things can potentially malfunction.  When the optional <code>extrainfo</code> argument is non-zero or when a new optional <code>flags</code> table is passed to them, they now default to including hidden files and omitting system files, but the <code>flags</code> table can override that.  This change was necessary because some scripts were unable to detect git repositories when the <code>files.hidden</code> setting was false.  Excluding hidden files never worked properly in the past.  Clink v1.4.16 does its best to be as backward-compatible and forward-compatible as possible, but in some cases scripts may need to be updated to work properly when the settings or config variable are changed from their default values.</li>
<li>Fixed the <code>match-hidden-files</code> config variable to work again (regression introduced in v1.0.0).  Also, when off, now it hides files and directories whose names begin with <code>.</code>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/421">#421</a>; <code>clink.bat</code> errors with quoted arguments (regression introduced in v1.3.47).</li>
<li>Updated documentation with more cross-referencing links for Clink settings, Readline commands, Readline config variables, and standard Lua APIs.</li>
</ul>
<h4 id="v1415"><a class="wlink" href="#v1415"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.15 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>log.getfile()</code> to get the current log file path.</li>
<li>Fixed match display to better accommodate escape codes for italics and underline, if present and supported by the terminal.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/414">#414</a>; argument color doesn&#39;t reset for values in multi-column layout when <code>colored-stats</code> is <code>off</code>.</li>
<li>PR <a href="https://github.com/chrisant996/clink/pull/418">#418</a>; Fix crash caused by destruction of non detached threads.</li>
<li>PR <a href="https://github.com/chrisant996/clink/pull/417">#417</a>; Fix buffer overread caused by usage of strcmp on non null-terminated char arrays.</li>
</ul>
<h4 id="v1414"><a class="wlink" href="#v1414"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.14 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed autosuggest to update again if matches are marked as volatile and the input line changed while matches were generated in the background (related to <a href="https://github.com/vladimir-kotikov/clink-completions/issues/164">clink-completions#164</a>).</li>
</ul>
<h4 id="v1413"><a class="wlink" href="#v1413"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.13 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added more status information in <code>clink-diagnostics</code> <kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Ctrl</kbd>-<kbd>Z</kbd>.</li>
<li>Fixed quoting in the <code>insert-completions</code> <kbd>Alt</kbd>-<kbd>*</kbd> command.</li>
<li>Fixed quoting for non-filename completions.</li>
<li>Fixed a CPU busy-loop after <code>match_builder:setvolatile()</code> was called during an autosuggest strategy.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/411">#411</a>; setting <code>%CLINK_HISTORY_LABEL%</code> after Clink started didn&#39;t take effect (regression introduced in v1.3.18).</li>
</ul>
<h4 id="v1412"><a class="wlink" href="#v1412"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.12 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Additional improvements and logging for East Asian ambiguous width characters.</li>
<li>Running <code>clink inject</code> no longer empties the log file, so that AutoRun doesn&#39;t result in the log file being cleared over and over, which interferes with diagnostic efforts.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/407">#407</a>; the <code>complete</code> command gets confused by <code>.</code> prefix on files.</li>
</ul>
<h4 id="v1411"><a class="wlink" href="#v1411"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.11 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/406">#406</a>; the &quot;lambdagenerated.omp.json&quot; theme for Oh-My-Posh has problems in CJK codepages.  The <a href="https://www.unicode.org/reports/tr11-2/#:~:text=East%20Asian%20Ambiguous%20%28A%29%20-%20Characters%20that%20occur,sets%2C%20but%20also%20some%20of%20the%20mathematical%20symbols%29.">East Asian Ambiguous</a> support has been rewritten to solve multiple subtle issues; the fix in v1.4.9 exposed other inaccuracies.</li>
</ul>
<h4 id="v1410"><a class="wlink" href="#v1410"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.10 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added optional <code>level</code> argument to <code>log.info()</code> to facilitate more accurate reporting about the calling code.</li>
<li>Fixed extra duplicate log entry when the updater finds that Clink is already up to date.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/405">#405</a>; vi search gives unexpected results (regression introduced in v1.4.7).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/402">#402</a>; for convenience, print the Clink Releases page URL after a successful update (takes effect on the next upgrade <em>after</em> v1.4.10).</li>
</ul>
<h4 id="v149"><a class="wlink" href="#v149"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.9 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improved the problematic character reporting in the <code>clink-diagnostics</code> command.</li>
<li>Fixed measurements for the East Asian ambiguous width characters (this should solve the Cmder problems with lambda in the CMD.exe prompt text, including the space after the lambda).</li>
</ul>
<h4 id="v148"><a class="wlink" href="#v148"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.8 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl.needquotes()</code> function to check whether text needs quotes in a command line.</li>
<li>Changed the <code>terminal.color_emoji</code> setting <code>auto</code> mode to more broadly support accurate width measurements for color emojis (regardless whether the terminal program is capable of actually drawing the color emoji).</li>
<li>Now <code>clink-diagnostics</code> <kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Ctrl</kbd>-<kbd>Z</kbd> automatically analyzes the prompt text for problematic characters, reports them, and offers suggestions for how to solve problems they might be causing.</li>
<li>Fixed the <code>completion</code> autosuggest strategy so it doesn&#39;t provide a suggestion that requires quoting if the command line input is not currently quoted.</li>
<li>Fixed overly aggressive detection of color emojis (regression introduced in v1.4.7).</li>
</ul>
<h4 id="v147"><a class="wlink" href="#v147"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.7 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Clink now supports ARM64.</li>
<li>Clink now recognizes when the terminal host is WezTerm.</li>
<li>Clink now supports color emojis in Windows Terminal and WezTerm, according to the Unicode v15.0 standard.  The new <code>terminal.color_emoji</code> setting controls when Clink assumes the terminal supports color emojis (color emojis are rendered using double-width characters, which can interfere with cursor positioning math, so Clink needs to know whether the terminal supports color emojis).</li>
<li>Enabled Readline&#39;s support for non-incremental vi-mode search (<kbd>N</kbd>, <kbd>n</kbd>) to search for a shell pattern using <code>fnmatch()</code>, as Posix specifies.</li>
<li>Fixed obscure issue when a &quot;luafunc:&quot; macro modifies the input line and then invokes a completion command.</li>
<li>Fixed <code>line_state:getword()</code> and <code>line_state:getendword()</code> to not strip quotes during <code>generator:getwordbreakinfo()</code> functions (regression introduced in v1.1.24).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/393">#393</a>; backward compatibility issue when <code>clink.arg.register_parser()</code> is passed something that is not a parser at all.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/111">#111</a> again; <code>cd ..</code><kbd>Tab</kbd> didn&#39;t complete to <code>..\</code> (regression introduced in v1.3.1).</li>
</ul>
<h4 id="v146"><a class="wlink" href="#v146"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.6 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added a more informative exit code from <code>clink inject</code>.  It returns 0 if successful, 2 if a fatal error occurred, or 1 if a non-fatal error occurred (such as Clink was already present; related to <a href="https://github.com/cmderdev/cmder/issues/2800">cmderdev/cmder#2800</a>).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/382">#382</a>; <code>%CLINK_PROFILE%</code> doesn&#39;t supersede <code>--profile</code> (regression introduced in v1.0.0).</li>
</ul>
<h4 id="v145"><a class="wlink" href="#v145"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.5 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improved debug Lua messages; Clink&#39;s built-in Lua scripts reported &quot;?&quot; as the filename, and now they report &quot;{filename.lua}&quot;.</li>
<li>Fixed potential for a crash in <code>clink-help</code> when including unbound &quot;luafunc:&quot; macros for which custom descriptions have been provided (e.g. <kbd>Alt</kbd>-<kbd>4</kbd> then <kbd>Alt</kbd>-<kbd>H</kbd>).</li>
</ul>
<h4 id="v144"><a class="wlink" href="#v144"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.4 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed the screen width in the Help commands and Completion commands (regression introduced in v1.3.43).</li>
<li>Fixed to not load the same Lua script more than once from a completions directory when the Lua script doesn&#39;t define an argmatcher.</li>
<li>Fixed architecture reported by <code>clink-diagnostics</code> <kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Ctrl</kbd>-<kbd>Z</kbd> (regression introduced in v1.3.49).</li>
</ul>
<h4 id="v143"><a class="wlink" href="#v143"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.3 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added backward compatibility for obsolete <code>clink.quote_split()</code>, <code>clink.split()</code>, and <code>clink.get_screen_info()</code>.</li>
<li>Fixed empty completion list when typing two letters in rapid succession when both the <code>autosuggest.enable</code> and <code>autosuggest.async</code> settings are enabled.</li>
</ul>
<h4 id="v142"><a class="wlink" href="#v142"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.2 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed path abbreviation in some cases.</li>
</ul>
<h4 id="v141"><a class="wlink" href="#v141"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.1 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>os.abbreviatepath()</code> and <code>os.expandabbreviatedpath()</code>.</li>
<li>Invoking completion expands abbreviated paths when the new <code>match.expand_abbrev</code> setting is enabled.</li>
<li>Fixed displayed matches for <code>c:</code> or <code>c:dir\</code>.</li>
</ul>
<h4 id="v140"><a class="wlink" href="#v140"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.4.0 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.getpopuplistcolors()</code> to get the default popup list colors.</li>
<li>Added <code>clink.refilterafterterminalresize()</code> to enable automatic prompt refilter after terminal resize.  Prompt filters should only enable this if they&#39;re designed to refilter very quickly, otherwise they may cause responsiveness problems.</li>
<li>The <code>clink.popuplist()</code> function allows the <code>items</code> table to include fields to override the height, width, colors, and direction of the list.</li>
<li>The <code>clink_settings</code> file format has been relaxed slightly to accept trailing whitespace after a Boolean setting&#39;s value.  Note that manually modifying the <code>clink_settings</code> file is not supported; always use <code>clink set</code> to query or change Clink settings.</li>
<li>Fixed an obscure crash in the Readline library inside the <code>reverse-search-history</code> command when pressing the first key of a multikey binding (e.g. <kbd>Ctrl</kbd>-<kbd>X</kbd>) and then pressing any key that does not follow the first key in any of the corresponding multikey bindings (e.g. <kbd>Esc</kbd>).</li>
<li>Fixed leaked file handle when <code>history.save</code> is False.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/370">#370</a>; <kbd>Tab</kbd> inside <code>set /p var=</code> mistakenly discards any previous input.</li>
</ul>
<h4 id="v1351"><a class="wlink" href="#v1351"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.51 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <code>:setendofflags()</code>; it made <code>--</code> work correctly for input line coloring, but it didn&#39;t work correctly when generating match completions.</li>
<li>Fixed obscure edge cases where matches returned by Lua scripts could display incorrectly in <code>clink-select-complete</code>, or could potentially even crash if Lua scripts returned invalid results from the <code>ondisplaymatches</code> or <code>onfiltermatches</code> events.</li>
</ul>
<h4 id="v1350"><a class="wlink" href="#v1350"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.50 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed the prefix highlighting when displaying matches.</li>
</ul>
<h4 id="v1349"><a class="wlink" href="#v1349"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.49 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Autorun detects non-interactive CMD process earlier, before injecting the Clink DLL.  This can improve performance somewhat, and may be able to reduce spurious problems with antivirus tools (such as described in <a href="https://github.com/chrisant996/clink/issues/367">#367</a>).</li>
<li>Updater deletes zip file if it fails to unzip.  This can help automatically recover from a damaged zip download.</li>
</ul>
<h4 id="v1348"><a class="wlink" href="#v1348"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.48 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed another <a href="https://github.com/chrisant996/clink/issues/356">#356</a> case; trailing spaces at end of display were sometimes optimized away by mistake (regression introduced in v1.3.43).</li>
</ul>
<h4 id="v1347"><a class="wlink" href="#v1347"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.47 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Removed the message &quot;Clink autorun is disabled by CLINK_NOAUTORUN&quot;.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/361">#361</a>; detect <code>%CLINK_NOAUTORUN%</code> faster.</li>
<li>Fixed another <a href="https://github.com/chrisant996/clink/issues/356">#356</a> case; end of display line not cleared sometimes (regression introduced in v1.3.43).</li>
</ul>
<h4 id="v1346"><a class="wlink" href="#v1346"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.46 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed right-side prompts on Windows 8.1 (they never worked correctly on Windows 8.1).</li>
<li>More fixes for <a href="https://github.com/chrisant996/clink/issues/356">#356</a>; input line display garbled on Windows 8.1 (regression introduced in v1.3.43).</li>
</ul>
<h4 id="v1345"><a class="wlink" href="#v1345"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.45 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed the history expansion preview when the input line grows or shrinks to use a different number of screen rows.</li>
<li>Fixed <code>&quot;cd&quot;</code> so it doesn&#39;t match the <code>cd</code> argmatcher, because CMD commands cannot be quoted.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/356">#356</a>; input line display garbled on Windows 8.1 (regression introduced in v1.3.43).</li>
</ul>
<h4 id="v1344"><a class="wlink" href="#v1344"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.44 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/348">#348</a>; pasting in ConEmu or Windows Terminal duplicates the 2nd character (regression introduced in v1.3.43).</li>
</ul>
<h4 id="v1343"><a class="wlink" href="#v1343"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.43 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.max_input_rows</code> setting that limits the number of screen rows to use for displaying the input line, scrolling as appropriate if the input line exceeds the limit.</li>
<li>Added <code>color.histexpand</code> setting.  When this is configured with a color, then Clink highlights history expansions in the input line and shows a preview of the expansion that will be applied near the current cursor position.</li>
<li>Added <code>history.auto_expand</code> setting.  When this is set to false, history expansions will not be performed automatically upon <kbd>Enter</kbd>, but they may still be performed by invoking expansion commands such as <code>clink-expand-history</code> <kbd>Alt</kbd>-<kbd>^</kbd>, or <code>clink-expand-line</code> <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>E</kbd>.</li>
<li>When a coroutine error happens, write a Lua traceback to the log file.</li>
<li>The <code>clink-diagnostics</code> command now reports costs for prompt filters and input line coloring classifiers when a numeric arg is given (e.g. <kbd>Alt</kbd>-<kbd>1</kbd>,<kbd>Ctrl</kbd>-<kbd>x</kbd>,<kbd>Ctrl</kbd>-<kbd>z</kbd>).</li>
<li>Fixed the input line color when the command word is an alias <em>and</em> a directory <em>and</em> has an argmatcher (regression introduced in v1.3.40).</li>
<li>Fixed how the inserted completion is highlighted while using <code>clink-select-complete</code> with the <code>match.substring</code> setting enabled.</li>
<li>Fixed Readline bugs in the numeric arg input state;<ul>
<li>Numeric arg overflow check was missing in certain cases.</li>
<li>Numeric arg input state could accidentally empty the prompt string.</li>
<li>Numeric arg input state accidentally continued showing the arg input message after using <kbd>Alt</kbd>-<kbd>-</kbd> while already in numeric arg input state.</li>
</ul>
</li>
<li>Fixed some minor input line coloring and completion mistakes for <code>clink set</code>.</li>
<li>Fixed <code>quoted-insert</code> followed by <kbd>Esc</kbd>, so that it inserts the raw ESC character.</li>
<li>Fixed how <kbd>Esc</kbd> is handled in isearch mode (e.g. <kbd>Ctrl</kbd>-<kbd>r</kbd>); it should terminate isearch without reverting the input line.</li>
<li>Fixed <code>what-is</code> to consistently reset the color afterward.</li>
<li>Fixed vi insertion mode when <code>terminal.raw_esc</code> is enabled, so that <kbd>Esc</kbd> changes to vi command mode.</li>
<li>Fixed <code>clink.refilterprompt()</code> to report an error upon invalid usage (it cannot be used inside a prompt filter, as that could cause infinite recursion and a crash).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/344">#344</a>; <code>history</code> prints UTF8 text incorrectly.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/342">#342</a>; typing <code>foo.abc</code> doesn&#39;t recognize <code>foo.abc.cmd</code>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/340">#340</a>; various display glitches in the Readline library (Clink now uses custom display routines instead of the Readline display routines).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/339">#339</a>; <code>%CD%</code> doesn&#39;t expand.</li>
</ul>
<h4 id="v1342"><a class="wlink" href="#v1342"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.42 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>console.checkinput()</code> to check whether input is available.</li>
<li>Changed <code>console.readinput()</code> to accept an optional <span class="arg">no_cursor</span> argument to avoid changing cursor visibility or position.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/320">#320</a>; resizing the terminal can garble the prompt (<code>bash</code> has the same problem, so Clink now uses custom code to handle resizing the terminal).</li>
</ul>
<h4 id="v1341"><a class="wlink" href="#v1341"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.41 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>io.truncate()</code> to truncate a file.</li>
<li>Added <code>string.comparematches()</code> to compare two matches; this is normally not needed because Clink automatically sorts matches, but some match generators may prefer to disable the automatic sorting and perform custom sorting.</li>
<li>Added <code>rl.describemacro()</code> to associate descriptions with <code>luafunc:</code> macros (or any macro), to be shown in the <code>clink-show-help</code> and <code>clink-what-is</code> commands.</li>
<li>The <code>clink.popuplist()</code> function now accepts a callback function to be invoked when <kbd>Del</kbd> is pressed.</li>
<li>The <code>colored-completion-prefix</code> configuration variable now works with match display filtering, provided the display strings only prepend or append to the match strings.</li>
<li>Removed the obsolete <code>clink.gui_popups</code> setting.</li>
<li>Fixed the <code>completion-prefix-display-length</code> configuration variable in various cases.</li>
<li>Fixed timing condition that could potentially crash (regression introduced in v1.3.40).</li>
</ul>
<h4 id="v1340"><a class="wlink" href="#v1340"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.40 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Clink now has an icon, and also includes some colored icons for color-coding your shortcut files, terminal tabs, and etc.</li>
<li>Avoid mis-coloring a directory name as though it is an argmatcher (uses a background thread to stay responsive).</li>
<li>Fixed command word completion after <code>:chaincommand()</code>.  Now <code>cmd /c&nbsp;</code><kbd>Tab</kbd> works properly.</li>
<li>Fixed <code>:chaincommand()</code> to work properly in a nested argmatcher; it should imply <code>:nofiles()</code> otherwise it can pop out to the previous argmatcher instead of chaining.</li>
<li>Fixed <code>cmd</code> argmatcher to only chain after the <code>/c</code> and <code>/k</code> flags, to more accurately match actual cmd.exe syntax.</li>
<li>Fixed backward compatibility for argmatchers using the old v0.4.9 APIs with <a href="#argmatcher_functions">functions as argument options</a> (regression introduced in v1.2.7).</li>
<li>Fixed the <code>clink-select-complete</code> command with match display filtering.</li>
</ul>
<h4 id="v1339"><a class="wlink" href="#v1339"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.39 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>&quot;Use enhanced defaults&quot; now includes history timestamps.</li>
<li>Fixed delay while loading the history file when history timestamps are enabled (regression introduced in v1.3.18).</li>
<li>Fixed suggestions to resume after fully accepting an input line suggestion and then changing the text (regression introduced in v1.3.29).</li>
<li>Fixed reporting unbound commands in <code>clink-show-help</code> when arg is 4 (<kbd>Alt</kbd>-<kbd>4</kbd>,<kbd>Alt</kbd>-<kbd>H</kbd>) (regression introduced in v1.3.9).</li>
<li>Fixed to normalize path separators in a fully qualified pathname when using <code>clink.argmatcher(full_path)</code>.</li>
<li>The documentation now shows a link icon when hovering over any heading or API name, to make it easy to copy and share links.</li>
</ul>
<h4 id="v1338"><a class="wlink" href="#v1338"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.38 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.recognizecommand()</code> function that input line coloring classifiers can use to find whether to color a word as executable.  This is the same mechanism Clink uses internally, and the analysis is asynchronous.</li>
<li>Now <code>clink.argmatcher(command)</code> may be passed a fully qualified pathname for <span class="arg">command</span> to enable different argmatchers for programs with the same name.</li>
<li>Fixed argmatcher lookup to favor doskey aliases, so that e.g. &quot;<code>dir</code>&quot; can be aliased to an alternative program but &quot;<code>&nbsp;dir</code>&quot; can invoke the built-in dir command, and they can each have separate argmatchers.</li>
<li>Fixed the <code>oncommand</code> event to also fire when the command word offset changes, because adding/removing a leading space can change whether the command is an alias, which can make the typed command word resolve to a different file or program to invoke.</li>
<li>Fixed <code>line_state:getcommandoffset()</code> when the first word is quoted.</li>
<li>Fixed <code>line_state</code> parsing for input lines such as <code>foo.exe&amp;</code>, so that the <code>exec.enable</code> setting can generate matches properly.</li>
<li>Fixed completion so that CMD command names are not among the completions when preceded by a quote.</li>
<li>Fixed <code>color.argmatcher</code> color to not overwrite custom colors that may have already been applied.</li>
<li>Fixed <code>^</code> to not be a word break character when parsing the input line.</li>
</ul>
<h4 id="v1337"><a class="wlink" href="#v1337"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.37 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>When <code>argmatcher:addarg()</code> is passed a table containing <code>loopchars="<span class="arg">chars</span>"</code> then the <span class="arg">chars</span> are treated as delimiters for a single argument, and they do not move on to the next argument slot in the parser.</li>
<li>Added <code>clink.parseline()</code> to parse a string into one or more <code>line_state</code> objects.</li>
<li>Added <code>os.getdrivetype()</code> to get the drive type for a path; especially useful if your code needs to skip network paths.</li>
<li>Added <code>match_builder:setvolatile()</code> to force the matches to be used only once.  This makes it possible for match generators to produce different kinds of matches based on what has been typed, e.g. an email address match generator could list user names until <code>@</code> is typed, and then list domain names.</li>
<li>The <code>clink-diagnostics</code> command now lists registered argmatchers when the numeric arg &gt; 1 (<kbd>Alt</kbd>-<kbd>2</kbd>,<kbd>Ctrl</kbd>-<kbd>x</kbd>,<kbd>Ctrl</kbd>-<kbd>z</kbd>).</li>
<li>Rewrote the path parsing routines to properly respect UNC paths and <code>\\?\</code> syntax and <code>\\?\UNC\</code> syntax.</li>
<li>Fixed <code>clink.print(NONL, etc)</code> to not print a TAB character after a <code>NONL</code> that is the first argument.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/329">#329</a>; file completions may be mistakenly marked as directories (regression introduced in v1.2.36; affects only backward compatibility mode).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/326">#326</a>; <code>rl.expandtilde()</code> doesn&#39;t have a way to expand tildes everywhere in an input line string.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/325">#325</a>; potential hangs while typing if <code>%PATH%</code> contains a UNC path.</li>
</ul>
<h4 id="v1336"><a class="wlink" href="#v1336"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.36 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Incremental search in <code>clink-popup-history</code> now centers the found item if it is scrolled out of view.</li>
<li>Tilde expansion is supported for all Lua script directory names and for the <code>%CLINK_PROFILE%</code> environment variable (but there is a quirk, and for the profile directory tilde expands to <code>%LOCALAPPDATA%</code> for backward compatibility purposes).</li>
<li>Fixed some tilde expansion issues; quotes weren&#39;t always recognized, and embedded tildes could in some cases result in malformed paths.</li>
<li>Fixed semicolon delimiter in <code>%CLINK_COMPLETIONS_DIR%</code>.</li>
<li>Fixed stack exhaustion crash when using <code>inject --profile nul</code>.</li>
<li>Fixed detection of device names when coloring command words; a device name anywhere in a path is not a valid executable.</li>
</ul>
<h4 id="v1335"><a class="wlink" href="#v1335"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.35 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed finding a <code>completions</code> directory under the profile directory.</li>
<li>Fixed finding a <code>completions</code> directory under script directories set via <code>clink installscripts</code>.</li>
<li>Fixed <code>clink.refilterprompt()</code> when the prompt wraps past the edge of the screen and a right-sided prompt string is present.</li>
<li>Fixed <code>rl.getpromptinfo()</code> when the prompt wraps past the edge of the screen (the <code>promptline</code> and <code>inputline</code> fields were inaccurate).</li>
<li>Fixed consistent sort order for completion matches that differ only by case.</li>
<li>Fixed <code>undo</code> (<kbd>Ctrl</kbd>-<kbd>z</kbd>) after using <code>clink-reload</code> (<kbd>Ctrl</kbd>-</kbd>x</kbd>,<kbd>Ctrl</kbd>-<kbd>r</kbd>).  This also fixes <code>rl.ismodifiedline()</code> after <code>clink-reload</code>, which was causing clink-flex-prompt to show a modmark after <code>clink-reload</code>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/321">#321</a>; incremental search not working in the <code>clink-popup-history</code> command (regression introduced in v1.3.19).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/320">#320</a>; prompt becomes garbled when prompt is updated by async prompt filters and wraps past the edge of the screen and a right-sided prompt string is present.</li>
</ul>
<h4 id="v1334"><a class="wlink" href="#v1334"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.34 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improved error reporting in <code>lua.debug</code> mode for coroutine failures.</li>
<li>Fixed argmatcher flag definitions that begin with <code>+</code> (regression introduced in v1.3.11).</li>
<li>Fixed the updater when there are PowerShell configuration problems that cause internal errors unrelated to Clink&#39;s use of PowerShell.</li>
<li>Fixed potential coroutine failure if a <code>delayinit</code> argmatcher is still running after a new input line begins (regression introduced in v1.3.29).</li>
<li>Fixed <code>os.getfileattributes()</code>, <code>os.isfile()</code>, and <code>os.isdir()</code> to fail as intended when the input includes a wildcard (regression introduced in v1.1.0).</li>
<li>Fixed potential Lua error when typing a command name that included a wildcard, if the wildcard matched a file in a <code>completions</code> directory (regression introduced in v1.3.23, due to the <code>os.getfileattributes()</code> issue above).</li>
</ul>
<h4 id="v1333"><a class="wlink" href="#v1333"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.33 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>The <code>io.popenyield()</code> function now also returns a function that can be used to get the exit status from the command.</li>
<li>Fixed <code>io.popenyield()</code> for some programs (such as FC and XCOPY) that fail to start if the stdin handle is empty.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/312">#312</a>; slow startup due to inefficiency in the updater check at startup (regression introduced in v1.3.26).</li>
</ul>
<h4 id="v1331"><a class="wlink" href="#v1331"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.31 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Reverted the v1.3.29 change to <code>file:close()</code> that returned the process exit state even after <code>io.popen()</code> or <code>io.popenyield()</code> in a coroutine.  It had subtle negative side effects.</li>
</ul>
<h4 id="v1330"><a class="wlink" href="#v1330"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.30 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed the <code>menu-complete</code> family of commands for <code>fromhistory</code> argmatchers when <code>autosuggest.enable</code> is enabled.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/311">#311</a>; &quot;The handle is invalid.&quot; (regression introduced in v1.3.29).</li>
</ul>
<h4 id="v1329"><a class="wlink" href="#v1329"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.29 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed how <kbd>Right</kbd> and etc work after fully accepting an input line suggestion.  It shouldn&#39;t immediately show a new suggestion when the current suggestion is fully accepted (until the cursor is moved or the text changes), and <code>win-cursor-forward</code> shouldn&#39;t append characters from the previous command (e.g. when <code>clink.default_bindings</code> is <code>windows</code>).  Otherwise holding or double-pressing <kbd>Right</kbd> can accidentally turn into something the user didn&#39;t intend.</li>
<li>Fixed double-loading completion script when a command word includes a path component (e.g. &quot;c:\clink_dir\program.exe&quot; mistakenly attempted to load &quot;c:\clink_dir\program.lua&quot; instead of loading &quot;program.lua&quot; from the completions directories).</li>
<li>Fixed delayinit argmatchers so they don&#39;t get orphaned if a new input line starts before they finish.</li>
<li>Fixed <code>file:close()</code> to be able to return the process exit state even after <code>io.popen()</code> or <code>io.popenyield()</code> in a coroutine.</li>
</ul>
<h4 id="v1328"><a class="wlink" href="#v1328"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.28 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/309">#309</a>; some locales fail to parse the PowerShell version number.</li>
</ul>
<h4 id="v1327"><a class="wlink" href="#v1327"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.27 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added more detailed logging when the updater fails.</li>
<li>Added check to make sure PowerShell v5 is present when using <code>clink update</code>.</li>
<li>Added <code>unicode.fromcodepage()</code> and <code>unicode.tocodepage()</code> for UTF8 conversions.  One of the cases where this can be useful is when handling redirected output from programs that product output using the current Active Code Page.</li>
</ul>
<h4 id="v1326"><a class="wlink" href="#v1326"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.26 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>unicode.iter()</code>, <code>unicode.isnormalized()</code>, and <code>unicode.normalize()</code> for more precise UTF8 string manipulation.</li>
<li>The updater now includes an HTTP header to request no caching, in an effort to work around an issue on Win8.x.</li>
<li>The updater now updates the version number displayed in the &quot;Apps &amp; features&quot; section of Settings in Windows (or &quot;Add or Remove Programs&quot; in Control Panel in older versions of Windows).</li>
<li>Fixed the <code>directories.dupe_mode</code> setting in <code>clink set</code>.</li>
<li>Fixed the <code>remove-history</code> command when trying to remove a history entry added by the <code>add-history</code> command that hasn&#39;t yet been saved.</li>
<li>Fixed the <code>/D=</code> flag in the setup program.</li>
<li>Fixed potential double-load of scripts in the profile or binaries directories, due to an issue while searching <code>completions</code> directories (regression introduced in v1.3.24).</li>
<li>Fixed potential infinite loop when merging an argmatcher with itself.</li>
<li>Fixed potential accidental resume of an orphaned coroutine.</li>
<li>Fixed potential double-reporting of coroutine errors when the <code>lua.debug</code> setting is enabled.</li>
<li>Internal maintenance to the coroutine management system.</li>
</ul>
<h4 id="v1325"><a class="wlink" href="#v1325"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.25 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed updater when <code>%TEMP%</code> contains spaces.</li>
<li>Fixed executable file detection to color device names (such as nul, aux, con, lpt1, and com1) as neither recognized nor unrecognized.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/304">#304</a>; hang when typing device names (such as aux, con, lpt1, and com1) (regression introduced in v1.3.23).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/303">#303</a>; downloading latest update doesn&#39;t work on Windows 8.x.</li>
</ul>
<h4 id="v1324"><a class="wlink" href="#v1324"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.24 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Standardized the order in which <code>completions</code> directories are searched.</li>
<li>Fixed the second return value from <code>clink.popuplist()</code>, which was backwards by mistake.</li>
</ul>
<h4 id="v1323"><a class="wlink" href="#v1323"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.23 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Automatically loads Lua completion scripts from <code>completions</code> directories.  This allows you to optionally store completion scripts (argmatcher scripts) in a separate directory from your other Lua scripts, so that completion scripts are only loaded when needed.  This can speed up Clink start time, if you have a large volume of argmatcher scripts.  See <a href="#completion-directories">Completion Directories</a> for more information.</li>
<li>Fixed <code>clink.oncommand()</code> when redirection appears on the command line before the command name (e.g. <code>&gt;somefile command</code>).</li>
<li>Fixed both parts of <a href="https://github.com/chrisant996/clink/issues/300">#300</a>; unable to find latest release zip file (incomplete fix in v1.3.22 by mistake).</li>
</ul>
<h4 id="v1322"><a class="wlink" href="#v1322"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.22 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>When the <code>lua.debug</code> setting is enabled, any uncaught errors in coroutines are reported (and logged).</li>
<li>Fixed edge case that could cause Windows Terminal to temporarily stop responding mouse input.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/300">#300</a>; unable to find latest release zip file.</li>
</ul>
<h4 id="v1321"><a class="wlink" href="#v1321"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.21 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improved the auto-updater when there are multiple copies of Clink on a computer; it no longer needs to download the .zip update file multiple times.</li>
<li>Fixed mouse input when the console is scrolled.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/299">#299</a>; update shown even though up to date.</li>
</ul>
<h4 id="v1320"><a class="wlink" href="#v1320"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.20 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed potential crash in popup lists if there are only a few items (regression introduced in v1.3.18).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/296">#296</a>; on some computers closing CMD reports it&#39;s taking too long to close (the fix works around external issue).</li>
</ul>
<h4 id="v1319"><a class="wlink" href="#v1319"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.19 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>directories.dupe_mode</code> setting that controls how duplicates are handled in the directory history list for the <code>clink-popup-directories</code> command.</li>
<li>Added <kbd>Del</kbd> to delete a directory entry in the <code>clink-popup-directories</code> command.</li>
<li>Fixed obscure intermittent problem with <code>delayinit</code> argmatchers.</li>
<li>Fixed <kbd>Ctrl</kbd>-<kbd>C</kbd> and <kbd>Ctrl</kbd>-<kbd>Break</kbd> in CMD built-in commands (regression introduced in v1.3.14).</li>
</ul>
<h4 id="v1318"><a class="wlink" href="#v1318"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.18 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added a built-in updater for Clink, which is enabled by default.  When enabled, Clink reports when an update is available.  Run <code>clink update</code> to apply the update.</li>
<li>Added <code>clink-insert-suggested-line</code>, <code>clink-insert-suggested-word</code>, <code>clink-insert-suggested-full-word</code>, and <code>clink-accept-suggested-line</code> commands (see <a href="https://github.com/chrisant996/clink/issues/280">#280</a>).</li>
<li>Added optional timestamps in the history file.  The new <code>history.time_stamp</code> and <code>history.time_format</code> settings control whether timestamps are saved and whether/how timestamps are shown.</li>
<li>Added <code>cmd.altf4_exits</code> setting to control whether <kbd>Alt</kbd>-<kbd>F4</kbd> makes cmd.exe exit.  This is so that when the <code>terminal.raw_esc</code> setting is enabled pressing <kbd>Esc</kbd><kbd>Esc</kbd> behaves the same as <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>[</kbd> as expected, while still allowing <kbd>Alt</kbd>-<kbd>F4</kbd> to work.</li>
<li>Added horizontal scrolling in the history popup list.</li>
<li>Added <code>clink.onprovideline()</code> so scripts can register a function to be called after <code>onbeginedit</code> but before any input is processed.  The function can return a string to be executed as a command line, in which case the line editor is not invoked and the <code>onendedit</code> and <code>onfilterinput</code> events happen immediately (see <a href="https://github.com/chrisant996/clink/discussions/263">#263</a>).</li>
<li>Added <code>rl.gethistorycount()</code> and <code>rl.gethistoryitems()</code> to access the history items.</li>
<li>Added <code>os.gettemppath()</code> to get the system temporary directory.</li>
<li>Added <code>io.sopen()</code> to control sharing access when opening or creating a file.</li>
<li>Both <code>io.open()</code> and <code>io.sopen()</code> support the <code>&quot;x&quot;</code> file mode modifier (combined with <code>&quot;w&quot;</code> or <code>&quot;w+&quot;</code>), which makes the function fail if the file already exists.</li>
<li>Improved the <code>what-is</code> command to apply word wrapping to the command description.</li>
<li>Fixed generating matches from history (<code>fromhistory=true</code>) in argmatchers (regression introduced in v1.3.13).</li>
<li>Fixed executable file detection for file names that contain <code>+</code> characters.</li>
<li>Fixed some input keys accidentally handled by the OS sometimes (regression introduced in v1.3.6; original fix was introduced in v1.2.10).</li>
<li>Fixed timing conditions where other console programs could accidentally override Clink&#39;s mouse input mode.</li>
<li>Fixed left mouse click in popup lists when <code>terminal.mouse_input</code> is enabled.</li>
<li>Fixed alternate key bindings for copy (<kbd>Ctrl</kbd>-<kbd>Ins</kbd>) and paste (<kbd>Shift</kbd>-<kbd>Ins</kbd>).</li>
<li>Fixed description column alignment in <code>clink.popuplist()</code>.</li>
<li>Fixed keyboard driver for <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>[</kbd> when the <code>terminal.raw_esc</code> setting is enabled.</li>
<li>Fixed keyboard driver for <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>]</kbd> and <kbd>Alt</kbd>-<kbd>Ctrl</kbd>-<kbd>&lt;/kbd>.</li>
</ul>
<h4 id="v1317"><a class="wlink" href="#v1317"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.17 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed coloring executable files in the input line (some file types weren&#39;t detected correctly, and missing files were considered executable if their extension had a file type association).</li>
<li>Fixed a potential crash when coloring executable files in the input line (regression introduced in v1.3.16).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/281">#281</a>; screen height detected incorrectly (regression introduced in v1.3.16).</li>
</ul>
<h4 id="v1316"><a class="wlink" href="#v1316"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.16 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>os.sleep()</code>.</li>
<li>Revised the Clink documentation to directly include the Readline documentation.</li>
<li>Fixed executable file detection for file extensions that point at Progids instead of having a shell command.</li>
<li>Fixed double help message from <code>history</code> command when invalid flags are used.</li>
<li>Fixed crash when file permissions block accessing the history file, and the <code>history</code> command reports an error message accordingly.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/262">#262</a>; changing the terminal width between prompts (while a different program is running) caused Readline to start displaying the input line incorrectly.</li>
</ul>
<h4 id="v1315"><a class="wlink" href="#v1315"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.15 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/269">#269</a>; reverse video could get confused (regression introduced in v1.3, and incompletely fixed in v1.3.4).</li>
</ul>
<h4 id="v1314"><a class="wlink" href="#v1314"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.14 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li><kbd>Ctrl</kbd>+<kbd>Break</kbd> can now interrupt some operations, including match display and match generators and the <code>os.globfiles()</code> and <code>os.globdirs()</code> functions in Lua scripts.</li>
<li>Added <code>os.issignaled()</code> so Lua scripts can cooperatively interrupt themselves.</li>
<li>Improved responsiveness of completion commands when an async prompt filter is still running in the background (<code>io.popen()</code> and <code>os.execute()</code> are serialized in prompt filter coroutines, and are serialized separately in match generator coroutines, but are not serialized in other coroutines).</li>
<li>Fixed displaying pasted lines.</li>
<li>Fixed doskey aliases in pasted lines.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/268">#268</a>; crash when <code>copy</code> command prompts whether to overwrite a file (regression introduced in v1.3.13).</li>
</ul>
<h4 id="v1313"><a class="wlink" href="#v1313"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.13 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Argmatchers can use <code>:chaincommand()</code> to treat the rest of the command line as another command.<ul>
<li>Added an argmatcher for <code>cmd</code> that uses <code>:chaincommand()</code>.</li>
<li>E.g. so that completion after <code>cmd program </code> can be parsed by an argmatcher for <code>program</code> instead of <code>cmd</code>.</li>
</ul>
</li>
<li>Argmatchers can be more involved in parsing the command line, if they wish.  See <a href="#responsive-argmatchers">Responding to Arguments in Argmatchers</a> for more information.<ul>
<li>A callback function can be assigned to an argument position by including <code>onarg=your_callback_function</code> in the table given to <code>:addarg()</code>.</li>
<li>The <code>onarg</code> callback and match functions receive an additional <code>user_data</code> parameter.  When parsing begins, the <code>user_data</code> is an empty table, and your functions can set or get data from the table.  Each time a flag or argument links to another argmatcher, the new argmatcher gets a separate new empty <code>user_data</code> table.</li>
<li>The built-in <code>cd</code> and <code>pushd</code> argmatchers use this to influence match completion for the rest of the input line.  E.g. <code>pushd \foo &amp; program </code><kbd>Tab</kbd> uses <code>\foo</code> as the current directory when generating possible completions.</li>
</ul>
</li>
<li>Functions registered with <code>clink.onfilterinput()</code> may optionally return multiple lines in a table.</li>
<li>Fixed completions for words that contain <code>.</code>, such as <code>clink set color.</code><kbd>Tab</kbd> (regression introduced in v1.3.11).</li>
<li>Fixed doskey macros that use <code>echo off $T ...</code>.</li>
<li>Fixed input line coloring for a drive letter by itself.</li>
<li>Fixed input line coloring for a file that exists but is not executable.</li>
<li>Fixed obscure edge case with delayinit argmatchers and <code>operate-and-get-next</code>.</li>
<li>Fixed potentially inconsistent input line coloring when <code>classifier:applycolor()</code> is given an escape code that sets only the foreground or background color.</li>
</ul>
<h4 id="v1312"><a class="wlink" href="#v1312"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.12 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improved <code>clink-select-complete</code> to show inline descriptions as long as they don&#39;t require more than 9 rows to display the matches.</li>
<li>Added second argument to the <code>delayinit</code> function for an argmatcher.</li>
<li>Added <code>argmatcher:setflagsanywhere()</code> and <code>argmatcher:setendofflags()</code> to control where flags are recognized.</li>
<li>Added <code>clink.getargmatcher()</code> to find the argmatcher for a command name or command line (<code>line_state</code>).</li>
<li>Added <code>os.resolvealias()</code> to expand doskey alias(es) in a line of text.</li>
<li>Added <code>clink.oncommand()</code> to register a function to be called when a command is entered in the edit line.</li>
<li>Improved support for argmatcher non-flag argument values that end with <code>=</code>:  now they can have a linked argmatcher, and input line coloring is applied correctly.</li>
<li>Fixed quotes during completion (regression introduced in v1.3.11).</li>
<li>Fixed <code>cd /d dir</code> argmatcher (regression introduced in v1.3.11).</li>
<li>Fixed input line coloring for <code>&quot;echo&quot;</code> and other CMD commands; quotes disqualify a word from being a CMD command.</li>
<li>Fixed redundant argmatcher delayinit for flags.</li>
<li>Various minor backward compatibility fixes.</li>
</ul>
<h4 id="v1311"><a class="wlink" href="#v1311"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.11 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Updated the list of recognized CMD command names.</li>
<li>Better support for <code>(</code> and <code>)</code> when expanding doskey macros (e.g. now <code>( macro foo ) &amp; ( macro bar )</code> works).</li>
<li>Fixed word break characters during completion.  Only <code>=</code> <code>;</code> had ever worked before, and now the normal CMD completion word break characters work (including <code>,</code> <code>!</code> <code>+</code> <code>(</code> and many others).</li>
<li>Fixed match display to not force a single column unless there are descriptions present.</li>
<li>Fixed backward compatibility for <code>_argmatcher:add_arguments()</code> and <code>_argmatcher:set_arguments()</code> (they were mistakenly adding all the arguments into the first argument position).</li>
<li>Fixed backward compatibility for merging argmatchers.<ul>
<li>Merging argmatchers works again.  It is still a simple merge similar to v0.4.9, but it should be sufficient for common cases.</li>
<li>Fixed some bugs in how Clink v0.4.9 merged argmatchers (the unit tests for merging fail in v0.4.9).</li>
<li>Added support for some merging cases that weren&#39;t implemented yet in v0.4.9.</li>
</ul>
</li>
<li>And other obscure minor backward compatibility fixes.</li>
</ul>
<h4 id="v1310"><a class="wlink" href="#v1310"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.10 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>An argmatcher can extend itself on the fly, when needed.  For example, if it needs to parse arguments and flags from <code>--help</code> text, or if the available command arguments change based on the current directory, or etc.  See <a href="#adaptive-argmatchers">Adaptive Argmatchers</a> for more information.</li>
<li>Recognizes <code>^</code> and environment variables when coloring the command word, and when navigating by typing a directory name by itself.</li>
<li>Added input line coloring for the <code>rem</code> command.</li>
<li>Fixed memory corruption (regression introduced in v1.3.1).</li>
<li>Fixed input line coloring for <code>clink set setting value &amp; another command</code>.</li>
<li>Fixed argmatcher input line coloring for matches using the <code>{ match=&quot;abc&quot; }</code> syntax.</li>
<li>Fixed finding an argmatcher after <code>(</code> at the beginning of the line.</li>
<li>Fixed mouse clicks in <code>clink-select-complete</code> to insert the clicked match, in addition to highlighting it.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/252">#252</a>; <code>md</code> and <code>rd</code> should complete more than 1 argument.</li>
</ul>
<h4 id="v139"><a class="wlink" href="#v139"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.9 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>When <code>argmatcher:addarg()</code> is passed a table containing <code>fromhistory=true</code> then additional matches are generated by parsing the history file to find values for that argument slot from commands in the history file.</li>
<li>Added <code>clink.reclassifyline()</code> which triggers input line coloring and redisplays the input line.  This is intended for use by a coroutine that has made changes that will affect input line coloring.</li>
<li>Added <code>match_builder:isempty()</code>.</li>
<li>Added mouse horizontal wheel support in <code>clink-select-complete</code>.</li>
<li>Added back the <code>_argmatcher:setflagprefix()</code> function.</li>
<li>Loading Lua scripts now reports any syntax errors when the <code>lua.debug</code> setting is enabled.</li>
<li>Incorporate Lua 5.2.4 (minor patches to the Lua language).</li>
<li>Report a warning if the profile directory is configured to point at a file.</li>
<li>AutoRun is selected by default again in the installer (reverted change from v1.3.5).</li>
<li>The <code>terminal.raw_esc</code> setting now also address the same kind of problem with <kbd>Alt</kbd>+<kbd>[</kbd> and <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>O</kbd> as with the <kbd>Esc</kbd> key.</li>
<li>Fixed when an argmatcher adds nested tables of matches using the <code>{ match=&quot;abc&quot; }</code> syntax, so that the nested matches are added recursively and properly suppress adding a space after argument matches that end with <code>:</code> or <code>=</code>.</li>
<li>Fixed when <code>match_builder:addmatch()</code> and <code>match_builder:addmatches()</code> add nested tables of matches using the <code>{ match=&quot;abc&quot; }</code> syntax, so that the nested matches are added recursively.</li>
<li>Fixed when <code>match_builder:addmatch()</code> and <code>match_builder:addmatches()</code> add an <code>&quot;arg&quot;</code> match type, so that they automatically suppress appending a space after matches that end with <code>:</code> or <code>=</code> (the behavior was documented, but did not work correctly).</li>
<li>Fixed <code>remove-history</code> so that it updates the history offset correctly and subsequent editing operations affect the correct undo list.</li>
<li>Fixed obscure issues in how certain key binding patterns were reported by <code>clink-show-help</code> and <code>dump-functions</code>.</li>
<li>Fixed how <code>clink echo</code> reports <kbd>Ctrl</kbd>+<kbd>Backspace</kbd> and <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>Backspace</kbd>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/249">#249</a>; sending keystrokes from WScript does nothing for some keys.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/244">#244</a>; installer did not detect previous installation directory (regression introduced in v1.3.5; the fix takes effect on the next install <em>after</em> an install with the fix).</li>
</ul>
<h4 id="v138"><a class="wlink" href="#v138"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.8 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>terminal.mouse_modifier</code> setting and <code>%CLINK_MOUSE_MODIFIER%</code> environment variable; these can override the modifier keys that activate Clink mouse input.</li>
<li>Added <code>%CLINK_SETTINGS%</code> environment variable; this can override the directory where the <code>clink_settings</code> file is located.  This can be used to put it in a directory that syncs between computers, for example.</li>
<li>During <code>clink-select-complete</code> <kbd>Ctrl</kbd>+<kbd>Home</kbd> or <kbd>Ctrl</kbd>+<kbd>End</kbd> select the first or last match.</li>
<li>When <code>argmatcher:addarg()</code> is passed a table containing <code>nosort=true</code> then the matches are unsorted (displayed in the order listed in the table).</li>
<li>The .zip file now contains <code>_default_settings</code> and <code>_default_inputrc</code> so that they do not take effect unless manually renamed to remove the <code>_</code> name prefix.  This avoids changing the defaults unexpectedly.</li>
<li>Fixed mouse click+drag in the input line (it accidentally behaved like double click+drag).</li>
<li>Fixed the selection highlight width in <code>clink-select-complete</code> when some matches have descriptions but some do not.</li>
<li>Fixed <code>argmatcher:addargunsorted()</code> to turn off sort.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/239">#239</a>; crash when <kbd>F7</kbd> and <kbd>Del</kbd>.</li>
</ul>
<h4 id="v137"><a class="wlink" href="#v137"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.7 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Mouse click+drag now works.</li>
<li>Mouse click below <code>clink-select-complete</code> list expands the list instead of dismissing it.</li>
<li>Fixed responding to mouse clicks when the terminal&#39;s scrollback buffer is not empty (it only worked in Windows Terminal).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/237">#237</a>; installer does not maintain previously selected &quot;Autorun when cmd.exe starts&quot; (regression introduced in v1.3.5).</li>
</ul>
<h4 id="v136"><a class="wlink" href="#v136"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.6 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>terminal.mouse_input</code> setting; the default is <code>auto</code>.  <code>auto</code> lets mouse input work in ConEmu, or in the default Conhost terminal when Quick Edit mode is unchecked in the console Properties dialog.  See the documentation for more information.</li>
<li>Added <code>cua-select-word</code> command that selects the word at the cursor.</li>
<li><kbd>Ctrl</kbd>+<kbd>X</kbd>,<kbd>Ctrl</kbd>+<kbd>Z</kbd> with a numeric argument always includes registered Lua match generators, prompt filters, etc even when the <code>lua.debug</code> setting is off.</li>
<li>Fixed potential for a coroutine to have extra delays sometimes when continuing past the end of one edit line, and into the next edit line.</li>
<li>Fixed a potential busy loop when the command word is unrecognized.</li>
<li>Fixed Quick Edit mode in plain Conhost windows; it had always been disabled (I never noticed because I always configure console windows to disable it anyway).</li>
</ul>
<h4 id="v135"><a class="wlink" href="#v135"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.5 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Raised default <code>history.max_lines</code> to 10000.</li>
<li>Added an optional <code>default_inputrc</code> file:<ul>
<li>It is loaded from the profile directory, or from the binaries directory.</li>
<li>It uses the same format as the <code>.inputrc</code> file, and is loaded immediately before the <code>.inputrc</code> files.</li>
<li>It has the effect of superseding built-in default values for  Readline configuration variables and key bindings; any settings in the <code>.inputrc</code> supersede those in the <code>default_inputrc</code> file.</li>
</ul>
</li>
<li>The installer has a new &quot;Use enhanced default settings&quot; option which installs <code>default_settings</code> and <code>default_inputrc</code> files to provide default values that activate more of the Clink enhancements (to give a more enhanced experience &quot;out of the box&quot;).</li>
<li>The installer no longer defaults to installing AutoRun.</li>
<li>The installer no longer has an option to use versioned install directory; files are installed directly in the install directory.</li>
<li>Added <code>clink.runcoroutineuntilcomplete()</code> which allows a coroutine to keep running past the end of one edit line, and into the next edit line.</li>
<li>Fixed <code>os.execute()</code> return values when run in a coroutine (regression introduced in v1.3.2).</li>
<li>Fixed the selection color in <code>clink-select-complete</code> when <code>colored-stats</code> is off.</li>
<li>Fixed problems when displaying matches that exceed the screen width.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/231">#231</a>; installer fails sometimes when uncheck &quot;Use versioned install directory&quot;.</li>
</ul>
<h4 id="v134"><a class="wlink" href="#v134"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.4 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Pressing <kbd>Del</kbd> or <kbd>Ctrl</kbd>+<kbd>D</kbd> in a command history popup deletes the selected history entry.</li>
<li>Changed the default color for directory match completions to bright yellow (bright blue is hard to see).</li>
<li>Added an argmatcher for <code>history</code>.</li>
<li>Added an optional <code>default_settings</code> file:<ul>
<li>It is loaded from the profile directory, or from the binaries directory.</li>
<li>It uses the same format as the <code>clink_settings</code> file, and the values in it supersede the built-in default values for settings.</li>
<li>Settings are now saved if they are set (vs cleared by <code>clink set setting.name clear</code>), even if the set value matches the default value.</li>
</ul>
</li>
<li>Minor performance improvement when calculating columns widths when <code>match.fit_columns</code> is enabled.</li>
<li>Fixed accidentally using only one column in <code>clink-select-complete</code> when there are 9 or fewer matches and none of them have description text (regression introduced in v1.3.3).</li>
<li>Fixed <kbd>Shift</kbd>+<kbd>Right</kbd> to accept the next full word of the suggestion without clearing the rest of the suggestion (regression introduced in v1.3.3).</li>
<li>Fixed terminal emulation for the reverse video escape codes (this also fixes the right border color of the selected item in popup lists).</li>
<li>Fixed buffer overrun in Readline <code>yank-last-arg</code> when the previous command ends in a backslash.</li>
<li>Fixed the Readline History library to not apply Unix style backslash escaping in CMD (e.g. in <code>program subdir\ text</code> there are 3 arguments; the <code>\ </code> is not an escaped space).</li>
<li>Fixed crash when displaying matches and <code>match.fit_columns</code> is enabled and the terminal width is greater than 150 characters.</li>
<li>Fixed potential busy loop during idle (until a key is pressed) in certain cases (regression introduced in v1.3.3).</li>
<li>Fixed the emulated terminal color conversions from 8-bit and 24-bit.</li>
<li>Fixed cursor style when using <code>clink</code> to start a new command window from inside a Windows Terminal window.</li>
<li>Fixed quirk when using Clink file completion to complete a directory name for <code>clink --profile \foo\</code>, so that the path doesn&#39;t end up malformed.</li>
<li>Fixed a memory leak.</li>
</ul>
<h4 id="v133"><a class="wlink" href="#v133"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.3 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Match completion display calculates column widths to fit the most columns on the screen.  Can be controlled by the <code>match.fit_columns</code> and <code>match.limit_fitted_columns</code> settings.</li>
<li>Match descriptions are right-justified when more than one column is displayed, to help more columns fit.</li>
<li>When multiple columns of matches are displayed with descriptions, the descriptions are bracketed with parentheses for readability and accessibility purposes.</li>
<li><kbd>F1</kbd> in <code>clink-select-complete</code> toggles between showing descriptions at the bottom vs with the matches.</li>
<li>Added <code>match.substring</code> setting that uses a substring search for completions if none are found with a prefix search.</li>
<li>Added <code>color.executable</code> and <code>color.unrecognized</code> settings.  When set, these cause the command word (the first word) to be colored if it is recognized as an executable file, or is not recognized as a command, doskey macro, directory, argmatcher, or executable file.  Lookups are asynchronous for optimum responsiveness while typing.</li>
<li>Argmatchers can hide certain flags (e.g. synonyms) by using <code>argmatcher:hideflags()</code>.</li>
<li>Argmatchers can disable sorting matches by using <code>argmatcher:addargunsorted()</code> or <code>argmatcher:addflagsunsorted()</code>.</li>
<li>Generators can disable sorting matches by using <code>match_builder:setnosort()</code>.</li>
<li>Fixed duplicated closing quote in <code>clink-select-complete</code>.</li>
<li>Fixed display of non-directory matches that contain slashes, such as git branch names (regression introduced in v1.3.1).</li>
<li>Fixed match display filtering in <code>clink-select-complete</code> (regression introduced in v1.3.1).</li>
<li>Fixed the <code>insert-comment</code> command (regression introduced in v1.2.44).</li>
<li>Fixed sorting flag completions so that all <code>-</code> flags precede any <code>--</code> flags.</li>
<li>Fixed a couple of memory leaks, and added memory tracking system to more easily catch leaks.</li>
<li>Various minor fixes in <code>clink-select-complete</code>.</li>
</ul>
<h4 id="v132"><a class="wlink" href="#v132"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.2 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <kbd>Shift</kbd>+<kbd>Space</kbd> as a recognized key.  By default it is bound to <code>clink-shift-space</code>, which invokes whatever is bound to the normal <kbd>Space</kbd> key, so that it continues to behave as before unless you specifically bind something else to the <kbd>Shift</kbd>+<kbd>Space</kbd> key.</li>
<li>Added <code>clink-magic-suggest-space</code> command which inserts the next full suggested word (if any) up to a space, and then inserts a space.  Binding this to <kbd>Shift</kbd>+<kbd>Space</kbd> can be very handy.</li>
<li>Added <code>cmd.admin_title_prefix</code> setting that can replace the &quot;Administrator: &quot; console title prefix.</li>
<li>When loading settings, if there is no setting file yet then Clink looks for a <code>default_settings</code> file in the binaries directory and uses that to initalize the settings.</li>
<li>Added <code>CLINK_TERM_VE</code> and <code>CLINK_TERM_VS</code> environment variables that can be set to override the normal (insert mode) and enhanced (overwrite mode) cursor styles, respectively.</li>
<li>Various minor fixes to how the cursor style is updated; the visible bell now works in Windows Terminal.</li>
<li>When <code>os.execute()</code> is used in a coroutine, it automatically yields until complete.</li>
<li>Fixed async match generators (during autosuggest) to be allowed to finish, instead of getting canceled on every keystroke if they hadn&#39;t finished yet.</li>
<li>Fixed cursor blink, which was accidentally disabled (regression introduced in v1.2.44).</li>
<li>Fixed the <code>win-cursor-forward</code> command so it doesn&#39;t trigger generating a new suggestion if there isn&#39;t already one.</li>
</ul>
<h4 id="v131"><a class="wlink" href="#v131"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3.1 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>autosuggest.async</code> setting (on by default) that lets suggestions generate matches asynchronously to stay responsive while typing.</li>
<li>Added <code>match.max_rows</code> setting that limits the number of rows <code>clink-select-complete</code> can use.</li>
<li>Added <code>match.preview_rows</code> setting that makes <code>clink-select-complete</code> show the specified number of rows of matches as a preview, and expands to show the full set of matches when the selection moves past the preview rows (similar to completion in the fish shell).</li>
<li>Added <code>color.comment_row</code> setting that chooses the color for the comment row in <code>clink-select-complete</code>.  The comment row shows the &quot;and <em>N</em> more matches&quot; or &quot;rows <em>X</em> to <em>Y</em> of <em>Z</em>&quot; messages.</li>
<li>Changed arrow keys in <code>clink-select-complete</code> to wrap on both horizontal and vertical edges (similar to the fish shell).</li>
<li>Changed arrow keys in <code>clink-select-complete</code> at the beginning and end of the list to wrap to the other end based on the <code>menu-complete-wraparound</code> config variable.</li>
<li>Match generators can now specify an append character (or suppress appending) on a per-match basis.</li>
<li>The <code>clink-diagnostics</code> command lists prompt filters, generators, classifiers, and suggesters when a numeric argument is given (e.g. <kbd>Alt</kbd>+<kbd>1</kbd> then <kbd>Ctrl</kbd>+<kbd>X</kbd>,<kbd>Ctrl</kbd>+<kbd>Z</kbd>).</li>
<li>The <code>os.globdirs()</code> and <code>os.globfiles()</code> functions now automatically yield periodically if used inside a coroutine.</li>
<li>The <code>io.popen()</code> function now automatically yields periodically if used in read mode (the default) inside a coroutine.</li>
<li>The <code>io.popenyield()</code> function now automatically falls back to <code>io.popen()</code> if used outside a coroutine.</li>
<li>Fixed input line coloring to operate on only the input line, not including the suggestion.</li>
<li>Fixed display when typing to filter <code>clink-select-complete</code> (regression introduced in v1.2.49).</li>
<li>Fixed display of <code>clink-select-complete</code> when the current match changes the number of visible lines in the edit buffer.</li>
<li>Fixed displaying matches when only a drive letter is entered.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/216">#216</a>; Long escaped URLs do not display correctly in a prompt.</li>
</ul>
<h4 id="v13"><a class="wlink" href="#v13"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.3 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added back <code>mark-modified-lines</code> support (was removed in v1.2.36).</li>
<li>Added <code>rl.ismodifiedline()</code> function so prompt filters can show a modified line indicator if they wish.</li>
<li>Added <code>autosuggest.original_case</code> setting (on by default) that controls whether parts of the line are updated to use the suggestion&#39;s original capitalization, or to keep the typed capitalization.</li>
<li>Added <code>terminal.east_asian_ambiguous</code> setting that controls how the width is determined for the <a href="https://www.unicode.org/reports/tr11-2/#:~:text=East%20Asian%20Ambiguous%20%28A%29%20-%20Characters%20that%20occur,sets%2C%20but%20also%20some%20of%20the%20mathematical%20symbols%29.">East Asian Ambiguous</a> range of characters (which includes the lambda character).  This may help with working around display issues in some terminal hosts.</li>
<li>Added help descriptions for many vi mode commands.</li>
<li>Improved relevance of <code>completion</code> suggestions by suppressing them when the word at the cursor is empty.</li>
<li>The <code>:suggest()</code> function on suggesters can now return a suggestion string and an offset where the suggestion begins in the input line.</li>
<li>Fixed a limitation in Readline so that <code>completion-prefix-display-length</code> and <code>colored-completion-prefix</code> can coexist.</li>
<li>Fixed when temp files from <code>io.popenyield()</code> get deleted.  They were lingering until Lua garbage collection, but they can be deleted almost immediately.</li>
<li>Fixed the order of initialization:  first the Readline .inputrc config file is loaded, and then Lua scripts are loaded.  This enables Lua scripts to reliably override Readline config variables if they wish (for example so a prompt filter can clear <code>emacs-mode-string</code> and print its own keymap indicator as part of the prompt).</li>
<li>Fixed transient prompt to not show keymap mode strings or the modified line mark.</li>
<li>Fixed vi mode key bindings that can accept suggestions.</li>
<li>Fixed missing <code>vi-undo</code> command; it was pre-bound to some keys but could not be bound to any other keys.</li>
<li>Fixed the &quot;show help&quot; commands when listing unbound commands:  unbound vi mode commands should not be listed in emacs mode because the vi mode commands are only meant to be used in vi mode, and are not meant to be bound to custom keys.</li>
<li>Fixed memory leak in suggestions.</li>
</ul>
<h4 id="v1250"><a class="wlink" href="#v1250"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.50 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl.insertmode()</code> function to get or set whether insert mode is active.</li>
<li>Added <code>clink.onaftercommand()</code> so scripts can register a function to be called after every input command (key binding).</li>
<li>Added additional failure logging during <code>clink inject</code>.</li>
</ul>
<h4 id="v1249"><a class="wlink" href="#v1249"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.49 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>cua-previous-screen-line</code> and <code>cua-next-screen-line</code>, bound to <kbd>Shift</kbd>+<kbd>Up</kbd> and <kbd>Shift</kbd>+<kbd>Down</kbd>, to extend the text selection up/down by one screen line.</li>
<li>Updated match generator for <code>clink set autosuggest.strategy</code> to list the available suggestion generators.</li>
<li>The <code>clink-show-help</code> and <code>clink-popup-show-help</code> commands can include commands that aren&#39;t bound to any key, when the numeric argument is 4 (e.g. <kbd>Alt</kbd>+<kbd>4</kbd> then <kbd>Alt</kbd>+<kbd>H</kbd>).</li>
<li>The <code>rl.getkeybindings()</code> function takes an optional <code>mode</code> argument to control sorting and whether to include commands that aren&#39;t bound to any key.</li>
<li>Generating suggestions skips generating match completions when the current word looks like a UNC path.  This avoids pauses while typing that would otherwise occur when accessing networked drives.</li>
<li>Fixed <kbd>Alt</kbd>+<kbd>Right</kbd> so it accepts the next word of the suggestion, just like <kbd>Ctrl</kbd>+<kbd>Right</kbd> does.</li>
<li>Fixed the <code>clink-paste</code> command so it sets the mark to the cursor point prior to pasting.</li>
<li>Fixed when <code>history.dupe_mode</code> is &quot;erase_prev&quot; and <code>history.shared</code> starts true but changes to false; subsequent commands were not added to the history properly anymore in that session (regression introduced in v1.1.0).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/210">#210</a>; <code>clink-select-complete</code> drawing bug with RPROMPT.</li>
</ul>
<h4 id="v1248"><a class="wlink" href="#v1248"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.48 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li><kbd>Ctrl</kbd>+<kbd>Right</kbd> now inserts the next word of the suggestion the same way it would move to the next word, and <kbd>Shift</kbd>+<kbd>Right</kbd> inserts the next full word of the suggestion up to a space.</li>
<li>Keys like <kbd>Home</kbd>/<kbd>End</kbd>, <kbd>Shift</kbd>+<kbd>Left</kbd>/<kbd>Right</kbd>, and <kbd>Ctrl</kbd>+<kbd>Left</kbd>/<kbd>Right</kbd> work in VI mode.</li>
<li>Fixed input line coloring glitch when color settings use the <code>sgr</code> syntax.</li>
</ul>
<h4 id="v1247"><a class="wlink" href="#v1247"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.47 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added autosuggestions similar to the Fish shell.<ul>
<li>Turn on by running <code>clink set autosuggest.enable true</code>.  See the <code>autosuggest.enable</code> and <code>autosuggest.strategy</code> Clink settings for details.</li>
<li>Added <code>clink.suggester()</code> function to create new suggestion generators that can be used in the <code>autosuggest.strategy</code> setting.</li>
</ul>
</li>
<li>The <code>clink-diagnostics</code> command also lists match generators registered by <code>clink.generator()</code>.</li>
<li>Fixed the color when the <code>horizontal-scroll-mode</code> config variable is <code>on</code>.</li>
<li>Fixed the transient prompt when using Help commands.</li>
<li>Fixed the <code>clink autorun</code> commands when paths contain Chinese characters and the system code page isn&#39;t UTF8.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/209">#209</a>; <code>clink-popup-show-help</code> command fails.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/208">#208</a>; orphaned symlinks are colored wrong.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/203">#203</a>; unable to inject when Clink binary directory contains Chinese characters (regression introduced in v1.0.0).</li>
</ul>
<h4 id="v1246"><a class="wlink" href="#v1246"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.46 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added a <code>magic-space</code> command that performs history expansion on the text before the cursor point and then inserts a space.  Note: this is slightly different than one in bash, which performs history expansion on the whole line and can end up inserting the space in a wrong spot.</li>
<li>Added <code>rl.getbinding()</code> and <code>rl.setbinding()</code> functions to query or override key bindings.</li>
<li>Added a <code>clink.refilterprompt()</code> function to invoke prompt filtering on demand.</li>
<li>The <code>clink-popup-directories</code> command is now bound by default to <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>PgUp</kbd>.</li>
<li>The <code>clink-select-complete</code> command is now bound by default to <kbd>Ctrl</kbd>+<kbd>Space</kbd>.</li>
<li>Fixed the <code>clink-popup-history</code> command so incremental search works again (regression introduced in v1.2.36).</li>
<li>Fixed messages sometimes not being erased when finished, e.g. when using <kbd>Alt</kbd>+<kbd>digits</kbd> (regression introduced in v1.1.11).</li>
<li>Fixed potential for prompt to redraw incorrectly after showing help when the <code>prompt.transient</code> setting is enabled.</li>
<li>Fixed settings defined by Lua scripts so that the Lua scripts can reliably see the current values even while the Lua scripts are being loaded or reloaded.</li>
</ul>
<h4 id="v1245"><a class="wlink" href="#v1245"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.45 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Clarified description of the <code>match.wild</code> Clink setting.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/196">#196</a>; installer checkboxes not working properly.</li>
</ul>
<h4 id="v1244"><a class="wlink" href="#v1244"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.44 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <code>clink.ondisplaymatches()</code> so it receives the right match strings (regression introduced in v1.2.39).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/194">#194</a>; argmatcher not found when command name contains a dash (regression introduced in v1.1.5).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/176">#176</a>; use current installation dir when upgrading clink.  Now the installer remembers the chosen installation directory and defaults to the same place when installing an upgrade (all of the checkbox states are remembered, in fact).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/171">#171</a>; have a way to override install directory.  Now the installer has a checkbox whether to install to a versioned directory (recommended).  Unchecking the box installs program files to a <code>bin</code> subdirectory, instead of the usual versioned subdirectory.</li>
</ul>
<h4 id="v1243"><a class="wlink" href="#v1243"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.43 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed lingering issues with non-ASCII characters in path names in Clink (follows up on the preceding fixes for non-ASCII user name characters).</li>
</ul>
<h4 id="v1242"><a class="wlink" href="#v1242"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.42 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed potential for history file to get corrupted during compacting, if multiple Clink instances are running concurrently.</li>
<li>Fixed <code>clink inject</code> when the user account name contains non-ASCII characters (regression introduced in v1.0.0).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/193">#193</a>; consider removing the 50K history limit:  The <code>history.max_lines</code> Clink setting once again supports 0 to mean unlimited.  Note that as the history file grows larger, it takes longer to load.  If the size becomes a problem, you can use <code>clink history compact &lt;n&gt;</code> to prune the history file to N items as well as compacting it (removing deleted items).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/192">#192</a>; completing <code>~</code> by itself does nothing:  Completing <code>~</code> by itself now inserts the %USERPROFILE% directory.  This is different than bash, because on Windows it doesn&#39;t make sense for ~ by itself to complete other user accounts.  This is a convenient way to expand tilde into a path that Windows understands.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/191">#191</a>; <code>cd /d -</code> isn&#39;t supported:  The <code>cd -</code> feature now supports <code>cd /d -</code> as well.  It also supports <code>cd -</code> even if there is a doskey macro defined for <code>cd</code>.</li>
</ul>
<h4 id="v1241"><a class="wlink" href="#v1241"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.41 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/187">#187</a> differently:  <code>doskey.enhanced</code> is <code>true</code> by default again, but if a macro contains <code>$*</code> or <code>$1</code>...<code>$9</code> tags within quotes then <code>|</code> and <code>&amp;</code> symbols are part of the arguments, not command separators (and expansion stops after that macro).</li>
<li>Fixed compatibility when <code>doskey.enhanced</code> is <code>false</code>; <code>alias|whatever</code> should not expand <code>alias</code> because there is no space after it.</li>
<li>Fixed doskey expansion when <code>&gt;&amp;</code> redirection symbol is present; <code>command &gt;&amp; alias</code> should not attempt to expand <code>alias</code> because it&#39;s a redirection file name, not a command.</li>
</ul>
<h4 id="v1240"><a class="wlink" href="#v1240"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.40 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed display quirks when an empty <code>display</code> or <code>description</code> string is provided by a match generator.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/187">#187</a>; the <code>doskey.enhanced</code> setting interferes with some macros (regression introduced in v1.0.0).  The setting is now <code>false</code> by default, because of the incompatibilities it can cause.</li>
</ul>
<h4 id="v1239"><a class="wlink" href="#v1239"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.39 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed regression in match display filtering when listing possible completions (regression introduced in v1.2.38).</li>
<li>Fixed display quirks in the <code>clink-select-complete</code> command when descriptions are at the bottom.</li>
</ul>
<h4 id="v1238"><a class="wlink" href="#v1238"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.38 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Enhancements for match descriptions (which are displayed when listing possible completions):<ul>
<li>Argmatchers can provide description strings for flags and/or args (e.g. &quot;Verbose output&quot; for <code>-v</code>, or &quot;Do nothing&quot; for <code>-n</code>, etc).</li>
<li>Argmatchers can also provide argument info strings for flags and/or args.  These are hint strings, and not part of the completion match itself.  E.g. &quot;linenum&quot; for <code>--line</code>, which gets displayed as &quot;--line linenum&quot; when listing possible completions, but only &quot;--line&quot; is inserted.</li>
<li>Match generators can provide <code>display</code> and <code>description</code> strings when adding matches (<code>match_builder:addmatch()</code> and <code>match_builder:addmatches()</code>) -- it is no longer necessary to use <code>clink.ondisplaymatches()</code>.</li>
<li>The <code>clink-select-complete</code> command now shows match descriptions in a single line at the bottom (instead of in a second column) when there are more than 9 matches.</li>
<li>Added <code>color.arginfo</code> Clink setting for the arguments for a flag or argument when listing possible completions.</li>
<li>Added <code>color.description</code> Clink setting for the default match description color when listing possible completions.</li>
<li>Truncate descriptions when a line will wrap (or has wrapped) when listing possible completions.</li>
</ul>
</li>
<li>Command separators (<code>&amp;</code>, <code>|</code>) and redirection symbols (<code>&lt;</code>, <code>&gt;</code>, <code>&gt;&amp;</code>) are colored in the input line, using colors from the new <code>color.cmdsep</code> and <code>color.cmdredir</code> Clink settings.</li>
<li>Fixed <kbd>Backspace</kbd> in <code>clink-select-complete</code>; it had sometimes missed expanding the set of matches accordingly.</li>
<li>Fixed the <code>clink-popup-history</code> command to respect the <code>search-ignore-case</code> setting.</li>
<li>Fixed <code>:nofiles()</code> to dead-end an argmatcher (regression introduced in v1.0.0).</li>
<li>Fixed <code>clink.ondisplaymatches()</code> and <code>clink.onfiltermatches()</code> when there&#39;s only 1 match.</li>
<li>Fixed incremental find, find next, and find previous in console text popup lists.</li>
<li>Fixed backward compatibility for the old matching filtering API.</li>
<li>Fixed several other minor issues with match display filtering.</li>
<li>Fixed intermittent incorrect match generation for <code>/flag:</code> or <code>/flag=</code> flags.</li>
<li>Fixed duplicate removal with deprecated match generators.</li>
<li>Fixed when nested deprecated argmatchers are exhausted (regression introduced in v1.2.36).</li>
<li>Fixed deprecated match generators to not infer whether matches are filenames, to match the behavior of the v0.4.9 API.</li>
<li>Fixed how <code>match.wild</code> works with deprecated match generators; e.g. arg completions for <a href="https://github.com/skywind3000/z.lua">z.lua</a> weren&#39;t working (regression introduced in v1.1.5).</li>
<li>Fixed argmatcher for <code>clink --profile</code> so it produces directory matches.</li>
<li>Fixed <code>%CLINK_RPROMPT%</code> alignment when <code>color.prompt</code> is set.</li>
</ul>
<h4 id="v1237"><a class="wlink" href="#v1237"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.37 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/180">#180</a>; <code>rl.collapsetilde()</code> behaves erratically.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/179">#179</a>; incorrect handling for certain keys on some keyboard layouts.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/178">#178</a>; OneDrive folders mistakenly show up as symlinks.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/177">#177</a>; be silent about autorun injection into TCC.</li>
</ul>
<h4 id="v1236"><a class="wlink" href="#v1236"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.36 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>win-history-list</code> command bound to <kbd>F7</kbd> by default.  This shows the history list, and executes the selected history entry.</li>
<li>Changed all of the popup list commands to show popups using console text rather than GUI windows.<ul>
<li>Added a <code>color.popup</code> Clink setting for the popup colors.  If not set, the console&#39;s popup colors are used.</li>
<li>Added a <code>color.popup_desc</code> Clink setting for the popup colors for the description column(s).  If not set, a color is chosen to complement the console&#39;s popup colors.</li>
<li>Added a <code>clink.gui_popups</code> Clink setting that can be set to use GUI popup windows as before (the <code>color.popup</code> settings have no effect on GUI popup windows).</li>
</ul>
</li>
<li>Key bindings now support <kbd>Enter</kbd> plus combinations of the <kbd>Ctrl</kbd>, <kbd>Shift</kbd>, or <kbd>Alt</kbd> modifier keys.</li>
<li>Added more backward compatibility shims.</li>
<li>Fixed the <code>clink-select-complete</code> command when <code>print-completions-horizontally</code> is on (and also minor issues when it is off).</li>
<li>Fixed the <code>clink-select-complete</code> command when a Lua script has used <code>rl.setmatches()</code> to provide a custom list of matches.</li>
<li>Fixed the <code>clink-menu-complete-numbers</code> family of commands (regression introduced in v1.2.32).</li>
<li>Fixed a situation where the scrolling keys could stop working (regression introduced in v1.2.24).</li>
<li>Fixed flags at the end of a linked parser, and fixed args at the end of two or more nested linked parsers (regression introduced in v1.0.0).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/172">#172</a>; add a choice in the installer to not add Start menu shortcuts.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/129">#129</a>; Bug completing files with - or _ characters (regression introduced in v1.0.0).</li>
</ul>
<h4 id="v1235"><a class="wlink" href="#v1235"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.35 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl_buffer:getanchor()</code> to get the text selection anchor (there is no set function; use <code>rl.invokecommand()</code> to invoke commands to set/extend the selection if needed).</li>
<li>Reverted back to using IAT hooking (see issue #169).</li>
<li>Fixed CUA selection commands invoked by <code>rl.invokecommand()</code>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/170">#170</a>; directory symlink completion is truncated when <code>mark-directories</code> is <code>off</code> in the .inputrc file.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/169">#169</a>; incompatibility between AutoHotkey, AnsiCon, and Clink when all three are used in CMD&#39;s AutoRun regkey (regression introduced in v1.2.33).</li>
</ul>
<h4 id="v1234"><a class="wlink" href="#v1234"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.34 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Changed &quot;luafunc:&quot; macro functions to receive the <code>line_state</code> as a second argument.</li>
<li>Fixed <kbd>Right</kbd> when <code>clink.default_bindings</code> is <code>windows</code>.</li>
<li>Fixed <code>exec.files</code> setting so completion works when a path is specified (e.g. <code>subdir\foo</code>) (regression introduced in v1.2.33).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/158">#158</a>; crash when a keyboard macro contains <code>\015</code> (regression introduced in v1.0.0).</li>
</ul>
<h4 id="v1233"><a class="wlink" href="#v1233"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.33 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Rewrote how Clink hooks APIs in CMD.EXE; it no longer uses any IAT hooking, and exclusively uses Detours.</li>
<li>Added <code>clink.default_bindings</code> Clink setting to choose between <code>bash</code> or <code>windows</code> default key bindings.  <code>bash</code> key bindings are still the default, for compatibility with existing Clink installations.</li>
<li>Added <code>exec.aliases</code>, <code>exec.commands</code>, and <code>exec.files</code> Clink settings to further customize how matches are generated for the first word when the <code>exec.enable</code> Clink setting is enabled.</li>
<li>Small performance optimization in the hooked <code>WriteConsoleW()</code> system API.</li>
<li>Added logging for rare error case during inject.</li>
<li>Added default key bindings for <kbd>F1</kbd> through <kbd>F9</kbd> that mimic the default Windows console function key inputs.</li>
<li>Added <code>clink-selectall-conhost</code> command that mimics the default Windows console Select All command.</li>
<li>Fixed <code>clink-select-complete</code> to remove duplicate matches if generators try to add duplicate matches.</li>
<li>Fixed script error when <code>%PATH%</code> is not set and <code>exec.enable</code> and <code>exec.path</code> are both enabled.</li>
<li>Fixed some quirks when using the <code>quoted-insert</code> command.</li>
</ul>
<h4 id="v1232"><a class="wlink" href="#v1232"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.32 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl_buffer:setargument()</code> function for a &quot;luafunc:&quot; macro to be able to set Readline&#39;s numeric argument.</li>
<li>Added <code>os.getclipboardtext()</code> and <code>os.setclipboardtext()</code> functions.</li>
<li>Added extra defense against antivirus interference (if it interferes when Clink inspects the target process, but permits Clink to inject into the target process).</li>
<li>Fixed cooperation between &quot;luafunc:&quot; macros and CUA selection commands (e.g. <kbd>Shift</kbd>+<kbd>End</kbd>).</li>
<li>Fixed <code>rl_buffer:getcursor()</code> and the return value from <code>rl_buffer:setcursor()</code>; both returned one less than the actual cursor position.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/162">#162</a>; clink completion shows script error (regression introduced in v1.2.31).</li>
</ul>
<h4 id="v1231"><a class="wlink" href="#v1231"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.31 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink uninstallscripts --all</code> to clear all script paths installed by <code>clink installscripts</code>.</li>
<li>Added <code>os.touch()</code> function to set the access and modified times for a file.</li>
<li>Added more fields in <code>os.globdirs()</code> and <code>os.globfiles()</code> when <code>extrainfo</code> is requested.</li>
<li><strong>Potential Breaking Change:</strong> Fixed <code>os.globdirs()</code> and <code>os.globfiles()</code> to only return extra info when actually requested (regression introduced in v1.1.8).<ul>
<li>This unfortunately changes the scheme and may break some scripts if they requested no extra info, but used the extra info anyway.</li>
</ul>
</li>
<li>Fixed crash in <code>clink-select-complete</code> when a match display filter returns nil.</li>
<li>Fixed <code>ondisplaymatches()</code> which was receiving one fewer matches than it should (related to <a href="https://github.com/chrisant996/clink/issues/124">#124</a>).</li>
<li>Fixed <code>ondisplaymatches()</code> which was not using the word break info correctly (from generators&#39; <code>:getwordbreakinfo()</code> functions).</li>
<li>Fixed <code>word_classifications:applycolor()</code>; the input line didn&#39;t necessarily refresh correctly after a custom classifier applied custom colors.</li>
<li>Fixed potential stray inaccurate colorations when coloring the input for <code>clink set color.something some_value</code>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/161">#161</a>; <code>clink installscripts</code> garbles previously-installed script paths when installing a new one.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/155">#155</a>; <code>settings.set()</code> doesn&#39;t update the settings file.</li>
</ul>
<h4 id="v1230"><a class="wlink" href="#v1230"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.30 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Replaced the built-in Lua implementation of <code>os.clock()</code> so it doesn&#39;t stop working after the program has been running for more than 24 days (which caused asynchronous prompt filtering to stop working).  As a side effect, the new <code>os.clock()</code> has microsecond precision instead of millisecond precision.</li>
<li>Fixed coroutine throttling.  It was meant to prevent running more than once per 5 seconds, but accidentally forced running every 5 seconds, even if the coroutine was registered to run less often.</li>
</ul>
<h4 id="v1229"><a class="wlink" href="#v1229"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.29 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>prompt.transient</code> Clink setting which can collapse prior prompts to a condensed form.  The new <code>%CLINK_TRANSIENT_PROMPT%</code> and <code>%CLINK_TRANSIENT_RPROMPT%</code> environment variables supply the initial prompt strings, and prompt filters can define <code>:transientfilter()</code> and <code>:transientrightfilter()</code> functions to filter the transient prompt.</li>
<li>Added <code>clink.logo</code> Clink setting to globally control what startup logo is shown (full copyright logo by default, or a short version logo, or no startup logo).</li>
<li>Added <code>console.readinput()</code> function which waits for one key input, and returns the key sequence string for the key.</li>
<li>Added <code>clink.reload()</code> function which reloads Lua scripts and the Readline config file at the next prompt.</li>
<li>Added logging for more possible failure points while injecting Clink into the host process.</li>
<li>Added default key bindings for <kbd>Ctrl</kbd>+<kbd>Up</kbd> and <kbd>Ctrl</kbd>+<kbd>Down</kbd> to scroll the screen one line, like conhost normally does.</li>
<li>Now <code>clink set cl*</code> lists all settings that begin with <code>cl</code> (the star wildcard is only supported at the end of the string).</li>
<li>Documentation includes a link to the new <a href="https://github.com/chrisant996/clink-flex-prompt">clink-flex-prompt</a>.</li>
<li>Fixed the Lua debugger to support printing UTF8 text, and to escape string variable contents to avoid escape code side effects.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/154">#154</a>; crash when <code>settings.set(&quot;some_setting&quot;, false)</code> is used.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/153">#153</a>; ESC key problem.  Clink migrated the old <code>esc_clears_line</code> setting backwards, causing <kbd>Esc</kbd> to behave opposite from what was expected.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/152">#152</a>; LUA debugger breaks on the wrong line, and fails to execute expressions.</li>
</ul>
<h4 id="v1228"><a class="wlink" href="#v1228"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.28 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl.getpromptinfo()</code> function.</li>
<li>Fixed loading .inputrc so that only one is loaded (regression introduced in v1.0.0a0 by the fix for <a href="https://github.com/mridgers/clink/issues/258">mridgers #258</a>).  If similar behavior is still desired, consider using the <code>$include</code> directive in the Readline init file, to load additional files.</li>
<li>Fixed <code>clink-select-complete</code> to respect when <code>mark-directories</code> in .inputrc file is <code>off</code>.</li>
<li>Fixed crash in <code>console.findline()</code> when no attributes are passed.  Callers using v1.2.27 and earlier can work around the crash by passing <code>{}</code> for attributes.</li>
<li>Fixed an off-by-1 bug in <code>console.scroll(&quot;absolute&quot;, top)</code>.  This will fix edge case malfunctions in some callers, but some callers could experience this as a breaking change.</li>
</ul>
<h4 id="v1227"><a class="wlink" href="#v1227"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.27 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>The <code>cmd.get_errorlevel</code> Clink setting is now enabled by default.</li>
<li>Clink now expands <code>$</code> codes in <code>%CLINK_RPROMPT%</code> before running prompt filters.</li>
<li>Fixed parsing <code>2&gt;&amp;1</code> style redirection symbols, so the <code>&amp;</code> doesn&#39;t get treated as a command separator.</li>
<li>Fixed argmatchers to generate file matches for redirection arguments; <code>app.exe &gt;</code> should generate file matches for the <code>&gt;</code> symbol, not matches for the <code>app</code> argmatcher&#39;s first argument.</li>
</ul>
<h4 id="v1226"><a class="wlink" href="#v1226"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.26 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed input line coloring for doskey aliases that don&#39;t have an argmatcher (regression introduced in v1.2.16).</li>
<li>Fixed <kbd>Space</kbd> during <code>clink-select-complete</code> when there were already opening and closing quotes present.</li>
<li>Fixed redrawing multiple lines of input after certain commands such as <code>clink-show-help</code> <kbd>Alt</kbd>+<kbd>H</kbd> (regression introduced in v1.1.20).</li>
<li>Fixed the <code>completion-auto-query-items</code> config variable to account for multiple lines of input, if present.</li>
<li>Fixed potential race condition if multiple Clink instances try to get the last errorlevel at the same time.</li>
</ul>
<h4 id="v1225"><a class="wlink" href="#v1225"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.25 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>cua-select-all</code> command to select the entire input line.</li>
<li>Added <code>edit-and-execute-command</code> command to invoke an editor on the current input line and then execute the results (<kbd>Ctrl</kbd>+<kbd>X</kbd>,<kbd>Ctrl</kbd>+<kbd>E</kbd>).  This attempts to invoke <code>%VISUAL%</code>, <code>%EDITOR%</code>, or <code>notepad.exe</code> as the editor, in that order.</li>
<li>Added some new expansion commands:<ul>
<li><code>clink-expand-history</code> performs history expansion on the current input line (<kbd>Alt</kbd>+<kbd>^</kbd>).</li>
<li><code>clink-expand-history-and-alias</code> performs history and doskey alias expansion on the current input line.</li>
<li><code>clink-expand-line</code> performs history, doskey alias, and environment variable expansion on the current input line (<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>E</kbd>).</li>
</ul>
</li>
<li>Added some new completion commands:<ul>
<li><code>glob-complete-word</code> performs wildcard completion on the text before the cursor point, with a <code>*</code> implicitly appended (<kbd>Alt</kbd>+<kbd>G</kbd>).</li>
<li><code>glob-expand-word</code> inserts all the wildcard completions that <code>glob-list-expansions</code> would list (<kbd>Ctrl</kbd>+<kbd>X</kbd>,<kbd>*</kbd>).</li>
<li><code>glob-list-expansions</code> lists the possible wildcard completions of the text before the cursor point (<kbd>Ctrl</kbd>+<kbd>X</kbd>,<kbd>g</kbd>).</li>
</ul>
</li>
<li>Added some command name synonyms for increased .inputrc file portability with bash:<ul>
<li><code>alias-expand-line</code> is a synonym for <code>clink-expand-doskey-alias</code>.</li>
<li><code>history-expand-line</code> is a synonym for <code>clink-expand-history</code>.</li>
<li><code>history-and-alias-expand-line</code> is a synonym for <code>clink-expand-history-and-alias</code>.</li>
<li><code>insert-last-argument</code> is a synonym for <code>yank-last-arg</code>.</li>
<li><code>shell-expand-line</code> is a synonym for <code>clink-expand-line</code>.</li>
</ul>
</li>
<li>Added a <code>match.expand_envvars</code> Clink setting to expand environment variables in a word before performing completion (for <a href="https://github.com/mridgers/clink/issues/476">mridgers #476</a>).</li>
<li>Changed the <code>match.wild</code> Clink setting to apply to all completion commands.</li>
<li>Changed default key binding <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>E</kbd> to the <code>clink-expand-line</code> command (not the key binding expands everything, instead of only the env var at the cursor).</li>
<li>Removed default key binding <kbd>Alt</kbd>+<kbd>Shift</kbd>+<kbd>H</kbd> for the <code>clink-show-help-raw</code> command (it has only niche usefulness).</li>
<li>Removed unintended VI mode key binding <kbd>Alt</kbd>+<kbd>Ctrl</kbd>+<kbd>H</kbd>.</li>
<li>Fixed <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>2</kbd> and <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>6</kbd> (regression introduced in v1.1.39).</li>
<li>Fixed <code>More?</code> continuation prompt when pasting multiple lines.</li>
<li>Fixed <code>/flag:</code> and <code>/flag=</code> handling quirks, especially when trying to complete an environment variable in <code>/flag:%env</code>.</li>
<li>Fixed quirks about environment variable expansion in the <code>clink-expand-env-var</code> command and the <code>os.expandenv()</code> function.</li>
</ul>
<h4 id="v1224"><a class="wlink" href="#v1224"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.24 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added support for <code>%CLINK_RPROMPT%</code> to show a right side prompt, and for prompt filters to define a <code>:rightfilter()</code> function to filter the right side prompt.</li>
<li>Fixed <code>clink-select-complete</code> to not append a space after a flag that ends with <code>:</code> or <code>=</code> (e.g. <code>/x:</code>).</li>
</ul>
<h4 id="v1223"><a class="wlink" href="#v1223"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.23 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <kbd>PgUp</kbd> and <kbd>PgDn</kbd> in the <code>clink-select-complete</code> command, under certain conditions where they don&#39;t navigate in the intended manner.</li>
<li>Cosmetic change: better key names for <kbd>Enter</kbd> vs <kbd>Ctrl</kbd>+<kbd>M</kbd>, and <kbd>Alt</kbd>+<kbd>Bkspc</kbd> vs <kbd>Alt</kbd>+<kbd>Ctrl</kbd>+<kbd>H</kbd>, depending on the <code>terminal.differentiate_keys</code> setting.</li>
</ul>
<h4 id="v1222"><a class="wlink" href="#v1222"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.22 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink-what-is</code> command bound by default to <kbd>Alt</kbd>+<kbd>?</kbd>, which shows the key binding for the next key sequence that is input.</li>
<li>Added <code>rl.getargument()</code> function to get the accumulated Readline numeric argument, if any.  For use in &quot;luafunc:&quot; macros.</li>
<li>The <code>clink-show-help</code> command now categorizes key bindings and shows a description for the commands.  Using a numeric argument can control whether categorization and descriptions are used.</li>
<li>Fixed invoking <code>clink-select-complete</code> while it is already active, so that it doesn&#39;t lose quotes around the current match if it has quotes.</li>
<li>Fixed <code>clink-show-help</code> to list &quot;Enter&quot; instead of &quot;C-m&quot; for the <kbd>Enter</kbd> key.  Otherwise there&#39;s no way to differentiate between <kbd>Enter</kbd> and <kbd>Ctrl</kbd>+<kbd>M</kbd> when the <code>terminal.differentiate_keys</code> setting is enabled.</li>
<li>Fixed the <code>insert-comment</code> command, which accidentally fell back to inserting <code>#</code> after the first prompt (that&#39;s what bash inserts, and shouldn&#39;t be used in Clink).</li>
<li>Fixed the <code>dump-functions</code> command, which accidentally didn&#39;t list UTF8 key sequences correctly.</li>
</ul>
<h4 id="v1221"><a class="wlink" href="#v1221"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.21 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed backwards exit codes from <code>clink autorun</code> commands.</li>
<li>Fixed alert message text on startup when <code>debug.log_terminal</code> is set to true.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/143">#143</a>; crash on start when <code>terminal.raw_esc</code> is true (regression introduced in v1.2.19).</li>
</ul>
<h4 id="v1220"><a class="wlink" href="#v1220"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.20 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>os.debugprint()</code> function to print debug text via the OS <code>OutputDebugString()</code> API.</li>
<li>Enabled match completion coloring even when using match display filtering.</li>
<li>Fixed input of slash and backslash in non-directory completions when using the <code>clink-select-complete</code> command.</li>
<li>Fixed match display filtering in the <code>clink-select-complete</code> command.</li>
<li>Fixed match display filtering in the <code>clink-popup-complete</code> command.</li>
<li>Fixed quirk from Readline where it sometimes displays one fewer columns of matches than actually fit on the screen.</li>
</ul>
<h4 id="v1219"><a class="wlink" href="#v1219"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.19 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink-select-complete</code> command which shows an interactive list of possible completions.</li>
<li>Added terminal emulation for CGI G, CSI s, and CSI u sequences.</li>
<li>Fixed column alignment for match display filtering when some characters take more than one cell to display.</li>
</ul>
<h4 id="v1218"><a class="wlink" href="#v1218"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.18 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added completions for <code>clink installscripts</code> and <code>clink uninstallscripts</code>.</li>
<li>Added support for Readline&#39;s coloring and marking of symlinks.</li>
<li>Fixed <code>clink installscripts --help</code>.</li>
<li>Fixed <code>clink-popup-directories</code> for directories with spaces.</li>
</ul>
<h4 id="v1217"><a class="wlink" href="#v1217"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.17 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink-popup-show-help</code> command to show popup list with searchable list of key bindings and invoke the selected key binding.</li>
<li>Added <code>clink.popuplist()</code> function to show a popup list.  Only usable from inside a &quot;luafunc:&quot; key binding.</li>
<li>Incremental search in the popup list window now centers the found item so items above and below it are visible.</li>
<li>Fixed potential internal error when a doskey alias starts with <code>$</code> (regression introduced in v1.2.16).</li>
<li>Fixed potential infinite loop when the <code>cmd.auto_answer</code> setting is enabled but an error occurs while retrieving a language string (might be related to <a href="https://github.com/chrisant996/clink/issues/137">#137</a>).</li>
</ul>
<h4 id="v1216"><a class="wlink" href="#v1216"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.16 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li><strong>Breaking Change:</strong> The <code>clink.onendedit()</code> Lua event has been split into two separate events:<ul>
<li><code>clink.onendedit()</code> registers a function to be called when the edit prompt ends.</li>
<li><code>clink.onfilterinput()</code> registers a function to be called after the edit prompt ends (and after the onendedit event is sent), and the function can replace the input text.</li>
</ul>
</li>
<li>Added <code>rl.getkeybindings()</code> function to get a table containing key bindings.  The bindings can be invoked via <code>rl.invokecommand()</code>.  For example, a &quot;luafunc:&quot; macro could use this to get key bindings, show an interactive list, and then invoke the selected key binding.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/134">#134</a>; <code>print()</code> can stop working.  Issue <a href="https://github.com/chrisant996/clink/issues/93">#93</a> can potentially happen any time redirection is used, so the fix must be applied repeatedly (not just after Clink injection).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/119">#119</a>; reuse registered parsers for doskey macros.</li>
</ul>
<h4 id="v1215"><a class="wlink" href="#v1215"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.15 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/132">#132</a>; multiline prompt gets overwritten when resizing the terminal width (regression introduced in v1.2.14).</li>
</ul>
<h4 id="v1214"><a class="wlink" href="#v1214"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.14 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Automatically runs <code>clink_start.cmd</code> from the binaries directory and/or the profile directory when Clink is injected.</li>
<li>Clink is able to retrieve the last exit code for use by Lua scripts.<ul>
<li>The new <code>cmd.get_errorlevel</code> setting is off by default, but when enabled it retrieves the last exit code from CMD before running Lua scripts.</li>
<li>The new <code>os.geterrorlevel()</code> function gets the last exit code (or 0 if the setting is off).</li>
<li>It works by running a hidden command line between each interactive prompt (as if you typed <code>echo %errorlevel%</code> yourself every second command you type).  If you experience problems with this, turn it off.</li>
</ul>
</li>
<li>Improved refreshing the input line when resizing the terminal window.  It&#39;s better than before, but there&#39;s no way to make it work perfectly because Windows can resize the terminal further while a program is already trying to respond to the terminal having been resized previously.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/130">#130</a>; doskey alias completions stop working when there are many aliases.</li>
</ul>
<h4 id="v1213"><a class="wlink" href="#v1213"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.13 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added support for linking a parser to flags ending with <code>:</code> or <code>=</code>; now completion works for the flag&#39;s argument.</li>
</ul>
<h4 id="v1212"><a class="wlink" href="#v1212"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.12 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improved diagnostic output for coroutines (<kbd>Ctrl</kbd>-<kbd>X</kbd>,<kbd>Ctrl</kbd>+<kbd>Z</kbd>), plus more diagnostic info when the <code>lua.debug</code> setting is enabled.</li>
<li>Fixed potential for a script error when a coroutine gets skipped due to a new prompt starting.</li>
</ul>
<h4 id="v1211"><a class="wlink" href="#v1211"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.11 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.print()</code> function which behaves like <code>print()</code> but with support for ANSI escape codes (and terminal emulation), and also a <code>NONL</code> special argument that suppresses the usual newline at the end of the output.</li>
<li>Expanded the sample code for async prompt filtering to clarify some things.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/126">#126</a>; allow <kbd>Esc</kbd> to input literal escape character.<ul>
<li>The new <code>terminal.raw_esc</code> setting controls how <kbd>Esc</kbd> input works.</li>
<li>Added migration for the old <code>esc_clears_line</code> setting.</li>
</ul>
</li>
</ul>
<h4 id="v1210"><a class="wlink" href="#v1210"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.10 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added asynchronous prompt filtering -- scripts can use this to do work in the background (e.g. <code>git status</code>) and refresh the prompt when finished.<ul>
<li>Added <code>clink.promptcoroutine()</code> function to allow a prompt filter to do some work in the background.</li>
<li>Added <code>io.popenyield()</code> function to allow a coroutine to yield until the command&#39;s complete output is ready.</li>
<li>Added <code>prompt.async</code> setting that can disable asynchronous prompt filtering if preferred.</li>
</ul>
</li>
<li>Log error codes for failures during <code>clink inject</code>.</li>
<li>Clarified help text for <code>clink autorun</code> (per <a href="https://github.com/chrisant996/clink/issues/122">#122</a>).</li>
<li>Documentation clarifications and reorganization.</li>
<li>Fixed <code>clink</code> and <code>history</code> aliases getting lost after exiting a nested Clink instance.</li>
<li>Fixed some input keys accidentally handled by the OS after certain Lua code is run.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/124">#124</a>; <code>onfiltermatches()</code> receives one fewer matches than it should.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/123">#123</a>; Failed to inject (Host validation failed).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/117">#117</a>; Setup causes &quot;System Error&quot;.</li>
</ul>
<h4 id="v129"><a class="wlink" href="#v129"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.9 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added detection for possible antivirus interference when injecting Clink.</li>
<li>Ignore duplicate scripts paths when loading scripts.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/118">#118</a>; inputrc is not read from state directory (regression introduced in v1.0.0).</li>
</ul>
<h4 id="v128"><a class="wlink" href="#v128"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.8 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <code>...\</code> or <code>.../</code> to change directories (path separator after several dots).</li>
<li>Fixed <code>/dirname/</code> to change directories (forward slashes when a directory is the only thing in the input line).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/114">#114</a>; &quot;Clink already loaded in process&quot; error when autorun is installed for both Current User and All Users.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/113">#113</a>; forward slash translation didn&#39;t work with the <code>cd</code> command.</li>
</ul>
<h4 id="v127"><a class="wlink" href="#v127"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.7 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/113">#113</a>; <code>clink.slash_translation()</code> had been removed (regression introduced in v1.0.0).<ul>
<li>The new <code>match.translate_slashes</code> setting controls the default behavior for slash translation for completion matches.</li>
<li>The new <code>clink.translateslashes()</code> API can override slash translation for completion matches (and <code>clink.slash_translation()</code> is supported for backward compatibility).</li>
</ul>
</li>
</ul>
<h4 id="v126"><a class="wlink" href="#v126"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.6 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed tilde expansion for directory by itself; now <code>~\</code> can change the working directory to the <code>~</code> directory.</li>
<li>Fixed pagination when displaying completions that take more than 1 line to display.</li>
<li>Fixed inserting directory match completions when a Lua script didn&#39;t include a trailing path separator in the directory match.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/111">#111</a>; <code>..</code> completion is different from bash (regression introduced in v1.0.0).</li>
</ul>
<h4 id="v125"><a class="wlink" href="#v125"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.5 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>os.expandenv()</code> function to expand environment variables in a string.</li>
<li>Added <code>console.cellcount()</code> function to count the cells a string will use when displayed.</li>
<li>Added <code>console.plaintext()</code> function to remove ANSI escape codes from a string.</li>
<li>Clink now sets <code>%=clink.bin%</code> that points to the Clink binaries directory.  This can be particularly useful for a portable installation of Clink so that scripts can find the Clink binaries directory and construct relative paths to other nearby files.</li>
<li>Clean up column alignment in <code>--help</code> texts.</li>
<li>Fixed <code>history.sticky_search</code> with anchored history search.</li>
<li>Fixed <code>clink inject --profile</code> to use correct log file name while initially injecting.</li>
<li>Fixed Clink autorun to be more compatible with Cmder (<a href="https://github.com/cmderdev/cmder/issues/2536">Cmder #2536</a>).</li>
</ul>
<h4 id="v124"><a class="wlink" href="#v124"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.4 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added support for <kbd>Shift</kbd>+<kbd>Arrows</kbd> to select text and typing to replace selected text.</li>
<li>Added optional argument to <code>word_classifications:classifyword()</code> and <code>word_classifications:applycolor()</code> to allow only applying color where another color hasn&#39;t yet been applied.</li>
<li>Fixed first <kbd>Up</kbd> after reusing a history line so that it gets the reused history line, rather than getting the previous history line.</li>
<li>Fixed <code>add-history</code> command to not add blank lines to history.</li>
<li>Fixed <code>rl.setmatches()</code> (regression introduced in v1.1.26).</li>
<li>Fixed input coloring for <code>clink set</code> and any color setting name (regression introduced in v1.2).</li>
<li>Fixed potential crash with <code>clink history --session</code>.</li>
<li>Fixed <kbd>Ctrl</kbd>+<kbd>D</kbd> when <code>cmd.ctrld_exits</code> is disabled; it didn&#39;t exit, but it did still discard the input line and start a new prompt.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/107">#107</a>; autorun reports inject failures (regression introduced in v1.2.3).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/106">#106</a>; history missing <code>--bare</code> option (regression introduced in v1.2.3).</li>
</ul>
<h4 id="v123"><a class="wlink" href="#v123"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.3 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>history.sticky_search</code> setting:  when enabled, reusing a history line does not add the reused line to the end of the history, and it leaves the history search position on the reused line so next/prev history can continue from there (e.g. replaying commands via <kbd>Up</kbd> several times then <kbd>Enter</kbd>, <kbd>Down</kbd>, <kbd>Enter</kbd>, etc).</li>
<li>Added failure reporting and logging when <code>clink inject</code> fails.</li>
<li>Added <code>--unique</code> flag for use with <code>clink history compact --unique</code> to remove duplicate entries from the history list.</li>
<li>The <code>clink-popup-complete</code> command now matches wildcards.</li>
<li>Restored the <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>U</kbd> key binding from v0.4.9 (moves the current working directory up one level).</li>
<li>Fixed searching for inputrc files to also search in the profile directory (regression introduced in v1.0.0).</li>
<li>Fixed incremental search in the History popup list to search in reverse order (bottom to top).</li>
<li>Fixed <code>clink-popup-history</code> to set the history search position like other history search commands do, so that it plays well with the <code>history.sticky_search</code> setting.</li>
</ul>
<h4 id="v122"><a class="wlink" href="#v122"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.2 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>%CLINK_HISTORY_LABEL%</code> environment variable to use a different master history file (fixes <a href="https://github.com/chrisant996/clink/issues/99">#99</a>).</li>
</ul>
<h4 id="v121"><a class="wlink" href="#v121"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2.1 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added Troubleshooting Tips section in the documentation.</li>
<li>Added backward compatibility for <code>clink set</code> with v0.4.9.  Old setting names and values are not documented, but are automatically mapped to the appropriate new setting(s).  This was done so that suggestions in old web sites and posts can usually continue to work, to reduce confusion and support burden.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/97">#97</a>; VS2017 error C2039: &#39;min&#39;: is not a member of &#39;std&#39;.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/96">#96</a>; wrong setting string (the name of a setting was accidentally truncated).</li>
<li>Fixed some slightly inaccurate/incomplete migration from old settings to new settings.</li>
</ul>
<h4 id="v12"><a class="wlink" href="#v12"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.2 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>First official release from <a href="https://github.com/chrisant996/clink">chrisant996/clink</a> fork.</li>
</ul>
<h4 id="v1149"><a class="wlink" href="#v1149"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.49 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.classifier()</code> to enable coloring the input line independently from argmatchers.</li>
<li>Added <code>word_classifications:applycolor()</code> to apply SGR escape codes anywhere in the input line.</li>
<li>Removed <code>word_classifications:iswordclassified()</code>.</li>
<li>Fixed the Product Version string in the binary file version resources.</li>
</ul>
<h4 id="v1148"><a class="wlink" href="#v1148"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.48 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.getansihost()</code> function to get Clink&#39;s best guess who will process ANSI escape codes (can be useful for avoiding 256 bit and 24 bit color codes, for example).</li>
<li>Added detection for being hosted in ConsoleZ.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/20">#20</a>; <code>set /p VAR=&quot;&quot;</code> shows the normal command prompt text instead of empty prompt text.</li>
</ul>
<h4 id="v1147"><a class="wlink" href="#v1147"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.47 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added default key binding for <kbd>Ctrl</kbd>+<kbd>Space</kbd> to invoke <code>old-menu-complete</code>, which is the most similar to CMD&#39;s standard <kbd>Tab</kbd> behavior.</li>
<li>Fixed <code>search-ignore-case</code> config variable to be on by default.</li>
</ul>
<h4 id="v1146"><a class="wlink" href="#v1146"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.46 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl.setvariable()</code> to temporarily override the value of a Readline config variable.</li>
<li>The completion commands now also expand tilde by itself (<code>~</code>), in addition to tilde followed by a path separator (<code>~\etc</code>).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/94">#94</a>; setting <code>history.save</code> to False also disables interactive history in subsequent sessions.</li>
</ul>
<h4 id="v1145"><a class="wlink" href="#v1145"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.45 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/93">#93</a>; stdout is sometimes broken by Cmder init.bat.</li>
</ul>
<h4 id="v1144"><a class="wlink" href="#v1144"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.44 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.getsession()</code>.</li>
<li>Added <code>%CLINK_NOAUTORUN%</code> which overrides automatic inject when Clink is installed for autorun.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/92">#92</a>; <code>clink-popup-history</code> and similar commands not working with ConEmu and Cmder (regression introduced in v1.1.25).</li>
</ul>
<h4 id="v1143"><a class="wlink" href="#v1143"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.43 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink history --diag</code> flag that prints diagnostic information while performing history operations.</li>
<li>Minor optimization in <code>clink history</code> when printing the full list of history items.</li>
<li>Fixed <code>clink history compact</code> so it actually performs compaction.</li>
</ul>
<h4 id="v1142"><a class="wlink" href="#v1142"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.42 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink history --bare</code> flag to omit history item numbers.</li>
<li>Added several Lua functions:<ul>
<li><code>io.popenrw()</code> is like <code>io.popen()</code>, but returns both a read file handle and a write file handle (see documentation for important usage warning).</li>
<li><code>os.createtmpfile()</code> creates a unique named temporary file, with control over the prefix and suffix and path.</li>
<li><code>os.getfullpathname()</code> to get the full path name for a file.</li>
<li><code>os.getlongpathname()</code> to get the long path name for a file.</li>
<li><code>os.getshortpathname()</code> to get the 8.3 short path name (if available) for a file.</li>
</ul>
</li>
<li>Improved argument validation for Clink&#39;s Lua APIs.  This could expose bugs in existing scripts, so there is also a <code>lua.strict</code> setting that can be disabled to revert back to loose argument validation.</li>
<li>Updated documentation.</li>
<li>Fixed <code>clink history compact</code> so that it forces compaction as intended.</li>
<li>Fixed completion for <code>clink set</code> so that filename completion works in string settings.</li>
<li>Fixed backwards return value from <code>rl.invokecommand()</code>.</li>
<li>Fixed console input/output modes across &quot;luafunc:&quot; key bindings, in case the Lua functions spawn a process that alters the console mode without restoring it.</li>
</ul>
<h4 id="v1141"><a class="wlink" href="#v1141"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.41 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>terminal.adjust_cursor_style</code> setting as a workaround to avoid interfering with the Windows 10 Cursor Shape console setting.  There are several trade-offs, though.</li>
<li>Added <code>rl_buffer:refreshline()</code> function to redraw the input line, e.g. in case something has written over it.</li>
<li>Added <code>os.getpid()</code> function to get the process ID, intended mainly to help salt unique resource names.</li>
<li>Added <code>clink.onfiltermatches()</code> so scripts can register a callback function to run after Clink generates matches and before it displays them.</li>
</ul>
<h4 id="v1140"><a class="wlink" href="#v1140"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.40 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added a group of <code>clink-complete-numbers</code> commands that do completion for numbers from the console screen, bound to <kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>N</kbd> by default.</li>
<li>Added <code>rl.getlastcommand()</code> function that returns the name of the last command invoked by key bindings.</li>
<li>Fixed sort order in <kbd>Alt</kbd>+<kbd>H</kbd> for the newly supported key bindings (that were added in v1.1.39).</li>
<li>Fixed <kbd>Ctrl</kbd>+<kbd>Space</kbd> (regression introduced in v1.1.39).</li>
<li>Fixed various <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+<kbd>whatever</kbd> combinations (regression introduced in v1.1.39).</li>
<li>Fixed <code>rl.setmatches()</code> when the input line is not empty and <code>clink.colorize_input</code> is enabled.</li>
</ul>
<h4 id="v1139"><a class="wlink" href="#v1139"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.39 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added support for many more key bindings, such as <kbd>Ctrl</kbd>+<kbd>Shift</kbd>+Letter keys.</li>
<li>Added <code>terminal.differentiate_keys</code> setting that when enabled allows binding <kbd>Ctrl</kbd> + <kbd>H</kbd> or <kbd>I</kbd> or <kbd>M</kbd> or <kbd>[</kbd> separately from <kbd>Backspace</kbd>, <kbd>Tab</kbd>, <kbd>Return</kbd>, or <kbd>Escape</kbd>.</li>
<li>Removed <code>terminal.modify_other_keys</code> setting and made it always enabled.</li>
<li>Changed <code>terminal.use_altgr_substitute</code> to be disabled by default so that <kbd>Ctrl</kbd>+<kbd>Alt</kbd> key bindings can work by default on keyboards with <kbd>AltGr</kbd>.</li>
<li>Changed output from <code>clink echo</code> so it&#39;s directly usable in the inputrc files.</li>
<li>Fixed <code>terminal.use_altgr_substitute</code> to only affect <kbd>AltGr</kbd> substitute key combinations (it had always broken the <kbd>RightAlt</kbd> key in general on other keyboard layouts).</li>
<li>Fixed a benign issue with the console input mode in <code>clink echo</code>.</li>
</ul>
<h4 id="v1138"><a class="wlink" href="#v1138"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.38 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/84">#84</a>; added <code>terminal.use_altgr_substitute</code> setting.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/80">#80</a>; clink.log is not deleted when Cmder injects Clink.</li>
</ul>
<h4 id="v1137"><a class="wlink" href="#v1137"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.37 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed copy to clipboard (it never cleared the clipboard!).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/82">#82</a>; added two new <code>clink.paste_crlf</code> modes: <code>ampersand</code> replaces newlines with ampersands, and <code>crlf</code> pastes newlines as-is and executes any commands ending in a newline.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/69">#69</a>; space in the prompt disappears after enter echo: added support for CJK codepages.</li>
</ul>
<h4 id="v1136"><a class="wlink" href="#v1136"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.36 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/79">#79</a>; Issue with United States - international keyboard layout (regression introduced in v1.1.0).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/78">#78</a>; crash when history file contains a line longer than 8192 characters (regression introduced in v1.1.2-alpha).</li>
</ul>
<h4 id="v1135"><a class="wlink" href="#v1135"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.35 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed when the <code>mark-directories</code> inputrc variable is <code>off</code> (regression introduced in v1.1.1-alpha).</li>
<li>Fixed Lua reading from stdin, especially in the Lua debugger (regression introduced in v1.1.25).</li>
<li>Fixed exponential cost performance bug in Readline when removing duplicate matches.</li>
</ul>
<h4 id="v1134"><a class="wlink" href="#v1134"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.34 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed copying to clipboard (CF_UNICODETEXT was put on the clipboard correctly, but CF_TEXT was empty and should have been omitted to let Windows automatically convert it from the Unicode text).</li>
</ul>
<h4 id="v1133"><a class="wlink" href="#v1133"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.33 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Make the &quot;replacing arglink&quot; warning message a little more informative, and write a lua traceback to the Clink log file.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/77">#77</a>; with ConsoleZ scrolling does not always work.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/76">#76</a>; cannot <code>cd</code> up multiple directories normally.</li>
</ul>
<h4 id="v1132"><a class="wlink" href="#v1132"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.32 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added support for non-standard escape codes to set the window title or print environment variables.  Depending on the <code>terminal.emulation</code> setting, the behavior is slightly different.  When <code>emulate</code> Clink processes the escape codes.  When <code>native</code> with ConEmu (and Clink) the escape codes are passed to ConEmu, except that Clink processes the environment variable codes in prompt strings.  When <code>native</code> with other terminals, Clink preprocesses the title and environment variable escape codes in prompt strings, but passes the escape codes to the terminal outside of prompt strings.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/67">#67</a>; AutoRun interferes with Cmder.</li>
</ul>
<h4 id="v1131"><a class="wlink" href="#v1131"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.31 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/74">#74</a>; clink gets confused by non-standard ConEmu escape codes.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/73">#73</a>; <code>exec.space_prefix</code> and other settings defined in Lua scripts don&#39;t take effect until second input line (regression introduced in v1.1.4).</li>
</ul>
<h4 id="v1130"><a class="wlink" href="#v1130"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.30 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed history compacting on x86 (regression introduced in v1.1.2-alpha).</li>
</ul>
<h4 id="v1129"><a class="wlink" href="#v1129"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.29 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink installscripts</code> and <code>clink uninstallscripts</code> to make it easy for package managers like Scoop to install/uninstall script packages for use with Clink.  The installed script paths are stored in the registry for the current user.</li>
<li>Fixed <code>bold</code> vs <code>bright</code> colors to more accurately follow generally accepted ANSI escape code conventions:<ul>
<li>Renamed <code>dim</code> to <code>nobold</code> for clarity (though <code>dim</code> is still recognized for backward compatibility).</li>
<li><code>bold</code> adds intensity to a non-intense color (e.g. <code>cyan</code> which is 36).</li>
<li><code>nobold</code> removes intensity added by <code>bold</code> (e.g. <code>1;36</code> becomes <code>36</code>), but does not remove intensity from an explicit intense color (such as <code>bright cyan</code> which is <code>96</code>).</li>
</ul>
</li>
<li>Fixed support for <code>--file=</code> flags in argmatchers.</li>
<li>Fixed match display filtering on the first try for a word (regression introduced in v1.1.19).</li>
<li>Fixed the <code>clink --profile</code> flag (regression introduced in v1.1.10).</li>
<li>Fixed <code>clink info</code> to accurately report the script dirs (it didn&#39;t account for the <code>clink.path</code> setting correctly).</li>
</ul>
<h4 id="v1128"><a class="wlink" href="#v1128"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.28 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Renamed the <code>log.rl_terminal</code> setting to <code>debug.log_terminal</code>; it has already been repeatedly very useful in multiple was since it was added, so it stays.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/70">#70</a>; ctrl+c not working (regression introduced in v1.1.25).</li>
</ul>
<h4 id="v1127"><a class="wlink" href="#v1127"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.27 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>color.argmatcher</code> setting which, when set, is used to color a command name if it has an associated argmatcher (this supersedes <code>color.cmd</code>, <code>color.doskey</code>, and <code>color.input</code>).  By default it&#39;s not set.</li>
<li>Added <code>log.rl_terminal</code> setting which logs all terminal input and output for Readline (this setting may be renamed or removed in the future).</li>
</ul>
<h4 id="v1126"><a class="wlink" href="#v1126"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.26 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>rl.invokecommand()</code> which can invoke a Readline command from inside a &quot;luafunc:&quot; key binding.</li>
<li>Added <code>rl.setmatches()</code> which can override match completions from inside a &quot;luafunc:&quot; key binding.</li>
<li>Worked around UTF8 key binding problem with Readline which had been causing some meta key bindings (M-x, M-C-x, etc) to sometimes produce garbled key bindings and garbled entries in <code>clink-show-help</code> (<kbd>Alt</kbd>+<kbd>H</kbd>).</li>
<li>Fixed crash if &quot;luafunc:&quot; key binding macro refers to a symbol that doesn&#39;t exist.</li>
</ul>
<h4 id="v1125"><a class="wlink" href="#v1125"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.25 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink-find-conhost</code> command that, when in a default (conhost) console window, is equivalent to picking &quot;Find...&quot; from the system menu.</li>
<li>Added <code>clink-mark-conhost</code> command that, when in a default (conhost) console window, is equivalent to picking &quot;Mark&quot; from the system menu.</li>
<li><code>clink-copy-word</code> now copies the current word by default, but copies the nth word if a numeric argument is entered (see &quot;Readline Arguments&quot; in the Readline manual).</li>
<li>Fixed match display filtering to not exceed the screen width (regression introduced in v1.1.12).</li>
<li>Fixed multi-key sequences; in some cases it could get confused about whether an input key is part of a multi-key binding sequence (regression introduced in v1.1.1-alpha).</li>
<li>Fixed stray input processing by conhost (holding <kbd>Ctrl</kbd>+<kbd>A</kbd> or <kbd>Ctrl</kbd>+<kbd>F</kbd> or etc could accidentally trigger conhost&#39;s shortcut keys).</li>
<li>Fixed popup window location and size when using Windows Terminal.</li>
<li>Fixed input coloring after <code>operate-and-get-next</code>; also fixes brief flicker of incorrect coloring whenever the input line is modified.</li>
</ul>
<h4 id="v1124"><a class="wlink" href="#v1124"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.24 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li><code>auto</code> for <code>terminal.emulation</code> now uses native VT support on Windows 10 build 15063 and higher, unless the HKCU\Console\ForceV2 regkey is 0.</li>
<li>Special quote handling now enables <code>&quot;dir\&quot;fi</code> to complete to <code>&quot;dir\file&quot;</code>.  CMD simply strips quotes during completion, and now Clink behaves similarly.</li>
<li><strong>Breaking Change:</strong> <code>line:getword()</code> and <code>line:getendword()</code> now strip quotes from the word.  This should generally automagically make existing match generators work even with embedded quotes, but there&#39;s a chance that some match generator might need to be updated.  This seems like a reasonable compromise, given the general benefit purchased by this breaking change.</li>
<li><code>os:globdirs()</code> and <code>os:globfile()</code> strip quotes from the <span class="arg">globpattern</span> in order to behave more like CMD.  Embedded quotes are nonsensical and the intended interpretation is clear, so the APIs now help out with that.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/66">#66</a>; crash when injecting into 32 bit cmd (regression introduced in v1.1.21).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/64">#64</a>; wrong cursor position when PROMPT contains BEL character.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/62">#62</a>; argmatchers should color <code>-x:&quot;foo&quot;</code> as a flag if <code>-x:</code> is a flag.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/61">#61</a>; argmatchers should not handle completion for text immediately following <code>-flag:</code>.  Instead it always uses file completion.  A custom generator can be used to override that behavior.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/60">#60</a>; completion fails with multiple slashes.</li>
<li>Fixed completion in some circumstances.  Readline and Clink didn&#39;t always agree on where the word breaks were; now Clink always tells Readline where the word breaks are (so that completion, input colorization, and lua scripts can all work properly and consistently).</li>
<li>Fixed 256 color ANSI codes.</li>
</ul>
<h4 id="v1123"><a class="wlink" href="#v1123"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.23 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/57">#57</a>; slashes not normalized in some cases.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/45">#45</a>; interaction between <code>history.dupe_mode</code>=<code>erase_prev</code> and <code>history.shared</code>=<code>false</code>.</li>
<li>Fixed <code>menu-complete-wraparound</code> when off and there&#39;s only 1 match.</li>
</ul>
<h4 id="v1122"><a class="wlink" href="#v1122"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.22 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>menu-complete-wraparound</code> (on by default) that controls whether completion commands wrap around when cycling past an end (affects popup windows as well).</li>
<li>Fixed match completion getting stuck (regression introduced in v1.1.19).</li>
<li>Fixed active mark region so it gets deactivated appropriately (it wasn&#39;t hooked up fully for Readline&#39;s callback mode, which is the mode Clink uses).</li>
<li>Fixed <code>clink-show-help</code> (<kbd>Alt</kbd>+<kbd>H</kbd>) so it&#39;s able to list <code>C-@</code> bindings.</li>
<li>Fixed inconsistent mark color.</li>
</ul>
<h4 id="v1121"><a class="wlink" href="#v1121"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.21 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.oninject()</code> so scripts can register a callback function to run when Clink is injected into CMD.</li>
<li>Added <code>console.linehascolor()</code> function that returns whether the specified line contains any of the specified colors.</li>
<li>Added <code>console.findprevline()</code> and <code>console.findnextline()</code> functions that can search backwards or forwards for text and/or colors in the screen buffer.  Regular expressions may be used.</li>
<li>Fixed doskey alias parsing for match generators and input line coloring (Clink had been using slightly different parsing rules than CMD does).</li>
<li>Fixed the &quot;-- More --&quot; prompt while listing key bindings; <kbd>Esc</kbd> didn&#39;t quit, and unexpected keys weren&#39;t ignored.</li>
</ul>
<h4 id="v1120"><a class="wlink" href="#v1120"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.20 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Now you can bind Lua functions to keys via &quot;luafunc:&quot; macros!  Added new <code>rl_buffer</code> type that gets passed to the Lua function.</li>
<li>Added a group of <code>console</code> Lua APIs intended mainly for use by Lua function key bindings (e.g. <code>console.scroll()</code>).</li>
<li>Added <code>string.equalsi()</code> function that performs a case insensitive UTF8 comparison of two strings.</li>
<li>Added <code>string.matchlen()</code> function that compares two UTF8 strings and returns how many characters match at the beginning, or -1 if the entire strings match. It respects the <code>match.ignore_case</code> and <code>match.ignore_accent</code> settings.</li>
<li>Added <code>path.toparent()</code> function that adjust the input string by moving up one directory level.</li>
<li>Added <code>clink.onendedit()</code> so scripts can register a callback function to run when editing finishes (e.g. <kbd>Enter</kbd> is pressed).  If desired, the function can even change the input text.  This is very powerful, and should be used carefully.</li>
<li>Changed <code>os.getbatterystatus()</code> to return a table with the battery status details, rather than four separate return values.</li>
<li>Fixed the <code>doskey.enhanced</code> setting to not expand doskey aliases when preceded by a space.  However, a doskey alias after a <code>&amp;</code> or <code>|</code> command separator needs to be preceded by two spaces to avoid expanding it.  That&#39;s so <code>alias &amp; alias</code> expands both, and <code> alias &amp;  alias</code> expands neither; while the rules are more complicated to explain, they make more sense visually.</li>
<li>Fixed environment variable completion (regression introduced in v1.1.19).</li>
<li>Fixed Cmder startup (regression introduced in v1.1.17).  Cmder expects to be able to replace Clink v0.4.9&#39;s clink.lua file, but there is no such thing anymore in newer versions of Clink.  To be properly backwardly compatible with Clink v0.4.9 requires loading clink.lua (if it exists) from the first script directory listed by <code>clink info</code>, and ignoring clink.lua files in all other script directories.</li>
</ul>
<h4 id="v1119"><a class="wlink" href="#v1119"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.19 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improved responsiveness while typing:  matches are collected only on demand, instead of always while typing.  This makes it possible to always support match completion for UNC paths.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/50">#50</a>; <kbd>Alt</kbd>+<kbd>H</kbd> could warn about likely mistakes in key bindings.</li>
</ul>
<h4 id="v1118"><a class="wlink" href="#v1118"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.18 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>The input text now has context sensitive coloring based on the argmatchers. It&#39;s on by default and can be turned off with <code>clink set clink.colorize_input false</code>.</li>
<li>Updated the Readline library to 8.1.</li>
<li>Terminal emulation now supports the audible bell character.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/48">#48</a>; <code>menu-complete</code> gets stuck.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/47">#47</a>; <kbd>Alt</kbd>+<kbd>D</kbd> erases history instead of word.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/46">#46</a>; typing <code>..</code> in subdirectory of root doesn&#39;t work.</li>
<li>Fixed restoring color after pager when showing help.</li>
<li>Fixed <code>clink set</code> match completions for color settings.</li>
</ul>
<h4 id="v1117"><a class="wlink" href="#v1117"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.17 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>os.getbatterystatus()</code> function that gets battery status information much faster than launching <code>wmic</code>.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/44">#44</a>; Path completion doesn&#39;t work with <code>cd /d</code>.</li>
<li>Fixed loading scripts to ignore loading clink.lua, so that loading scripts behaves like Clink v0.4.9.</li>
</ul>
<h4 id="v1116"><a class="wlink" href="#v1116"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.16 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>match.ignore_accent</code> setting (enabled by default) that ignores Latin alphabet diacriticals when completing matches (e.g. <code>ä</code> matches <code>a</code>, <code>ı</code> matches <code>i</code>, <code>ł</code> matches <code>l</code>, etc).</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/42">#42</a>; history lines are split on special characters.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/41">#41</a>; Enable custom doskey handling of <code>..</code> and <code>-</code>.</li>
<li>Fixed Readline bug inserting dir matches; <code>\win_  foo</code> (cursor at <code>_</code>) would become <code>\Windows\\_  foo</code>.</li>
<li>Fixed the <code>quoted-insert</code> command to insert just <code>\x1b</code> when <kbd>ESC</kbd> is pressed.</li>
</ul>
<h4 id="v1115"><a class="wlink" href="#v1115"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.15 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Migrating settings now immediately writes a new settings file, instead of waiting until a setting is changed.</li>
<li>Added support to detect when running in Windows Terminal and use native terminal support (which enables things like Xterm 256 and 24-bit color support).</li>
<li>Added terminal emulation support for Xterm 256 and 24-bit color escape codes. Clink maps the specified color to the most similar color in the active 16 color palette (using the CIELAB color space). To get full support for 24-bit color, it&#39;s necessary to use ConEmu or Windows Terminal or a similar console host, or to set <code>terminal.emulation</code> to <code>native</code> (which isn&#39;t supported on some older Windows OS versions).</li>
<li>Allow doskey macros named <code>..</code> or <code>-</code>, and also now doskey macros that resolve to <code>..</code> or <code>-</code> or a directory name will work (just like if the macro text had been typed at the Clink prompt).</li>
<li>Fixed compatibility problem with various scripts getting the %HOME% environment variable. Now if it isn&#39;t set, then Clink synthesizes %HOME% from %HOMEDRIVE% and %HOMEPATH% or from %USERPROFILE%.</li>
<li>Fixed saving color settings to behave like other settings: only write a setting&#39;s value to the setting file if it differs from the default value.</li>
<li>Fixed the <code>clink.print()</code> Lua function so it also works during loading scripts and during prompt filtering.</li>
<li>Fixed the Readline input text display getting garbled if the filtered prompt includes Xterm&#39;s OSC window title code (<code>\x1b]0;text\x07</code>). Clink doesn&#39;t support that escape code, but at no longer garbles the input text if that escape code is present.</li>
</ul>
<h4 id="v1114"><a class="wlink" href="#v1114"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.14 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Migrate settings and history from an old version of Clink, if present.  This only happens if the new-version Clink settings or history files don&#39;t exist.  (Deleting an existing new-version Clink settings or history file will cause migration to happen again.)</li>
<li>Added <code>color.prompt</code> setting for backward compatibility with Clink v0.4.x.</li>
</ul>
<h4 id="v1113"><a class="wlink" href="#v1113"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.13 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <code>clink.arg.register_parser</code> backward compatibility.</li>
</ul>
<h4 id="v1112"><a class="wlink" href="#v1112"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.12 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added <code>clink.ondisplaymatches()</code> as a replacement for the deprecated <code>clink.match_display_filter</code>.  The new API is able to support popup list windows as well.</li>
<li>Speculative possible fix for <a href="https://github.com/chrisant996/clink/issues/35">#35</a> Crash when clink on clink.bat.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/33">#33</a>; Tab autocomplete, auto-quoting paths doesn&#39;t seem to work as in Clink 0.4.9.</li>
</ul>
<h4 id="v1111"><a class="wlink" href="#v1111"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.11 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Changed to load Lua scripts only once per session, unless forced to reload them.  This enables backward compatibility for things like <a href="https://github.com/skywind3000/z.lua">z.lua</a> which has certain features that rely on Clink only loading scripts once per session.</li>
<li>Added <code>clink.onbeginedit()</code> so scripts can register a callback function to run each time the edit prompt is activated.</li>
<li>Added <code>lua.reload_scripts</code> setting to optionally force reloading Lua scripts each time the edit prompt is activated.</li>
<li>Added <code>color.message</code> setting for the Readline message area color (e.g. the search prompt message or digit argument prompt message, etc).</li>
<li>Fixed stray sticky <code>=</code> appended to completions after typing <code>set </code> and then typing a different command.</li>
</ul>
<h4 id="v1110"><a class="wlink" href="#v1110"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.10 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/32">#32</a>; hooking <code>ReadConsoleW</code> on Windows 7.</li>
</ul>
<h4 id="v119"><a class="wlink" href="#v119"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.9 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Added backward compatibility for <code>clink.match_display_filter</code>.  The clink-completions/git.lua script uses it a lot, and that should all be working now.</li>
<li><code>settings.add</code> adds a color setting when the type is string and the name starts with &quot;color.&quot;.</li>
<li><code>settings.get</code> now has an extra parameter to request the user friendly color name when getting a color setting.</li>
<li>Added <code>clink.version_encoded</code> variable with the Clink version number as <em>MMmmmpppp</em> (e.g. v1.1.9 is <code>10010009</code>) to make it easy for scripts to check for feature availability.</li>
<li>The <code>clink info</code> command now shows Lua script paths as well.</li>
<li>Fixed backward compatibility for loading scripts from the profile directory (if <code>clink.path</code> isn&#39;t set, then load scripts from the DLL directory and the profile directory).</li>
<li>Fixed some <code>color.input</code> bleed through to other things (introduced in v1.1.5).</li>
<li>Fixed scroll commands (regression introduced by input line color in v1.1.5).</li>
<li>Fixed horizontally sorted match display and re-enabled the performance fix from v1.1.4.</li>
<li>Fixed wildcard evaluation with non-file and non-directory matches (e.g. a branch name <code>origin/master</code> accidentally didn&#39;t match <code>or</code> or <code>*ma</code> because of the <code>/</code>).</li>
<li>Fixed sort order of <code>foo\</code> vs <code>foo.bar\</code> when displaying matches or using the <code>menu-complete</code> family of commands.</li>
<li>Fixed potentially-missing trailing path separator when <code>menu-complete</code> completes a directory match (regression introduced by wildcard matching in v1.1.5).</li>
<li>Other obscure minor fixes.</li>
</ul>
<h4 id="v118"><a class="wlink" href="#v118"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.8 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed file match completions when an argmatcher only generates flag matches.</li>
<li>Fixed automatic inferring whether Readline should use filename completion and/or display rules (regression introduced by backward compatibility in v1.1.3-alpha).</li>
<li>Fixed backward compatibility for <code>clink.find_files()</code> and <code>clink.find_dirs()</code> (regression introduced by performance improvement in v1.1.7).<ul>
<li>Ignore extra arguments after the first one (the performance improvement in v1.1.7 revealed that some scripts call <code>clink.find_files()</code> with extra invalid arguments; e.g. clink-completions/modules/matchers.lua).</li>
<li>Don&#39;t append a trailing path separator on directory names returned by these functions (the new <code>os.globfiles()</code> and <code>os.globdirs()</code> functions do, but the old <code>clink.find_files()</code> and <code>clink.find_dirs()</code> functions should not).</li>
</ul>
</li>
<li>Fixed backward compatibility for coloring matches (regression introduced by backward compatibility changes in v1.1.4).</li>
</ul>
<h4 id="v117"><a class="wlink" href="#v117"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.7 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Performance improvement when displaying matches:  When enumerating files and dirs, the <code>os.globfiles</code> and <code>os.globdirs</code> functions have all the info about each file.  Now they can return that info in a table.  This frees the match display function from needing to do any further file system IO.  The performance boost is noticeable.</li>
<li>Rewrote the color settings:  the .fg and .bg sub-settings are gone, and the main setting now uses a more natural syntax (e.g. <code>clink set color.input bright yellow</code> or <code>clink set color.modmark bright cyan on blue</code>).</li>
<li>Added &quot;cmd&quot; match type for shell (CMD.EXE) command completions.</li>
<li>Added VT emulation for the reverse video SGR parameters.</li>
<li>Fixed tab completion for <code>clink set <em>setting</em></code>, and also handle the new color setting syntax.</li>
<li>Fixed confusing behavior if multiple scripts try to add settings with the same name (now the first one succeeds and the rest report errors).</li>
</ul>
<h4 id="v116"><a class="wlink" href="#v116"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.6 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Hooked up tilde completion in the <code>cd</code>, <code>md</code>, and <code>rd</code> command argmatchers.</li>
<li>Hooked up tilde completion with the <code>exec.enable</code> setting (&quot;~\pro&quot; matches &quot;C:\Users\myusername\program.exe&quot;).</li>
<li>When <code>terminal.emulation</code> is <code>auto</code>, now it also detects ANSI{32|64}.DLL just like Clink 0.4.8 did.</li>
</ul>
<h4 id="v115"><a class="wlink" href="#v115"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.5 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>The <code>menu-complete</code> family of commands now support matching <code>?</code> and <code>*</code> wildcards when the <code>match.wild</code> setting is enabled.</li>
<li>Added <code>colour.input</code> and <code>colour.modmark</code> settings for coloring Readline&#39;s input line.</li>
<li>Added <code>clink.upper()</code> Lua function, and both <code>clink.lower()</code> and <code>clink.upper()</code> are properly UTF8 aware now.</li>
<li>Added <code>clink-copy-word</code> command that copies the word at the cursor to the clipboard.</li>
<li>Added <code>clink.promptfilter</code> setting to control whether to filter the prompt with Lua scripts.</li>
<li>Renamed <code>terminal.emulate</code> setting to <code>terminal.emulation</code>.</li>
<li>Improved executable file extension logic to consistently use %PATHEXT% (and efficiently).</li>
<li>Improved file extension logic (e.g. &quot;file.foo bar&quot; has no extension because of the space).</li>
<li>Updated arg matcher for <code>clink</code> itself (was missing some flags).</li>
<li>Changed <code>colour.hidden</code> setting to not be set by default.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/28">#28</a>; Tab completion for &quot;~&quot; does not work.</li>
<li>Fixed <a href="https://github.com/chrisant996/clink/issues/25">#25</a>; Unicode surrogate pairs (and emoji) input isn&#39;t working -- Microsoft Terminal renders the text correctly, but ConEmu and the default conhost still don&#39;t (and that isn&#39;t a Clink issue).</li>
<li>Fixed screen size bug in Readline on Windows.</li>
<li>Fixed the backwards values in the <code>terminal.emulation</code> setting.</li>
<li>Fixed <code>....</code> so it works properly again.</li>
<li>Fixed case sensitive sorting of matches.</li>
<li>Fixed script error when %PATHEXT% is empty.</li>
<li>Fixed the <code>exec.cwd</code> Clink setting to default to true, so that the default behavior is consistent with how v0.4.x behaved.</li>
<li>Fixed the <code>cd</code>, <code>md</code>, <code>rd</code>, etc argmatchers to only match one argument to be consistent with the actual command syntax.</li>
</ul>
<h4 id="v114"><a class="wlink" href="#v114"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.4 <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Automatically detect when running inside ConEmu and disable Clink&#39;s Virtual Terminal emulation.</li>
<li>Added <code>search-ignore-case</code> inputrc variable that makes the history search commands case insensitive.</li>
<li>Suppress adding a space after completing a flag match that ends with <code>:</code> or <code>=</code> (e.g. <code>msbuild -maxCpuCount:</code>).</li>
<li>Report any errors while loading Lua scripts.</li>
<li>Report an error if a Lua script tries to add a flag string that begins with a letter.</li>
<li>Fixed slow printing of possible matches.  Readline is inefficient about emitting output, so Clink supplies a custom implementation.</li>
<li>Fixed some bugs in auto detection of flag prefix characters.</li>
<li>Fixed backward compatibility for flags, and for args when merging two parsers by calling <code>clink.arg.register_parser(&#39;foo&#39;)</code> multiple times for the same command string.</li>
<li>Fixed truncated message when the last line of a prompt exceeds 128 characters.</li>
<li>Fixed abort (<kbd>Ctrl</kbd>+<kbd>G</kbd> or <kbd>Esc</kbd>) in non-incremental history search mode.</li>
<li>Fixed saved values for settings added by Lua scripts; now the saved value is available to the script immediately on adding the setting, and saved values are retained even if the setting isn&#39;t always added by the script.</li>
<li>Fixed (and documented) shorthand form for defining an argmatcher.</li>
<li>Fixed length of colored match prefix after a path separator.</li>
<li>Fixed normalizing a slash by itself (<code>command /</code> mustn&#39;t become <code>command \</code> since that can interfere with completing flags).</li>
<li>Fixed the <code>completion-auto-query-items</code> inputrc variable.</li>
<li>Fixed the key binding list to correctly respect <code>completion-display-width</code>.</li>
<li><em>No visible effect yet:  internal change that parses the input line to identify colors to use for each word (command, argument, flag, etc), but the colors aren&#39;t yet applied to the input line.</em></li>
</ul>
<h4 id="v113-alpha"><a class="wlink" href="#v113-alpha"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.3-alpha <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed argmatcher lookup to be more strict, like in Clink 0.4.9 (match exact names, or name plus an extension from %PATHEXT%).</li>
<li>Backward compatibility:<ul>
<li>Most things should work now.</li>
<li>Dropping the new Clink on top of the vendor\clink directory in Cmder seems to work -- <em>but make a backup before you try this at home!</em></li>
</ul>
</li>
<li>API changes:<ul>
<li>Added <code>log.info()</code> function.</li>
<li>Added Clink version numbers in <code>clink.version_major</code>, etc.</li>
<li>Added <code>_argmatcher:getwordbreakinfo()</code> callback; removed <code>_argmatcher:setprefixincluded()</code> (it was a mess, and it was new to v1.x, so there&#39;s no compatibility concern with removing it).</li>
<li>Deprecated <code>_argmatcher:setflagprefix()</code>; now it happens automagically when using <code>_argmatcher:addflags()</code>.</li>
<li>Introduced several deprecated functions to support backward compatibility.</li>
</ul>
</li>
<li>Improvements to Lua debugger:<ul>
<li>Added <code>lua.traceback_on_error</code>, <code>lua.break_on_error</code>, and <code>lua.break_on_traceback</code> settings to make debugging script errors easier.</li>
<li>Made <code>pause()</code> consistent about pausing in the caller (rather than sometimes inside the pause command itself).</li>
<li>The debugger automatically shows the stack trace when entering debug mode, and on every pause.</li>
<li>Show 3 lines of source context by default.</li>
<li>The help list is sorted now.</li>
<li>Fixed the <code>set</code> command in the debugger to behave as documented.</li>
</ul>
</li>
</ul>
<h4 id="v112-alpha"><a class="wlink" href="#v112-alpha"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.2-alpha <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Documentation is mostly updated; just the argmatcher Lua API and Clink command line options are left to be documented.</li>
<li>Added <code>history.max_lines</code> setting that controls how many lines of command history to save (1 to 50000, default is 2500).</li>
<li>Added <code>readline.hide_stderr</code> setting that can suppress stderr output from the Readline library.</li>
<li>For backward compatibility with 0.4.8, <code>clink_inputrc</code> files are loaded as well.</li>
<li>Lua script API changes:<ul>
<li><code>addmatch()</code> in Lua scripts takes an optional match type argument.</li>
<li>Removed <code>displayable</code>, <code>aux</code>, and <code>suffix</code> fields in matches.</li>
<li>Revert the change to disallow mixing file/directory/symlink with other match types (it broke the tests and certain completion scenarios).</li>
</ul>
</li>
<li>Fixed issues:<ul>
<li><a href="https://github.com/chrisant996/clink/issues/18">#18</a> alt+digit then alt+ctrl+y isn&#39;t working.</li>
<li><a href="https://github.com/chrisant996/clink/issues/17">#17</a> arrow keys don&#39;t exit <code>reverse-search-history</code> like in bash.</li>
<li><a href="https://github.com/chrisant996/clink/issues/16">#16</a> problems with $T in doskey macros.</li>
<li><a href="https://github.com/chrisant996/clink/issues/13">#13</a> <code>clink history delete &lt;n&gt;</code> returns a CRT error.</li>
</ul>
</li>
<li>Other fixes:<ul>
<li>There should be no more problems running on Windows Insider builds because Clink now uses <a href="https://github.com/microsoft/detours">Detours</a> for hooking APIs.</li>
<li>Fixed crash in <code>insert-completions</code> due to heap failure (introduced by the performance changes for displaying matches).</li>
<li>Fixed <code>clink</code> and <code>history</code> built-in aliases (solve glitchy path problem).</li>
<li>Fixed scrolling to top of screen buffer.</li>
<li>Fixed env var and <code>set</code> completions.</li>
<li>Fixed <code>tilde-expand</code> for quoted text.</li>
<li>Fixed <kbd>Esc</kbd> in Readline&#39;s digit argument input mode (it doesn&#39;t try to cancel the mode, because that&#39;s not how Readline is documented to work).</li>
<li>Fixed exit code from some <code>clink</code> command line options.</li>
</ul>
</li>
<li>Set locale to UTF8 much earlier to avoid quirky behavior early in script processing.</li>
</ul>
<h4 id="v111-alpha"><a class="wlink" href="#v111-alpha"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.1.1-alpha <span class="uplinks"><a href="#releases-from-chrisant996clink-fork">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Exclusively use Readline&#39;s completion implementation.  This (with fixes and enhancements in Readline itself) makes the completion experience much nicer and more sophisticated, and removes a lot of code that was added in v1.0.0a0.</li>
<li>Exclusively use Readline&#39;s key binding implementation.  This makes it possible to have a single consistent way to set key bindings (inputrc) and for <code>clink-show-help</code> to list all key bindings, and removes a lot of code that was added in v1.0.0a0.</li>
<li>Converted all of Clink&#39;s internal key behaviors to be implemented as commands that can be bound in the inputrc file.</li>
<li>Rewrote and refactored the pagination routine to be used in multiple places.</li>
<li>Fixed prompt filtering to correctly use the specified priority order.</li>
<li>Readline library:<ul>
<li>Updated the Readline library from v6.2 to v8.0.  This picked up lots of bug fixes and new capabilities (for example colored completions).</li>
<li>Changed Readline to support backslash as a path separator.</li>
<li>The pager prompt in Readline is optionally colored, controlled by the <code>colour.interact</code> Clink setting.</li>
<li>Added <code>completion-auto-query-items</code> config variable (on by default) which asks whether to list possible matches when the number of lines listed will fill one screen page.</li>
<li>Added <code>history-point-at-end-of-anchored-search</code> config variable in inputrc to make the cursor point behave like 4Dos/4NT/TakeCommand when searching forward and backward through command history.</li>
<li>Fixed prev history at top of history.</li>
<li>Fixed to get the current values of environment variables when needed, rather than always getting the value from whenever Clink was started.</li>
<li>Fixed coloring directory completions.</li>
<li>Fixed <code>menu-complete</code> for <code>\dir</code> and <code>.</code> and <code>..</code>.</li>
<li>Fixed slow performance when displaying matches.  Readline was calling stat() at least once per match (!!).  A new match type field enables faster performance, coloring readonly and hidden file matches, applying filename completion rules only to filenames (vs branch names or other text strings), correct match de-duplication, and more.  The Lua match APIs can supply the new match type.</li>
<li>Fixed inserting a completion to happen as a single undo group.</li>
<li>Fixed tilde to map to <code>%USERPROFILE%</code> instead of <code>%APPDATA%</code> on Windows.</li>
</ul>
</li>
<li>Typing a directory by itself uses <code>cd /d</code> to change to the directory:<ul>
<li>Typing a directory with a trailing path separator changes to the directory.</li>
<li>Typing <code>..\</code> changes to the parent directory.</li>
<li>Typing <code>...</code> or <code>....</code> etc moves up an extra parent directory level for each extra dot (2 dots move up one parent, 3 dots moves up two parents, etc).  A trailing path separator is optional when there are more than 2 dots.</li>
<li>Typing <code>-</code> or <code>cd -</code> or <code>chdir -</code> changes to the previous directory.</li>
</ul>
</li>
<li>Commands that are new, enhanced, or fixed:<ul>
<li>Added <code>add-history</code> and <code>remove-history</code> commands (similar to 4Dos/4NT/TakeCommand).</li>
<li>Got the <code>menu-complete</code>, <code>menu-complete-backward</code>, and <code>old-menu-complete</code> commands working (they never worked properly before in Clink).<ul>
<li>Also added a corresponding <code>old-menu-complete-backward</code> command for reverse order.</li>
<li>All of the <code>*-menu-complete-*</code> commands support wildcards (<code>*</code> and <code>?</code>).</li>
</ul>
</li>
<li>Added <code>clink-show-help</code> command (<kbd>Alt</kbd>+<kbd>H</kbd>).  The help now lists <em><strong>all</strong></em> key bindings, and it shows user-friendly key names (like <code>A-Up</code> or <code>C-x,C-r</code> or <code>C-S-PgUp</code> or <code>A-C-S-F3</code>).</li>
<li>Added <code>clink-popup-completions</code> command that shows a popup window listing possible completions.  <kbd>Enter</kbd> inserts the highlighted completion.</li>
<li>Added <code>clink-popup-directories</code> command that shows a popup window listing recent directories.  <kbd>Enter</kbd> changes to the highlighted directory, or <kbd>Shift</kbd>+<kbd>Enter</kbd> inserts the highlighted directory in the editing line (or <kbd>Ctrl</kbd>+<kbd>Enter</kbd>).</li>
<li>Added <code>clink-popup-history</code> command that shows a popup window listing command history.  <kbd>Enter</kbd> executes the highlighted command, or <kbd>Shift</kbd>+<kbd>Enter</kbd> jumps to the highlighted command in the history (or <kbd>Ctrl</kbd>+<kbd>Enter</kbd>).</li>
<li>Added <code>clink-scroll-lineup</code>, <code>clink-scroll-linedown</code>, <code>clink-scroll-page-up</code>, <code>clink-scroll-page-down</code>, <code>clink-scroll-top</code>, and <code>clink-scroll-bottom</code> commands that do what it looks like they&#39;d do and are bound to the keys it looks like they&#39;d be.</li>
<li>Added <code>clink-expand-doskey</code> command (<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>f</kbd>) that expands the current line according to the current doskey aliases.</li>
<li>Added <code>clink-expand-env-var</code> command (<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>e</kbd>) that expands the environment variable at the cursor point.</li>
<li>Added <code>clink-exit</code> command (<kbd>Alt</kbd>+<kbd>F4</kbd>) that exits CMD.</li>
</ul>
</li>
<li>Fixed keyboard input issues:<ul>
<li><kbd>Esc</kbd> is a bindable key now (<code>\e[27;27~</code>).</li>
<li>Added more bindable key combinations (run <code>clink echo</code> then press keys to see the key sequence to use in the inputrc file).</li>
<li><kbd>Ctrl</kbd>+<kbd>@</kbd> (NUL) didn&#39;t work.</li>
<li><kbd>Ins</kbd> toggles insert/overwrite mode.</li>
<li>Unbound keys are ignored now, instead of inserting gibberish characters (part of the terminal internal key sequence).</li>
<li>Fixed input handling so the <code>quoted-insert</code> command can work properly.</li>
<li>Fixed <kbd>Esc</kbd> while searching.</li>
<li>Fixed vi mode (was working in v0.4.9, but not in v1.0.x).</li>
</ul>
</li>
<li>Fixed command history issues:<ul>
<li>The <code>dont_add_to_history_cmds</code> Clink setting is a space-delimited list of commands to not add to history.</li>
<li>Fixed bleeding between history banks.</li>
<li>Fixed uninitialized variable that made history updates intermittently do nothing or corrupt the other history bank.</li>
<li>Fixed output from <code>clink history</code> to convert to UTF16 when writing to the console (but write UTF8 when output is redirected).</li>
</ul>
</li>
<li>Fixed terminal output issues:<ul>
<li>Added <code>terminal.emulate</code> Clink setting that controls whether Clink does VT emulation or passes all ANSI escape codes directly to the console host.  For example, this lets the prompt and completion coloring take advantage of more sophisticated ANSI escape codes such as XTerm 256 color and 16 bit color support.</li>
<li>Added back support for the <code>prefer-visible-bell</code> config variable.</li>
<li>Fixed underline support.</li>
<li>Fixed handling for UTF8 output from Readline.</li>
<li>Fixed invisible cursor point in Lua debugger.</li>
</ul>
</li>
<li>Completions:<ul>
<li>Added <code>match.sort_dirs</code> Clink setting that specifies where to sort directories in the list of possible completions:  before files, mixed in with files, or after files.</li>
<li>Don&#39;t attempt completing incomplete UNC paths:  at least the <code>\\server\share\</code> path components are required (for anything shorter the OS APIs are guaranteed to fail, but will fail slowly).</li>
<li>Fixed sorting to use Unicode aware locale based sorting (like Windows does) instead of dumb UTF8 byte comparisons.</li>
<li>Fixed arbitrary limit on completions (had been limited to 64KB worth of completions).</li>
<li>Fixed quoting spaces in completions.</li>
<li>Fixed to use the same list as CMD for characters that require quoting.</li>
<li>Fixed normalizing UNC paths.</li>
<li>Fixed volume relative completions (e.g. <code>x:foo</code>).</li>
<li>Disallow mixing file/directory/symlink with other match types.  This was to avoid a confusing/malfunctioning case in match display and prefix highlighting.</li>
</ul>
</li>
<li>Fixed UTF8 encoding in various Lua functions.</li>
<li>Fixed printing stderr output from Readline, Lua, and Clink.</li>
<li>Fixed crashes and other failures when starting Clink in 32 bit CMD.</li>
<li>Fixed some memory leaks that accumulated with each new line of input.</li>
<li>Fixed prompt filtering API to be backward compatible with v0.4.9 scripts.</li>
<li>Fixed Lua errors from <code>clink set</code> (it neglected to fully initialize Clink&#39;s Lua integration before loading Lua scripts).</li>
<li>Fixed UTF8 conversion bug that could truncate a string without fully converting it.</li>
<li>Fixed serious rampant memory corruption bug in v1.0.x (not present in v0.4.9), which had been causing intermittent malfunctions and data corruption and crashes.</li>
<li>Fixed multi-line doskey macros to show the prompt in between lines, like CMD does.</li>
<li>Removed the 4096 byte limit on input.</li>
<li>Renamed the Clink DLL back to what it was in v0.4.x, to fix compile time problems.</li>
<li>Other fixed issues:<ul>
<li><a href="https://github.com/mridgers/clink/issues/544">mridgers #544</a> Clink v1.0.0.a1 doesn&#39;t support cyrillic characters keyboard input on Windows 10 with console V2.</li>
<li><a href="https://github.com/mridgers/clink/issues/543">mridgers #543</a> Not compatible with Windows Insider Build 20150.</li>
<li><a href="https://github.com/mridgers/clink/issues/537">mridgers #537</a> Clink breaks the CMDS tool.</li>
<li><a href="https://github.com/mridgers/clink/issues/520">mridgers #520</a> Clink 1.0.0.a1 - <code>clink set history_io 1</code> Error.</li>
<li><a href="https://github.com/mridgers/clink/issues/519">mridgers #519</a> Clink v1.0.0.a1 - <code>-s|--scripts [path]</code> command line arg removed?</li>
<li><a href="https://github.com/mridgers/clink/issues/516">mridgers #516</a> Doskey $T not handled properly.</li>
<li><a href="https://github.com/mridgers/clink/issues/512">mridgers #512</a> Command history missing in .history.</li>
<li><a href="https://github.com/mridgers/clink/issues/503">mridgers #503</a> Keyboard shortcut for scrolling.</li>
<li><a href="https://github.com/mridgers/clink/issues/501">mridgers #501</a> <kbd>Ctrl</kbd>+<kbd>Backspace</kbd> works now.</li>
<li><a href="https://github.com/mridgers/clink/issues/487">mridgers #487</a> Clink breaks ConEmu-specific Escape codes.</li>
<li><a href="https://github.com/mridgers/clink/issues/480">mridgers #480</a> History never saved.</li>
<li><a href="https://github.com/mridgers/clink/issues/465">mridgers #465</a> Using LuaJIT (FFI).</li>
<li><a href="https://github.com/mridgers/clink/issues/456">mridgers #456</a> Clear-screen not working properly when PROMPT is two lines long.</li>
<li><a href="https://github.com/mridgers/clink/issues/453">mridgers #453</a> Wrong cursor position when a line contains non-printable characters.</li>
<li><a href="https://github.com/mridgers/clink/issues/442">mridgers #442</a> Unable to paste more than 1024 characters using <kbd>Ctrl</kbd>+<kbd>V</kbd>.</li>
<li><a href="https://github.com/mridgers/clink/issues/422">mridgers #422</a> Problem with filename modifiers.</li>
<li><a href="https://github.com/mridgers/clink/issues/420">mridgers #420</a> Use NtSuspendProcess instead of CreateToolhelp32Snapshot to freeze the threads.</li>
<li><a href="https://github.com/mridgers/clink/issues/372">mridgers #372</a> Provide a way to select a previous directory.</li>
<li><a href="https://github.com/mridgers/clink/issues/365">mridgers #365</a> history-search behavior.</li>
<li><a href="https://github.com/mridgers/clink/issues/342">mridgers #342</a> Clink_inputrc not being processed if it the clink_inputrc is a link (created via mklink).</li>
</ul>
</li>
<li>Fixed many other bugs.</li>
</ul>
<h3 id="releases-from-mridgersclink-original-repo"><a class="wlink" href="#releases-from-mridgersclink-original-repo"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Releases from <a href="https://github.com/mridgers/clink">mridgers/clink</a> original repo <span class="uplinks"><a href="#changes">up</a> <a href="#toc">top</a></span></h3>
<h4 id="v100a1-alpha-test-release"><a class="wlink" href="#v100a1-alpha-test-release"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.0.0a1 <em>(alpha test release)</em> <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improve terminal integration with the Readline library.</li>
<li>Internal improvements to the built-in ecma48 terminal emulator.</li>
<li>Fixed use after free in Doskey emulation.</li>
<li>Fixed dash-dash flag completion.</li>
<li>Search ancestors for a compatible target process (for when cmd.exe starts another process that subsequently starts clink; especially useful during development).</li>
<li>Use clink/terminal&#39;s wcwidth() implementation.</li>
<li>screen_buffer::set_cursor() should be relative to the visible area.</li>
<li>Try to adjust the cursor position better when resizing the terminal.</li>
<li>Some internal Lua functions needed the unquoted clink exe path.</li>
<li>The origin path now affects the hash in the dll cache, to guard against directory moves.</li>
<li>More code reorganization.</li>
</ul>
<h4 id="v100a0-alpha-test-release"><a class="wlink" href="#v100a0-alpha-test-release"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v1.0.0a0 <em>(alpha test release)</em> <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Extensive code reorganization, refactoring, and rewriting -- multiple times -- almost everything was touched.</li>
<li>OS integration:<ul>
<li>Fixed Doskey macros on Win8, and on Win10.</li>
<li>Fixed <code>clink_x??.exe</code> startup stall on Windows 10.</li>
<li>Removed XP support. It doesn&#39;t load DLLs like Clink uses them.</li>
<li>Removed Powershell support.</li>
</ul>
</li>
<li>Readline integration:<ul>
<li>Search for multiple places for [.|_]inputrc (fixes <a href="https://github.com/mridgers/clink/issues/258">mridgers #258</a>).</li>
<li>Disabled Readline&#39;s completion code, and only use the clink alternative code.</li>
<li>Removed redundant slash translation and shims to make it happen.</li>
<li>Removed control of Readline&#39;s suffix appending and disabled it.</li>
</ul>
</li>
<li><code>clink</code> commands and flags:<ul>
<li>Changed <code>--cfgdir</code> to <code>--profile</code>, it&#39;s no longer required, and added help about it.</li>
<li>Added a <code>--version</code> option to print Clink&#39;s version.</li>
<li>Added <code>clink info</code> to print information about Clink.</li>
<li>Added <code>clink echo</code> command to echo input key sequences to stdout.</li>
<li>Added <code>clink history</code> command (fixes <a href="https://github.com/mridgers/clink/issues/172">mridgers #172</a>).</li>
<li>Added <code>history</code> as an alias for <code>clink history</code>.</li>
<li>Added internal <code>--list</code> flag to <code>clink set</code> for match generation.</li>
<li>Removed <code>--scripts</code> argument (fixes <a href="https://github.com/mridgers/clink/issues/206">mridgers #206</a>).</li>
<li>Updated <code>clink autorun</code> command&#39;s help text.</li>
</ul>
</li>
<li>Lua scripts:<ul>
<li>Prefer <code>userprofile</code> over other standard environment variables for where to look for lua scripts.</li>
<li>New API for argument style completion scripts.</li>
<li>Refactored prompt filtering, and introduced new prompt filtering API.</li>
<li>Refactored generating matches, and introduced new match generator API.</li>
<li>Removed built in completions scripts for git, go, hg, and p4. There&#39;s better ones.</li>
<li>Renamed many of clink&#39;s Lua functions.</li>
<li>Moved functions from <code>clink</code> to <code>os</code> in Lua.</li>
<li>Removed <code>clink.is_match()</code> in Lua; don&#39;t presume anything on anyone&#39;s behalf about matches.</li>
<li>Added some current dir functions in Lua.</li>
<li>Added some env/dir functions in Lua.</li>
<li>Exposed path manipulation functions to Lua.</li>
<li>Embed the core Lua scripts instead of loading them from files.</li>
</ul>
</li>
<li>Terminal IO:<ul>
<li>Added a module for scrolling the screen.</li>
<li>Rewrote the terminal emulation module, and all Readline IO goes through it.</li>
<li>Use VT220-style control codes for special keys.</li>
<li>If <kbd>Alt</kbd> is pressed send ESC in the input stream rather than setting meta bit.</li>
<li>Replaced wcwidth() with a more complete and correct version.</li>
</ul>
</li>
<li>Settings:<ul>
<li>Added <code>clink_path</code> setting for where to look for lua scripts.</li>
<li>Added <code>match.ignore_case</code> setting.</li>
<li>Added <code>files.unc_paths</code> setting for optional matching from UNC paths.</li>
<li>Added a setting to skip adding lines that start with <code>history</code>.</li>
<li>Removed <code>esc_clears_line</code> setting.</li>
<li>Pasting CRLFs doesn&#39;t really make sense.</li>
<li>Don&#39;t write out settings that are set to default.</li>
</ul>
</li>
<li>Make sure <kbd>Ctrl</kbd>-<kbd>C</kbd> doesn&#39;t modify history.</li>
<li>Make a cached copy of Clink&#39;s DLL when injecting so as to not lock the master.</li>
<li>Guard against Readline&#39;s writes to stderr.</li>
<li>Remove <code>clink_inputrc_base</code> file and embed its content (fixes <a href="https://github.com/mridgers/clink/issues/257">mridgers #257</a>).</li>
<li>Include more metadata in the Clink&#39;s executables.</li>
</ul>
<h4 id="v049"><a class="wlink" href="#v049"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.9 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed broken Doskey on Win10 (#438, #451)</li>
</ul>
<h4 id="v048"><a class="wlink" href="#v048"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.8 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Environment variable <code>clink_profile</code> overrides Clink&#39;s profile path (#390).</li>
<li>Load a clink_inputrc file from Clink&#39;s profile directory (fixes #406).</li>
<li>Bug fixes;<ul>
<li>Redraw issues when prompts end in OSC ANSI codes (#387, #384).</li>
<li>Fixed <code>clink autorun --help</code> crash.</li>
</ul>
</li>
</ul>
<h4 id="v047"><a class="wlink" href="#v047"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.7 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Bug fixes;<ul>
<li>Sometimes autorun tries to run clink.exe (#374).</li>
<li>Autorun would cause cmd.exe to return an error if it wasn&#39;t interactive (#373).</li>
</ul>
</li>
</ul>
<h4 id="v046"><a class="wlink" href="#v046"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.6 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>HOME is only set if it is currently unset.</li>
<li>Readline can be initialised with .inputrc and _inputrc files too (#258).</li>
<li>Bug fixes;<ul>
<li>Executable completion;<ul>
<li>Paths from PATH were checked twice.</li>
<li>Incorrect results were returned for words ending in <code>.</code> or <code>-</code>.</li>
<li>Directories . and .. were incorrectly displayed.</li>
</ul>
</li>
<li>Fixed a crash if .bat script&#39;s stdout is redirected (#366).</li>
<li>Occasional crash when injecting Clink (#351).</li>
<li>Display errors;<ul>
<li>When editing near the window&#39;s right-hand edge (#347).</li>
<li>Double display of multi-line prompts when resizing the terminal (#352).</li>
<li>Very rare wrap artefacts when making the terminal window larger.</li>
</ul>
</li>
<li>Doskey emulation (#344).</li>
<li>Improved <code>clink autorun</code> help (#348).</li>
<li>Fixed launching Clink when clink.bat is renamed (#357).</li>
</ul>
</li>
</ul>
<h4 id="v045"><a class="wlink" href="#v045"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.5 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Improved <code>clink autorun</code>. It now defaults to the Current User registry hive.</li>
<li><code>clink set</code> gives more details for enumeration-type settings.</li>
<li>Tab completion for p4vc.</li>
<li>New settings <code>history_expand_mode</code> to control history expansion in quotes (#317).</li>
<li>Bug fixes;<ul>
<li>Use full width of the terminal (#337).</li>
<li>Fixed MinGW compile error (#335).</li>
<li>Autorun now defaults to the current user&#39;s hive (#332).</li>
<li>Creating clink.html no longer needs Pandoc, plus it looks a bit better (#331).</li>
<li>Added settings to control history expansion (#326).</li>
<li>Correct fallback when <code>use_altgr_substitute</code> is off (#325).</li>
<li>Load history prior to saving it on shutdown (#318).</li>
<li>Added Shift-Tab documentation and menu completion example (#190).</li>
<li>Added shim for backwards menu completion (#190).</li>
<li>Input handling now outputs <code>\e`Z</code> for <kbd>Shift</kbd>-<kbd>Tab</kbd> (#190).</li>
<li>Updated Readme with current Premake info (#310).</li>
<li>Guard against there being no buffer to read from (#304).</li>
<li>Fixed artefacts when resizing conhost&#39;s buffer (#139).</li>
<li>Clear remaining characters if scroll window was too small (#301)</li>
<li>Escape % characters when expanding aliases (#280).</li>
<li>Fixed leaking exception filters.</li>
<li>Clearing the screen doesn&#39;t leave artefacts behind.</li>
</ul>
</li>
</ul>
<h4 id="v044"><a class="wlink" href="#v044"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.4 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Completing .. behaves more like Bash (#277).</li>
<li>Escape from yes/no question when <kbd>Ctrl</kbd>+<kbd>C</kbd> is pressed.</li>
<li>Valid XP executables (#278, #289).</li>
<li>Fixed n-th argument yank not working as expected (#254).</li>
<li>Fixed prompt colours sometimes not working (#279, #286).</li>
<li>Fixed <code>!0</code> causing Clink to crash.</li>
<li>Save/restore cursor position in case Readline moves it.</li>
</ul>
<h4 id="v043"><a class="wlink" href="#v043"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.3 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Localised Y/N when auto-answering &quot;terminate?&quot; prompt.</li>
<li><code>$*</code> would early out if there was no arguments.</li>
<li>Disable ANSI code support if third party provides it.</li>
<li>Installer can now set %CLINK_DIR% to install location.</li>
<li>Improved output from <code>clink set</code>.</li>
<li>Support for Windows 10 Technical Preview.</li>
<li><kbd>Ctrl</kbd>-<kbd>L</kbd> now scrolls last line to the top of the window rather than clearing.</li>
<li>New option to control how newline characters are pasted to the line.</li>
<li>New options to control history;<ul>
<li><code>history_file_lines</code> - maximum lines saved to disk.</li>
<li><code>history_ignore_space</code> - ignore lines prefixed with whitespace.</li>
<li><code>history_dupe_mode</code> - how duplicate entries are handled.</li>
<li><code>history_io</code> - load/save history from disk every line.</li>
</ul>
</li>
<li>Fixed nonfunctional numpad keys.</li>
<li>Fixed missing WINCH signals if other processes resize the buffer.</li>
<li>Support <kbd>Alt</kbd> codes sent from Conhost.</li>
</ul>
<h4 id="v042"><a class="wlink" href="#v042"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.2 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Prompt colouring no longer requires third party ANSI code utility.</li>
<li>Override settings with environment variables prefixed with &#39;clink&#39;.</li>
<li>Ctrl-PgUp goes up a directory.</li>
<li>Updated Go completions (by matrixik).</li>
<li>Arguments to clink.arg.new_parser() now initialise parser&#39;s flags/args (from vladimir-kotikov).</li>
<li>New clink.arg.add_flags() and clink.arg.add_arguments() functions.</li>
<li>Removed footer and <kbd>Alt</kbd>-<kbd>H</kbd> tip for more succinct stdout output.</li>
<li>Bug fixes;<ul>
<li>Windows XP works again.</li>
<li>Fixed race condition in lua_execute().</li>
</ul>
</li>
</ul>
<h4 id="v041"><a class="wlink" href="#v041"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4.1 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Bug fixes;<ul>
<li>Various Unicode fixes causing corrupt environment variables.</li>
<li>Fixed thread resume/suspend causing rare system-wide deadlock.</li>
<li>Fixed incorrect translation of suffixed slash when completing flags.</li>
</ul>
</li>
<li>Add <code>--nolog</code> argument to disable file logging. Fix #187 Fix #154</li>
<li>Added missing escape sequences from doskey emulation.</li>
<li>Reinstated unix-kill-line key binding.</li>
<li>Mapped <kbd>PgUp</kbd>/<kbd>Down</kbd> to search history using line typed so far.</li>
<li>Added documentation covering escape codes for special keys.</li>
<li>Added support for Windows&#39; <kbd>AltGr</kbd> substitute <kbd>Ctrl</kbd>-<kbd>Alt</kbd>.</li>
<li>Support for Readline&#39;s &#39;menu&#39; style completion (see docs).</li>
</ul>
<h4 id="v04"><a class="wlink" href="#v04"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.4 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>New features;<ul>
<li>Better <code>clink.arg</code> API. Easier, more intuitive, and more powerful.</li>
<li>Whitespace prefix skips exec matching.</li>
<li>Added a <code>set</code> verb to easily change settings from the command line.</li>
<li>Basic support for a shells other than cmd.exe.</li>
<li>Completion for Go (contributed by Dobroslaw Zybort).</li>
<li>Setting <code>exec_match_style</code> to -1 disables it entirely.</li>
<li>Make history persistence optional.</li>
<li>Alias/doskey completion.</li>
<li>Very basic support for Powershell.</li>
<li>View cmd.exe&#39;s autorun entry without needing admin rights.</li>
</ul>
</li>
<li>New key bindings;<ul>
<li><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>C</kbd> : Copy command line to the clipboard.</li>
<li><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>E</kbd> : Expand environment variable under cursor.</li>
<li><kbd>Ctrl</kbd>-<kbd>Alt</kbd>-<kbd>U</kbd> : &quot;up directory&quot; (formerly <kbd>Shift</kbd>-<kbd>Up</kbd>).</li>
<li><kbd>Ctrl</kbd>-<kbd>U</kbd> : Adds <code>..\</code> to the command line.</li>
<li><kbd>Alt</kbd>-<kbd>H</kbd> : Shows active keymap&#39;s key bindings.</li>
</ul>
</li>
<li>New Lua functions;<ul>
<li>clink.execute().</li>
<li>clink.get_host_process().</li>
<li>clink.match_files().</li>
<li>clink.match_words().</li>
<li>clink.get_console_aliases().</li>
</ul>
</li>
<li>Lots of bug fixes, including;<ul>
<li>Better command extraction.</li>
<li>Fixed cmd.exe command paging and <kbd>Ctrl</kbd>-<kbd>C</kbd>/<kbd>Ctrl</kbd>-<kbd>Break</kbd> handling.</li>
<li>Multiple locale fixes.</li>
<li>Use localised text for &quot;Terminate batch job?&quot; prompt.</li>
</ul>
</li>
</ul>
<h4 id="v03"><a class="wlink" href="#v03"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.3 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Automatic answering of cmd.exe&#39;s &quot;Terminate batch script?&quot; prompt.</li>
<li>Coloured prompts (requires ANSICON or ConEmu).</li>
<li>Added Shift-Up keyboard shortcut to automatically execute <code>cd ..</code></li>
<li>Mapped <kbd>Ctrl</kbd>-<kbd>Z</kbd> to undo, Microsoft style.</li>
<li>Improved integration of Readline;<ul>
<li>New input handling code (<kbd>Ctrl</kbd>-<kbd>Alt</kbd> combos now work).</li>
<li>An implementation of the Termcap library.</li>
<li>Fully functional Vi-mode support.</li>
<li>Support for resizable consoles.</li>
<li>Line wrapping now works correctly (issue 50).</li>
</ul>
</li>
<li>Adjustable executable match style (issue 65).</li>
<li>Improved environment variable completion.</li>
<li>Added settings file to customise Clink.</li>
<li>New Lua features and functions;<ul>
<li>Matches can now be filtered in Lua before they are display.</li>
<li>clink.quote_split().</li>
<li>clink.arg.node_merge().</li>
<li>clink.get_screen_info() (issue 71).</li>
<li>clink.split() (for splitting strings).</li>
<li>clink.chdir().</li>
<li>clink.get_cwd().</li>
<li>Functions to query Clink&#39;s settings.</li>
</ul>
</li>
<li>New command line options;<ul>
<li><code>--profile <span class="arg">dir</span></code> to override default profile directory.</li>
<li><code>--nohostcheck</code> disables verification that host is cmd.exe.</li>
<li><code>--pid</code> specifies the process to inject into.</li>
</ul>
</li>
<li>Update Mercurial completion (issue 73).</li>
<li>Start menu shortcut starts in USERPROFILE, like cmd.exe</li>
<li>Zip distribution is now portable.</li>
</ul>
<h4 id="v021"><a class="wlink" href="#v021"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.2.1 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>The .history file now merges multiple sessions together.</li>
<li>Fixed missing y/n, pause, and other prompts.</li>
<li>Fixed segfault in loader executable.</li>
<li>Better ConEmu compatibility.</li>
</ul>
<h4 id="v02"><a class="wlink" href="#v02"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.2 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Basic argument completion for <code>git</code>, <code>hg</code>, <code>svn</code>, and <code>p4</code>.</li>
<li>Traditional Bash clear screen (<kbd>Ctrl</kbd>-<kbd>L</kbd>) and exit shortcuts (<kbd>Ctrl</kbd>-<kbd>D</kbd>).</li>
<li>Scrollable command window using <kbd>PgUp</kbd>/<kbd>PgDown</kbd> keys.</li>
<li>Doskey support.</li>
<li>Automatic quoting of file names with spaces.</li>
<li>Scriptable custom prompts.</li>
<li>New argument framework to ease writing context-sensitive match generators.</li>
<li>History and log file is now saved per-user rather than globally.</li>
<li>Improved Clink&#39;s command line interface (<code>clink --help</code>).</li>
<li>More reliable handling of cmd.exe&#39;s autorun entry.</li>
<li>General improvements to executable and directory-command completion.</li>
<li>Symbolic link support.</li>
<li>Documentation.</li>
<li>Windows 8 support.</li>
<li>Improved hooking so Clink can be shared with other thirdparty utilities that
also hook cmd.exe (ConEmu, ANSICon, etc.).</li>
</ul>
<h4 id="v011"><a class="wlink" href="#v011"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.1.1 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Fixed <kbd>AltGr</kbd>+<kbd>&lt;key&gt;</kbd> on international keyboards.</li>
<li>Fixed broken completion when directories have a <code>-</code> in their name (Mark Hammond)</li>
<li>The check for single match scenarios now correctly handles case-insensitivity.</li>
</ul>
<h4 id="v01"><a class="wlink" href="#v01"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>v0.1 <span class="uplinks"><a href="#releases-from-mridgersclink-original-repo">up</a> <a href="#toc">top</a></span></h4>
<ul>
<li>Initial release.</li>
</ul>
        </div>
        <div class="section" id="credits">
<h1 id="license"><a class="wlink" href="#license"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>License <span class="uplinks"><a href="#toc">top</a></span></h1>
<p>Clink is distributed under the terms of the <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License, version 3</a>.</p>
<h1 id="credits"><a class="wlink" href="#credits"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Credits <span class="uplinks"><a href="#toc">top</a></span></h1>
<h3 id="credits_clink"><a class="wlink" href="#credits_clink"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Clink <span class="uplinks"><a href="#credits">up</a> <a href="#toc">top</a></span></h3>

<p>Clink was originally built by Martin Ridgers (<a href="https://github.com/mridgers/clink">https://github.com/mridgers/clink</a>).<br/>
Copyright (c) 2012-2018 by Martin Ridgers.</p>
<p>Clink has been forked and renovated by Christopher Antos (<a href="https://github.com/chrisant996/clink">https://github.com/chrisant996/clink</a>).<br/>
Portions Copyright (c) 2020-2024 by Christopher Antos.</p>
<h3 id="credits_libraries"><a class="wlink" href="#credits_libraries"><svg width=16 height=16><use href="#wicon"/></svg><span class="wfix">.</span></a>Libraries <span class="uplinks"><a href="#credits">up</a> <a href="#toc">top</a></span></h3>

<p>GNU Readline library version 8.1 (<a href="https://tiswww.case.edu/php/chet/readline/rltop.html">https://tiswww.case.edu/php/chet/readline/rltop.html</a>).<br/>
GNU Readline is distributed under the terms of the <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License, version 3</a>.</p>
<p>Lua 5.2 (<a href="https://www.lua.org">https://www.lua.org</a>).</p>
<p>getopt library.<br/>
Copyright (c) 1997 Gregory Pietsch, placed in the public domain.</p>
<p>WildMatch library (<a href="https://github.com/davvid/wildmatch">https://github.com/davvid/wildmatch</a>).<br/>
Licensed under the <a href="https://github.com/davvid/wildmatch/blob/master/LICENSE">BSD License</a>.<br/>
Includes test cases copied from git&#39;s wildmatch implementation, licensed under the terms of the <a href="https://github.com/git/git/blob/master/LGPL-2.1">GNU General Public License, version 2</a>.</p>
<p>Detours library version 4.0.1 (<a href="https://github.com/microsoft/detours">https://github.com/microsoft/detours</a>).<br/>
Copyright (c) Microsoft Corporation. All rights reserved.<br/>
Licensed under the <a href="https://github.com/microsoft/Detours/blob/e5400b4ec59478cb0f435cf3b1338226bcbe28f6/LICENSE.txt">MIT License</a>.</p>
<p>Match completion display uses column width calculations from GNU coreutils <a href="https://github.com/coreutils/coreutils/blob/master/src/ls.c">ls.c</a>.<br/>
Licensed under the terms of the <a href="http://www.gnu.org/licenses/gpl.html">GNU General Public License, version 3</a>.</p>
<p>The Dracula color theme (<a href="https://draculatheme.com">https://draculatheme.com</a>).<br/>
Copyright (c) 2018 Dracula Theme.<br/>
Licensed under the <a href="https://github.com/dracula/fish/blob/master/LICENSE">MIT License</a>.</p>
<p>The Solarized color theme (<a href="https://ethanschoonover.com/solarized">https://ethanschoonover.com/solarized</a>).<br/>
Copyright (c) 2011 Ethan Schoonover.<br/>
Licensed under the <a href="https://github.com/altercation/solarized/blob/master/LICENSE">MIT License</a>.</p>
<p>The Tomorrow color theme (<a href="https://github.com/chriskempson/tomorrow-theme">https://github.com/chriskempson/tomorrow-theme</a>).<br/>
Copyright (C) 2011 <a href="https://github.com/chriskempson">Chris Kempson</a>.<br/>
Licensed under the <a href="https://github.com/chriskempson/tomorrow-theme/blob/master/LICENSE.md">MIT License</a>.</p>
<p><a href="https://github.com/chrisant996/clink/tree/master/clink/app/themes">Custom prompts included with Clink</a> are based on some custom prompt themes for the zsh shell.<br/>
For details about the original prompt implementation for each one, refer to information at the top of each .clinkprompt file.</p>
<p>Clink documentation embeds the highlight.js library (<a href="https://highlightjs.org">https://highlightjs.org</a>).<br/>
Highlight.js is released under the <a href="https://github.com/highlightjs/highlight.js/blob/master/LICENSE">BSD License</a>.</p>
<p>Clink documentation embeds SVG artwork for a link icon from <a href="https://github.com/twbs/icons">Bootstrap</a>.<br/>
Licensed under the <a href="https://github.com/twbs/icons/blob/main/LICENSE.md">MIT License</a>.</p>
<p>Special thanks to Alexandra Barros and Matthew Wild for (<a href="https://code.matthewwild.co.uk/luatraverse">https://code.matthewwild.co.uk/luatraverse</a>).<br/>
Originally from (<a href="http://lua-users.org/lists/lua-l/2006-07/msg00110.html">http://lua-users.org/lists/lua-l/2006-07/msg00110.html</a>).<br/>
The script was very useful in tracking down dangling references.</p>
        </div>
    </div>
</body>

</html>
